Arborescence (profondeur max 4, sans node_modules) :
.
├── projet.txt
├── React-Native
│   ├── foodapp
│   │   ├── app.json
│   │   ├── App.tsx
│   │   ├── assets
│   │   │   ├── adaptive-icon.png
│   │   │   ├── favicon.png
│   │   │   ├── icon.png
│   │   │   ├── images
│   │   │   └── splash.png
│   │   ├── babel.config.js
│   │   ├── components
│   │   │   ├── Header.tsx
│   │   │   └── RecipeCard.tsx
│   │   ├── data
│   │   │   └── recipes.js
│   │   ├── dist
│   │   │   ├── assetmap.json
│   │   │   ├── assets
│   │   │   ├── _expo
│   │   │   └── metadata.json
│   │   ├── package.json
│   │   ├── reducers
│   │   │   └── favorites.ts
│   │   ├── screens
│   │   │   ├── HomeScreen.tsx
│   │   │   ├── MyRecipesScreen.tsx
│   │   │   ├── RecipeScreen.tsx
│   │   │   └── SearchScreen.tsx
│   │   ├── tsconfig.json
│   │   └── yarn.lock
│   ├── heure_de_reveil
│   │   ├── app.json
│   │   ├── App.tsx
│   │   ├── assets
│   │   │   ├── heure_de_reveil.png
│   │   │   └── nuages_1.jpg
│   │   ├── dist
│   │   │   ├── assetmap.json
│   │   │   ├── assets
│   │   │   ├── _expo
│   │   │   └── metadata.json
│   │   ├── index.ts
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   └── yarn.lock
│   ├── organisation_le_matin
│   │   ├── app.json
│   │   ├── App.tsx
│   │   ├── assets
│   │   │   └── organisation_le_matin.png
│   │   ├── dist
│   │   │   ├── assetmap.json
│   │   │   ├── _expo
│   │   │   └── metadata.json
│   │   ├── index.ts
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   └── yarn.lock
│   ├── pomodoro_react_native
│   │   ├── app.json
│   │   ├── App.tsx
│   │   ├── assets
│   │   │   ├── adaptive-icon.png
│   │   │   ├── favicon.png
│   │   │   ├── icon.png
│   │   │   ├── images
│   │   │   ├── pomodoro.png
│   │   │   └── splash-icon.png
│   │   ├── dist
│   │   │   ├── assetmap.json
│   │   │   ├── assets
│   │   │   ├── _expo
│   │   │   └── metadata.json
│   │   ├── index.ts
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   └── yarn.lock
│   ├── snake
│   │   ├── app.json
│   │   ├── App.tsx
│   │   ├── assets
│   │   │   └── snake_sombre.png
│   │   ├── dist
│   │   │   ├── assetmap.json
│   │   │   ├── _expo
│   │   │   └── metadata.json
│   │   ├── index.ts
│   │   ├── package.json
│   │   ├── projet.txt
│   │   ├── tsconfig.json
│   │   └── yarn.lock
│   ├── temps_de_someil_restant_react_native
│   │   ├── 1
│   │   │   ├── App.js
│   │   │   ├── app.json
│   │   │   ├── assets
│   │   │   ├── builds
│   │   │   ├── eas.json
│   │   │   ├── index.js
│   │   │   ├── package.json
│   │   │   ├── package-lock.json
│   │   │   ├── projet.txt
│   │   │   ├── src
│   │   │   └── yarn.lock
│   │   └── 2
│   │       └── temps_de_someil_restant_V2
│   ├── temps_restant
│   │   ├── app.json
│   │   ├── App.tsx
│   │   ├── assets
│   │   │   └── temps_restant.png
│   │   ├── dist
│   │   │   ├── assetmap.json
│   │   │   ├── _expo
│   │   │   └── metadata.json
│   │   ├── index.ts
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   └── yarn.lock
│   └── tracker_de_temps
│       ├── app.json
│       ├── App.tsx
│       ├── assets
│       │   └── tracker_de_temps.png
│       ├── dist
│       │   ├── assetmap.json
│       │   ├── assets
│       │   ├── _expo
│       │   └── metadata.json
│       ├── index.ts
│       ├── package.json
│       ├── package-lock.json
│       ├── projet.txt
│       ├── src
│       │   ├── lib
│       │   └── types.ts
│       ├── tsconfig.json
│       └── yarn.lock
├── README.md
└── Web
    ├── AI_team
    │   ├── data
    │   │   └── projet-marrant-1_20250919-114716
    │   ├── index.html
    │   ├── package.json
    │   ├── package-lock.json
    │   ├── server.js
    │   └── Tests
    │       └── Exemple 1.txt
    ├── cours_git_avance
    │   ├── assets
    │   │   └── cours.json
    │   ├── index.html
    │   └── Makefile
    ├── gestion
    │   ├── assets
    │   │   └── gestion.ico
    │   ├── data
    │   │   └── noms.js
    │   ├── index.html
    │   ├── javascript
    │   │   ├── ascenseur
    │   │   ├── calendrier
    │   │   └── covoiturage
    │   ├── projet.txt
    │   └── utils
    │       ├── GestionUIJS.js
    │       └── utils.js
    ├── heure_de_reveil
    │   ├── heure_de_reveil.html
    │   ├── heure_de_reveil.ico
    │   └── nuages_1.jpg
    ├── mini_langage
    │   ├── data
    │   │   ├── programmes
    │   │   └── Programmes.txt
    │   ├── package.json
    │   ├── package-lock.json
    │   ├── projet.txt
    │   ├── public
    │   │   ├── index.html
    │   │   └── ui.js
    │   ├── src
    │   │   ├── cli.ts
    │   │   ├── interpreter.ts
    │   │   ├── runtime.ts
    │   │   ├── server.ts
    │   │   └── storage.ts
    │   ├── tsconfig.json
    │   └── yarn.lock
    ├── organisation_le_matin
    │   ├── organisation_le_matin.html
    │   └── organisation_le_matin.ico
    ├── pomodoro
    │   ├── favicon.ico
    │   ├── Images
    │   │   └── petit-palmier.jpg
    │   ├── pomodoro.html
    │   └── projet.txt
    ├── snake
    │   ├── favicon.ico
    │   └── snake_10_niveau.html
    ├── temps_de_someil_restant
    │   ├── default_settings.json.txt
    │   ├── nuages_1.jpg
    │   ├── projet.txt
    │   ├── Temps_de_someil_restant_1.ico
    │   └── temps_de_someil_restant.html
    ├── temps_restant
    │   ├── affiche_temps_avant_Live_Code.html
    │   └── Temps_avant_le_Livecode.ico
    └── tracker_de_temps
        ├── tracker_de_temps.html
        └── tracker_de_temps.ico

77 directories, 140 files



# ./React-Native/foodapp/app.json
{
  "expo": {
    "name": "foodapp",
    "slug": "foodapp",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "userInterfaceStyle": "light",
    "splash": {
      "image": "./assets/splash.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "updates": {
      "fallbackToCacheTimeout": 0,
      "url": "https://u.expo.dev/e1090e9a-7ee1-4d61-a771-bd8c571104f3"
    },
    "assetBundlePatterns": [
      "**/*"
    ],
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#FFFFFF"
      }
    },
    "web": {
      "favicon": "./assets/favicon.png"
    },
    "newArchEnabled": false,
    "extra": {
      "eas": {
        "projectId": "e1090e9a-7ee1-4d61-a771-bd8c571104f3"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    }
  }
}

# ./React-Native/foodapp/app.json

# ./React-Native/foodapp/App.tsx
import 'react-native-gesture-handler';
import React from 'react';
import { SafeAreaProvider } from 'react-native-safe-area-context';
import { Provider } from 'react-redux';
import { configureStore } from '@reduxjs/toolkit';

import { NavigationContainer } from '@react-navigation/native';
import {
  createNativeStackNavigator,
  NativeStackNavigationOptions,
} from '@react-navigation/native-stack';
import {
  createDrawerNavigator,
  DrawerNavigationOptions,
} from '@react-navigation/drawer';

import Header from './components/Header';
import HomeScreen from './screens/HomeScreen';
import RecipeScreen from './screens/RecipeScreen';
import SearchScreen from './screens/SearchScreen';
import MyRecipesScreen from './screens/MyRecipesScreen';

import favorites from './reducers/favorites';
import type { Recipe } from './types'; // si centralisé

// --- Store ---
const store = configureStore({
  reducer: {
    favorites,
  },
});

// --- Navigation ---
type RootStackParamList = {
  Home: undefined;
  Recipe: { recipe: Recipe };
  DrawerNavigator: undefined;
};

type DrawerParamList = {
  Search: undefined;
  'My recipes': undefined;
};

const Stack = createNativeStackNavigator<RootStackParamList>();
const Drawer = createDrawerNavigator<DrawerParamList>();

const DrawerNavigator = () => (
  <Drawer.Navigator
    initialRouteName="Search"
    screenOptions={{
      header: (props) => <Header {...props} />,
      drawerActiveTintColor: '#655074',
      drawerType: 'back',
    }}
  >
    <Drawer.Screen name="Search" component={SearchScreen} />
    <Drawer.Screen name="My recipes" component={MyRecipesScreen} />
  </Drawer.Navigator>
);

export default function App(): JSX.Element {
  return (
    <Provider store={store}>
      <SafeAreaProvider>
        <NavigationContainer>
          <Stack.Navigator screenOptions={{ headerShown: false }}>
            <Stack.Screen name="Home" component={HomeScreen} />
            <Stack.Screen name="Recipe" component={RecipeScreen} />
            <Stack.Screen name="DrawerNavigator" component={DrawerNavigator} />
          </Stack.Navigator>
        </NavigationContainer>
      </SafeAreaProvider>
    </Provider>
  );
}

# ./React-Native/foodapp/App.tsx

# ./React-Native/foodapp/babel.config.js
module.exports = function(api) {
  api.cache(true);
  return {
    presets: ['babel-preset-expo'],
    plugins: ['react-native-reanimated/plugin'],
  };
};

# ./React-Native/foodapp/babel.config.js

# ./React-Native/foodapp/components/Header.tsx
import { StyleSheet, TouchableOpacity, View } from "react-native";
import { useSafeAreaInsets } from "react-native-safe-area-context";
import Ionicons from "react-native-vector-icons/Ionicons";

export default function Header({ navigation }) {
	const { top } = useSafeAreaInsets();

	return (
		<View style={{ ...styles.container, top }}>
			<TouchableOpacity onPress={() => navigation.toggleDrawer()}>
				<Ionicons name="menu-outline" size={30} color="#655074" />
			</TouchableOpacity>
		</View>
	);
}

const styles = StyleSheet.create({
	container: {
		marginTop: 5,
		paddingLeft: 18,
		position: "absolute",
	},
});

# ./React-Native/foodapp/components/Header.tsx

# ./React-Native/foodapp/components/RecipeCard.tsx
import React from 'react';
import {
  Dimensions,
  Image,
  StyleSheet,
  Text,
  TouchableOpacity,
  View,
} from 'react-native';
import { useNavigation } from '@react-navigation/native';
import type { NativeStackNavigationProp } from '@react-navigation/native-stack';
import type { FC } from 'react';
import type { Recipe } from '../reducers/favorites'; // adapte si centralisé ailleurs

// Navigation
type RootStackParamList = {
  Recipe: { recipe: Recipe; isFavorite?: boolean };
};

type NavigationProp = NativeStackNavigationProp<RootStackParamList, 'Recipe'>;

// Props du composant
type RecipeCardProps = {
  recipe: Recipe;
  isFavorite?: boolean;
};

const RecipeCard: FC<RecipeCardProps> = ({ recipe, isFavorite }) => {
  const navigation = useNavigation<NavigationProp>();

  return (
    <TouchableOpacity
      style={styles.container}
      onPress={() => navigation.navigate('Recipe', { recipe, isFavorite })}
    >
      <View style={{ ...styles.wrapper, backgroundColor: recipe.color }}>
        <Image source={recipe.image} style={styles.image} resizeMode="contain" />
        <Text style={styles.title}>{recipe.name}</Text>
        <Text style={styles.subtitle}>{recipe.desc}</Text>
      </View>
    </TouchableOpacity>
  );
};

export default RecipeCard;

const windowWidth = Dimensions.get('window').width;

const styles = StyleSheet.create({
  container: {
    padding: 10,
    width: windowWidth / 2 - 10,
    maxHeight: 250,
  },
  wrapper: {
    borderRadius: 25,
    borderBottomLeftRadius: 75,
    borderTopRightRadius: 50,
    display: 'flex',
    alignItems: 'flex-end',
    height: '100%',
    paddingTop: 6,
    paddingRight: 12,
    paddingLeft: 14,
    paddingBottom: 3,
  },
  image: {
    width: '95%',
    maxHeight: 150,
    alignSelf: 'center',
  },
  title: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#655074',
    textAlign: 'right',
  },
  subtitle: {
    color: '#7e868f',
    fontSize: 10,
    textAlign: 'right',
  },
});

# ./React-Native/foodapp/components/RecipeCard.tsx

# ./React-Native/foodapp/data/recipes.js
export const recipes = [
  {
    id: 1,
    name: 'Pork Ramen',
    desc: 'A Japanese classic',
    image: require('../assets/images/ramen.png'),
    color: '#FFEB85',
    serving: '1 bowl (500 - 600G)',
    servingNb: 1,
    longDesc: 'Made with love and fresh ingredients to bring a touch of Japan to your table.',
    level: 'difficult',
    time: '2 hours',
    rating: 4.8,
    ingredients: [
      { name: 'Ramen noodles', amount: 400, unit: 'g' },
      { name: 'Egg', amount: 1, unit: '' },
      { name: 'Miso', amount: 1, unit: 'spoonful' },
      { name: 'Marinated pork slices', amount: 2, unit: 'slices' },
      { name: 'Garlic', amount: 2, unit: 'cloves' },
      { name: 'Carrots', amount: 3, unit: '' },
      { name: 'Celery', amount: 1, unit: 'stalk' },
      { name: 'Spring onions', amount: 4, unit: '' },
      { name: 'Coriander', amount: 0.5, unit: 'tablespoons' },
      { name: 'Cumin', amount: 1, unit: 'pinch' },
      { name: 'Pink peppercorn', amount: 0.5, unit: 'tablespoons' },
      { name: 'Bay leaf', amount: 1, unit: '' },
      { name: 'Boiling water', amount: 2, unit: 'litres' },
    ],
  },
  {
    id: 2,
    name: 'Spaghetti Puttanesca',
    desc: 'A little taste of Southern Italy',
    image: require('../assets/images/pasta.png'),
    color: '#A7C8F1',
    serving: '1 bowl (500 - 600G)',
    servingNb: 1,
    longDesc: 'A classic, easy dish, equally comforting on a warm summer day or a rainy winter night.',
    level: 'easy',
    time: '20 min',
    rating: 3.2,
    ingredients: [
      { name: 'Spaghetti', amount: 500, unit: 'g' },
      { name: 'Tomato concentrate', amount: 100, unit: 'g' },
      { name: 'Olive oil', amount: 2, unit: 'tablespoons' },
      { name: 'Garlic', amount: 2, unit: 'cloves' },
      { name: 'Spring onions', amount: 4, unit: '' },
      { name: 'Parsley', amount: 1, unit: 'pinch' },
      { name: 'Cayenne pepper', amount: 1, unit: 'pinch' },
      { name: 'Thyme', amount: 1, unit: 'pinch' },
      { name: 'Parmesan', amount: 70, unit: 'g' },
      { name: 'Bay leaf', amount: 2, unit: 'leaves' },
      { name: 'Basil', amount: 2, unit: 'leaves' },
      { name: 'Oregano', amount: 1, unit: 'pinch' },
      { name: 'Salt', amount: 1, unit: 'pinch' },
      { name: 'Pepper', amount: 1, unit: 'pinch' }
    ],
  },
  {
    id: 3,
    name: 'Thai Shrimp Curry Salad',
    desc: 'A fresh, tropical favorite',
    image: require('../assets/images/thai-shrimp-salad.png'),
    color: '#F2BBBB',
    serving: '1 bowl (500 - 600G)',
    servingNb: 1,
    longDesc: 'A perfect summer favorite with a sweet and sour fruit profile.',
    level: 'intermediate',
    time: '20 min',
    rating: 4,
    ingredients: [
      { name: 'Rice noodles', amount: 200, unit: 'g' },
      { name: 'Boiled shrimp', amount: 16, unit: '' },
      { name: 'Cucumber', amount: 1, unit: '' },
      { name: 'Carrots', amount: 2, unit: '' },
      { name: 'Red grapefruit', amount: 1, unit: '' },
      { name: 'Chili', amount: 1, unit: '' },
      { name: 'Spring onions or green onions', amount: 3, unit: '' },
      { name: 'Mint', amount: 1, unit: 'bunch' },
      { name: 'Coriander', amount: 0.5, unit: 'bunch' },
      { name: 'Lemon juice', amount: 2, unit: 'tablespoons' },
      { name: 'Cane sugar', amount: 2, unit: 'teaspoons' },
      { name: 'Nuoc-mâm', amount: 1, unit: 'teaspoons' },
      { name: 'Sesame oil', amount: 2, unit: 'tablespoons' },
    ],
  },
  {
    id: 4,
    name: 'Steak with Oriental vegetables',
    desc: 'An old favorite gets and exotic touch',
    image: require('../assets/images/steak-frites.png'),
    color: '#FD9B9E',
    serving: '1 plate (500 - 600G)',
    servingNb: 1,
    longDesc: 'Mouth-melting carrots and tender turnips roasted in Moroccan spices accompany a classic, juicy steak.',
    level: 'easy',
    time: '35 min',
    rating: 4.2,
    ingredients: [
      { name: 'Steak', amount: 1, unit: 'piece' },
      { name: 'Carrots', amount: 200, unit: 'g' },
      { name: 'Turnips', amount: 125, unit: 'g' },
      { name: 'Garlic', amount: 2, unit: 'cloves' },
      { name: 'Fresh coriander', amount: 3, unit: 'stems' },
      { name: 'Cumin', amount: 1, unit: 'g' },
      { name: 'Ground coriander', amount: 1, unit: 'g' },
      { name: 'Olive oil', amount: 1, unit: 'teaspoon' },
      { name: 'Salt & pepper', amount: 1, unit: 'pinch' },
    ],
  },
  {
    id: 5,
    name: 'Avocado Fig Salad',
    desc: 'A beautiful, delightful choice for autumn',
    image: require('../assets/images/avocado-salad.png'),
    color: '#BDA6C9',
    serving: '1 bowl (200 - 350G)',
    servingNb: 1,
    longDesc: 'Made with fresh figs, creamy avocado, toasted walnuts, and homemade balsamic vinaigrette for a delicious fall salad that will fill you up',
    level: 'easy',
    time: '15 min',
    rating: 5,
    ingredients: [
      { name: 'Spinach', amount: 2, unit: 'large handfuls' },
      { name: 'Figs', amount: 4, unit: '' },
      { name: 'Avocado', amount: 1, unit: '' },
      { name: 'Walnuts', amount: 0.3, unit: 'cup' },
      { name: 'Balsamic vinegar', amount: 2, unit: 'tablespoons' },
      { name: 'Garlic', amount: 2, unit: 'cloves' },
      { name: 'Olive oil', amount: 2, unit: 'tablespoons' },
      { name: 'Red onions', amount: 2, unit: '' },
      { name: 'Dijon mustard', amount: 1, unit: 'tablespoon' },
      { name: 'Maple syrup', amount: 1, unit: 'teaspoon' },
      { name: 'Salt & pepper', amount: 1, unit: 'pinch' },
    ],
  },
  {
    id: 6,
    name: 'Club Sandwich',
    desc: 'One of the most iconic sandwiches on any menu',
    image: require('../assets/images/club-sandwich.png'),
    color: '#BDA6C9',
    serving: '1 sandwich (200 - 350G)',
    servingNb: 1,
    longDesc: 'With a few simple steps you can create a basic club sandwich, add a few extra layers or toppings and you can dress this sandwich up as much as you’d like!',
    level: 'easy',
    time: '15 min',
    rating: 4.9,
    ingredients: [
      { name: 'Toasted bread', amount: 2, unit: 'slices' },
      { name: 'Mayonnaise', amount: 4, unit: 'tablespoons' },
      { name: 'Turkey', amount: 4, unit: 'slices' },
      { name: 'Ham', amount: 4, unit: 'slices' },
      { name: 'Cheddar cheese', amount: 2, unit: 'slices' },
      { name: 'Cooked bacon', amount: 4, unit: 'strips' },
      { name: 'Tomato, sliced', amount: 1, unit: '' },
      { name: 'Lettuce', amount: 100, unit: 'g' }
    ],
  },
  {
    id: 7,
    name: 'Korean Bibimbap',
    desc: 'A traditional Korean choice made with rice',
    image: require('../assets/images/bibimbap.png'),
    color: '#FFEB85',
    serving: '1 bowl (200 - 350G)',
    servingNb: 1,
    longDesc: 'This traditional favorite includes warm rice, richly savorous vegetables and perfectly marinated beef. Perfect for winter!',
    level: 'difficult',
    time: '45 min',
    rating: 3.8,
    ingredients: [
      { name: 'Strip steak', amount: 200, unit: 'g' },
      { name: 'Soy sauce', amount: 2, unit: 'cl' },
      { name: 'Granulated sugar', amount: 1.5, unit: 'g' },
      { name: 'Salt', amount: 0.5, unit: 'g' },
      { name: 'Garlic', amount: 2, unit: 'cloves' },
      { name: 'Fresh ginger', amount: 5, unit: 'g' },
      { name: 'Sesame oil', amount: 2, unit: 'cl' },
      { name: 'Basmati rice', amount: 50, unit: 'g' },
      { name: 'Water', amount: 7.5, unit: 'cl' },
      { name: 'Carrots', amount: 50, unit: 'g' },
      { name: 'Soy sprouts', amount: 33.5, unit: 'g' },
      { name: 'Fresh Spinach', amount: 33.5, unit: 'g' },
      { name: 'Green beans', amount: 25, unit: 'g' },
      { name: 'Onions', amount: 26.5, unit: 'g' },
      { name: 'Olive oil', amount: 1, unit: 'cl' },
      { name: 'Egg', amount: 1, unit: '' },
      { name: 'Chili oil', amount: 2, unit: 'cl' },
    ],
  },
  {
    id: 8,
    name: 'Beef donburi',
    desc: 'A takeout favorite right from your kitchen',
    image: require('../assets/images/beef-don.png'),
    color: '#FD9B9E',
    serving: '600 - 700G',
    servingNb: 1,
    longDesc: "This dish has a blend of flavors and textures that will surely please anyone's palate and it's a meal on its own.",
    time: '30 min',
    rating: 3.5,
    ingredients: [
      { name: 'Cooked Japanese rice', amount: 2, unit: 'bowls' },
      { name: 'Thinly sliced beef', amount: 200, unit: 'g' },
      { name: 'Onion', amount: 0.5, unit: '' },
      { name: 'Grated ginger', amount: 1, unit: 'cc' },
      { name: 'Water', amount: 150, unit: 'ml' },
      { name: 'Soy sauce', amount: 3, unit: 'c' },
      { name: 'Mirin', amount: 2, unit: 'c' },
      { name: 'Sake', amount: 2, unit: 'c' },
      { name: 'Sugar', amount: 2, unit: 'c' },
      { name: 'Egg yellow', amount: 1, unit: '' },
      { name: 'Chopped green onion', amount: 1, unit: '' },
      { name: 'Beni shoga (marinated red ginger)', amount: 2, unit: 'c' },
      { name: 'Shichimi spices', amount: 1, unit: 'cc' },
    ],
  },
  {
    id: 9,
    name: 'Whole crab',
    desc: 'A fragrant trip to the beach',
    image: require('../assets/images/crab.png'),
    color: '#F2BBBB',
    serving: '1 crab',
    servingNb: 1,
    longDesc: "Love crab, but don't know how to cook a whole crab? Here's how!",
    level: 'hard',
    time: '2 hours',
    rating: 3.8,
    ingredients: [
      { name: 'Crab', amount: 1, unit: '' },
      { name: 'Vinegar', amount: 50, unit: 'g' },
      { name: 'Fragrant herbes (bouquet garni)', amount: 1, unit: '' },
      { name: 'Salt', amount: 10, unit: 'g' },
    ],
  },
  {
    id: 10,
    name: 'Fried rice',
    desc: 'Perfectly al dente and full of rich savory flavors',
    image: require('../assets/images/fried-rice.png'),
    color: '#A7C8F1',
    serving: '1 bowl (300 - 450G)',
    servingNb: 1,
    longDesc: 'This Chinese-inspired fried rice recipe is quick and easy to make, customizable with any of your favorite mix-ins, and so irresistibly delicious.',
    level: 'easy',
    time: '40 min',
    rating: 3.8,
    ingredients: [
      { name: 'Basmati rice', amount: 250, unit: 'g' },
      { name: 'Onions', amount: 2, unit: '' },
      { name: 'Garlic', amount: 2, unit: 'cloves' },
      { name: 'Carrots', amount: 4, unit: '' },
      { name: 'Tomatoes', amount: 4, unit: '' },
      { name: 'Ginger', amount: 40, unit: 'g' },
      { name: 'Curcuma', amount: 1, unit: 'teaspoon' },
      { name: 'Oyster sauce', amount: 2, unit: 'tablespoons' },
      { name: 'Vegetable oil', amount: 5, unit: 'tablespoons' },
      { name: 'Pepper', amount: 1, unit: 'pinch' },
      { name: 'Green pepper', amount: 1, unit: '' },
      { name: 'Eggs', amount: 4, unit: '' },
    ],
  },
  {
    id: 11,
    name: 'Gyoza',
    desc: 'Juicy on the inside, crispy and golden brown on the outside',
    image: require('../assets/images/gyoza.png'),
    color: '#FFEB85',
    serving: '1 bowl (200 - 350G)',
    servingNb: 1,
    longDesc: 'These Japanese pan-fried dumplings, or Gyoza, are a popular weeknight meal as well as a great appetizer for your next dinner party.',
    level: 'intermediate',
    time: '1 hour',
    rating: 3.8,
    ingredients: [
      { name: 'Sesame oil', amount: 0.5, unit: 'teaspoons' },
      { name: 'Grated ginger', amount: 1, unit: 'teaspoon' },
      { name: 'Sugar', amount: 1, unit: 'teaspoon' },
      { name: 'Soy sauce', amount: 1, unit: 'teaspoon' },
      { name: 'Chicken stock', amount: 1, unit: 'tablespoon' },
      { name: 'Salt', amount: 1, unit: 'pinch' },
      { name: 'Vegetable oil', amount: 1, unit: 'tablespoon' },
      { name: 'Raw shrimp', amount: 200, unit: 'g' },
      { name: 'Minced green onion', amount: 4, unit: 'stalks' },
      { name: 'Flour', amount: 200, unit: 'g' },
      { name: 'Potato starch', amount: 1, unit: 'teaspoon' },
    ],
  },
  {
    id: 12,
    name: 'Vietnamese Glass Noodle Salad',
    desc: 'A fresh, tangy favorite',
    image: require('../assets/images/noodle-salad.png'),
    color: '#FD9B9E',
    serving: '1 bowl (200 - 350G)',
    servingNb: 1,
    longDesc: 'This adaptable dish is easy to change to reflect the flavors of every season.',
    level: 'intermediate',
    time: '45 min',
    rating: 4.3,
    ingredients: [
      { name: 'Glass noodles', amount: 50, unit: 'g' },
      { name: 'Shrimp tails', amount: 10, unit: '' },
      { name: 'Ngò gai or spiny coriander', amount: 4, unit: 'leaves' },
      { name: 'Tiá tô or red chiso', amount: 4, unit: 'leaves' },
      { name: 'Mint', amount: 1, unit: 'small branch' },
      { name: 'Carrot', amount: 1, unit: '' },
      { name: 'Fish sauce or nuoc mam', amount: 2, unit: 'tablespoons' },
      { name: 'Lime juice', amount: 2, unit: 'tablespoons' },
      { name: 'Sugar or agave syrup', amount: 1, unit: 'teaspoon' },
      { name: 'Rice vinegar', amount: 1, unit: 'tablespoon' },
      { name: 'Powdered chili', amount: 1, unit: 'pinch' },
    ],
  },
  {
    id: 13,
    name: 'Home-made pancakes',
    desc: 'Bring the diner home with you',
    image: require('../assets/images/pancakes.png'),
    color: '#A7C8F1',
    serving: '1 bowl (200 - 350G)',
    servingNb: 1,
    longDesc: 'A simple, no-fail recipe using ingredients you already have on hand!',
    level: 'easy',
    time: '15 min',
    rating: 3.8,
    ingredients: [
      { name: 'Flour', amount: 250, unit: 'g' },
      { name: 'Butter', amount: 50, unit: 'g' },
      { name: 'Whole milk', amount: 40, unit: 'cl' },
      { name: 'Sugar', amount: 75, unit: 'g' },
      { name: 'Eggs', amount: 2, unit: '' },
      { name: 'Baking powder', amount: 3, unit: 'tablespoons' },
      { name: 'Salt', amount: 1, unit: 'pinch' },
    ],
  },
  {
    id: 14,
    name: 'Sushi',
    desc: 'Easy and fun to make at home',
    image: require('../assets/images/sushi.png'),
    color: '#BDA6C9',
    serving: '20 pieces',
    servingNb: 1,
    longDesc: 'Learn the trick of making home-made sushi for a cheaper, more fun alternative to the upscale kind!',
    level: 'intermediate',
    time: '45 min',
    rating: 3.9,
    ingredients: [
      { name: 'Japanese sushi rice', amount: 300, unit: 'g' },
      { name: 'Water', amount: 33, unit: 'cl' },
      { name: 'Rice vinegar', amount: 4, unit: 'cl' },
      { name: 'Sugar', amount: 10, unit: 'g' },
      { name: 'Salt', amount: 4, unit: 'g' },
      { name: 'Salmon filets', amount: 400, unit: 'g' },
      { name: 'Red tuna', amount: 400, unit: 'g' },
      { name: 'Nori', amount: 3, unit: 'sheets' },
      { name: 'Wasabi', amount: 5, unit: 'g' },
      { name: 'Soy sauce', amount: 10, unit: 'cl' },
    ],
  },
  {
    id: 15,
    name: 'Tacos',
    desc: "A traditional Korean choice made with rice ('bap' in Korean)",
    image: require('../assets/images/tacos.png'),
    color: '#FFEB85',
    serving: '3 tacos',
    servingNb: 1,
    longDesc: 'This traditional favorite includes warm rice, richly savorous vegetables and perfectly marinated beef. Perfect for winter!',
    level: 'easy',
    time: '55 min',
    rating: 4.6,
    ingredients: [
      { name: 'Tomato', amount: 0.5, unit: '' },
      { name: 'Refried beans', amount: 0.25, unit: 'box' },
      { name: 'Powdered cumin', amount: 2, unit: 'g' },
      { name: 'Tortillas', amount: 2, unit: '' },
      { name: 'Onion', amount: 0.25, unit: '' },
      { name: 'Tomato concentrate', amount: 10, unit: 'cl' },
      { name: 'Minced beef', amount: 63, unit: 'g' },
      { name: 'Salt', amount: 1, unit: 'pinch' },
      { name: 'Tabasco (optional)', amount: 1, unit: 'dash' },
      { name: 'Green pepper', amount: 0.25, unit: '' },
      { name: 'Lettuce', amount: 2, unit: 'leaves' },
    ],
  },
  {
    id: 16,
    name: 'Garden salad',
    desc: 'A refreshing, adaptable choice for summer',
    image: require('../assets/images/vegetable-salad.png'),
    color: '#F2BBBB',
    serving: '1 bowl (200 - 350G)',
    servingNb: 1,
    longDesc: 'This classic, Greek-style salad is the brightest example of taking simple ingredients and transforming them into a finger-licking dish.',
    level: 'easy',
    time: '25 min',
    rating: 5,
    ingredients: [
      { name: 'Tomato', amount: 3, unit: '' },
      { name: 'Red onion', amount: 1, unit: '' },
      { name: 'Cucumber', amount: 1, unit: '' },
      { name: 'Green pepper, sliced', amount: 1, unit: '' },
      { name: 'Olives, green or black', amount: 16, unit: '' },
      { name: 'Feta', amount: 200, unit: 'g' },
      { name: 'Red wine vinegar', amount: 1, unit: 'tablespoon' },
      { name: 'Extra vigin olive oil', amount: 2, unit: 'tablespoons' },
      { name: 'Oregano', amount: 1, unit: 'teaspoon' },
      { name: 'Sea salt', amount: 1, unit: 'pinch' },
    ],
  },
]
# ./React-Native/foodapp/data/recipes.js

# ./React-Native/foodapp/dist/assetmap.json
{"c90fb4585dd852a3d67af39baf923f67":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets","httpServerLocation":"/assets/node_modules/@react-navigation/elements/src/assets","width":12,"height":21,"scales":[1,1.5,2,3,4],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@1x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@1.5x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@2x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@3x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@4x.ios.png"],"hash":"c90fb4585dd852a3d67af39baf923f67","name":"back-icon","type":"png","fileHashes":["7d40544b395c5949f4646f5e150fe020","cdd04e13d4ec83ff0cd13ec8dabdc341","a132ecc4ba5c1517ff83c0fb321bc7fc","0ea69b5077e7c4696db85dbcba75b0e1","f5b790e2ac193b3d41015edb3551f9b8"]},"5223c8d9b0d08b82a5670fb5f71faf78":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets","httpServerLocation":"/assets/node_modules/@react-navigation/elements/src/assets","width":50,"height":85,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon-mask.png"],"hash":"5223c8d9b0d08b82a5670fb5f71faf78","name":"back-icon-mask","type":"png","fileHashes":["5223c8d9b0d08b82a5670fb5f71faf78"]},"2a8b5fff19012916a50a2032b5b1cf07":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets","httpServerLocation":"/assets/node_modules/@react-navigation/drawer/src/views/assets","width":24,"height":24,"scales":[1,1.5,2,3,4],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@1x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@1.5x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@2x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@3x.ios.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@4x.ios.png"],"hash":"2a8b5fff19012916a50a2032b5b1cf07","name":"toggle-drawer-icon","type":"png","fileHashes":["a4e0725c66112486cc6f4ab4e0025528","d916e34c419b7246d59efe2dc965ff75","92342ace2ac52e29a7fce51b89c2cbd0","7c519c6f00d65602c16b98bdffddc6f4","ccb993f31c04afbcca02178df04f4170"]},"6148e7019854f3bde85b633cb88f3c25":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Ionicons.ttf"],"hash":"6148e7019854f3bde85b633cb88f3c25","name":"Ionicons","type":"ttf","fileHashes":["6148e7019854f3bde85b633cb88f3c25"]},"3665e238db5479068c5460792e240848":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":4500,"height":4500,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\home.jpg"],"hash":"3665e238db5479068c5460792e240848","name":"home","type":"jpg","fileHashes":["3665e238db5479068c5460792e240848"]},"1b5c51de36f007846165b2486c0f2c53":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":2000,"height":2000,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\ramen.png"],"hash":"1b5c51de36f007846165b2486c0f2c53","name":"ramen","type":"png","fileHashes":["1b5c51de36f007846165b2486c0f2c53"]},"f7356b4e9d41e86e2afb59ce8397ac0e":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":2000,"height":2000,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\pasta.png"],"hash":"f7356b4e9d41e86e2afb59ce8397ac0e","name":"pasta","type":"png","fileHashes":["f7356b4e9d41e86e2afb59ce8397ac0e"]},"5ce22962023138771b78e155f5f67c8f":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":1096,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\thai-shrimp-salad.png"],"hash":"5ce22962023138771b78e155f5f67c8f","name":"thai-shrimp-salad","type":"png","fileHashes":["5ce22962023138771b78e155f5f67c8f"]},"5ca6b4fc31c55193d62f601efcae1cbe":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":3000,"height":1898,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\steak-frites.png"],"hash":"5ca6b4fc31c55193d62f601efcae1cbe","name":"steak-frites","type":"png","fileHashes":["5ca6b4fc31c55193d62f601efcae1cbe"]},"176f98bef1e24cc93db0fc664b4a4159":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1029,"height":1000,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\avocado-salad.png"],"hash":"176f98bef1e24cc93db0fc664b4a4159","name":"avocado-salad","type":"png","fileHashes":["176f98bef1e24cc93db0fc664b4a4159"]},"fc562e427d35de9b4c57c7984b941e0e":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":1200,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\club-sandwich.png"],"hash":"fc562e427d35de9b4c57c7984b941e0e","name":"club-sandwich","type":"png","fileHashes":["fc562e427d35de9b4c57c7984b941e0e"]},"f73706416297ff177f128bafd344e433":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":1022,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\bibimbap.png"],"hash":"f73706416297ff177f128bafd344e433","name":"bibimbap","type":"png","fileHashes":["f73706416297ff177f128bafd344e433"]},"661705ac6242887bb66d9af6f6cf9ddd":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":2048,"height":2048,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\beef-don.png"],"hash":"661705ac6242887bb66d9af6f6cf9ddd","name":"beef-don","type":"png","fileHashes":["661705ac6242887bb66d9af6f6cf9ddd"]},"b0b55dfb6b8eb030aa52d79403a9d409":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":2048,"height":2048,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\crab.png"],"hash":"b0b55dfb6b8eb030aa52d79403a9d409","name":"crab","type":"png","fileHashes":["b0b55dfb6b8eb030aa52d79403a9d409"]},"c5f35a3a0221cf6dc6ec9c9cd0f970cc":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":2500,"height":1951,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\fried-rice.png"],"hash":"c5f35a3a0221cf6dc6ec9c9cd0f970cc","name":"fried-rice","type":"png","fileHashes":["c5f35a3a0221cf6dc6ec9c9cd0f970cc"]},"34cebf035e4e067e169fc025b3ad5bde":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":1200,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\gyoza.png"],"hash":"34cebf035e4e067e169fc025b3ad5bde","name":"gyoza","type":"png","fileHashes":["34cebf035e4e067e169fc025b3ad5bde"]},"94ba00b1a1fbd98944309d65bd549b0f":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":1125,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\noodle-salad.png"],"hash":"94ba00b1a1fbd98944309d65bd549b0f","name":"noodle-salad","type":"png","fileHashes":["94ba00b1a1fbd98944309d65bd549b0f"]},"1b1040322f4b769630f5305e68cdbd59":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":930,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\pancakes.png"],"hash":"1b1040322f4b769630f5305e68cdbd59","name":"pancakes","type":"png","fileHashes":["1b1040322f4b769630f5305e68cdbd59"]},"7cd8e1c9edca1cda7004e19e8c3f95cd":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":5000,"height":5000,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\sushi.png"],"hash":"7cd8e1c9edca1cda7004e19e8c3f95cd","name":"sushi","type":"png","fileHashes":["7cd8e1c9edca1cda7004e19e8c3f95cd"]},"5da1a631f72836b00898128b0c0d21e7":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":2500,"height":2500,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\tacos.png"],"hash":"5da1a631f72836b00898128b0c0d21e7","name":"tacos","type":"png","fileHashes":["5da1a631f72836b00898128b0c0d21e7"]},"b4f3e4d6fa3dde6ad145a89426c2a38b":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images","httpServerLocation":"/assets/assets/images","width":1200,"height":929,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\assets\\images\\vegetable-salad.png"],"hash":"b4f3e4d6fa3dde6ad145a89426c2a38b","name":"vegetable-salad","type":"png","fileHashes":["b4f3e4d6fa3dde6ad145a89426c2a38b"]},"a364dc7a784101f7c8f6791c7b4514ce":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets","httpServerLocation":"/assets/node_modules/@react-navigation/elements/src/assets","width":24,"height":24,"scales":[1,1.5,2,3,4],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@1x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@1.5x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@2x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@3x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\elements\\src\\assets\\back-icon@4x.android.png"],"hash":"a364dc7a784101f7c8f6791c7b4514ce","name":"back-icon","type":"png","fileHashes":["778ffc9fe8773a878e9c30a6304784de","376d6a4c7f622917c39feb23671ef71d","c79c3606a1cf168006ad3979763c7e0c","02bc1fa7c0313217bde2d65ccbff40c9","35ba0eaec5a4f5ed12ca16fabeae451d"]},"8ca25a8090835447d6d606ecaac9e240":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets","httpServerLocation":"/assets/node_modules/@react-navigation/drawer/src/views/assets","width":24,"height":24,"scales":[1,1.5,2,3,4],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@1x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@1.5x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@2x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@3x.android.png","C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\foodapp\\node_modules\\@react-navigation\\drawer\\src\\views\\assets\\toggle-drawer-icon@4x.android.png"],"hash":"8ca25a8090835447d6d606ecaac9e240","name":"toggle-drawer-icon","type":"png","fileHashes":["665d9d6a3227c85fcb50f3f86ccad80c","f39b4d4f351495ad948f880253d58943","ddf6610eb512edae2ba722a7212c3ecc","a5e0abbdbd82bc804c2eb86eff046d52","ae74bb20586a731af545e6b00fe14a09"]}}
# ./React-Native/foodapp/dist/assetmap.json

# ./React-Native/foodapp/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"ios":{"bundle":"_expo/static/js/ios/AppEntry-b0b2fe9544384f1ae8b3df0638ae112d.hbc","assets":[{"path":"assets\\7d40544b395c5949f4646f5e150fe020","ext":"png"},{"path":"assets\\cdd04e13d4ec83ff0cd13ec8dabdc341","ext":"png"},{"path":"assets\\a132ecc4ba5c1517ff83c0fb321bc7fc","ext":"png"},{"path":"assets\\0ea69b5077e7c4696db85dbcba75b0e1","ext":"png"},{"path":"assets\\f5b790e2ac193b3d41015edb3551f9b8","ext":"png"},{"path":"assets\\5223c8d9b0d08b82a5670fb5f71faf78","ext":"png"},{"path":"assets\\a4e0725c66112486cc6f4ab4e0025528","ext":"png"},{"path":"assets\\d916e34c419b7246d59efe2dc965ff75","ext":"png"},{"path":"assets\\92342ace2ac52e29a7fce51b89c2cbd0","ext":"png"},{"path":"assets\\7c519c6f00d65602c16b98bdffddc6f4","ext":"png"},{"path":"assets\\ccb993f31c04afbcca02178df04f4170","ext":"png"},{"path":"assets\\6148e7019854f3bde85b633cb88f3c25","ext":"ttf"},{"path":"assets\\3665e238db5479068c5460792e240848","ext":"jpg"},{"path":"assets\\1b5c51de36f007846165b2486c0f2c53","ext":"png"},{"path":"assets\\f7356b4e9d41e86e2afb59ce8397ac0e","ext":"png"},{"path":"assets\\5ce22962023138771b78e155f5f67c8f","ext":"png"},{"path":"assets\\5ca6b4fc31c55193d62f601efcae1cbe","ext":"png"},{"path":"assets\\176f98bef1e24cc93db0fc664b4a4159","ext":"png"},{"path":"assets\\fc562e427d35de9b4c57c7984b941e0e","ext":"png"},{"path":"assets\\f73706416297ff177f128bafd344e433","ext":"png"},{"path":"assets\\661705ac6242887bb66d9af6f6cf9ddd","ext":"png"},{"path":"assets\\b0b55dfb6b8eb030aa52d79403a9d409","ext":"png"},{"path":"assets\\c5f35a3a0221cf6dc6ec9c9cd0f970cc","ext":"png"},{"path":"assets\\34cebf035e4e067e169fc025b3ad5bde","ext":"png"},{"path":"assets\\94ba00b1a1fbd98944309d65bd549b0f","ext":"png"},{"path":"assets\\1b1040322f4b769630f5305e68cdbd59","ext":"png"},{"path":"assets\\7cd8e1c9edca1cda7004e19e8c3f95cd","ext":"png"},{"path":"assets\\5da1a631f72836b00898128b0c0d21e7","ext":"png"},{"path":"assets\\b4f3e4d6fa3dde6ad145a89426c2a38b","ext":"png"}]},"android":{"bundle":"_expo/static/js/android/AppEntry-e61bec070bd75e4645decd60c9f206f9.hbc","assets":[{"path":"assets\\778ffc9fe8773a878e9c30a6304784de","ext":"png"},{"path":"assets\\376d6a4c7f622917c39feb23671ef71d","ext":"png"},{"path":"assets\\c79c3606a1cf168006ad3979763c7e0c","ext":"png"},{"path":"assets\\02bc1fa7c0313217bde2d65ccbff40c9","ext":"png"},{"path":"assets\\35ba0eaec5a4f5ed12ca16fabeae451d","ext":"png"},{"path":"assets\\5223c8d9b0d08b82a5670fb5f71faf78","ext":"png"},{"path":"assets\\665d9d6a3227c85fcb50f3f86ccad80c","ext":"png"},{"path":"assets\\f39b4d4f351495ad948f880253d58943","ext":"png"},{"path":"assets\\ddf6610eb512edae2ba722a7212c3ecc","ext":"png"},{"path":"assets\\a5e0abbdbd82bc804c2eb86eff046d52","ext":"png"},{"path":"assets\\ae74bb20586a731af545e6b00fe14a09","ext":"png"},{"path":"assets\\6148e7019854f3bde85b633cb88f3c25","ext":"ttf"},{"path":"assets\\3665e238db5479068c5460792e240848","ext":"jpg"},{"path":"assets\\1b5c51de36f007846165b2486c0f2c53","ext":"png"},{"path":"assets\\f7356b4e9d41e86e2afb59ce8397ac0e","ext":"png"},{"path":"assets\\5ce22962023138771b78e155f5f67c8f","ext":"png"},{"path":"assets\\5ca6b4fc31c55193d62f601efcae1cbe","ext":"png"},{"path":"assets\\176f98bef1e24cc93db0fc664b4a4159","ext":"png"},{"path":"assets\\fc562e427d35de9b4c57c7984b941e0e","ext":"png"},{"path":"assets\\f73706416297ff177f128bafd344e433","ext":"png"},{"path":"assets\\661705ac6242887bb66d9af6f6cf9ddd","ext":"png"},{"path":"assets\\b0b55dfb6b8eb030aa52d79403a9d409","ext":"png"},{"path":"assets\\c5f35a3a0221cf6dc6ec9c9cd0f970cc","ext":"png"},{"path":"assets\\34cebf035e4e067e169fc025b3ad5bde","ext":"png"},{"path":"assets\\94ba00b1a1fbd98944309d65bd549b0f","ext":"png"},{"path":"assets\\1b1040322f4b769630f5305e68cdbd59","ext":"png"},{"path":"assets\\7cd8e1c9edca1cda7004e19e8c3f95cd","ext":"png"},{"path":"assets\\5da1a631f72836b00898128b0c0d21e7","ext":"png"},{"path":"assets\\b4f3e4d6fa3dde6ad145a89426c2a38b","ext":"png"}]}}}
# ./React-Native/foodapp/dist/metadata.json

# ./React-Native/foodapp/.expo/devices.json
{
  "devices": []
}

# ./React-Native/foodapp/.expo/devices.json

# ./React-Native/foodapp/.expo/settings.json
{
  "hostType": "lan",
  "lanType": "ip",
  "dev": true,
  "minify": false,
  "urlRandomness": null,
  "https": false
}

# ./React-Native/foodapp/.expo/settings.json

# ./React-Native/foodapp/.expo-shared/assets.json
{
  "12bb71342c6255bbf50437ec8f4441c083f47cdb74bd89160c15e4f43e52a1cb": true,
  "40b842e832070c58deac6aa9e08fa459302ee3f9da492c7e77d93d2fbf4a56fd": true
}

# ./React-Native/foodapp/.expo-shared/assets.json

# ./React-Native/foodapp/package.json
{
  "name": "foodapp",
  "version": "1.0.0",
  "main": "node_modules/expo/AppEntry.js",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web",
    "eject": "expo eject"
  },
  "jest": {
    "preset": "jest-expo",
    "transformIgnorePatterns": [
      "node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)"
    ]
  },
  "dependencies": {
    "@expo/metro-runtime": "~5.0.4",
    "@react-navigation/drawer": "6",
    "@react-navigation/native": "6",
    "@react-navigation/native-stack": "6",
    "@reduxjs/toolkit": "^1.9.5",
    "expo": "^53",
    "expo-status-bar": "~2.2.2",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-dom": "19.0.0",
    "react-native": "0.79.1",
    "react-native-gesture-handler": "~2.24.0",
    "react-native-reanimated": "~3.17.4",
    "react-native-safe-area-context": "5.3.0",
    "react-native-screens": "~4.10.0",
    "react-native-vector-icons": "^9.2.0",
    "react-native-web": "^0.20.0",
    "react-redux": "^8.0.2"
  },
  "devDependencies": {
    "@babel/core": "^7.12.9",
    "@testing-library/react-native": "^10.1.1",
    "@types/react": "^19.1.9",
    "@types/react-native": "^0.73.0",
    "@types/react-redux": "^7.1.34",
    "jest": "^29.2.1",
    "jest-expo": "~53.0.1",
    "react-test-renderer": "^19",
    "typescript": "^5.8.3"
  },
  "private": true
}

# ./React-Native/foodapp/package.json

# ./React-Native/foodapp/reducers/favorites.ts
import { createSlice, PayloadAction } from "@reduxjs/toolkit";

// Typage de la recette
export type Ingredient = {
	name: string,
	amount: number,
	unit?: string,
};

export type Recipe = {
	id: string,
	name: string,
	image: any, // adapte si image vient d'un URI ou de require()
	color: string,
	level: string,
	time: string,
	rating: number,
	longDesc: string,
	servingNb: number,
	ingredients: Ingredient[],
};

// Typage de l’état
type FavoritesState = {
	value: Recipe[],
};

const initialState: FavoritesState = {
	value: [],
};

export const favoritesSlice = createSlice({
	name: "favorites",
	initialState,
	reducers: {
		favorite: (state, action: PayloadAction<Recipe>) => {
			state.value.push(action.payload);
		},
		unfavorite: (state, action: PayloadAction<string>) => {
			state.value = state.value.filter((e) => e.id !== action.payload);
		},
		updateServings: (state, action: PayloadAction<{ id: string, servingNb: number }>) => {
			const recipe = state.value.find((e) => e.id === action.payload.id);
			if (recipe) {
				recipe.servingNb = action.payload.servingNb;
			}
		},
	},
});

export const { favorite, unfavorite, updateServings } = favoritesSlice.actions;
export default favoritesSlice.reducer;

# ./React-Native/foodapp/reducers/favorites.ts

# ./React-Native/foodapp/screens/HomeScreen.tsx
import React from "react";
import { Image, StyleSheet, Text, TouchableOpacity, View } from "react-native";
import { SafeAreaView } from "react-native-safe-area-context";
import Ionicons from "react-native-vector-icons/Ionicons";
import type { NativeStackNavigationProp } from "@react-navigation/native-stack";
import type { FC } from "react";

type RootStackParamList = {
	DrawerNavigator: undefined,
};

type HomeScreenProps = {
	navigation: NativeStackNavigationProp<RootStackParamList, "DrawerNavigator">,
};

const HomeScreen: FC<HomeScreenProps> = ({ navigation }) => {
	return (
		<SafeAreaView style={[styles.safeArea, styles.container]}>
			<View style={styles.imageWrapper}>
				<Image style={styles.imageBackground} source={require("../assets/images/home.jpg")} />
			</View>

			<TouchableOpacity onPress={() => navigation.navigate("DrawerNavigator")} style={styles.menu} activeOpacity={1}>
				<Text style={styles.title}>FoodApp</Text>
				<View style={styles.iconWrapper}>
					<Text style={styles.menuText}>Let's go!</Text>
					<Ionicons name="arrow-forward" size={28} style={styles.icon} />
				</View>
			</TouchableOpacity>
		</SafeAreaView>
	);
};

export default HomeScreen;

const styles = StyleSheet.create({
	container: {
		flex: 1,
	},
	title: {
		fontSize: 70,
		fontWeight: "bold",
		color: "#ffffff",
		marginBottom: 10,
		textAlign: "right",
	},
	menu: {
		backgroundColor: "#655074",
		height: "20%",
		alignItems: "flex-end",
		justifyContent: "center",
		paddingRight: 20,
		// React Native ne supporte pas la propriété "border" directement
	},
	menuText: {
		fontSize: 20,
		fontWeight: "bold",
		color: "#ffffff",
		marginRight: 10,
		marginBottom: 25,
	},
	imageWrapper: {
		height: "80%",
		backgroundColor: "#655074",
	},
	imageBackground: {
		width: "100%",
		height: "100%",
		borderBottomLeftRadius: 160,
		backgroundColor: "#ffffff",
	},
	iconWrapper: {
		flexDirection: "row",
	},
	icon: {
		color: "#ffffff",
		position: "relative",
		bottom: 2,
	},
	safeArea: {}, // vide ici car il est combiné avec container
});

# ./React-Native/foodapp/screens/HomeScreen.tsx

# ./React-Native/foodapp/screens/MyRecipesScreen.tsx
import React from "react";
import { Platform, ScrollView, StyleSheet, Text, View } from "react-native";
import { SafeAreaView } from "react-native-safe-area-context";
import { useSelector } from "react-redux";
import type { NativeStackNavigationProp } from "@react-navigation/native-stack";
import type { FC } from "react";

import RecipeCard from "../components/RecipeCard";

// Typage de la navigation
type RootStackParamList = {
	MyRecipes: undefined,
};

type MyRecipesScreenProps = {
	navigation: NativeStackNavigationProp<RootStackParamList, "MyRecipes">,
};

// Typage du store Redux
type Recipe = {
	id: string,
	title: string,
	image: string,
	// ajoute les autres propriétés selon le modèle de recette
};

type RootState = {
	favorites: {
		value: Recipe[],
	},
};

const MyRecipesScreen: FC<MyRecipesScreenProps> = ({ navigation }) => {
	const favorites = useSelector((state: RootState) => state.favorites.value);

	const recipeList = favorites.map((data, i) => <RecipeCard key={i} recipe={data} isFavorite />);

	return (
		<SafeAreaView style={[styles.safeArea, styles.container]}>
			<Text style={styles.title}>The best ones...</Text>
			<ScrollView>
				<View style={styles.cards}>{recipeList}</View>
			</ScrollView>
		</SafeAreaView>
	);
};

export default MyRecipesScreen;

const styles = StyleSheet.create({
	container: {
		flex: 1,
		backgroundColor: "#ffffff",
		paddingTop: 110,
	},
	title: {
		fontSize: 24,
		fontWeight: "bold",
		color: "#655074",
		marginLeft: 20,
		fontFamily: Platform.select({ ios: "Georgia", android: "serif" }),
		marginBottom: 20,
	},
	cards: {
		flex: 1,
		flexDirection: "row",
		flexWrap: "wrap",
		padding: 10,
		alignContent: "space-between",
	},
	safeArea: {}, // si tu veux l'étendre plus tard
});

# ./React-Native/foodapp/screens/MyRecipesScreen.tsx

# ./React-Native/foodapp/screens/RecipeScreen.tsx
import React, { useState } from "react";
import { Image, Platform, ScrollView, StyleSheet, Text, TouchableOpacity, View } from "react-native";
import { SafeAreaView } from "react-native-safe-area-context";
import { useDispatch, useSelector } from "react-redux";
import Ionicons from "react-native-vector-icons/Ionicons";
import { favorite, unfavorite, updateServings } from "../reducers/favorites";

import type { NativeStackScreenProps } from "@react-navigation/native-stack";
import type { FC } from "react";

// Typage de la recette
type Ingredient = {
	name: string,
	amount: number,
	unit?: string,
};

type Recipe = {
	id: string,
	name: string,
	image: any, // à adapter si besoin
	color: string,
	level: string,
	time: string,
	rating: number,
	longDesc: string,
	servingNb: number,
	ingredients: Ingredient[],
};

// Typage du store
type RootState = {
	favorites: {
		value: Recipe[],
	},
};

// Typage des props de navigation
type RootStackParamList = {
	Recipe: { recipe: Recipe },
};

type Props = NativeStackScreenProps<RootStackParamList, "Recipe">;

const RecipeScreen: FC<Props> = ({ navigation, route }) => {
	const { recipe } = route.params;
	const dispatch = useDispatch();
	const favorites = useSelector((state: RootState) => state.favorites.value);
	const isFavorite = favorites.some((favorite) => favorite.id === recipe.id);

	const [servingNb, setServingNb] = useState<number>(recipe.servingNb);

	const incrementServings = () => {
		const newValue = servingNb + 1;
		setServingNb(newValue);
		if (isFavorite) {
			dispatch(updateServings({ id: recipe.id, servingNb: newValue }));
		}
	};

	const decrementServings = () => {
		if (servingNb > 1) {
			const newValue = servingNb - 1;
			setServingNb(newValue);
			if (isFavorite) {
				dispatch(updateServings({ id: recipe.id, servingNb: newValue }));
			}
		}
	};

	const handlePress = () => {
		if (isFavorite) {
			dispatch(unfavorite(recipe.id));
		} else {
			dispatch(favorite({ ...recipe, servingNb }));
		}
	};

	const ingredients = recipe.ingredients.map((ingredient, i) => (
		<SafeAreaView key={i} style={[styles.safeArea, styles.menuContainer]}>
			<View style={styles.ingredientWrapper}>
				<Text style={styles.menuSubtitle}>{ingredient.name}</Text>
				<Text style={styles.menuSubtitle}>
					{ingredient.amount * servingNb}
					{ingredient.unit && ` ${ingredient.unit}`}
				</Text>
			</View>
		</SafeAreaView>
	));

	return (
		<SafeAreaView style={[styles.safeArea, styles.container]}>
			<TouchableOpacity onPress={() => navigation.goBack()} style={[styles.navigateButton, { marginTop: 60 }]}>
				<Ionicons name="arrow-back" size={25} color="#655074" />
			</TouchableOpacity>

			<View style={[styles.imageContainer, { height: 260 }]}>
				<View style={{ ...styles.imageWrapper, backgroundColor: recipe.color }}>
					<Image source={recipe.image} style={styles.image} resizeMode="contain" />
				</View>
			</View>

			<View style={{ ...styles.contentContainer, backgroundColor: recipe.color }}>
				<View style={styles.contentWrapper}>
					<TouchableOpacity style={styles.addButton} onPress={handlePress}>
						<Ionicons name={isFavorite ? "bookmark" : "bookmark-outline"} size={20} color="#ffffff" />
					</TouchableOpacity>

					<View style={styles.iconContainer}>
						<View style={styles.iconWrapper}>
							<Ionicons name="speedometer-outline" size={24} color={recipe.color} style={styles.iconContent} />
							<Text style={styles.iconText}>{recipe.level}</Text>
						</View>
						<View>
							<Ionicons name="timer-sharp" size={24} color={recipe.color} style={styles.iconContent} />
							<Text style={styles.iconText}>{recipe.time}</Text>
						</View>
						<View>
							<Ionicons name="star-outline" size={20} color={recipe.color} style={styles.iconContent} />
							<Text style={styles.iconText}>{recipe.rating}</Text>
						</View>
					</View>

					<View style={styles.content}>
						<Text style={styles.title}>{recipe.name}</Text>
						<Text style={styles.contentText}>{recipe.longDesc}</Text>
					</View>

					<View style={{ ...styles.menuContainer, marginBottom: 10 }}>
						<View>
							<Text style={styles.menuTitle}>Ingredients</Text>
							<Text style={styles.menuSubtitle}>How many servings?</Text>
						</View>
						<View style={styles.buttonGroup}>
							<TouchableOpacity style={styles.button} onPress={decrementServings}>
								<Text style={styles.buttonText}>-</Text>
							</TouchableOpacity>
							<View style={styles.button}>
								<Text style={styles.buttonText}>{servingNb}</Text>
							</View>
							<TouchableOpacity style={styles.button} onPress={incrementServings}>
								<Text style={styles.buttonText}>+</Text>
							</TouchableOpacity>
						</View>
					</View>

					<ScrollView showsVerticalScrollIndicator={false}>{ingredients}</ScrollView>
				</View>
			</View>
		</SafeAreaView>
	);
};

export default RecipeScreen;

const styles = StyleSheet.create({
	container: {
		flex: 1,
		justifyContent: "flex-start",
		alignItems: "center",
		position: "relative",
	},
	image: {
		width: "70%",
	},
	imageContainer: {
		backgroundColor: "white",
		width: "100%",
		position: "relative",
	},
	imageWrapper: {
		width: "100%",
		height: "100%",
		borderBottomLeftRadius: 120,
		overflow: "hidden",
		flex: 1,
		alignItems: "center",
		justifyContent: "center",
		position: "relative",
	},
	contentContainer: {
		height: "65%",
		width: "100%",
	},
	contentWrapper: {
		borderTopRightRadius: 120,
		height: "100%",
		width: "100%",
		backgroundColor: "white",
		padding: 30,
		position: "relative",
		paddingTop: 55,
	},
	content: {
		width: "100%",
		display: "flex",
		marginBottom: 20,
	},
	title: {
		color: "#46494c",
		fontSize: 36,
		fontFamily: Platform.select({ ios: "Georgia", android: "serif" }),
	},
	contentText: {
		color: "#4e5155",
		fontSize: 12,
	},
	iconContainer: {
		display: "flex",
		flexDirection: "row",
		justifyContent: "space-around",
		width: "100%",
		marginBottom: 25,
		paddingRight: 10,
	},
	iconWrapper: {
		display: "flex",
		alignItems: "center",
	},
	iconContent: {
		textAlign: "center",
	},
	iconText: {
		fontWeight: "bold",
		color: "#46494c",
		textAlign: "center",
	},
	menuContainer: {
		display: "flex",
		flexDirection: "row",
		justifyContent: "space-between",
		alignItems: "center",
		width: "100%",
		padding: 3,
	},
	menuTitle: {
		fontWeight: "bold",
		fontSize: 14,
		color: "#46494c",
	},
	menuSubtitle: {
		fontWeight: "bold",
		fontSize: 12,
		color: "#8a8e93",
	},
	buttonGroup: {
		display: "flex",
		flexDirection: "row",
		borderRadius: 40,
		overflow: "hidden",
		backgroundColor: "2px solid rgba(0, 0, 0, 0.05)",
	},
	buttonText: {
		fontWeight: "bold",
		color: "#655074",
	},
	button: {
		padding: 15,
		display: "flex",
		justifyContent: "center",
		alignItems: "center",
	},
	ingredientWrapper: {
		display: "flex",
		flexDirection: "row",
		justifyContent: "space-between",
		borderBottomColor: "rgba(0, 0, 0, 0.01)",
		borderBottomWidth: 1,
		width: "100%",
		paddingTop: 20,
		paddingBottom: 20,
	},
	navigateButton: {
		position: "absolute",
		left: 15,
		zIndex: 2,
	},
	addButton: {
		position: "absolute",
		top: -15,
		right: 25,
		borderRadius: 50,
		backgroundColor: "#655074",
		padding: 20,
	},
});

# ./React-Native/foodapp/screens/RecipeScreen.tsx

# ./React-Native/foodapp/screens/SearchScreen.tsx
import React from "react";
import { Platform, ScrollView, StyleSheet, Text, View } from "react-native";
import { SafeAreaView } from "react-native-safe-area-context";

import { recipes } from "../data/recipes";
import RecipeCard from "../components/RecipeCard";

// Typage de la recette si tu veux centraliser : tu peux le placer dans un fichier `types.ts`
type Ingredient = {
	name: string,
	amount: number,
	unit?: string,
};

type Recipe = {
	id: string,
	name: string,
	image: any,
	color: string,
	level: string,
	time: string,
	rating: number,
	longDesc: string,
	servingNb: number,
	ingredients: Ingredient[],
};

const SearchScreen: React.FC = () => {
	const recipeList = recipes.map((data: Recipe, i: number) => <RecipeCard key={i} recipe={data} />);

	return (
		<SafeAreaView style={[styles.safeArea, styles.container]}>
			<Text style={styles.title}>What do you want to eat today?</Text>
			<ScrollView>
				<View style={styles.cards}>{recipeList}</View>
			</ScrollView>
		</SafeAreaView>
	);
};

export default SearchScreen;

const styles = StyleSheet.create({
	container: {
		flex: 1,
		backgroundColor: "#ffffff",
		paddingTop: 110,
	},
	title: {
		fontSize: 24,
		fontWeight: "bold",
		color: "#655074",
		marginLeft: 20,
		fontFamily: Platform.select({ ios: "Georgia", android: "serif" }),
	},
	subtitle: {
		fontWeight: "500",
		color: "#C6C6C6",
		marginLeft: 20,
		marginBottom: 20,
	},
	cards: {
		flex: 1,
		flexDirection: "row",
		flexWrap: "wrap",
		padding: 10,
		alignContent: "space-between",
	},
	safeArea: {}, // ajouté pour correspondre au style utilisé dans le container
});

# ./React-Native/foodapp/screens/SearchScreen.tsx

# ./React-Native/foodapp/tsconfig.json
{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "lib": [
      "esnext"
    ],
    "jsx": "react-native",
    "strict": true,
    "moduleResolution": "node",
    "allowJs": true,
    "noEmit": true,
    "isolatedModules": true,
    "resolveJsonModule": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "exclude": [
    "node_modules"
  ],
  "extends": "expo/tsconfig.base"
}

# ./React-Native/foodapp/tsconfig.json

# ./React-Native/foodapp/.vscode/settings.json
{
  "files.exclude": {
    ".ariane": true,
    ".vscode": true,
    "**/.gitkeep": true
  },
  "git.mergeEditor": false
}
# ./React-Native/foodapp/.vscode/settings.json

# ./React-Native/heure_de_reveil/app.json
{
  "expo": {
    "name": "heure_de_reveil",
    "slug": "heure_de_reveil",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/heure_de_reveil.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/heure_de_reveil.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/heure_de_reveil.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/heure_de_reveil.png"
    },
    "extra": {
      "eas": {
        "projectId": "45e6fb59-c4af-4843-8eff-4e7e14560a6e"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    },
    "updates": {
      "url": "https://u.expo.dev/45e6fb59-c4af-4843-8eff-4e7e14560a6e"
    }
  }
}

# ./React-Native/heure_de_reveil/app.json

# ./React-Native/heure_de_reveil/App.tsx
import React, { useCallback, useEffect, useRef, useState } from "react";
import { StyleSheet, Text, View, TouchableOpacity, ImageBackground, SafeAreaView, StatusBar, AppState, AppStateStatus } from "react-native";

type Times = { t8: string; t7_30: string; t6_30: string; t6: string };

// 1) Constante immuable en dehors du composant
const TIME_OFFSETS = [
	{ id: "t8", hoursAdded: 8, minutesAdded: 0 },
	{ id: "t7_30", hoursAdded: 7, minutesAdded: 30 },
	{ id: "t6_30", hoursAdded: 6, minutesAdded: 30 },
	{ id: "t6", hoursAdded: 6, minutesAdded: 0 },
] as const;

export default function App() {
	const [times, setTimes] = useState<Times>({ t8: "", t7_30: "", t6_30: "", t6: "" });
	const appStateRef = useRef<AppStateStatus>(AppState.currentState);

	const addZero = (n: number) => n.toString().padStart(2, "0");
	const formatTime = (d: Date) => `${addZero(d.getHours())}:${addZero(d.getMinutes())}`;

	// 2) Aucune dépendance variable
	const updateTimes = useCallback(() => {
		const now = new Date();
		const next: Times = { t8: "", t7_30: "", t6_30: "", t6: "" };

		TIME_OFFSETS.forEach((o) => {
			const totalMin = o.hoursAdded * 60 + o.minutesAdded;
			const later = new Date(now.getTime() + totalMin * 60 * 1000);
			next[o.id] = formatTime(later);
		});

		setTimes(next);
	}, []);

	// Au montage seulement
	useEffect(() => {
		updateTimes();
	}, [updateTimes]);

	// Au retour en premier plan uniquement
	useEffect(() => {
		const sub = AppState.addEventListener("change", (nextState) => {
			const wasBg = /inactive|background/.test(appStateRef.current ?? "");
			if (wasBg && nextState === "active") updateTimes();
			appStateRef.current = nextState;
		});
		return () => sub.remove();
	}, [updateTimes]);

	return (
		<ImageBackground source={require("./assets/nuages_1.jpg")} style={styles.background}>
			<SafeAreaView style={styles.container}>
				<StatusBar barStyle="dark-content" />
				<View style={styles.timeCard}>
					<View style={styles.cardHeader}>
						<Text style={styles.headerText}>Heure dans 8 h</Text>
					</View>
					<View style={styles.cardBody}>
						<Text style={styles.timeBig}>{times.t8}</Text>
						<View style={styles.timeRowContainer}>
							<View style={styles.timeColumn}>
								<Text style={styles.timeLabel}>+7 h 30</Text>
								<Text style={styles.timeSmall}>{times.t7_30}</Text>
							</View>
							<View style={styles.timeColumn}>
								<Text style={styles.timeLabel}>+6 h 30</Text>
								<Text style={styles.timeSmall}>{times.t6_30}</Text>
							</View>
							<View style={styles.timeColumn}>
								<Text style={styles.timeLabel}>+6 h</Text>
								<Text style={styles.timeSmall}>{times.t6}</Text>
							</View>
						</View>
						<TouchableOpacity style={styles.updateButton} onPress={updateTimes}>
							<Text style={styles.buttonText}>Actualiser</Text>
						</TouchableOpacity>
					</View>
				</View>
			</SafeAreaView>
		</ImageBackground>
	);
}

const styles = StyleSheet.create({
	background: { flex: 1, width: "100%", height: "100%" },
	container: { flex: 1, justifyContent: "center", alignItems: "center" },
	timeCard: {
		width: "90%",
		maxWidth: 540,
		backgroundColor: "rgba(255, 255, 255, 0.85)",
		borderRadius: 10,
		overflow: "hidden",
		shadowColor: "#0d6efd",
		shadowOffset: { width: 0, height: 2 },
		shadowOpacity: 0.2,
		shadowRadius: 8,
		elevation: 5,
		borderWidth: 1,
		borderColor: "#0d6efd",
	},
	cardHeader: { backgroundColor: "#0d6efd", paddingVertical: 12, paddingHorizontal: 16 },
	headerText: { color: "white", textAlign: "center", fontWeight: "bold", fontSize: 18 },
	cardBody: { padding: 20, alignItems: "center" },
	timeBig: { fontSize: 48, fontWeight: "700", marginBottom: 20 },
	timeRowContainer: { flexDirection: "row", justifyContent: "space-around", width: "100%" },
	timeColumn: { alignItems: "center" },
	timeLabel: { fontWeight: "600", marginBottom: 5 },
	timeSmall: { fontSize: 20 },
	updateButton: {
		marginTop: 25,
		paddingVertical: 10,
		paddingHorizontal: 20,
		borderWidth: 1,
		borderColor: "#0d6efd",
		borderRadius: 5,
	},
	buttonText: { color: "#0d6efd", fontWeight: "500" },
});

# ./React-Native/heure_de_reveil/App.tsx

# ./React-Native/heure_de_reveil/dist/assetmap.json
{"6fa9c485a5d94a5c970805e46cdd8320":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\heure_de_reveil\\assets","httpServerLocation":"/assets/assets","width":1280,"height":720,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\heure_de_reveil\\assets\\nuages_1.jpg"],"hash":"6fa9c485a5d94a5c970805e46cdd8320","name":"nuages_1","type":"jpg","fileHashes":["6fa9c485a5d94a5c970805e46cdd8320"]}}
# ./React-Native/heure_de_reveil/dist/assetmap.json

# ./React-Native/heure_de_reveil/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"android":{"bundle":"_expo/static/js/android/index-59d6f19824f29dc67210fbe0303ae903.hbc","assets":[{"path":"assets\\6fa9c485a5d94a5c970805e46cdd8320","ext":"jpg"}]},"ios":{"bundle":"_expo/static/js/ios/index-e78cdde32e9f5a032c56786c5fd891d1.hbc","assets":[{"path":"assets\\6fa9c485a5d94a5c970805e46cdd8320","ext":"jpg"}]}}}
# ./React-Native/heure_de_reveil/dist/metadata.json

# ./React-Native/heure_de_reveil/.expo/devices.json
{
  "devices": []
}

# ./React-Native/heure_de_reveil/.expo/devices.json

# ./React-Native/heure_de_reveil/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/heure_de_reveil/index.ts

# ./React-Native/heure_de_reveil/package.json
{
  "name": "heure_de_reveil",
  "version": "1.0.0",
  "main": "index.ts",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "expo": "~53.0.20",
    "expo-status-bar": "~2.2.3",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-native": "0.79.5"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~19.0.10",
    "typescript": "~5.8.3"
  },
  "private": true
}

# ./React-Native/heure_de_reveil/package.json

# ./React-Native/heure_de_reveil/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/heure_de_reveil/tsconfig.json

# ./React-Native/organisation_le_matin/app.json
{
  "expo": {
    "name": "organisation_le_matin",
    "slug": "organisation_le_matin",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/organisation_le_matin.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/organisation_le_matin.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/organisation_le_matin.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/organisation_le_matin.png"
    },
    "extra": {
      "eas": {
        "projectId": "49422b23-d931-4869-a4df-2d87b0de4ebc"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    },
    "updates": {
      "url": "https://u.expo.dev/49422b23-d931-4869-a4df-2d87b0de4ebc"
    }
  }
}

# ./React-Native/organisation_le_matin/app.json

# ./React-Native/organisation_le_matin/App.tsx
// App.tsx
import "react-native-reanimated";
import React, { useCallback, useMemo, useRef, useState, useEffect } from "react";
import { SafeAreaView, View, Text, TextInput, TouchableOpacity, StyleSheet, FlatList, ScrollView, KeyboardAvoidingView, Platform } from "react-native";
import { Provider, useDispatch, useSelector } from "react-redux";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { configureStore, createSlice, PayloadAction } from "@reduxjs/toolkit";
import { persistReducer, persistStore } from "redux-persist";
import { PersistGate } from "redux-persist/integration/react";
import DraggableFlatList, { ScaleDecorator, RenderItemParams } from "react-native-draggable-flatlist";
import { GestureHandlerRootView } from "react-native-gesture-handler";
import { SafeAreaProvider } from "react-native-safe-area-context";

// =============== Thème & utilitaires ===============
const COLORS = {
	warm1: "#FFB703",
	warm2: "#FB8500",
	gray1: "#f8f9fa",
	gray2: "#e9ecef",
	gray3: "#ced4da",
	text: "#212529",
	subtle: "#6c757d",
	danger: "#dc3545",
	success: "#198754",
};

const pad = (n: number) => String(n).padStart(2, "0");
const clamp = (v: number, min: number, max: number) => Math.min(max, Math.max(min, v));
const minutesToHm = (total: number) => {
	const sign = total < 0 ? "-" : "";
	const m = Math.abs(total);
	const h = Math.floor(m / 60),
		mm = m % 60;
	return sign + (h ? `${h} h ${pad(mm)} min` : `${mm} min`);
};
const timeToMinutes = (t: string | undefined) => {
	if (!t) return 8 * 60 + 25;
	const [h, m] = t.split(":").map(Number);
	return h * 60 + m;
};
const minutesToTime = (m: number) => {
	m = ((m % 1440) + 1440) % 1440;
	const h = Math.floor(m / 60),
		mm = m % 60;
	return `${pad(h)}:${pad(mm)}`;
};
const nextDateForTime = (hhmm: string) => {
	const now = new Date();
	const [h, m] = hhmm.split(":").map(Number);
	const d = new Date(now);
	d.setHours(h, m, 0, 0);
	if (d <= now) d.setDate(d.getDate() + 1);
	return d;
};
const relativeFromNow = (target: Date) => {
	const now = new Date();
	const diffMin = Math.round((target.getTime() - now.getTime()) / 60000);
	if (diffMin > 0) return `dans ${minutesToHm(diffMin)}`;
	if (diffMin < 0) return `il y a ${minutesToHm(-diffMin)}`;
	return "maintenant";
};

// =============== Domain model ===============
type Step = {
	id: string;
	label: string;
	minutes: number;
	min: number;
	max: number;
	enabled: boolean;
};

type ProfileData = {
	steps: Step[];
	intervalToilettes: number; // minutes
	departureTime: string; // "HH:MM"
};

const STORAGE_NS = "a_faire_avant_de_partir";
const PROFILE_DEFAULT_NAME = "routine du matin";

const DEFAULT_STEPS: Step[] = [
	{ id: "wake", label: "Se lever", minutes: 30, min: 0, max: 240, enabled: true },
	{ id: "toilette1", label: "Toilette 1", minutes: 15, min: 0, max: 120, enabled: true },
	{ id: "prep", label: "Mise en condition (coiffer / raser)", minutes: 15, min: 0, max: 120, enabled: true },
	{ id: "eat", label: "Manger", minutes: 15, min: 0, max: 120, enabled: true },
	{ id: "toilette2", label: "Toilette 2", minutes: 15, min: 0, max: 120, enabled: true },
	{ id: "buffer", label: "Battement (s'habiller + vérifier fenêtres)", minutes: 10, min: 0, max: 120, enabled: true },
];
const DEFAULT_INTERVAL_TOILETTES = 60;

const defaultProfileData = (): ProfileData => ({
	steps: JSON.parse(JSON.stringify(DEFAULT_STEPS)),
	intervalToilettes: DEFAULT_INTERVAL_TOILETTES,
	departureTime: "08:25",
});

// =============== Redux (slice + persist) ===============
type Manifest = { active: string; order: string[] };
type RootState = {
	manifest: Manifest;
	profiles: Record<string, ProfileData>;
};

const initialState: RootState = {
	manifest: { active: PROFILE_DEFAULT_NAME, order: [PROFILE_DEFAULT_NAME] },
	profiles: { [PROFILE_DEFAULT_NAME]: defaultProfileData() },
};

const slice = createSlice({
	name: "routine",
	initialState,
	reducers: {
		setActiveProfile(state, action: PayloadAction<string>) {
			if (state.manifest.order.includes(action.payload)) state.manifest.active = action.payload;
		},
		addProfile(state, action: PayloadAction<{ name?: string } | undefined>) {
			const base = action?.payload?.name?.trim() || "Préparation";
			let name = base;
			if (state.manifest.order.includes(name)) {
				let i = 2;
				while (state.manifest.order.includes(`${base} ${i}`)) i++;
				name = `${base} ${i}`;
			}
			state.manifest.order.push(name);
			state.manifest.active = name;
			state.profiles[name] = defaultProfileData();
		},
		renameProfile(state, action: PayloadAction<{ oldName: string; newName: string }>) {
			const { oldName, newName: raw } = action.payload;
			if (!state.manifest.order.includes(oldName)) return;
			const newName = raw.trim() || oldName;
			if (newName === oldName) return;

			let finalName = newName;
			if (state.manifest.order.includes(finalName)) {
				let i = 2;
				while (state.manifest.order.includes(`${newName} (${i})`)) i++;
				finalName = `${newName} (${i})`;
			}

			// Move data
			state.profiles[finalName] = state.profiles[oldName] ?? defaultProfileData();
			delete state.profiles[oldName];

			state.manifest.order = state.manifest.order.map((n) => (n === oldName ? finalName : n));
			if (state.manifest.active === oldName) state.manifest.active = finalName;
		},
		deleteProfile(state, action: PayloadAction<{ name: string }>) {
			const { name } = action.payload;
			if (!state.manifest.order.includes(name)) return;

			delete state.profiles[name];
			state.manifest.order = state.manifest.order.filter((n) => n !== name);
			if (state.manifest.order.length === 0) {
				state.manifest.order = [PROFILE_DEFAULT_NAME];
				state.manifest.active = PROFILE_DEFAULT_NAME;
				state.profiles[PROFILE_DEFAULT_NAME] = defaultProfileData();
			} else {
				state.manifest.active = state.manifest.order[0];
			}
		},

		// Profile data updates
		setDepartureTime(state, action: PayloadAction<string>) {
			const p = state.manifest.active;
			if (!state.profiles[p]) return;
			const v = action.payload.match(/^\d{1,2}:\d{2}$/) ? action.payload : state.profiles[p].departureTime;
			state.profiles[p].departureTime = v;
		},
		setIntervalToilettes(state, action: PayloadAction<number>) {
			const p = state.manifest.active;
			if (!state.profiles[p]) return;
			state.profiles[p].intervalToilettes = clamp(Math.round(action.payload || 0), 0, 240);
		},
		resetProfile(state) {
			const p = state.manifest.active;
			state.profiles[p] = defaultProfileData();
		},

		addStep(state) {
			const p = state.manifest.active;
			if (!state.profiles[p]) return;
			const id = `custom_${Date.now()}`;
			state.profiles[p].steps.push({ id, label: "Activité à faire", minutes: 15, min: 0, max: 600, enabled: true });
		},
		updateStep(state, action: PayloadAction<{ id: string; patch: Partial<Omit<Step, "id">> }>) {
			const p = state.manifest.active;
			const s = state.profiles[p]?.steps;
			if (!s) return;
			const idx = s.findIndex((x) => x.id === action.payload.id);
			if (idx === -1) return;
			const cur = s[idx];
			const patch = action.payload.patch;
			s[idx] = {
				...cur,
				...patch,
				minutes: patch.minutes !== undefined ? clamp(Math.round(patch.minutes || 0), cur.min ?? 0, cur.max ?? 600) : cur.minutes,
			};
		},
		toggleStep(state, action: PayloadAction<{ id: string; enabled: boolean }>) {
			const p = state.manifest.active;
			const s = state.profiles[p]?.steps;
			if (!s) return;
			const idx = s.findIndex((x) => x.id === action.payload.id);
			if (idx === -1) return;
			s[idx].enabled = action.payload.enabled;
		},
		deleteStep(state, action: PayloadAction<{ id: string }>) {
			const p = state.manifest.active;
			const s = state.profiles[p]?.steps;
			if (!s) return;
			state.profiles[p].steps = s.filter((x) => x.id !== action.payload.id);
		},
		reorderSteps(state, action: PayloadAction<{ from: number; to: number }>) {
			const p = state.manifest.active;
			const s = state.profiles[p]?.steps;
			if (!s) return;
			const { from, to } = action.payload;
			const arr = [...s];
			const [moved] = arr.splice(from, 1);
			arr.splice(to, 0, moved);
			state.profiles[p].steps = arr;
		},
	},
});

const { setActiveProfile, addProfile, renameProfile, deleteProfile, setDepartureTime, setIntervalToilettes, resetProfile, addStep, updateStep, toggleStep, deleteStep, reorderSteps } = slice.actions;

const persistConfig = { key: STORAGE_NS, storage: AsyncStorage, version: 1 };
const store = configureStore({
	reducer: persistReducer(persistConfig, slice.reducer),
	middleware: (gDM) => gDM({ serializableCheck: false }),
});
const persistor = persistStore(store);
type AppDispatch = typeof store.dispatch;

// =============== Sélecteurs dérivés ===============
const useActiveProfile = () => {
	return useSelector((s: RootState) => {
		if (!s.manifest || !s.profiles) return { key: "", profile: defaultProfileData(), manifest: { active: "", order: [] } };

		const key = s.manifest.active;
		const profile = s.profiles[key] ?? defaultProfileData();
		return { key, profile, manifest: s.manifest };
	});
};

const useMetrics = () => {
	const { profile } = useActiveProfile();
  const { steps = [], intervalToilettes = 0, departureTime = "08:25" } = profile;

	const applies = useMemo(() => {
		const idxEat = steps.findIndex((s) => s.id === "eat");
		const idxT2 = steps.findIndex((s) => s.id === "toilette2");
		const eatEnabled = idxEat !== -1 && steps[idxEat].enabled !== false;
		const t2Enabled = idxT2 !== -1 && steps[idxT2].enabled !== false;
		return eatEnabled && t2Enabled && idxEat < idxT2;
	}, [steps]);

	const total = useMemo(() => {
		const sum = steps.reduce((acc, st) => acc + (st.enabled !== false ? st.minutes || 0 : 0), 0);
		return sum + (applies ? intervalToilettes || 0 : 0);
	}, [steps, applies, intervalToilettes]);

	const depStr = departureTime || "08:25";
	const dep = nextDateForTime(depStr);
	const now = new Date();
	const minUntilDep = Math.round((dep.getTime() - now.getTime()) / 60000);
	const slackMin = minUntilDep - total;

	const latestStartMinutes = timeToMinutes(depStr) - total;
	const latestStart = minutesToTime(latestStartMinutes);

	const latestStartDate = new Date(dep);
	latestStartDate.setMinutes(latestStartDate.getMinutes() - total);

	// progress bar on a rolling 8h window before departure
	const startWindow = new Date(dep);
	startWindow.setHours(startWindow.getHours() - 8);
	const totalWindow = dep.getTime() - startWindow.getTime();
	const elapsed = Math.max(0, Math.min(dep.getTime() - now.getTime(), totalWindow));
	const pct = clamp(Math.round((elapsed / totalWindow) * 100), 0, 100);

	return {
		applies,
		total,
		totalLabel: minutesToHm(total),
		totalMinutesLabel: `${total} minutes`,
		latestStart,
		latestStartRel: relativeFromNow(latestStartDate),
		slackLabel: minutesToHm(slackMin),
		slackPositive: slackMin >= 0,
		countdown: `${pad(Math.floor(Math.max(0, (dep.getTime() - now.getTime()) / 1000) / 3600))}:${pad(Math.floor((Math.max(0, (dep.getTime() - now.getTime()) / 1000) % 3600) / 60))}`,
		countdownPct: pct,
		dep,
	};
};

// =============== Composants UI ===============
const SectionTitle = ({ title, badge }: { title: string; badge?: string }) => (
	<View style={styles.sectionHeader}>
		<Text style={styles.h5}>{title}</Text>
		{badge ? (
			<View style={styles.badge}>
				<Text style={styles.badgeText}>{badge}</Text>
			</View>
		) : null}
	</View>
);

const MetricCard = ({ title, main, sub, color }: { title: string; main: string; sub: string; color?: "success" | "danger" | undefined }) => (
	<View style={styles.metric}>
		<Text style={styles.metricTitle}>{title}</Text>
		<Text style={[styles.metricMain, color === "success" && { color: COLORS.success }, color === "danger" && { color: COLORS.danger }]}>{main}</Text>
		<Text style={styles.subtle}>{sub}</Text>
	</View>
);

const ProfileTabs = () => {
	const dispatch = useDispatch<AppDispatch>();
	const { manifest, key } = useActiveProfile();
	return (
		<View>
			<ScrollView horizontal showsHorizontalScrollIndicator={false} contentContainerStyle={styles.tabsRow}>
				{manifest.order.map((name) => (
					<TouchableOpacity key={name} onPress={() => dispatch(setActiveProfile(name))} style={[styles.tab, name === key && styles.tabActive]}>
						<Text style={[styles.tabText, name === key && styles.tabTextActive]} numberOfLines={1}>
							{name}
						</Text>
					</TouchableOpacity>
				))}
			</ScrollView>
			<View style={styles.tabBtns}>
				<SmallBtn label="Nouvel onglet" onPress={() => dispatch(addProfile(undefined))} />
				<SmallBtn
					label="Renommer"
					onPress={() => {
						const newName = promptLike("Nouveau nom de l’onglet :", key);
						if (newName) dispatch(renameProfile({ oldName: key, newName }));
					}}
				/>
				<SmallBtn
					label="Supprimer"
					variant="danger"
					onPress={() => {
						const ok = confirmLike(`Supprimer l’onglet « ${key} » ?`);
						if (ok) dispatch(deleteProfile({ name: key }));
					}}
				/>
			</View>
		</View>
	);
};

// Simplissimes prompts (pour Expo Go)
const promptLike = (message: string, _default?: string) => {
	// Vous pouvez brancher un vrai modal ici si besoin.
	// Pour rester single-file, on ouvre une saisie via prompt Web si dispo, sinon rien.
	// @ts-ignore
	if (typeof window !== "undefined" && window?.prompt) {
		// Expo web
		// @ts-ignore
		return window.prompt(message, _default ?? "");
	}
	return _default ?? "";
};
const confirmLike = (message: string) => {
	// @ts-ignore
	if (typeof window !== "undefined" && window?.confirm) {
		// @ts-ignore
		return window.confirm(message);
	}
	return true;
};

const SmallBtn = ({ label, onPress, variant = "default" }: { label: string; onPress: () => void; variant?: "default" | "danger" }) => (
	<TouchableOpacity onPress={onPress} style={[styles.smallBtn, variant === "danger" && styles.smallBtnDanger]}>
		<Text style={[styles.smallBtnText, variant === "danger" && { color: COLORS.danger }]}>{label}</Text>
	</TouchableOpacity>
);

const StepRow = ({ item, drag, isActive }: RenderItemParams<Step>) => {
	const dispatch = useDispatch<AppDispatch>();
	return (
		<ScaleDecorator>
			<View style={[styles.stepItem, isActive && { opacity: 0.6 }]}>
				<TouchableOpacity onLongPress={drag} style={styles.handle} accessibilityLabel="Glisser pour réordonner">
					<Text style={styles.handleText}>≡</Text>
				</TouchableOpacity>

				<TouchableOpacity onPress={() => dispatch(toggleStep({ id: item.id, enabled: !item.enabled }))} style={styles.checkbox}>
					<View style={[styles.checkboxBox, item.enabled && styles.checkboxBoxChecked]} />
				</TouchableOpacity>

				<View style={styles.nameWrap}>
					<TextInput value={item.label} onChangeText={(txt) => dispatch(updateStep({ id: item.id, patch: { label: txt || "Activité" } }))} style={styles.input} placeholder="Activité" />
				</View>

				<View style={styles.minutesWrap}>
					<View style={styles.inputGroup}>
						<TextInput
							value={String(item.minutes)}
							onChangeText={(txt) => {
								const v = Number(txt.replace(/[^\d]/g, "") || 0);
								dispatch(updateStep({ id: item.id, patch: { minutes: clamp(v, item.min ?? 0, item.max ?? 600) } }));
							}}
							keyboardType="numeric"
							style={[styles.input, { textAlign: "right" }]}
							accessibilityLabel={`Minutes pour ${item.label}`}
						/>
						<View style={styles.inputSuffix}>
							<Text style={styles.subtle}>min</Text>
						</View>
					</View>
				</View>

				<TouchableOpacity onPress={() => dispatch(deleteStep({ id: item.id }))} style={styles.delBtn}>
					<Text style={{ color: COLORS.danger }}>Supprimer</Text>
				</TouchableOpacity>
			</View>
		</ScaleDecorator>
	);
};

// =============== Écran principal ===============
const Screen = () => {
	const dispatch = useDispatch<AppDispatch>();
	const { profile } = useActiveProfile();
	const { steps, intervalToilettes, departureTime } = profile;

	const metrics = useMetrics();
	const [tick, setTick] = useState(0);
	useEffect(() => {
		const id = setInterval(() => setTick((t) => t + 1), 1000);
		return () => clearInterval(id);
	}, []);

	// Progress bar largeur (recalculée via metrics.countdownPct et tick)
	const pct = metrics.countdownPct;

	// Saisie de l'heure HH:MM
	const onTimeChange = (txt: string) => {
		const v = txt.replace(/[^\d:]/g, "").slice(0, 5);
		const parts = v.split(":");
		let hh = parts[0] || "";
		let mm = parts[1] || "";
		if (hh.length > 2) {
			mm = hh.slice(2) + (mm || "");
			hh = hh.slice(0, 2);
		}
		if (mm.length > 2) mm = mm.slice(0, 2);
		const norm = [hh, mm].filter(Boolean).join(":");
		dispatch(setDepartureTime(norm));
	};

  if (!profile?.steps) return <Text>Chargement…</Text>;

  return (
		<KeyboardAvoidingView style={{ flex: 1 }} behavior={Platform.OS === "ios" ? "padding" : undefined}>
			<ScrollView style={{ flex: 1 }} contentContainerStyle={{ padding: 16 }}>
				<View style={styles.header}>
					<Text style={styles.h3}>Calculateur « Avant de partir »</Text>
					<Text style={styles.subtle}>Durées modifiables, ordre réorganisable par poignée, calculs en direct.</Text>
				</View>

				<View style={styles.card}>
					{/* Onglets de profils */}
					<ProfileTabs />

					{/* Ligne départ / compte à rebours / reset */}
					<View style={styles.row}>
						<View style={styles.col}>
							<Text style={styles.label}>Heure de départ</Text>
							<TextInput
								value={departureTime}
								onChangeText={onTimeChange}
								placeholder="08:25"
								style={[styles.input, styles.timeInput]}
								keyboardType="numbers-and-punctuation"
								maxLength={5}
							/>
						</View>
						<View style={styles.col}>
							<View style={styles.metricBox}>
								<View style={styles.spaceBetween}>
									<Text style={styles.semibold}>Départ dans</Text>
									<Text style={styles.bold}>{metrics.countdown}</Text>
								</View>
								<View style={styles.progress}>
									<View style={[styles.progressBar, { width: `${pct}%` }]} />
								</View>
							</View>
						</View>
						<View style={[styles.colAuto, { alignItems: "flex-end" }]}>
							<TouchableOpacity onPress={() => dispatch(resetProfile())} style={styles.btnOutline}>
								<Text>Réinitialiser</Text>
							</TouchableOpacity>
						</View>
					</View>

					{/* Étapes */}
					<SectionTitle title="Étapes de la routine" badge="Glisser-déposer avec la poignée" />

					<DraggableFlatList
						data={steps}
						keyExtractor={(it) => it.id}
						containerStyle={{ gap: 8 }}
						onDragEnd={({ from, to }) => dispatch(reorderSteps({ from, to }))}
						renderItem={(params) => <StepRow {...params} />}
					/>

					<View style={{ marginVertical: 12 }}>
						<TouchableOpacity onPress={() => dispatch(addStep())} style={styles.btnAdd}>
							<Text style={{ color: "#0d6efd" }}>Ajouter</Text>
						</TouchableOpacity>
					</View>

					{/* Intervalle entre Manger et Toilette 2 */}
					<View style={styles.row}>
						<View style={[styles.col, { maxWidth: 420 }]}>
							<Text style={styles.label}>Intervalle entre « Manger » et « Toilette 2 »</Text>
							<View style={styles.inputGroup}>
								<TextInput
									value={String(intervalToilettes)}
									onChangeText={(txt) => {
										const v = Number(txt.replace(/[^\d]/g, "") || 0);
										dispatch(setIntervalToilettes(clamp(v, 0, 240)));
									}}
									keyboardType="numeric"
									style={[styles.input, { textAlign: "right" }]}
								/>
								<View style={styles.inputSuffix}>
									<Text style={styles.subtle}>min</Text>
								</View>
							</View>
							<Text style={styles.formText}>
								Pris en compte dans la durée totale{" "}
								<Text style={{ fontWeight: "600", color: metrics.applies ? COLORS.success : COLORS.danger }}>
									{metrics.applies ? "(appliqué)" : "(non appliqué car ordre/état ne le permet pas)"}
								</Text>
								.
							</Text>
						</View>
					</View>

					{/* Métriques */}
					<View style={styles.metricsRow}>
						<MetricCard title="Durée totale" main={metrics.totalLabel} sub={metrics.totalMinutesLabel} />
						<MetricCard title="Début au plus tard" main={metrics.latestStart} sub={metrics.latestStartRel} />
						<MetricCard
							title="Marge"
							main={metrics.slackLabel}
							sub={metrics.slackPositive ? "Temps disponible si vous commencez maintenant." : "Retard à rattraper si vous commencez maintenant."}
							color={metrics.slackPositive ? "success" : "danger"}
						/>
					</View>

					<Text style={[styles.subtle, { textAlign: "center", marginTop: 12 }]}>
						Astuce : cochez/décochez pour inclure une étape. « Ajouter » crée une activité de 15 min. L’intervalle est ajouté seulement si « Manger » est avant « Toilette 2 ».
					</Text>
				</View>
			</ScrollView>
		</KeyboardAvoidingView>
	);
};

// =============== App Root ===============

export default function App() {
	return (
		<GestureHandlerRootView style={{ flex: 1 }}>
			<SafeAreaProvider>
				<Provider store={store}>
					<PersistGate persistor={persistor} loading={null}>
						<SafeAreaView style={{ flex: 1, backgroundColor: "#fff6d6" }}>
							<View style={styles.bg} />
							<Screen />
						</SafeAreaView>
					</PersistGate>
				</Provider>
			</SafeAreaProvider>
		</GestureHandlerRootView>
	);
}

// =============== Styles ===============
const styles = StyleSheet.create({
	bg: {
		...StyleSheet.absoluteFillObject,
		backgroundColor: "#fff6d6",
	},
	header: { alignItems: "center", marginVertical: 12 },
	h3: { fontSize: 18, fontWeight: "700", color: COLORS.text, marginBottom: 6 },
	h5: { fontSize: 16, fontWeight: "600", color: COLORS.text },
	subtle: { color: COLORS.subtle },
	card: {
		backgroundColor: "rgba(255,255,255,0.95)",
		borderWidth: 1,
		borderColor: COLORS.gray3,
		borderRadius: 14,
		padding: 12,
		shadowColor: "#000",
		shadowOpacity: 0.08,
		shadowRadius: 10,
		elevation: 2,
	},
	tabsRow: { gap: 8, paddingVertical: 4 },
	tab: { paddingVertical: 6, paddingHorizontal: 10, borderWidth: 1, borderColor: COLORS.gray3, borderRadius: 8, backgroundColor: "#fff" },
	tabActive: { backgroundColor: COLORS.gray1, borderColor: COLORS.gray3 },
	tabText: { color: "#495057", maxWidth: 180 },
	tabTextActive: { fontWeight: "700", color: COLORS.text },

	tabBtns: { flexDirection: "row", gap: 8, justifyContent: "flex-end", marginTop: 8 },
	smallBtn: { paddingVertical: 6, paddingHorizontal: 10, borderWidth: 1, borderColor: "#0d6efd", borderRadius: 8 },
	smallBtnDanger: { borderColor: COLORS.danger },
	smallBtnText: { color: "#0d6efd" },

	row: { flexDirection: "row", flexWrap: "wrap", gap: 12, alignItems: "flex-end", marginVertical: 8 },
	col: { flexGrow: 1, flexBasis: 160 },
	colAuto: { flexBasis: 120 },

	label: { fontWeight: "600", marginBottom: 6, color: COLORS.text },
	input: { borderWidth: 1, borderColor: COLORS.gray3, borderRadius: 8, paddingHorizontal: 10, paddingVertical: 8, backgroundColor: "#fff" },
	timeInput: { maxWidth: 120 },

	metricBox: { borderWidth: 1, borderStyle: "dashed", borderColor: COLORS.gray3, borderRadius: 10, padding: 10, backgroundColor: COLORS.gray1 },
	semibold: { fontWeight: "600", color: COLORS.text },
	bold: { fontWeight: "700", color: COLORS.text },
	spaceBetween: { flexDirection: "row", justifyContent: "space-between", alignItems: "center" },
	progress: { height: 8, backgroundColor: COLORS.gray2, borderRadius: 6, marginTop: 8, overflow: "hidden" },
	progressBar: { height: "100%", backgroundColor: COLORS.warm2 },

	sectionHeader: { flexDirection: "row", alignItems: "center", justifyContent: "space-between", marginTop: 8, marginBottom: 6 },
	badge: { paddingVertical: 4, paddingHorizontal: 8, borderRadius: 999, backgroundColor: COLORS.warm1 },
	badgeText: { color: "#111", fontWeight: "600" },

	stepItem: {
		backgroundColor: COLORS.gray1,
		borderWidth: 1,
		borderColor: COLORS.gray3,
		borderRadius: 10,
		padding: 8,
		flexDirection: "row",
		alignItems: "center",
		gap: 8,
	},
	handle: { width: 32, alignItems: "center", justifyContent: "center" },
	handleText: { fontSize: 18, color: COLORS.subtle },

	checkbox: { padding: 4 },
	checkboxBox: { width: 18, height: 18, borderWidth: 1, borderColor: COLORS.gray3, borderRadius: 4, backgroundColor: "#fff" },
	checkboxBoxChecked: { backgroundColor: "#0d6efd", borderColor: "#0d6efd" },

	nameWrap: { flex: 1, minWidth: 120 },
	minutesWrap: { width: 110 },

	inputGroup: { flexDirection: "row", alignItems: "center" },
	inputSuffix: { paddingHorizontal: 8 },

	delBtn: { paddingVertical: 6, paddingHorizontal: 10, borderWidth: 1, borderColor: COLORS.danger, borderRadius: 8 },

	formText: { marginTop: 6, color: COLORS.subtle },

	metricsRow: { flexDirection: "row", flexWrap: "wrap", gap: 12, marginTop: 8 },
	metric: { flexGrow: 1, flexBasis: 160, borderWidth: 1, borderStyle: "dashed", borderColor: COLORS.gray3, borderRadius: 10, padding: 12, backgroundColor: COLORS.gray1 },
	metricTitle: { fontWeight: "600", color: COLORS.text, marginBottom: 4 },
	metricMain: { fontWeight: "700", fontSize: 18, color: COLORS.text },
});

# ./React-Native/organisation_le_matin/App.tsx

# ./React-Native/organisation_le_matin/dist/assetmap.json
{}
# ./React-Native/organisation_le_matin/dist/assetmap.json

# ./React-Native/organisation_le_matin/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"ios":{"bundle":"_expo/static/js/ios/index-fc344010622712ff4738dad4b24d6c61.hbc","assets":[]},"android":{"bundle":"_expo/static/js/android/index-7dee2f94e309af5ed28650324dc24adf.hbc","assets":[]}}}
# ./React-Native/organisation_le_matin/dist/metadata.json

# ./React-Native/organisation_le_matin/.expo/devices.json
{
  "devices": []
}

# ./React-Native/organisation_le_matin/.expo/devices.json

# ./React-Native/organisation_le_matin/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/organisation_le_matin/index.ts

# ./React-Native/organisation_le_matin/package.json
{
  "name": "organisation_le_matin",
  "version": "1.0.0",
  "main": "index.ts",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "@react-native-async-storage/async-storage": "2.1.2",
    "@reduxjs/toolkit": "^2.8.2",
    "expo": "~53.0.20",
    "expo-status-bar": "~2.2.3",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-native": "0.79.5",
    "react-native-draggable-flatlist": "^4.0.3",
    "react-native-gesture-handler": "~2.24.0",
    "react-native-reanimated": "~3.17.4",
    "react-native-safe-area-context": "^5.5.2",
    "react-redux": "^9.2.0",
    "redux-persist": "^6.0.0"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~19.0.10",
    "typescript": "~5.8.3"
  },
  "private": true
}

# ./React-Native/organisation_le_matin/package.json

# ./React-Native/organisation_le_matin/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/organisation_le_matin/tsconfig.json

# ./React-Native/pomodoro_react_native/app.json
{
  "expo": {
    "name": "pomodoro_react_native",
    "slug": "pomodoro_react_native",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/pomodoro.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/pomodoro.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/pomodoro.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/pomodoro.png"
    },
    "extra": {
      "eas": {
        "projectId": "cf2ff301-c63a-4614-b757-45792996c6c9"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    },
    "updates": {
      "url": "https://u.expo.dev/cf2ff301-c63a-4614-b757-45792996c6c9"
    }
  }
}

# ./React-Native/pomodoro_react_native/app.json

# ./React-Native/pomodoro_react_native/App.tsx
import React, { useEffect, useMemo, useRef, useState } from "react";
import { AppState, AppStateStatus, ImageBackground, Platform, StyleSheet, Text, View } from "react-native";
import { StatusBar } from "expo-status-bar";
import { LinearGradient } from "expo-linear-gradient";

// === Constantes métier ===
const H_START = 8;
const H_END = 22;
const TOTAL_MINUTES = (H_END - H_START) * 60;

// === Fonctions utilitaires (pures) ===
function two(n: number): string {
	return n < 10 ? `0${n}` : `${n}`;
}

function clampPassedMinutes(d: Date): number {
	const passed = (d.getHours() - H_START) * 60 + d.getMinutes();
	return Math.max(0, Math.min(TOTAL_MINUTES, passed));
}

function minutesToNextHalf(d: Date): number {
	const m = d.getMinutes();
	return (m < 30 ? 30 : 60) - m;
}

function halfHourStartLabel(d: Date): string {
	const h = d.getHours();
	const m = d.getMinutes() < 30 ? 0 : 30;
	return `${two(h)}h${two(m)}`;
}

function halfHourEndLabel(d: Date): string {
	const h = d.getHours();
	return d.getMinutes() < 30 ? `${two(h)}h30` : `${two(h + 1)}h00`;
}

function minutesSinceHalfStart(d: Date): number {
	return d.getMinutes() < 30 ? d.getMinutes() : d.getMinutes() - 30;
}

interface State {
	inRange: boolean;
	nextHalfInMin: number;
	passedMin: number;
	totalMin: number;
	remainingMin: number;
	halfStart: string;
	halfEnd: string;
	sinceHalfMin: number;
}

/**
 * Calcule toutes les valeurs d'affichage à partir d'une Date.
 */
function computeState(now: Date): State {
	const inRange = now.getHours() >= H_START && now.getHours() < H_END;
	const passed = clampPassedMinutes(now);
	const remaining = TOTAL_MINUTES - passed;

	const result: State = {
		inRange,
		nextHalfInMin: minutesToNextHalf(now),
		passedMin: passed,
		totalMin: TOTAL_MINUTES,
		remainingMin: remaining,
		halfStart: halfHourStartLabel(now),
		halfEnd: halfHourEndLabel(now),
		sinceHalfMin: minutesSinceHalfStart(now),
	};

	console.log("computeState @", now.toISOString(), result);
	return result;
}

// === Hook de tick aligné sur le début de minute ===
function useMinuteClock(): Date {
	const [now, setNow] = useState<Date>(() => {
		const d = new Date();
		console.log("useMinuteClock() init:", d.toISOString());
		return d;
	});

	const intervalRef = useRef<NodeJS.Timer | null>(null);
	const timeoutRef = useRef<NodeJS.Timeout | null>(null);

	useEffect(() => {
		function startIntervalAligned() {
			const d = new Date();
			const msToNextMinute = (60 - d.getSeconds()) * 1000 - d.getMilliseconds();
			console.log("startIntervalAligned: waiting", msToNextMinute, "ms");

			timeoutRef.current = setTimeout(() => {
				const tickTime = new Date();
				console.log("tick (aligned):", tickTime.toISOString());
				setNow(tickTime);

				intervalRef.current = setInterval(() => {
					const loopTick = new Date();
					console.log("tick (loop):", loopTick.toISOString());
					setNow(loopTick);
				}, 60_000);
			}, Math.max(0, msToNextMinute));
		}

		function clearTimers() {
			console.log("clearTimers");
			if (timeoutRef.current) clearTimeout(timeoutRef.current);
			if (intervalRef.current) clearInterval(intervalRef.current);
			timeoutRef.current = null;
			intervalRef.current = null;
		}

		startIntervalAligned();

		const sub = AppState.addEventListener("change", (state: AppStateStatus) => {
			console.log("AppState changed:", state);
			if (state === "active") {
				clearTimers();
				const resumed = new Date();
				console.log("resuming with time:", resumed.toISOString());
				setNow(resumed);
				startIntervalAligned();
			}
		});

		return () => {
			clearTimers();
			sub?.remove?.();
		};
	}, []);

	return now;
}

// === Composant principal (main) ===
export default function App(): JSX.Element {
	const [manualNow, setManualNow] = useState<Date | null>(null);
	const now = useMinuteClock();
	const effectiveNow = manualNow || now;

	useEffect(() => {
		if (manualNow) {
			const timer = setTimeout(() => setManualNow(null), 500); // réinitialise après 0.5s
			return () => clearTimeout(timer);
		}
	}, [manualNow]);

	const vm = useMemo(() => computeState(effectiveNow), [effectiveNow]);

	// console.log("App rendu initial");
	// console.log("App render @", now.toISOString(), "inRange =", vm.inRange);

	return (
		<View style={styles.screen}>
			<ImageBackground source={require("./assets/images/petit-palmier.jpg")} resizeMode="cover" style={StyleSheet.absoluteFill}>
				<LinearGradient colors={["rgba(160,230,255,0.7)", "rgba(168,230,207,0.7)"]} style={StyleSheet.absoluteFill} />
			</ImageBackground>

			<View style={styles.card}>
				<Text style={[styles.small, styles.muted]}>
					Heure de début : <Text style={styles.strong}>08h00</Text> — Heure de fin : <Text style={styles.strong}>22h00</Text>
				</Text>

				<View style={{ height: 12 }} />

				{vm.inRange ? (
					<>
						<Text style={styles.big}>{two(vm.nextHalfInMin)} min avant demi-heure</Text>

						<View style={styles.separator} />

						<Text style={styles.small}>Demi-heures passées : {Math.floor(vm.passedMin / 30)}</Text>
						<Text style={styles.small}>
							Temps passé : {Math.floor(vm.passedMin / 60)}h{two(vm.passedMin % 60)}
						</Text>
						<Text style={styles.small}>
							Temps restant : {Math.floor(vm.remainingMin / 60)}h{two(vm.remainingMin % 60)}
						</Text>

						<View style={styles.separator} />

						<Text style={styles.small}>
							Demi-heure en cours : {vm.halfStart} à {vm.halfEnd}
						</Text>
						<Text style={styles.small}>Temps écoulé depuis le début de cette demi-heure : {vm.sinceHalfMin} min</Text>
						<Text style={styles.small}>Temps restant dans cette demi-heure : {vm.nextHalfInMin} min</Text>
					</>
				) : (
					<Text style={styles.big}>Hors plage</Text>
				)}
			</View>

			<View style={styles.refreshContainer}>
				<Text onPress={() => setManualNow(new Date())} style={styles.refreshButton}>
					Refresh
				</Text>
			</View>
			<StatusBar style={Platform.OS === "ios" ? "dark" : "auto"} />
		</View>
	);
}

// === Styles ===
const styles = StyleSheet.create({
	screen: {
		flex: 1,
		alignItems: "center",
		justifyContent: "center",
	},
	card: {
		width: "90%",
		maxWidth: 400,
		backgroundColor: "rgba(255,255,255,0.6)",
		borderWidth: 5,
		borderColor: "#ff7f11",
		borderRadius: 8,
		padding: 20,
		shadowColor: "#000",
		shadowOpacity: 0.2,
		shadowRadius: 16,
		shadowOffset: { width: 0, height: 8 },
		elevation: 6,
	},
	big: {
		fontSize: 28,
		textAlign: "center",
	},
	small: {
		fontSize: 14,
		textAlign: "center",
	},
	strong: {
		fontWeight: "700",
	},
	muted: {
		opacity: 0.9,
	},
	separator: {
		height: 1,
		backgroundColor: "rgba(0,0,0,0.15)",
		marginVertical: 10,
	},
	refreshContainer: {
		marginTop: 20,
	},
	refreshButton: {
		backgroundColor: "#0d6efd", // Bootstrap Primary
		color: "#fff",
		paddingVertical: 8,
		paddingHorizontal: 16,
		borderRadius: 4,
		fontWeight: "600",
		textAlign: "center",
		overflow: "hidden",
	},
});

# ./React-Native/pomodoro_react_native/App.tsx

# ./React-Native/pomodoro_react_native/dist/assetmap.json
{"bac24ade2183a95504103923abaec759":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\pomodoro_react_native\\2\\pomodoro_react_native\\assets\\images","httpServerLocation":"/assets/assets/images","width":1000,"height":1000,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\pomodoro_react_native\\2\\pomodoro_react_native\\assets\\images\\petit-palmier.jpg"],"hash":"bac24ade2183a95504103923abaec759","name":"petit-palmier","type":"jpg","fileHashes":["bac24ade2183a95504103923abaec759"]}}
# ./React-Native/pomodoro_react_native/dist/assetmap.json

# ./React-Native/pomodoro_react_native/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"ios":{"bundle":"_expo/static/js/ios/index-89e3f0ce59f536eea6126e9ae67cace5.hbc","assets":[{"path":"assets\\bac24ade2183a95504103923abaec759","ext":"jpg"}]},"android":{"bundle":"_expo/static/js/android/index-1338468cea07f43d0cfcdbcab9d7db26.hbc","assets":[{"path":"assets\\bac24ade2183a95504103923abaec759","ext":"jpg"}]}}}
# ./React-Native/pomodoro_react_native/dist/metadata.json

# ./React-Native/pomodoro_react_native/.expo/devices.json
{
  "devices": []
}

# ./React-Native/pomodoro_react_native/.expo/devices.json

# ./React-Native/pomodoro_react_native/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/pomodoro_react_native/index.ts

# ./React-Native/pomodoro_react_native/package.json
{
  "name": "pomodoro_react_native",
  "version": "1.0.0",
  "main": "index.ts",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "expo": "~53.0.20",
    "expo-linear-gradient": "^14.1.5",
    "expo-status-bar": "~2.2.3",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-native": "0.79.5"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~19.0.10",
    "typescript": "~5.8.3"
  },
  "private": true
}

# ./React-Native/pomodoro_react_native/package.json

# ./React-Native/pomodoro_react_native/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/pomodoro_react_native/tsconfig.json

# ./React-Native/snake/app.json
{
  "expo": {
    "name": "snake",
    "slug": "snake",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/snake_sombre.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/snake_sombre.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/snake_sombre.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/snake_sombre.png"
    },
    "extra": {
      "eas": {
        "projectId": "7cb9f53a-d3ff-4013-b939-57759871ed72"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    },
    "updates": {
      "url": "https://u.expo.dev/7cb9f53a-d3ff-4013-b939-57759871ed72"
    }
  }
}

# ./React-Native/snake/app.json

# ./React-Native/snake/App.tsx
// App.tsx
import React, { useEffect, useMemo, useRef, useState } from "react";
import { View, Text, StyleSheet, Pressable, TextInput, Modal, useWindowDimensions, PanResponder, GestureResponderEvent, PanResponderGestureState, Platform, Animated } from "react-native";
import { StatusBar } from "expo-status-bar";
import { SafeAreaProvider, SafeAreaView } from "react-native-safe-area-context";

/**
 * Portage RN du Snake "10 niveaux" + menu burger gauche + SafeArea.
 * - Grille 24x24
 * - 10 niveaux d'obstacles
 * - 5 pommes / niveau
 * - Vitesse par niveau
 * - Gestes (swipe) + D-pad
 * - Panneau HUD/contrôles dans un tiroir gauche, se cache après action
 */
type Point = { x: number; y: number };

// === Constantes & config ===
const GRID = 24;
const TARGET_PER_LEVEL = 5;
const SPEEDS = [200, 180, 165, 150, 135, 120, 105, 95, 85, 75]; // ms

// === Helpers ===
const key = (x: number, y: number) => `${x},${y}`;
const unkey = (k: string): [number, number] => k.split(",").map(Number) as [number, number];
const inBounds = (x: number, y: number) => x >= 0 && y >= 0 && x < GRID && y < GRID;
const clampLevelIndex = (i: number) => Math.max(0, Math.min(9, i));
const isOpposite = (a: Point, b: Point) => a.x === -b.x && a.y === -b.y;
const mulberry32 = (seed: number) => () => {
	let t = (seed += 0x6d2b79f5);
	t = Math.imul(t ^ (t >>> 15), t | 1);
	t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
	return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
};

// === Styles couleur ===
const COLORS = {
	bg: "#0f172a",
	board: "#0b1220",
	grid: "#0f1b33",
	text: "#e2e8f0",
	sub: "#94a3b8",
	obstacle: "#334155",
	snakeHead: "#22c55e",
	snakeBody: "#16a34a",
	food: "#ef4444",
	card: "#0b1220",
	cardBorder: "#1f2a44",
	badgePrimary: "#2563eb",
	badgeSuccess: "#16a34a",
	badgeSecondary: "#64748b",
	progressBg: "#0f172a",
	progressFgStart: "#22c55e",
	progressFgEnd: "#16a34a",
	btn: "#1f2a44",
	overlay: "rgba(0,0,0,0.45)",
};

// === Composant principal ===
export default function App() {
	const { width, height } = useWindowDimensions();
	const styles = useMemo(() => createStyles(width), [width]);

	// Réfs runtime
	const snakeRef = useRef<Point[]>([]);
	const dirRef = useRef<Point>({ x: 1, y: 0 });
	const nextDirRef = useRef<Point>({ x: 1, y: 0 });
	const foodRef = useRef<Point>({ x: 0, y: 0 });
	const obstaclesRef = useRef<Set<string>>(new Set());
	const levelIdxRef = useRef(0);
	const foodsEatenRef = useRef(0);
	const scoreRef = useRef(0);
	const runningRef = useRef(false);
	const loopRef = useRef<ReturnType<typeof setInterval> | null>(null);

	// État UI
	const [hud, setHud] = useState({ level: 1, score: 0, speed: SPEEDS[0], eaten: 0 });
	const [tick, setTick] = useState(0);
	const [levelInput, setLevelInput] = useState("1");

	// Modale fin de niveau / game over
	const [modal, setModal] = useState<{ visible: boolean; title: string; message: string; showRestart: boolean }>({
		visible: false,
		title: "",
		message: "",
		showRestart: false,
	});

	// Mise à l'échelle du plateau
	const boardSize = Math.min(width - 24, 520);
	const cell = boardSize / GRID;

	// Gestes: swipe
	const panResponder = useRef(
		PanResponder.create({
			onMoveShouldSetPanResponder: (_, g) => Math.abs(g.dx) > 10 || Math.abs(g.dy) > 10,
			onPanResponderRelease: (_e: GestureResponderEvent, g: PanResponderGestureState) => {
				const { dx, dy } = g;
				if (Math.abs(dx) < 16 && Math.abs(dy) < 16) return;
				const absX = Math.abs(dx);
				const absY = Math.abs(dy);
				const current = dirRef.current;
				let d: Point | null = null;
				if (absX > absY) d = dx > 0 ? { x: 1, y: 0 } : { x: -1, y: 0 };
				else d = dy > 0 ? { x: 0, y: 1 } : { x: 0, y: -1 };
				if (!d) return;
				if (snakeRef.current.length > 1 && isOpposite(d, current)) return;
				nextDirRef.current = d;
			},
		})
	).current;

	// === API Jeu ===
	const syncHUD = () => {
		setHud({
			level: levelIdxRef.current + 1,
			score: scoreRef.current,
			speed: SPEEDS[levelIdxRef.current] ?? 0,
			eaten: foodsEatenRef.current,
		});
	};

	const popup = (title: string, message: string, showRestart: boolean) => {
		setModal({ visible: true, title, message, showRestart });
	};

	const stopLoop = () => {
		if (loopRef.current) {
			clearInterval(loopRef.current);
			loopRef.current = null;
		}
	};

	const startLoop = () => {
		stopLoop();
		const spd = SPEEDS[levelIdxRef.current] ?? 120;
		loopRef.current = setInterval(() => {
			gameLoop();
		}, spd);
	};

	const togglePause = () => {
		if (!snakeRef.current.length) return;
		if (runningRef.current) {
			runningRef.current = false;
			stopLoop();
		} else {
			runningRef.current = true;
			startLoop();
		}
	};

	const startLevelAt = (idx: number) => {
		runningRef.current = true;
		foodsEatenRef.current = 0;
		const cx = Math.floor(GRID / 2);
		const cy = Math.floor(GRID / 2);
		snakeRef.current = [
			{ x: cx + 1, y: cy },
			{ x: cx, y: cy },
			{ x: cx - 1, y: cy },
		];
		dirRef.current = { x: 1, y: 0 };
		nextDirRef.current = { x: 1, y: 0 };
		obstaclesRef.current = buildLevel(idx);
		placeFood();
		syncHUD();
		setTick((t) => t + 1);
	};

	const startGame = (startLevel?: number) => {
		stopLoop();
		scoreRef.current = 0;
		const chosenLevel = startLevel ?? (Number(levelInput) || 1);
		levelIdxRef.current = clampLevelIndex(chosenLevel - 1);
		startLevelAt(levelIdxRef.current);
		startLoop();
	};

	const nextLevel = () => {
		if (levelIdxRef.current < 9) {
			levelIdxRef.current += 1;
			startLevelAt(levelIdxRef.current);
			popup(`Niveau ${levelIdxRef.current} terminé`, `Passage au niveau ${levelIdxRef.current + 1}.`, false);
		} else {
			runningRef.current = false;
			stopLoop();
			popup("Victoire", `Vous avez terminé les 10 niveaux. Score: ${scoreRef.current}.`, true);
		}
	};

	const gameOver = (msg: string) => {
		runningRef.current = false;
		stopLoop();
		popup("Game Over", `${msg}. Score: ${scoreRef.current}.`, true);
	};

	const placeFood = () => {
		const occupied = new Set<string>(obstaclesRef.current);
		snakeRef.current.forEach((s) => occupied.add(key(s.x, s.y)));
		const free: Point[] = [];
		for (let y = 0; y < GRID; y++) {
			for (let x = 0; x < GRID; x++) {
				const k = key(x, y);
				if (!occupied.has(k)) free.push({ x, y });
			}
		}
		if (!free.length) return gameOver("Plus de place pour la nourriture");
		foodRef.current = free[Math.floor(Math.random() * free.length)];
	};

	const gameLoop = () => {
		if (!runningRef.current) return;
		dirRef.current = nextDirRef.current;
		const head: Point = { x: snakeRef.current[0].x + dirRef.current.x, y: snakeRef.current[0].y + dirRef.current.y };

		if (!inBounds(head.x, head.y)) return gameOver("Collision avec le mur");
		if (obstaclesRef.current.has(key(head.x, head.y))) return gameOver("Collision avec un obstacle");
		for (let i = 0; i < snakeRef.current.length; i++) {
			if (snakeRef.current[i].x === head.x && snakeRef.current[i].y === head.y) return gameOver("Collision avec votre queue");
		}

		snakeRef.current.unshift(head);

		if (head.x === foodRef.current.x && head.y === foodRef.current.y) {
			scoreRef.current += 10;
			foodsEatenRef.current += 1;
			if (foodsEatenRef.current >= TARGET_PER_LEVEL) {
				syncHUD();
				setTick((t) => t + 1);
				return nextLevel();
			}
			placeFood();
		} else {
			snakeRef.current.pop();
		}

		syncHUD();
		setTick((t) => t + 1);
	};

	// Niveaux d’obstacles
	function buildLevel(idx: number): Set<string> {
		const S = new Set<string>();
		const add = (x: number, y: number) => {
			if (inBounds(x, y)) S.add(key(x, y));
		};
		const ring = (m: number) => {
			for (let x = m; x < GRID - m; x++) {
				add(x, m);
				add(x, GRID - 1 - m);
			}
			for (let y = m; y < GRID - m; y++) {
				add(m, y);
				add(GRID - 1 - m, y);
			}
		};
		switch (idx + 1) {
			case 1:
				break;
			case 2:
				ring(5);
				for (let i = 10; i <= 13; i++) {
					S.delete(key(i, 5));
					S.delete(key(i, GRID - 1 - 5));
				}
				break;
			case 3: {
				const c = Math.floor(GRID / 2);
				for (let i = 4; i < GRID - 4; i++) {
					add(c, i);
					add(i, c);
				}
				S.delete(key(c, c));
				break;
			}
			case 4: {
				const x1 = 7,
					x2 = GRID - 8;
				for (let y = 2; y < GRID - 2; y++) {
					add(x1, y);
					add(x2, y);
				}
				for (let y = 10; y <= 13; y++) {
					S.delete(key(x1, y));
					S.delete(key(x2, y));
				}
				break;
			}
			case 5:
				for (let y = 1; y <= 4; y++) for (let x = 1; x <= 4; x++) add(x, y);
				for (let y = GRID - 5; y <= GRID - 2; y++) for (let x = 1; x <= 4; x++) add(x, y);
				for (let y = 1; y <= 4; y++) for (let x = GRID - 5; x <= GRID - 2; x++) add(x, y);
				for (let y = GRID - 5; y <= GRID - 2; y++) for (let x = GRID - 5; x <= GRID - 2; x++) add(x, y);
				break;
			case 6:
				for (let i = 3; i < GRID - 3; i += 2) add(i, i);
				break;
			case 7:
				ring(0);
				for (let x = 10; x <= 13; x++) {
					S.delete(key(x, 0));
					S.delete(key(x, GRID - 1));
				}
				break;
			case 8:
				for (let y = 3; y < GRID; y += 4) {
					for (let x = 2; x < GRID - 2; x++) add(x, y);
					for (let x = 9; x <= 12; x++) S.delete(key(x, y));
				}
				break;
			case 9: {
				const rnd = mulberry32(42);
				let placed = 0;
				while (placed < 40) {
					const x = Math.floor(rnd() * GRID),
						y = Math.floor(rnd() * GRID);
					const center = Math.abs(x - Math.floor(GRID / 2)) + Math.abs(y - Math.floor(GRID / 2));
					if (center < 4) continue;
					add(x, y);
					placed++;
				}
				break;
			}
			case 10:
				for (let y = 2; y < GRID - 2; y += 2) {
					for (let x = 1; x < GRID - 1; x++) add(x, y);
					const gap = y % 4 === 0 ? 4 : GRID - 5;
					for (let dx = 0; dx < 3; dx++) S.delete(key(gap + dx, y));
				}
				break;
		}
		const cx = Math.floor(GRID / 2),
			cy = Math.floor(GRID / 2);
		[key(cx, cy), key(cx + 1, cy), key(cx - 1, cy), key(cx, cy + 1), key(cx, cy - 1)].forEach((k) => S.delete(k));
		return S;
	}

	// Nettoyage
	useEffect(() => {
		return () => stopLoop();
	}, []);

	// Ensembles pour lookup O(1)
	const snakeSet = useMemo(() => new Set(snakeRef.current.map((s) => key(s.x, s.y))), [tick]);
	const headKey = useMemo(() => (snakeRef.current[0] ? key(snakeRef.current[0].x, snakeRef.current[0].y) : ""), [tick]);

	// Rendu cellule
	const renderCell = (x: number, y: number) => {
		const k = key(x, y);
		let bg = COLORS.board;
		if (obstaclesRef.current.has(k)) bg = COLORS.obstacle;
		if (k === key(foodRef.current.x, foodRef.current.y)) bg = COLORS.food;
		if (snakeSet.has(k)) bg = k === headKey ? COLORS.snakeHead : COLORS.snakeBody;
		return (
			<View
				key={k}
				style={{
					width: cell,
					height: cell,
					backgroundColor: bg,
					borderRightWidth: 0.5,
					borderBottomWidth: 0.5,
					borderColor: COLORS.grid,
				}}
			/>
		);
	};

	// Direction via D-pad
	const applyDir = (d: Point) => {
		const current = dirRef.current;
		if (snakeRef.current.length > 1 && isOpposite(d, current)) return;
		nextDirRef.current = d;
	};

	// === Menu burger (tiroir) ===
	const [menuOpen, setMenuOpen] = useState(false);
	const drawerWidth = Math.min(width * 0.82, 420);
	const drawerTranslate = useRef(new Animated.Value(-drawerWidth)).current;

	const openMenu = () => {
		setMenuOpen(true);
		Animated.timing(drawerTranslate, { toValue: 0, duration: 220, useNativeDriver: true }).start();
	};
	const closeMenu = () => {
		Animated.timing(drawerTranslate, { toValue: -drawerWidth, duration: 220, useNativeDriver: true }).start(() => setMenuOpen(false));
	};
	const toggleMenu = () => (menuOpen ? closeMenu() : openMenu());
	const withAutoClose = (fn: () => void) => () => {
		fn();
		closeMenu();
	};
	useEffect(() => {
		if (!menuOpen) drawerTranslate.setValue(-drawerWidth);
	}, [drawerWidth, menuOpen, drawerTranslate]);

	// === UI ===
	return (
		<SafeAreaProvider>
			<SafeAreaView style={[styles.safe, { backgroundColor: COLORS.bg }]} edges={["top", "left", "right"]}>
				<StatusBar style="light" />

				{/* Bouton burger */}
				<View style={styles.burgerWrap}>
					<Pressable onPress={toggleMenu} style={styles.burgerBtn} accessibilityRole="button" accessibilityLabel="Ouvrir le menu">
						<View style={styles.burgerBar} />
						<View style={styles.burgerBar} />
						<View style={styles.burgerBar} />
					</Pressable>
				</View>

				{/* Contenu principal: plateau + d-pad */}
				<View style={styles.container}>
					<View style={styles.left}>
						<View style={{ width: boardSize, aspectRatio: 1, backgroundColor: COLORS.board }} {...panResponder.panHandlers}>
							<View style={{ flexDirection: "row", flexWrap: "wrap" }}>{Array.from({ length: GRID * GRID }).map((_, i) => renderCell(i % GRID, Math.floor(i / GRID)))}</View>
						</View>
						<Text style={styles.legend}>Gestes: swipe. D-pad ci-dessous. 5 pommes par niveau.</Text>
						<View style={[styles.dpadRow]}>
							<Pressable style={styles.dpadBtn} onPress={() => applyDir({ x: 0, y: -1 })}>
								<Text style={styles.btnTxt}>↑</Text>
							</Pressable>
						</View>
						<View style={[styles.dpadRow, { justifyContent: "center" }]}>
							<Pressable style={styles.dpadBtn} onPress={() => applyDir({ x: -1, y: 0 })}>
								<Text style={styles.btnTxt}>←</Text>
							</Pressable>
							<Pressable style={styles.dpadBtn} onPress={() => applyDir({ x: 0, y: 1 })}>
								<Text style={styles.btnTxt}>↓</Text>
							</Pressable>
							<Pressable style={styles.dpadBtn} onPress={() => applyDir({ x: 1, y: 0 })}>
								<Text style={styles.btnTxt}>→</Text>
							</Pressable>
						</View>
					</View>
				</View>

				{/* Overlay pour fermer le menu */}
				{menuOpen && <Pressable style={styles.overlay} onPress={closeMenu} accessibilityLabel="Fermer le menu" />}

				{/* Tiroir gauche */}
				<Animated.View
					style={[
						styles.drawer,
						{
							width: drawerWidth,
							transform: [{ translateX: drawerTranslate }],
						},
					]}
					accessibilityViewIsModal
				>
					<SafeAreaView style={styles.drawerSafe} edges={["bottom"]}>
						<View style={styles.card}>
							<View style={styles.cardBody}>
								<View style={styles.hudRow}>
									<View style={[styles.badge, { backgroundColor: COLORS.badgePrimary }]}>
										<Text style={styles.badgeTxt}>Niveau {hud.level}/10</Text>
									</View>
									<View style={[styles.badge, { backgroundColor: COLORS.badgeSuccess }]}>
										<Text style={styles.badgeTxt}>Score {hud.score}</Text>
									</View>
									<View style={[styles.badge, { backgroundColor: COLORS.badgeSecondary }]}>
										<Text style={styles.badgeTxt}>Vitesse {hud.speed}ms</Text>
									</View>
								</View>

								<Text style={styles.text}>
									Objectif niveau: <Text style={styles.bold}>{TARGET_PER_LEVEL}</Text> pommes
								</Text>
								<View style={styles.progress}>
									<View style={[styles.progressBar, { width: `${Math.round((hud.eaten / TARGET_PER_LEVEL) * 100)}%` }]} />
								</View>

								<View style={styles.row}>
									<View style={{ flex: 1 }}>
										<Text style={[styles.label]}>Choisir le niveau (1–10)</Text>
										<TextInput
											value={levelInput}
											onChangeText={setLevelInput}
											keyboardType={Platform.select({ ios: "number-pad", android: "numeric" })}
											placeholder="1"
											placeholderTextColor={COLORS.sub}
											style={styles.input}
										/>
									</View>
									<Pressable
										style={[styles.btn, styles.btnOutlinePrimary]}
										onPress={withAutoClose(() => {
											const desired = clampLevelIndex((parseInt(levelInput || "1", 10) || 1) - 1);
											stopLoop();
											scoreRef.current = 0;
											levelIdxRef.current = desired;
											startLevelAt(levelIdxRef.current);
											startLoop();
										})}
									>
										<Text style={styles.btnTxt}>Aller</Text>
									</Pressable>
								</View>

								<View style={styles.btnRow}>
									<Pressable style={[styles.btn, styles.btnSuccess]} onPress={withAutoClose(() => startGame())}>
										<Text style={styles.btnTxt}>Démarrer</Text>
									</Pressable>
									<Pressable style={[styles.btn, styles.btnWarn]} onPress={withAutoClose(() => runningRef.current && togglePause())}>
										<Text style={styles.btnTxt}>Pause</Text>
									</Pressable>
									<Pressable style={[styles.btn, styles.btnInfo]} onPress={withAutoClose(() => !runningRef.current && togglePause())}>
										<Text style={styles.btnTxt}>Reprendre</Text>
									</Pressable>
									<Pressable style={[styles.btn, styles.btnLight]} onPress={withAutoClose(() => startGame(1))}>
										<Text style={styles.btnTxt}>Recommencer</Text>
									</Pressable>
								</View>

								<Text style={[styles.text, { marginTop: 8, marginBottom: 4 }]}>Niveaux</Text>
								<Text style={styles.legend}>
									1: libre • 2: anneau central • 3: croix • 4: doubles murs • 5: coins • 6: diagonale • 7: clôture • 8: barres • 9: blocs • 10: labyrinthe
								</Text>
							</View>
						</View>
					</SafeAreaView>
				</Animated.View>

				{/* Modale fin */}
				<Modal transparent animationType="fade" visible={modal.visible} onRequestClose={() => setModal((m) => ({ ...m, visible: false }))}>
					<View style={styles.modalWrap}>
						<View style={styles.modalCard}>
							<Text style={[styles.title]}>{modal.title}</Text>
							<Text style={[styles.text, { marginTop: 8 }]}>{modal.message}</Text>
							<View style={[styles.btnRow, { marginTop: 16 }]}>
								{!modal.showRestart && (
									<Pressable style={[styles.btn, styles.btnPrimary]} onPress={() => setModal((m) => ({ ...m, visible: false }))}>
										<Text style={styles.btnTxt}>Continuer</Text>
									</Pressable>
								)}
								{modal.showRestart && (
									<Pressable
										style={[styles.btn, styles.btnLight]}
										onPress={() => {
											setModal((m) => ({ ...m, visible: false }));
											startGame(1);
										}}
									>
										<Text style={styles.btnTxt}>Recommencer</Text>
									</Pressable>
								)}
							</View>
						</View>
					</View>
				</Modal>
			</SafeAreaView>
		</SafeAreaProvider>
	);
}

// === Styles ===
const createStyles = (screenWidth: number) => {
	const isSmall = screenWidth < 380; // Galaxy A5 et petits écrans
	const isMedium = screenWidth >= 380 && screenWidth < 600;

	// Échelles typographiques
	const fs12 = isSmall ? 11 : 12;
	const fs13 = isSmall ? 12 : 13;
	const fs14 = isSmall ? 13 : 14;
	const fs18 = isSmall ? 16 : 18;

	// Boutons (taille relative + carrés)
	const dpadSizePct = isSmall ? "22%" : isMedium ? "18%" : "14%";

	// Carte/espacements relatifs
	const pad = isSmall ? 10 : 12;
	const gap = isSmall ? 8 : 12;

	return StyleSheet.create({
		safe: { flex: 1 },
		container: {
			flex: 1,
			paddingTop: 8,
			paddingHorizontal: pad,
			paddingBottom: 12,
			justifyContent: "flex-start",
			alignItems: "center",
		},

		// Plateau
		left: {
			width: "100%",
			alignItems: "center",
		},

		legend: { color: COLORS.sub, fontSize: fs12, marginTop: 8, textAlign: "center" },

		// Carte HUD (dans le tiroir)
		card: {
			backgroundColor: COLORS.card,
			borderWidth: 1,
			borderColor: COLORS.cardBorder,
			borderRadius: 10,
			width: "100%",
		},
		cardBody: { padding: pad },

		hudRow: {
			flexDirection: "row",
			justifyContent: "space-between",
			alignItems: "center",
			marginBottom: 8,
			flexWrap: "wrap",
			rowGap: 6,
		},
		badge: { paddingHorizontal: 8, paddingVertical: 6, borderRadius: 6, marginRight: 6, marginBottom: 6 },
		badgeTxt: { color: "#fff", fontWeight: "600", fontSize: fs13 },

		text: { color: COLORS.text, fontSize: fs14 },
		bold: { fontWeight: "700" },

		row: { flexDirection: "row", alignItems: "flex-end", gap: 8, marginTop: 8 },
		label: { color: COLORS.sub, fontSize: fs12, marginBottom: 4 },

		input: {
			backgroundColor: "#0e1527",
			borderColor: "#23304f",
			borderWidth: 1,
			borderRadius: 6,
			paddingHorizontal: 10,
			paddingVertical: 8,
			color: COLORS.text,
			width: "100%",
			minHeight: 40,
		},

		btnRow: {
			flexDirection: "row",
			flexWrap: "wrap",
			gap: 8,
			marginVertical: 12,
		},
		btn: {
			paddingHorizontal: 12,
			paddingVertical: 10,
			borderRadius: 8,
			backgroundColor: COLORS.btn,
			alignItems: "center",
			flexGrow: 1,
			flexBasis: isSmall ? "48%" : "auto",
			minWidth: isSmall ? undefined : 110,
		},
		btnTxt: { color: "#fff", fontWeight: "700", fontSize: fs13 },

		btnOutlinePrimary: { borderWidth: 1, borderColor: "#2563eb", backgroundColor: "transparent" },
		btnPrimary: { backgroundColor: "#2563eb" },
		btnSuccess: { backgroundColor: "#16a34a" },
		btnWarn: { backgroundColor: "#f59e0b" },
		btnInfo: { backgroundColor: "#0ea5e9" },
		btnLight: { backgroundColor: "transparent", borderWidth: 1, borderColor: "#e5e7eb" },

		progress: {
			height: isSmall ? 8 : 10,
			backgroundColor: COLORS.progressBg,
			borderRadius: 6,
			overflow: "hidden",
			marginTop: 6,
			width: "100%",
		},
		progressBar: { height: "100%", backgroundColor: COLORS.progressFgStart },

		// D-pad
		dpadRow: { flexDirection: "row", justifyContent: "center", gap: 8, marginTop: 8, width: "100%" },
		dpadBtn: {
			width: dpadSizePct,
			aspectRatio: 1,
			borderRadius: 8,
			borderWidth: 1,
			borderColor: "#3a4a6e",
			alignItems: "center",
			justifyContent: "center",
			backgroundColor: "#0e1527",
		},

		// Burger
		burgerWrap: {
			position: "absolute",
			top: 8,
			left: 8,
			zIndex: 50,
		},
		burgerBtn: {
			width: 44,
			height: 44,
			borderRadius: 8,
			backgroundColor: "#0e1527",
			borderWidth: 1,
			borderColor: "#26334f",
			alignItems: "center",
			justifyContent: "center",
			paddingVertical: 8,
			paddingHorizontal: 8,
		},
		burgerBar: {
			width: "100%",
			height: 3,
			backgroundColor: "#e5e7eb",
			marginVertical: 2,
			borderRadius: 2,
		},

		// Tiroir et overlay
		overlay: {
			position: "absolute",
			top: 0,
			bottom: 0,
			left: 0,
			right: 0,
			backgroundColor: COLORS.overlay,
			zIndex: 40,
		},
		drawer: {
			position: "absolute",
			top: 0,
			bottom: 0,
			left: 0,
			backgroundColor: COLORS.bg,
			paddingHorizontal: 12,
			paddingTop: 12,
			paddingBottom: 16,
			zIndex: 60,
			borderRightWidth: 1,
			borderRightColor: COLORS.cardBorder,
		},
		drawerSafe: {
			flex: 1,
			justifyContent: "flex-start",
		},

		// Modale
		modalWrap: { flex: 1, backgroundColor: "rgba(0,0,0,0.5)", alignItems: "center", justifyContent: "center", padding: 16 },
		modalCard: {
			backgroundColor: COLORS.card,
			borderRadius: 12,
			padding: 16,
			borderWidth: 1,
			borderColor: COLORS.cardBorder,
			width: "92%",
			maxWidth: 480,
		},
		title: { color: COLORS.text, fontWeight: "700", fontSize: fs18, textAlign: "left" },
	});
};

# ./React-Native/snake/App.tsx

# ./React-Native/snake/dist/assetmap.json
{}
# ./React-Native/snake/dist/assetmap.json

# ./React-Native/snake/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"ios":{"bundle":"_expo/static/js/ios/index-a06b62a5e3685c8b7e729292cc0a1578.hbc","assets":[]},"android":{"bundle":"_expo/static/js/android/index-52671d2d17b308abc69ab7e8ec67d225.hbc","assets":[]}}}
# ./React-Native/snake/dist/metadata.json

# ./React-Native/snake/.expo/devices.json
{
  "devices": []
}

# ./React-Native/snake/.expo/devices.json

# ./React-Native/snake/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/snake/index.ts

# ./React-Native/snake/package.json
{
  "name": "snake",
  "version": "1.0.0",
  "main": "index.ts",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "expo": "~53.0.22",
    "expo-status-bar": "~2.2.3",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-native": "0.79.6",
    "react-native-safe-area-context": "^5.6.1"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~19.0.10",
    "typescript": "~5.8.3"
  },
  "private": true
}

# ./React-Native/snake/package.json

# ./React-Native/snake/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/snake/tsconfig.json

# ./React-Native/temps_de_someil_restant_react_native/1/App.js
import { StatusBar } from "expo-status-bar";
import { SafeAreaView, StyleSheet } from "react-native";
import SleepCalculator from "./src/components/SleepCalculator";

export default function App() {
	return (
		<SafeAreaView style={styles.container}>
			<SleepCalculator />
			<StatusBar style="auto" />
		</SafeAreaView>
	);
}

const styles = StyleSheet.create({
	container: { flex: 1 },
});

# ./React-Native/temps_de_someil_restant_react_native/1/App.js

# ./React-Native/temps_de_someil_restant_react_native/1/app.json
{
  "expo": {
    "name": "temps_de_someil_restant_react_native",
    "slug": "temps_de_someil_restant_react_native",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/assets/Temps_de_someil_restant_1.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/Temps_de_someil_restant_1.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/Temps_de_someil_restant_1.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true,
      "package": "com.hilnielbe.temps_de_someil_restant_react_native"
    },
    "web": {
      "favicon": "./assets/favicon.png"
    },
    "extra": {
      "eas": {
        "projectId": "6ea38fa3-1fd3-4222-8f2a-3da473062433"
      }
    }
  }
}

# ./React-Native/temps_de_someil_restant_react_native/1/app.json

# ./React-Native/temps_de_someil_restant_react_native/1/builds/Build_1/temps_de_someil_restant_react_native/unknown/kotlin-tooling-metadata.json
{
  "schemaVersion": "1.1.0",
  "buildSystem": "Gradle",
  "buildSystemVersion": "8.13",
  "buildPlugin": "org.jetbrains.kotlin.gradle.plugin.KotlinAndroidPluginWrapper",
  "buildPluginVersion": "2.0.21",
  "projectSettings": {
    "isHmppEnabled": true,
    "isCompatibilityMetadataVariantEnabled": false,
    "isKPMEnabled": false
  },
  "projectTargets": [
    {
      "target": "org.jetbrains.kotlin.gradle.plugin.mpp.KotlinAndroidTarget",
      "platformType": "androidJvm",
      "extras": {
        "android": {
          "sourceCompatibility": "17",
          "targetCompatibility": "17"
        }
      }
    }
  ]
}
# ./React-Native/temps_de_someil_restant_react_native/1/builds/Build_1/temps_de_someil_restant_react_native/unknown/kotlin-tooling-metadata.json

# ./React-Native/temps_de_someil_restant_react_native/1/eas.json
{
  "cli": {
    "version": ">= 16.17.0",
    "appVersionSource": "remote"
  },
  "build": {
		"development": {
			"developmentClient": true,
			"distribution": "internal"
		},
		"preview": {
			"distribution": "internal"
		},
		"production": {
			"autoIncrement": true,
			"android": {
				"buildType": "apk"
			},
			"distribution": "internal"
		}
  },
  "submit": {
    "production": {}
  }
}

# ./React-Native/temps_de_someil_restant_react_native/1/eas.json

# ./React-Native/temps_de_someil_restant_react_native/1/.expo/devices.json
{
  "devices": []
}

# ./React-Native/temps_de_someil_restant_react_native/1/.expo/devices.json

# ./React-Native/temps_de_someil_restant_react_native/1/index.js
import { registerRootComponent } from "expo";
import React from "react";
import App from "./App";

import { Provider } from "react-redux";
import { PersistGate } from "redux-persist/integration/react";
import { store, persistor } from "./src/store";

// Ligne de purge TEMPORAIRE (efface le storage)
// persistor.purge();

function Root() {
	return (
		<Provider store={store}>
			<PersistGate loading={null} persistor={persistor}>
				<App />
			</PersistGate>
		</Provider>
	);
}

registerRootComponent(Root);

# ./React-Native/temps_de_someil_restant_react_native/1/index.js

# ./React-Native/temps_de_someil_restant_react_native/1/package.json
{
	"name": "temps_de_someil_restant_react_native",
	"version": "1.0.0",
	"main": "index.js",
	"scripts": {
		"start": "expo start",
		"android": "expo start --android",
		"ios": "expo start --ios",
		"web": "expo start --web"
	},
	"dependencies": {
		"@expo/metro-runtime": "~5.0.4",
		"@react-native-async-storage/async-storage": "^1.23.0",
		"@react-native-community/datetimepicker": "8.4.1",
		"@reduxjs/toolkit": "^2.2.0",
		"expo": "~53.0.20",
		"expo-dev-client": "~5.2.4",
		"expo-status-bar": "~2.2.3",
		"react": "19.0.0",
		"react-dom": "19.0.0",
		"react-native": "0.79.5",
		"react-native-web": "^0.20.0",
		"react-redux": "^9.0.0",
		"redux-persist": "^6.0.0"
	},
	"devDependencies": {
		"@babel/core": "^7.20.0",
		"eas-cli": "^16.17.3"
	},
	"private": true
}

# ./React-Native/temps_de_someil_restant_react_native/1/package.json

# ./React-Native/temps_de_someil_restant_react_native/1/src/components/SleepCalculator.js
import React, { useCallback, useEffect, useState } from "react";
import { ImageBackground, Pressable, StyleSheet, Text, TextInput, View } from "react-native";
import { useDispatch, useSelector } from "react-redux";
import { setHour, setMinute } from "../store"; // chemin: src/store/index.js

/* Helpers --------------------------------------------------------------- */
const clamp = (v, min, max) => Math.min(Math.max(v, min), max);
const two = (n) => String(n).padStart(2, "0");

export default function SleepCalculator() {
	// Lecture depuis Redux
	const hour = useSelector((s) => s.wake.hour);
	const minute = useSelector((s) => s.wake.minute);
	const dispatch = useDispatch();

	// temps restant (local uniquement)
	const [remain, setRemain] = useState({ h: 0, m: 0 });

	// parsing sécurisé
	const parsedHour = clamp(parseInt(hour, 10) || 0, 0, 23);
	const parsedMinute = clamp(parseInt(minute, 10) || 0, 0, 59);

	// calcul du temps restant
	const refresh = useCallback(() => {
		const now = new Date();
		const wake = new Date(now.getFullYear(), now.getMonth(), now.getDate(), parsedHour, parsedMinute, 0, 0);
		if (wake <= now) wake.setDate(wake.getDate() + 1);
		const diffMinutes = Math.round((wake - now) / 60000);
		setRemain({ h: Math.floor(diffMinutes / 60), m: diffMinutes % 60 });
	}, [parsedHour, parsedMinute]);

	// recalcul automatique + toutes les minutes
	useEffect(() => {
		refresh();
		const id = setInterval(refresh, 60_000);
		return () => clearInterval(id);
	}, [refresh]);

	// Couleurs selon durée restante
	const total = remain.h + remain.m / 60;
	const bg = total >= 8 ? "#198754" : total >= 6 ? "#ffc107" : total >= 3 ? "#dc3545" : "#0d0d0d";
	const fg = total < 3 ? "#ffffff" : "#000000";

	// Handlers : mise à jour Redux
	const handleHourChange = (v) => {
		const clean = v.replace(/\D/g, "").slice(0, 2);
		dispatch(setHour(clean));
	};
	const handleMinuteChange = (v) => {
		const clean = v.replace(/\D/g, "").slice(0, 2);
		dispatch(setMinute(clean));
	};

	// Normalisation visuelle au blur (ajout du padding + clamp)
	const normalizeHour = () => dispatch(setHour(two(parsedHour)));
	const normalizeMinute = () => dispatch(setMinute(two(parsedMinute)));

	return (
		<ImageBackground source={require("../../assets/nuages_1.jpg")} style={styles.bg} resizeMode="cover">
			<View style={styles.center}>
				<Text style={styles.label}>Heure de réveil :</Text>

				<View style={styles.timeRow}>
					<TextInput style={styles.input} keyboardType="numeric" maxLength={2} value={hour} onChangeText={handleHourChange} onBlur={normalizeHour} placeholder="HH" textAlign="center" />
					<Text style={styles.colon}>:</Text>
					<TextInput
						style={styles.input}
						keyboardType="numeric"
						maxLength={2}
						value={minute}
						onChangeText={handleMinuteChange}
						onBlur={normalizeMinute}
						placeholder="MM"
						textAlign="center"
					/>
				</View>

				<View style={[styles.box, { backgroundColor: bg }]}>
					<Text style={[styles.boxText, { color: fg }]}>
						{two(remain.h)}:{two(remain.m)}
					</Text>
				</View>

				<Pressable style={styles.refreshButton} onPress={refresh}>
					<Text style={styles.refreshText}>Refresh</Text>
				</Pressable>
			</View>
		</ImageBackground>
	);
}

/* Styles ---------------------------------------------------------------- */
const styles = StyleSheet.create({
	bg: { flex: 1 },
	center: { flex: 1, alignItems: "center", justifyContent: "center" },

	label: { fontSize: 18, marginBottom: 8 },

	timeRow: { flexDirection: "row", alignItems: "center", marginBottom: 24 },
	input: {
		width: 60,
		height: 54,
		fontSize: 24,
		textAlign: "center",
		borderWidth: 1,
		borderColor: "#ccc",
		borderRadius: 6,
		backgroundColor: "#fff",
		marginHorizontal: 2,
	},
	colon: { fontSize: 24, fontWeight: "bold", marginHorizontal: 4 },

	box: {
		width: 200,
		height: 200,
		borderRadius: 12,
		alignItems: "center",
		justifyContent: "center",
	},
	boxText: { fontSize: 48, fontWeight: "bold" },
	refreshButton: {
		marginTop: 20,
		paddingVertical: 8,
		paddingHorizontal: 16,
		borderRadius: 6,
		backgroundColor: "#007bff",
	},
	refreshText: { color: "#fff", fontWeight: "bold", fontSize: 16, textAlign: "center" },
});

# ./React-Native/temps_de_someil_restant_react_native/1/src/components/SleepCalculator.js

# ./React-Native/temps_de_someil_restant_react_native/1/src/store/index.js
import { configureStore, combineReducers, createSlice } from "@reduxjs/toolkit";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { persistReducer, persistStore } from "redux-persist";

// Slice pour l'heure
const wakeSlice = createSlice({
	name: "wake",
	initialState: { hour: "06", minute: "30" },
	reducers: {
		setHour: (state, action) => {
			state.hour = action.payload;
		},
		setMinute: (state, action) => {
			state.minute = action.payload;
		},
	},
});

export const { setHour, setMinute } = wakeSlice.actions;

// Root reducer combiné
const rootReducer = combineReducers({
	wake: wakeSlice.reducer,
});

// Persist config
const persistConfig = {
	key: "root",
	storage: AsyncStorage,
	whitelist: ["wake"],
};

const persistedReducer = persistReducer(persistConfig, rootReducer);

// Store
export const store = configureStore({
	reducer: persistedReducer,
	middleware: (getDefault) => getDefault({ serializableCheck: false }),
});

export const persistor = persistStore(store);

# ./React-Native/temps_de_someil_restant_react_native/1/src/store/index.js

# ./React-Native/temps_de_someil_restant_react_native/1/src/utils/time.js
// Calcule le nombre d'heures (virgule flottante) restantes avant l'heure de réveil.
export const hoursUntilWake = (wakeDate) => {
	const now = new Date();
	const wake = new Date(wakeDate); // clone

	if (wake <= now) {
		wake.setDate(wake.getDate() + 1); // réveil le lendemain si besoin
	}

	const diffMs = wake - now;
	return diffMs / (1000 * 60 * 60);
};

# ./React-Native/temps_de_someil_restant_react_native/1/src/utils/time.js

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/android/build/generated/autolinking/autolinking.json
{"root":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2","reactNativePath":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\react-native","dependencies":{"@react-native-async-storage/async-storage":{"root":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\@react-native-async-storage\\async-storage","name":"@react-native-async-storage/async-storage","platforms":{"android":{"sourceDir":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\@react-native-async-storage\\async-storage\\android","packageImportPath":"import com.reactnativecommunity.asyncstorage.AsyncStoragePackage;","packageInstance":"new AsyncStoragePackage()","buildTypes":[],"libraryName":"rnasyncstorage","componentDescriptors":[],"cmakeListsPath":"C:/Users/Cyrille de Gasquet/Dropbox/Mes documents/Existant/Utilitaire/Formation/La Capsule/3 - Cours/Autre/React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/node_modules/@react-native-async-storage/async-storage/android/build/generated/source/codegen/jni/CMakeLists.txt","cxxModuleCMakeListsModuleName":null,"cxxModuleCMakeListsPath":null,"cxxModuleHeaderName":null}}},"expo":{"root":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\expo","name":"expo","platforms":{"android":{"sourceDir":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\expo\\android","packageImportPath":"import expo.modules.ExpoModulesPackage;","packageInstance":"new ExpoModulesPackage()","buildTypes":[],"componentDescriptors":[],"cmakeListsPath":"C:/Users/Cyrille de Gasquet/Dropbox/Mes documents/Existant/Utilitaire/Formation/La Capsule/3 - Cours/Autre/React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/node_modules/expo/android/build/generated/source/codegen/jni/CMakeLists.txt","cxxModuleCMakeListsModuleName":null,"cxxModuleCMakeListsPath":null,"cxxModuleHeaderName":null}}},"react-native-edge-to-edge":{"root":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\react-native-edge-to-edge","name":"react-native-edge-to-edge","platforms":{"android":{"sourceDir":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\node_modules\\react-native-edge-to-edge\\android","packageImportPath":"import com.zoontek.rnedgetoedge.EdgeToEdgePackage;","packageInstance":"new EdgeToEdgePackage()","buildTypes":[],"libraryName":"RNEdgeToEdge","componentDescriptors":[],"cmakeListsPath":"C:/Users/Cyrille de Gasquet/Dropbox/Mes documents/Existant/Utilitaire/Formation/La Capsule/3 - Cours/Autre/React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/node_modules/react-native-edge-to-edge/android/build/generated/source/codegen/jni/CMakeLists.txt","cxxModuleCMakeListsModuleName":null,"cxxModuleCMakeListsPath":null,"cxxModuleHeaderName":null}}}},"project":{"android":{"packageName":"com.hilnielbe.sommeilrestant","sourceDir":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\android"}}}

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/android/build/generated/autolinking/autolinking.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/android/build/reports/problems/problems-report.html
<!DOCTYPE html>

<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

                    <style type="text/css">
                /*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */
html {
    line-height: 1.15;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%
}

body {
    margin: 0
}

article, aside, footer, header, nav, section {
    display: block
}

h1 {
    font-size: 2em;
    margin: .67em 0
}

figcaption, figure, main {
    display: block
}

figure {
    margin: 1em 40px
}

hr {
    box-sizing: content-box;
    height: 0;
    overflow: visible
}

pre {
    font-family: monospace, monospace;
    font-size: 1em
}

a {
    background-color: transparent;
    -webkit-text-decoration-skip: objects
}

abbr[title] {
    border-bottom: none;
    text-decoration: underline;
    text-decoration: underline dotted
}

b, strong {
    font-weight: inherit
}

b, strong {
    font-weight: bolder
}

code, kbd, samp {
    font-family: monospace, monospace;
    font-size: 1em
}

dfn {
    font-style: italic
}

mark {
    background-color: #ff0;
    color: #000
}

small {
    font-size: 80%
}

sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline
}

sub {
    bottom: -.25em
}

sup {
    top: -.5em
}

audio, video {
    display: inline-block
}

audio:not([controls]) {
    display: none;
    height: 0
}

img {
    border-style: none
}

svg:not(:root) {
    overflow: hidden
}

button, input, optgroup, select, textarea {
    font-family: sans-serif;
    font-size: 100%;
    line-height: 1.15;
    margin: 0
}

button, input {
    overflow: visible
}

button, select {
    text-transform: none
}

[type=reset], [type=submit], button, html [type=button] {
    -webkit-appearance: button
}

[type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner, button::-moz-focus-inner {
    border-style: none;
    padding: 0
}

[type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring, button:-moz-focusring {
    outline: 1px dotted ButtonText
}

fieldset {
    padding: .35em .75em .625em
}

legend {
    box-sizing: border-box;
    color: inherit;
    display: table;
    max-width: 100%;
    padding: 0;
    white-space: normal
}

progress {
    display: inline-block;
    vertical-align: baseline
}

textarea {
    overflow: auto
}

[type=checkbox], [type=radio] {
    box-sizing: border-box;
    padding: 0
}

[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button {
    height: auto
}

[type=search] {
    -webkit-appearance: textfield;
    outline-offset: -2px
}

[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration {
    -webkit-appearance: none
}

::-webkit-file-upload-button {
    -webkit-appearance: button;
    font: inherit
}

details, menu {
    display: block
}

summary {
    display: list-item
}

canvas {
    display: inline-block
}

template {
    display: none
}

[hidden] {
    display: none
}

/* configuration cache styles */

.report-wrapper {
    margin: 0;
    padding: 0 24px;
}

.gradle-logo {
    width: 32px;
    height: 24px;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAGAAAAAA915G0AAAD5klEQVRIDbVWC0xTZxT+emmhVUEeA1/ROh/tFAFFGK7oJisIKsNVoOwBbJPowEWHzikRxeiMRpwwjDWRBHQLIzOmiRhe22BT40TitiyaMBQFfMEeLMIEaSmk+/+rvd7be4no6Elu7n++c/5zzv845/wyOyG4iGyDgzCdNOPLM9W41n4bnmNUiHo5DNsz0hGsmcV6lbkyAOOWXJjrz4qWp1C4o3z/LqzWL4VcJB1FIHmZHn/f78a6pDcxbeIEfNvQiPwTZbDZBpC24zOEaGfDpTsgtZby6u+QlrubFWUY3nh6AH39/ahr/Bn1jZfxW3ML2js60dtvgbtcQVblj8CZM7A0PBSrol6Ft+c4KZ8iTB1nwN0//8IEP9/hA2i924Gir0/iq8oa/NvbJzLiDKiUSqTE6pGVbEBY4BxnsYAPSnwXTa3tLCZ5BF3dPdAkGNHzoFcwcaRMnC4CeZkZiAgKFE252nITC1Pew9Dj5GNEGgS4Rbb5eZ1Te7UXG6FLX4cV6zeh5kIDaDpSunL9Boyf5nLOpwT4Sx+BxWrFK8QAnTAapPRQwofcj86uLoG59cbVEOzA0NAQNh38Atn5RSjY8rFAmc/I3dyQvOx1PsSNVy7Roa3ajHDePbBYLSLn1MaGd5KFAXy07xAOl59C6elK+I73hIHcbGd6wXs8qkyH8FZcjLOI5X/9/TrOnLsAldJDUu4As1NToFFPe3IEpm/M2HigwCFnU6t4Zw6Ck1JhGRhgcXq5juXloKyqFnlHirmz5CaNcEAv59kSE9wVikcB3O78A/MSU0Fznk/H9+yAetJEnPr+B8RFLsLcGS8ia28+qQuX+WrPNNZOV+Nc6VH4+3iz89g0pEaLzRUiQ3LGDWsM8Qidq2WL0PGKKlgf74ZIeQTAfFJ6a44WIsDXh9OW/dPdY58aawC9KK6kpOgolO7JxViVSuBGXnvxksudZ5F0O5yzGYxMJnBOGaau4fnPU2RNAtCFBKFoa7akczaAptY2iWmjB33+yQa4kZwfjpi2ex3Dyf43vuAljWQ/4Btmei1WPj+q45hF4U+1J4fEizCEvNf0EWHoIW244sfzoN1RipaT2kDfdjfv3MNpojdISjmfIheE8Fnp8WR9vJ2Zr+O+bYUmO+kJ9KnIUtf9bnvY2x9wcqrrvnCJvfL8Tw4V9v9LU7PdKzJaoNdy645AR4ph1JMncZHRKrVvYyYY5kmP8iO1v2T3dk6HDtYmrgJtOnwKnaPFrg8z+BBX7QSgEyOPJfX9Qd9DFs40GgTOHbrBs2ch4bXFuEG2mmFkeD9hpUMk+NMXEe0TNtsg/Ly94DVurEAuxfwHC1WiVbe0U7MAAAAASUVORK5CYII=");
    background-size: contain;
}

.header {
    display: flex;
    flex-wrap: wrap;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 24px 24px 0 24px;
    background-color: white;
    z-index: 1;
}

.learn-more {
    margin-left: auto;
    align-self: center;
    font-size: 0.875rem;
    font-weight: normal;
}

.title {
    display: flex;
    align-items: center;
    padding: 18px 0 24px 0;
    flex: 1 0 100%;
}

.content {
    font-size: 0.875rem;
    padding: 240px 0 48px;
    overflow-x: auto;
    white-space: nowrap;
}

.content ol:first-of-type {
    margin: 0;
}

.tree-btn {
    cursor: pointer;
    display: inline-block;
    width: 16px;
    height: 16px;
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-top: -0.2em;
}

.tree-btn.collapsed {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z" fill="%23999999" stroke="%23999999"/></svg>');
}

.tree-btn.expanded {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path d="M119.5 326.9L3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1z" fill="%23999999" stroke="%23999999"/></svg>');
}

ul .tree-btn {
    margin-right: 3px;
}

.leaf-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path d="M32 256 H224" stroke="%23999999" stroke-width="48" stroke-linecap="round"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-top: -0.2em;
}

.invisible-text {
    user-select: all; /* Allow the text to be selectable */
    color: transparent; /* Hide the text */
    text-indent: -9999px; /* Move the text out of view */
    position: relative;
    white-space: pre; /* Preserve meaningful whitespace in the invisible text for copying */
}

.text-for-copy {
    display: inline-block;
}

.enum-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><circle cx="512" cy="512" r="200" /></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-inline-start: 0.5ex;
    margin-inline-end: 0.5ex;
    margin-top: -0.2em;
}

.error-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" fill="%23FC461E" stroke="%23FC461E"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-inline-start: 0.5ex;
    margin-inline-end: 0.5ex;
    margin-top: -0.2em;
}

.advice-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-image: url('data:image/svg+xml;utf8,<svg width="800px" height="800px" viewBox="-4.93 0 122.88 122.88" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="enable-background:new 0 0 113.01 122.88" xml:space="preserve"><g><path d="M44.13,102.06c-1.14,0.03-2.14-0.81-2.3-1.96c-0.17-1.2,0.64-2.31,1.82-2.54c-1.3-7.37-4.85-11.43-8.6-15.72 c-2.92-3.34-5.95-6.81-8.34-11.92c-2.35-5.03-3.64-10.23-3.6-15.63c0.05-5.4,1.42-10.96,4.4-16.71c0.02-0.04,0.04-0.07,0.06-0.11 l0,0c3.91-6.62,9.38-11.04,15.47-13.52c5.11-2.09,10.66-2.8,16.1-2.3c5.42,0.5,10.73,2.2,15.37,4.94 c5.9,3.49,10.75,8.67,13.42,15.21c1.44,3.54,2.42,7.49,2.54,11.82c0.12,4.31-0.62,8.96-2.61,13.88 c-2.66,6.59-6.18,10.68-9.47,14.51c-3.03,3.53-5.85,6.81-7.42,11.84c0.89,0.21,1.59,0.94,1.73,1.9c0.17,1.24-0.7,2.39-1.94,2.56 l-0.77,0.11c-0.14,1.09-0.23,2.26-0.27,3.51l0.25-0.04c1.24-0.17,2.39,0.7,2.56,1.94c0.17,1.24-0.7,2.39-1.94,2.56l-0.78,0.11 c0.01,0.15,0.02,0.3,0.03,0.45l0,0c0.07,0.88,0.08,1.73,0.03,2.54l0.13-0.02c1.25-0.15,2.38,0.74,2.54,1.98 c0.15,1.25-0.74,2.38-1.98,2.54l-1.68,0.21c-1.2,3.11-3.34,5.48-5.87,6.94c-1.74,1.01-3.67,1.59-5.61,1.71 c-1.97,0.12-3.96-0.25-5.78-1.13c-2.08-1.02-3.94-2.71-5.29-5.14c-0.65-0.33-1.13-0.97-1.23-1.75c-0.04-0.31-0.01-0.61,0.07-0.89 c-0.39-1.16-0.68-2.43-0.87-3.83l-0.07,0.01c-1.24,0.17-2.39-0.7-2.56-1.94c-0.17-1.24,0.7-2.39,1.94-2.56l0.54-0.08 C44.19,104.32,44.18,103.16,44.13,102.06L44.13,102.06z M2.18,58.86C1.01,58.89,0.04,57.98,0,56.81c-0.04-1.17,0.88-2.14,2.05-2.18 l8.7-0.3c1.17-0.04,2.14,0.88,2.18,2.05c0.04,1.17-0.88,2.14-2.05,2.18L2.18,58.86L2.18,58.86z M110.68,50.25 c1.16-0.12,2.2,0.73,2.32,1.89c0.12,1.16-0.73,2.2-1.89,2.32l-8.66,0.91c-1.16,0.12-2.2-0.73-2.32-1.89 c-0.12-1.16,0.73-2.2,1.89-2.32L110.68,50.25L110.68,50.25z M94.91,14.78c0.65-0.97,1.96-1.23,2.93-0.58 c0.97,0.65,1.23,1.96,0.58,2.93l-4.84,7.24c-0.65,0.97-1.96,1.23-2.93,0.58c-0.97-0.65-1.23-1.96-0.58-2.93L94.91,14.78 L94.91,14.78z M57.63,2.06c0.03-1.17,1-2.09,2.16-2.06c1.17,0.03,2.09,1,2.06,2.16l-0.22,8.7c-0.03,1.17-1,2.09-2.16,2.06 c-1.17-0.03-2.09-1-2.06-2.16L57.63,2.06L57.63,2.06z M13.88,15.53c-0.86-0.8-0.9-2.14-0.11-2.99c0.8-0.86,2.14-0.9,2.99-0.11 l6.37,5.94c0.86,0.8,0.9,2.14,0.11,2.99c-0.8,0.86-2.14,0.9-2.99,0.11L13.88,15.53L13.88,15.53z M47.88,96.95l18.49-2.63 c1.59-6.7,5.05-10.73,8.8-15.08c3.08-3.58,6.36-7.4,8.76-13.34c1.76-4.35,2.41-8.43,2.31-12.19c-0.1-3.75-0.96-7.21-2.24-10.34 c-2.3-5.63-6.51-10.11-11.65-13.15c-4.11-2.43-8.8-3.94-13.59-4.37c-4.77-0.44-9.64,0.19-14.13,2.02 c-5.26,2.15-9.99,5.97-13.39,11.72c-2.64,5.12-3.86,10.02-3.9,14.73c-0.04,4.74,1.11,9.33,3.2,13.8c2.13,4.56,4.97,7.8,7.69,10.92 C42.47,83.9,46.48,88.49,47.88,96.95L47.88,96.95z M65.62,99.02l-17.27,2.45c0.05,1.1,0.07,2.25,0.05,3.47l17.05-2.42 C65.47,101.29,65.52,100.12,65.62,99.02L65.62,99.02z M48.49,109.52c0.12,0.92,0.3,1.76,0.53,2.54l16.55-2.04 c0.11-0.86,0.13-1.77,0.05-2.74l0,0l0-0.02l-0.01-0.17L48.49,109.52L48.49,109.52z M51.37,116.36c0.64,0.67,1.35,1.19,2.1,1.55 c1.15,0.56,2.42,0.79,3.67,0.72c1.29-0.08,2.57-0.47,3.74-1.15c1.1-0.64,2.09-1.53,2.88-2.65L51.37,116.36L51.37,116.36z"/></g></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-inline-start: 0.5ex;
    margin-inline-end: 0.5ex;
    margin-top: -0.2em;
}

.warning-icon {
    display: inline-block;
    width: 13px;
    height: 13px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M270.2 160h35.5c3.4 0 6.1 2.8 6 6.2l-7.5 196c-.1 3.2-2.8 5.8-6 5.8h-20.5c-3.2 0-5.9-2.5-6-5.8l-7.5-196c-.1-3.4 2.6-6.2 6-6.2zM288 388c-15.5 0-28 12.5-28 28s12.5 28 28 28 28-12.5 28-28-12.5-28-28-28zm281.5 52L329.6 24c-18.4-32-64.7-32-83.2 0L6.5 440c-18.4 31.9 4.6 72 41.6 72H528c36.8 0 60-40 41.5-72zM528 480H48c-12.3 0-20-13.3-13.9-24l240-416c6.1-10.6 21.6-10.7 27.7 0l240 416c6.2 10.6-1.5 24-13.8 24z" fill="%23DEAD22" stroke="%23DEAD22"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-inline-start: 0.3ex;
    margin-inline-end: 1.1ex;
    margin-top: -0.1em;
}

.documentation-button {
    cursor: pointer;
    display: inline-block;
    width: 13px;
    height: 13px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 340c-15.464 0-28 12.536-28 28s12.536 28 28 28 28-12.536 28-28-12.536-28-28-28zm7.67-24h-16c-6.627 0-12-5.373-12-12v-.381c0-70.343 77.44-63.619 77.44-107.408 0-20.016-17.761-40.211-57.44-40.211-29.144 0-44.265 9.649-59.211 28.692-3.908 4.98-11.054 5.995-16.248 2.376l-13.134-9.15c-5.625-3.919-6.86-11.771-2.645-17.177C185.658 133.514 210.842 116 255.67 116c52.32 0 97.44 29.751 97.44 80.211 0 67.414-77.44 63.849-77.44 107.408V304c0 6.627-5.373 12-12 12zM256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8z" fill="%23999999" stroke="%23999999"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-inline-start: 0.5ex;
    margin-inline-end: 0.5ex;
    margin-top: -0.2em;
}

.documentation-button::selection {
    color: transparent;
}

.documentation-button:hover {
    color: transparent;
}

.copy-button {
    cursor: pointer;
    display: inline-block;
    width: 12px;
    height: 12px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 193.941l-51.882-51.882A48 48 0 0 0 348.118 128H320V80c0-26.51-21.49-48-48-48h-66.752C198.643 13.377 180.858 0 160 0s-38.643 13.377-45.248 32H48C21.49 32 0 53.49 0 80v288c0 26.51 21.49 48 48 48h80v48c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48V227.882a48 48 0 0 0-14.059-33.941zm-22.627 22.627a15.888 15.888 0 0 1 4.195 7.432H352v-63.509a15.88 15.88 0 0 1 7.431 4.195l51.883 51.882zM160 30c9.941 0 18 8.059 18 18s-8.059 18-18 18-18-8.059-18-18 8.059-18 18-18zM48 384c-8.822 0-16-7.178-16-16V80c0-8.822 7.178-16 16-16h66.752c6.605 18.623 24.389 32 45.248 32s38.643-13.377 45.248-32H272c8.822 0 16 7.178 16 16v48H176c-26.51 0-48 21.49-48 48v208H48zm352 96H176c-8.822 0-16-7.178-16-16V176c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v208c0 8.822-7.178 16-16 16z" fill="%23999999" stroke="%23999999"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-inline-start: 0.5ex;
    margin-top: -0.2em;
}

.groups{
    display: flex;
    border-bottom: 1px solid #EDEEEF;
    flex: 1 0 100%;
}

.uncategorized {
    display: flex;
    border-top: 4px solid #EDEEEF;
    flex: 1 0 100%;
}

.group-selector {
    padding: 0 52px 24px 0;
    font-size: 0.9rem;
    font-weight: bold;
    color: #999999;
    cursor: pointer;
}

.group-selector__count {
    margin: 0 8px;
    border-radius: 8px;
    background-color: #999;
    color: #fff;
    padding: 1px 8px 2px;
    font-size: 0.75rem;
}

.group-selector--active {
    color: #02303A;
    cursor: auto;
}

.group-selector--active .group-selector__count {
    background-color: #686868;
}

.group-selector--disabled {
    cursor: not-allowed;
}

.accordion-header {
    cursor: pointer;
}

.container {
    padding-left: 0.5em;
    padding-right: 0.5em;
}

.stacktrace {
    border-radius: 4px;
    overflow-x: auto;
    padding: 0.5rem;
    margin-bottom: 0;
    min-width: 1000px;
}

/* Lato (bold, regular) */
@font-face {
    font-display: swap;
    font-family: Lato;
    font-weight: 500;
    font-style: normal;
    src: url("https://assets.gradle.com/lato/fonts/lato-semibold/lato-semibold.woff2") format("woff2"),
    url("https://assets.gradle.com/lato/fonts/lato-semibold/lato-semibold.woff") format("woff");
}

@font-face {
    font-display: swap;
    font-family: Lato;
    font-weight: bold;
    font-style: normal;
    src: url("https://assets.gradle.com/lato/fonts/lato-bold/lato-bold.woff2") format("woff2"),
    url("https://assets.gradle.com/lato/fonts/lato-bold/lato-bold.woff") format("woff");
}

* {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

html,
body {
    margin: 0;
    padding: 0;
}

html {
    font-family: "Lato", "Helvetica Neue", Arial, sans-serif;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
}

body {
    color: #02303A;
    background-color: #ffffff;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
}


/* typography */
h1, h2, h3, h4, h5, h6 {
    color: #02303A;
    text-rendering: optimizeLegibility;
    margin: 0;
}

h1 {
    font-size: 1rem;
}

h2 {
    font-size: 0.9rem;
}

h3 {
    font-size: 1.125rem;
}

h4, h5, h6 {
    font-size: 0.875rem;
}

h1 code {
    font-weight: bold;
}

ul, ol, dl {
    list-style-position: outside;
    line-height: 1.6;
    padding: 0;
    margin: 0 0 0 20px;
    list-style-type: none;
}

li {
    line-height: 2;
}

a {
    color: #1DA2BD;
    text-decoration: none;
    transition: all 0.3s ease, visibility 0s;
}

a:hover {
    color: #35c1e4;
}

/* code */
code, pre {
    font-family: Inconsolata, Monaco, "Courier New", monospace;
    font-style: normal;
    font-variant-ligatures: normal;
    font-variant-caps: normal;
    font-variant-numeric: normal;
    font-variant-east-asian: normal;
    font-weight: normal;
    font-stretch: normal;
    color: #686868;
}

*:not(pre) > code {
    letter-spacing: 0;
    padding: 0.1em 0.5ex;
    text-rendering: optimizeSpeed;
    word-spacing: -0.15em;
    word-wrap: break-word;
}

pre {
    font-size: 0.75rem;
    line-height: 1.8;
    margin-top: 0;
    margin-bottom: 1.5em;
    padding: 1rem;
}

pre code {
    background-color: transparent;
    color: inherit;
    line-height: 1.8;
    font-size: 100%;
    padding: 0;
}

a code {
    color: #1BA8CB;
}

pre.code, pre.programlisting, pre.screen, pre.tt {
    background-color: #f7f7f8;
    border-radius: 4px;
    font-size: 1em;
    line-height: 1.45;
    margin-bottom: 1.25em;
    overflow-x: auto;
    padding: 1rem;
}

li em, p em {
    padding: 0 1px;
}

code em, tt em {
    text-decoration: none;
}

code + .copy-button {
    margin-inline-start: 0.2ex;
}

.java-exception {
    font-size: 0.75rem;
    padding-left: 24px;
}

.java-exception ul {
    margin: 0;
    line-height: inherit;
}

.java-exception code {
    white-space: pre;
}

.java-exception-part-toggle {
    user-select: none;
    cursor: pointer;
    border-radius: 2px;
    padding: 0.1em 0.2em;
    background: azure;
    color: #686868;
}

                </style>
    <!-- Inconsolata is used as a default monospace font in the report. -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" />

    <title>Gradle Configuration Cache</title>
</head>
<body>

<div id="playground"></div>

<div class="report" id="report">
    Loading...
</div>

<script type="text/javascript">
function configurationCacheProblems() { return (
// begin-report-data
{"diagnostics":[{"locations":[{"path":"build file 'C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\android\\build.gradle'","line":27}],"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('url = <value>') instead."}]]},{"locations":[{"path":"build file 'C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\android\\build.gradle'","line":32}],"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('url = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('url = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('ndkVersion = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('compileSdk = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('namespace = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('signingConfig = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('shrinkResources = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('crunchPngs = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('useLegacyPackaging = <value>') instead."}]]},{"problem":[{"text":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"severity":"WARNING","problemDetails":[{"text":"This is scheduled to be removed in Gradle 10.0."}],"contextualLabel":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated.","documentationLink":"https://docs.gradle.org/8.13/userguide/upgrading_version_8.html#groovy_space_assignment_syntax","problemId":[{"name":"deprecation","displayName":"Deprecation"},{"name":"properties-should-be-assigned-using-the-propname-value-syntax-setting-a-property-via-the-gradle-generated-propname-value-or-propname-value-syntax-in-groovy-dsl","displayName":"Properties should be assigned using the 'propName = value' syntax. Setting a property via the Gradle-generated 'propName value' or 'propName(value)' syntax in Groovy DSL has been deprecated."}],"solutions":[[{"text":"Use assignment ('ignoreAssetsPattern = <value>') instead."}]]}],"problemsReport":{"totalProblemCount":11,"buildName":"Sommeil restant","requestedTasks":"","documentationLink":"https://docs.gradle.org/8.13/userguide/reporting_problems.html","documentationLinkCaption":"Problem report","summaries":[]}}
// end-report-data
);}
</script>
                <script type="text/javascript">
                !function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["configuration-cache-report"]=t():n["configuration-cache-report"]=t()}(this,(()=>(({70:function(){void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(n){return null!=n&&null!=n.__proto__&&n.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Math.imul&&(Math.imul=function(n,t){return(4294901760&n)*(65535&t)+(65535&n)*(0|t)|0}),this["configuration-cache-report"]=function(n){"use strict";var t,r,i,e,u,o,f,s,c,a,h,l,_,v,d,g,w,b,p,m,k,y,q,B,C,x,j,P,I,S,z,E,T,L,N,A,M,F,D,O,R,H,$,G,U,V,Q,Z,Y,W,K,X,J,nn,tn,rn,en,un,on,fn,sn,cn,an,hn,ln,_n,vn,dn,gn,wn,bn,pn,mn,kn,yn,qn,Bn,Cn,xn,jn,Pn,In,Sn,zn=Math.imul,En=ArrayBuffer.isView;function Tn(n,t){if(!(t>=0))throw fu(ie("Requested element count "+t+" is less than zero."));return function(n,t){if(!(t>=0))throw fu(ie("Requested element count "+t+" is less than zero."));if(0===t)return pt();if(t>=n.length)return function(n){switch(n.length){case 0:return pt();case 1:return gr(n[0]);default:return function(n){return Ar(function(n){return new qt(n,!1)}(n))}(n)}}(n);if(1===t)return gr(n[0]);var r=0,i=Nr(),e=0,u=n.length;n:for(;e<u;){var o=n[e];if(e=e+1|0,i.d(o),(r=r+1|0)===t)break n}return i}(n,Wn(n.length-t|0,0))}function Ln(n,t,r,i,e,u,o){return t=t===A?", ":t,r=r===A?"":r,i=i===A?"":i,e=e===A?-1:e,u=u===A?"...":u,o=o===A?null:o,function(n,t,r,i,e,u,o,f){r=r===A?", ":r,i=i===A?"":i,e=e===A?"":e,u=u===A?-1:u,o=o===A?"...":o,f=f===A?null:f,t.e(i);var s=0,c=0,a=n.length;n:for(;c<a;){var h=n[c];if(c=c+1|0,(s=s+1|0)>1&&t.e(r),!(u<0||s<=u))break n;Qt(t,h,f)}return u>=0&&s>u&&t.e(o),t.e(e),t}(n,bi(),t,r,i,e,u,o).toString()}function Nn(n){return n.length-1|0}function An(n,t){if(null==t){var r=0,i=n.length-1|0;if(r<=i)do{var e=r;if(r=r+1|0,null==n[e])return e}while(r<=i)}else{var u=0,o=n.length-1|0;if(u<=o)do{var f=u;if(u=u+1|0,oe(t,n[f]))return f}while(u<=o)}return-1}function Mn(n,t,r,i,e,u,o){return t=t===A?", ":t,r=r===A?"":r,i=i===A?"":i,e=e===A?-1:e,u=u===A?"...":u,o=o===A?null:o,Fn(n,bi(),t,r,i,e,u,o).toString()}function Fn(n,t,r,i,e,u,o,f){r=r===A?", ":r,i=i===A?"":i,e=e===A?"":e,u=u===A?-1:u,o=o===A?"...":o,f=f===A?null:f,t.e(i);var s=0,c=n.f();n:for(;c.g();){var a=c.h();if((s=s+1|0)>1&&t.e(r),!(u<0||s<=u))break n;Qt(t,a,f)}return u>=0&&s>u&&t.e(o),t.e(e),t}function Dn(n){if(n.i())throw mu("List is empty.");return n.j(0)}function On(n){return new Yn(n)}function Rn(n){if(Ue(n,Ti)){var t;switch(n.k()){case 0:t=pt();break;case 1:t=gr(Ue(n,Ei)?n.j(0):n.f().h());break;default:t=Hn(n)}return t}return mt(Vn(n))}function Hn(n){return Ar(n)}function $n(n){if(Ue(n,Ti)&&n.k()<=1)return Rn(n);var t=Vn(n);return function(n){var t=(n.k()/2|0)-1|0;if(t<0)return lr();var r=kt(n),i=0;if(i<=t)do{var e=i;i=i+1|0;var u=n.j(e);n.f4(e,n.j(r)),n.f4(r,u),r=r-1|0}while(e!==t)}(t),t}function Gn(n,t){if(!(t>=0))throw fu(ie("Requested element count "+t+" is less than zero."));return function(n,t){if(!(t>=0))throw fu(ie("Requested element count "+t+" is less than zero."));if(0===t)return pt();if(Ue(n,Ti)){if(t>=n.k())return Rn(n);if(1===t)return gr(function(n){if(Ue(n,Ei))return Dn(n);var t=n.f();if(!t.g())throw mu("Collection is empty.");return t.h()}(n))}var r=0,i=Nr(),e=n.f();n:for(;e.g();){var u=e.h();if(i.d(u),(r=r+1|0)===t)break n}return mt(i)}(n,Wn(n.k()-t|0,0))}function Un(n,t){if(!(t>=0))throw fu(ie("Requested element count "+t+" is less than zero."));if(0===t)return pt();var r=n.k();if(t>=r)return Rn(n);if(1===t)return gr(Qn(n));var i=Nr();if(Ue(n,li)){var e=r-t|0;if(e<r)do{var u=e;e=e+1|0,i.d(n.j(u))}while(e<r)}else for(var o=n.l(r-t|0);o.g();){var f=o.h();i.d(f)}return i}function Vn(n){return Ue(n,Ti)?Hn(n):Zn(n,Lr())}function Qn(n){if(n.i())throw mu("List is empty.");return n.j(kt(n))}function Zn(n,t){for(var r=n.f();r.g();){var i=r.h();t.d(i)}return t}function Yn(n){this.n_1=n}function Wn(n,t){return n<t?t:n}function Kn(n,t){return n>t?t:n}function Xn(n,t){return Ut().q(n,t,-1)}function Jn(n,t){return new Et(n,t)}function nt(n){var t=n.f();if(!t.g())return pt();var r=t.h();if(!t.g())return gr(r);var i=Lr();for(i.d(r);t.g();)i.d(t.h());return i}function tt(n){this.r_1=n}function rt(n,t){this.s_1=n,this.t_1=t}function it(){}function et(n){this.x_1=n,this.w_1=0}function ut(n,t){this.a1_1=n,et.call(this,n),ft().b1(t,this.a1_1.k()),this.w_1=t}function ot(){t=this}function ft(){return null==t&&new ot,t}function st(){ft(),it.call(this)}function ct(n){this.h1_1=n}function at(n,t){return t===n?"(this Map)":Oi(t)}function ht(n,t){var r;n:{for(var i=n.o().f();i.g();){var e=i.h();if(oe(e.j1(),t)){r=e;break n}}r=null}return r}function lt(){r=this}function _t(){return null==r&&new lt,r}function vt(n){this.q1_1=n,it.call(this)}function dt(){_t(),this.n1_1=null,this.o1_1=null}function gt(){i=this}function wt(){return null==i&&new gt,i}function bt(n){return n.length>0?nu(n):pt()}function pt(){return null==e&&new yt,e}function mt(n){switch(n.k()){case 0:return pt();case 1:return gr(n.j(0));default:return n}}function kt(n){return n.k()-1|0}function yt(){e=this,this.z1_1=new de(-1478467534,-1720727600)}function qt(n,t){this.b2_1=n,this.c2_1=t}function Bt(){u=this}function Ct(){return null==u&&new Bt,u}function xt(n,t){return Ue(n,Ti)?n.k():t}function jt(n,t){if(Ue(t,Ti))return n.m(t);for(var r=!1,i=t.f();i.g();){var e=i.h();n.d(e)&&(r=!0)}return r}function Pt(){}function It(n,t){this.h2_1=n,this.g2_1=n.i2_1.l(function(n,t){if(!(0<=t&&t<=n.k()))throw cu("Position index "+t+" must be in range ["+Oe(0,n.k())+"].");return n.k()-t|0}(n,t))}function St(n){st.call(this),this.i2_1=n}function zt(n){this.k2_1=n,this.j2_1=n.l2_1.f()}function Et(n,t){this.l2_1=n,this.m2_1=t}function Tt(n){for(;n.n2_1.g();){var t=n.n2_1.h();if(n.q2_1.t2_1(t)===n.q2_1.s2_1)return n.p2_1=t,n.o2_1=1,lr()}n.o2_1=0}function Lt(n){this.q2_1=n,this.n2_1=n.r2_1.f(),this.o2_1=-1,this.p2_1=null}function Nt(n,t,r){t=t===A||t,this.r2_1=n,this.s2_1=t,this.t2_1=r}function At(){return null==o&&new Mt,o}function Mt(){o=this,this.u2_1=new de(1993859828,793161749)}function Ft(n,t,r){return Dt(Dt(n,r)-Dt(t,r)|0,r)}function Dt(n,t){var r=n%t|0;return r>=0?r:r+t|0}function Ot(){f=this,this.p_1=new Ht(1,0)}function Rt(){return null==f&&new Ot,f}function Ht(n,t){Rt(),Vt.call(this,n,t,1)}function $t(n,t,r){Pt.call(this),this.d3_1=r,this.e3_1=t,this.f3_1=this.d3_1>0?n<=t:n>=t,this.g3_1=this.f3_1?n:this.e3_1}function Gt(){s=this}function Ut(){return null==s&&new Gt,s}function Vt(n,t,r){if(Ut(),0===r)throw fu("Step must be non-zero.");if(r===vr().MIN_VALUE)throw fu("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.z2_1=n,this.a3_1=function(n,t,r){var i;if(r>0)i=n>=t?t:t-Ft(t,n,r)|0;else{if(!(r<0))throw fu("Step is zero.");i=n<=t?t:t+Ft(n,t,0|-r)|0}return i}(n,t,r),this.b3_1=r}function Qt(n,t,r){null!=r?n.e(r(t)):null==t||Ze(t)?n.e(t):t instanceof zi?n.i3(t.h3_1):n.e(Oi(t))}function Zt(n,t,r){if(n===t)return!0;if(!(r=r!==A&&r))return!1;var i=mi(n),e=mi(t);return i===e||oe(new zi(Zi(Pi(i).toLowerCase(),0)),new zi(Zi(Pi(e).toLowerCase(),0)))}function Yt(n){return Wi(n)-1|0}function Wt(n,t,r,i){return r=r===A?0:r,(i=i!==A&&i)||"string"!=typeof n?Kt(n,t,r,Wi(n),i):n.indexOf(t,r)}function Kt(n,t,r,i,e,u){var o=(u=u!==A&&u)?Xn(Kn(r,Yt(n)),Wn(i,0)):Oe(Wn(r,0),Kn(i,Wi(n)));if("string"==typeof n&&"string"==typeof t){var f=o.z2_1,s=o.a3_1,c=o.b3_1;if(c>0&&f<=s||c<0&&s<=f)do{var a=f;if(f=f+c|0,xi(t,0,n,a,Wi(t),e))return a}while(a!==s)}else{var h=o.z2_1,l=o.a3_1,_=o.b3_1;if(_>0&&h<=l||_<0&&l<=h)do{var v=h;if(h=h+_|0,tr(t,0,n,v,Wi(t),e))return v}while(v!==l)}return-1}function Xt(n){var t=0,r=Wi(n)-1|0,i=!1;n:for(;t<=r;){var e=ki(Zi(n,i?r:t));if(i){if(!e)break n;r=r-1|0}else e?t=t+1|0:i=!0}return Ki(n,t,r+1|0)}function Jt(n,t){return ie(Ki(n,t.y2(),t.c3()+1|0))}function nr(n,t,r,i,e){r=r===A?0:r,i=i!==A&&i,rr(e=e===A?0:e);var u,o,f=nu(t);return new ur(n,r,e,(u=f,o=i,function(n,t){var r=function(n,t,r,i){if(!i&&1===t.k()){var e=function(n){if(Ue(n,Ei))return function(n){var t;switch(n.k()){case 0:throw mu("List is empty.");case 1:t=n.j(0);break;default:throw fu("List has more than one element.")}return t}(n);var t=n.f();if(!t.g())throw mu("Collection is empty.");var r=t.h();if(t.g())throw fu("Collection has more than one element.");return r}(t),u=Wt(n,e,r);return u<0?null:fr(u,e)}var o=Oe(Wn(r,0),Wi(n));if("string"==typeof n){var f=o.z2_1,s=o.a3_1,c=o.b3_1;if(c>0&&f<=s||c<0&&s<=f)do{var a,h=f;f=f+c|0;n:{for(var l=t.f();l.g();){var _=l.h();if(xi(_,0,n,h,_.length,i)){a=_;break n}}a=null}if(null!=a)return fr(h,a)}while(h!==s)}else{var v=o.z2_1,d=o.a3_1,g=o.b3_1;if(g>0&&v<=d||g<0&&d<=v)do{var w,b=v;v=v+g|0;n:{for(var p=t.f();p.g();){var m=p.h();if(tr(m,0,n,b,m.length,i)){w=m;break n}}w=null}if(null!=w)return fr(b,w)}while(b!==d)}return null}(n,u,t,o);return null==r?null:fr(r.t3_1,r.u3_1.length)}))}function tr(n,t,r,i,e,u){if(i<0||t<0||t>(Wi(n)-e|0)||i>(Wi(r)-e|0))return!1;var o=0;if(o<e)do{var f=o;if(o=o+1|0,!Zt(Zi(n,t+f|0),Zi(r,i+f|0),u))return!1}while(o<e);return!0}function rr(n){if(!(n>=0))throw fu(ie("Limit must be non-negative, but was "+n))}function ir(n){if(n.l3_1<0)n.j3_1=0,n.m3_1=null;else{var t;if(n.o3_1.r3_1>0?(n.n3_1=n.n3_1+1|0,t=n.n3_1>=n.o3_1.r3_1):t=!1,t||n.l3_1>Wi(n.o3_1.p3_1))n.m3_1=Oe(n.k3_1,Yt(n.o3_1.p3_1)),n.l3_1=-1;else{var r=n.o3_1.s3_1(n.o3_1.p3_1,n.l3_1);if(null==r)n.m3_1=Oe(n.k3_1,Yt(n.o3_1.p3_1)),n.l3_1=-1;else{var i=r.v3(),e=r.w3();n.m3_1=function(n,t){return t<=vr().MIN_VALUE?Rt().p_1:Oe(n,t-1|0)}(n.k3_1,i),n.k3_1=i+e|0,n.l3_1=n.k3_1+(0===e?1:0)|0}}n.j3_1=1}}function er(n){this.o3_1=n,this.j3_1=-1,this.k3_1=function(n,t,r){if(0>r)throw fu("Cannot coerce value to an empty range: maximum "+r+" is less than minimum 0.");return n<0?0:n>r?r:n}(n.q3_1,0,Wi(n.p3_1)),this.l3_1=this.k3_1,this.m3_1=null,this.n3_1=0}function ur(n,t,r,i){this.p3_1=n,this.q3_1=t,this.r3_1=r,this.s3_1=i}function or(n,t){this.t3_1=n,this.u3_1=t}function fr(n,t){return new or(n,t)}function sr(){}function cr(){}function ar(){}function hr(){c=this}function lr(){return null==c&&new hr,c}function _r(){a=this,this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function vr(){return null==a&&new _r,a}function dr(n){for(var t=[],r=n.f();r.g();)t.push(r.h());return t}function gr(n){return 0===(t=[n]).length?Lr():Ar(new qt(t,!0));var t}function wr(n){return n<0&&function(){throw yu("Index overflow has happened.")}(),n}function br(n){return void 0!==n.toArray?n.toArray():dr(n)}function pr(n){return function(n,t){for(var r=0,i=n.length;r<i;){var e=n[r];r=r+1|0,t.d(e)}return t}(t=[n],(r=t.length,i=ce(se(Zr)),function(n,t,r){zr.call(r),Zr.call(r),r.y5_1=function(n){return Ur(n,0,ce(se(Vr)))}(n)}(r,0,i),i));var t,r,i}function mr(){it.call(this)}function kr(n){this.j4_1=n,this.h4_1=0,this.i4_1=-1}function yr(n,t){this.n4_1=n,kr.call(this,n),ft().b1(t,this.n4_1.k()),this.h4_1=t}function qr(){mr.call(this),this.o4_1=0}function Br(n){this.r4_1=n}function Cr(n){this.s4_1=n}function xr(n,t){this.t4_1=n,this.u4_1=t}function jr(){zr.call(this)}function Pr(n){this.x4_1=n,zr.call(this)}function Ir(n){this.e5_1=n,mr.call(this)}function Sr(){dt.call(this),this.c5_1=null,this.d5_1=null}function zr(){mr.call(this)}function Er(){h=this;var n=Nr();n.c_1=!0,this.i5_1=n}function Tr(){return null==h&&new Er,h}function Lr(){return n=ce(se(Fr)),t=[],Fr.call(n,t),n;var n,t}function Nr(n){return t=ce(se(Fr)),r=[],Fr.call(t,r),t;var t,r}function Ar(n){return function(n,t){var r;return r=br(n),Fr.call(t,r),t}(n,ce(se(Fr)))}function Mr(n,t){return ft().e1(t,n.k()),t}function Fr(n){Tr(),qr.call(this),this.b_1=n,this.c_1=!1}function Dr(n,t,r,i,e){if(r===i)return n;var u=(r+i|0)/2|0,o=Dr(n,t,r,u,e),f=Dr(n,t,u+1|0,i,e),s=o===t?n:t,c=r,a=u+1|0,h=r;if(h<=i)do{var l=h;if(h=h+1|0,c<=u&&a<=i){var _=o[c],v=f[a];e.compare(_,v)<=0?(s[l]=_,c=c+1|0):(s[l]=v,a=a+1|0)}else c<=u?(s[l]=o[c],c=c+1|0):(s[l]=f[a],a=a+1|0)}while(l!==i);return s}function Or(n,t){return(3&n)-(3&t)|0}function Rr(){_=this}function Hr(n){this.n5_1=n,jr.call(this)}function $r(n){return function(n,t){Sr.call(t),Vr.call(t),t.t5_1=n,t.u5_1=n.w5()}(new Jr((null==_&&new Rr,_)),n),n}function Gr(){return $r(ce(se(Vr)))}function Ur(n,t,r){if($r(r),!(n>=0))throw fu(ie("Negative initial capacity: "+n));if(!(t>=0))throw fu(ie("Non-positive load factor: "+t));return r}function Vr(){this.v5_1=null}function Qr(n,t){return zr.call(t),Zr.call(t),t.y5_1=n,t}function Zr(){}function Yr(n,t){var r=Kr(n,n.h6_1.m5(t));if(null==r)return null;var i=r;if(null!=i&&Ve(i))return Wr(i,n,t);var e=i;return n.h6_1.l5(e.j1(),t)?e:null}function Wr(n,t,r){var i;n:{for(var e=0,u=n.length;e<u;){var o=n[e];if(e=e+1|0,t.h6_1.l5(o.j1(),r)){i=o;break n}}i=null}return i}function Kr(n,t){var r=n.i6_1[t];return void 0===r?null:r}function Xr(n){this.g6_1=n,this.z5_1=-1,this.a6_1=Object.keys(n.i6_1),this.b6_1=-1,this.c6_1=null,this.d6_1=!1,this.e6_1=-1,this.f6_1=null}function Jr(n){this.h6_1=n,this.i6_1=this.k6(),this.j6_1=0}function ni(){}function ti(n){this.n6_1=n,this.l6_1=null,this.m6_1=null,this.m6_1=this.n6_1.y6_1.v6_1}function ri(){v=this;var n,t=(fi(0,0,n=ce(se(si))),n);t.x6_1=!0,this.e7_1=t}function ii(){return null==v&&new ri,v}function ei(n,t,r){this.d7_1=n,xr.call(this,t,r),this.b7_1=null,this.c7_1=null}function ui(n){this.y6_1=n,jr.call(this)}function oi(){return $r(n=ce(se(si))),si.call(n),n.w6_1=Gr(),n;var n}function fi(n,t,r){return Ur(n,t,r),si.call(r),r.w6_1=Gr(),r}function si(){ii(),this.v6_1=null,this.x6_1=!1}function ci(){d=this;var n=ai(0),t=n.y5_1;(t instanceof si?t:_e()).j5(),this.f7_1=n}function ai(n){return function(n,t){return function(n,t,r){Qr(function(n,t){return fi(n,t,ce(se(si)))}(n,t),r),hi.call(r)}(n,0,t),t}(n,ce(se(hi)))}function hi(){null==d&&new ci}function li(){}function _i(){}function vi(n){_i.call(this),this.k7_1=n}function di(){gi.call(this)}function gi(){_i.call(this),this.m7_1=""}function wi(){if(!w){w=!0;var n="undefined"!=typeof process&&process.versions&&!!process.versions.node;g=n?new vi(process.stdout):new di}}function bi(){return n=ce(se(pi)),pi.call(n,""),n;var n}function pi(n){this.o7_1=void 0!==n?n:""}function mi(n){var t=Pi(n).toUpperCase();return t.length>1?n:Zi(t,0)}function ki(n){return function(n){return 9<=n&&n<=13||28<=n&&n<=32||160===n||n>4096&&(5760===n||8192<=n&&n<=8202||8232===n||8233===n||8239===n||8287===n||12288===n)}(n)}function yi(){b=this,this.q7_1=new RegExp("[\\\\^$*+?.()|[\\]{}]","g"),this.r7_1=new RegExp("[\\\\$]","g"),this.s7_1=new RegExp("\\$","g")}function qi(){return null==b&&new yi,b}function Bi(n,t){qi(),this.v7_1=n,this.w7_1=function(n){if(Ue(n,Ti)){var t;switch(n.k()){case 0:t=At();break;case 1:t=pr(Ue(n,Ei)?n.j(0):n.f().h());break;default:t=Zn(n,ai(n.k()))}return t}return function(n){switch(n.k()){case 0:return At();case 1:return pr(n.f().h());default:return n}}(Zn(n,(r=ce(se(hi)),Qr(oi(),r),hi.call(r),r)));var r}(t),this.x7_1=new RegExp(n,Mn(t,"","gu",A,A,A,Ci)),this.y7_1=null,this.z7_1=null}function Ci(n){return n.d8_1}function xi(n,t,r,i,e,u){return tr(n,t,r,i,e,u=u!==A&&u)}function ji(n,t){return n-t|0}function Pi(n){return String.fromCharCode(n)}function Ii(){p=this,this.e8_1=0,this.f8_1=65535,this.g8_1=55296,this.h8_1=56319,this.i8_1=56320,this.j8_1=57343,this.k8_1=55296,this.l8_1=57343,this.m8_1=2,this.n8_1=16}function Si(){return null==p&&new Ii,p}function zi(n){Si(),this.h3_1=n}function Ei(){}function Ti(){}function Li(){}function Ni(){}function Ai(){}function Mi(){}function Fi(){m=this}function Di(n,t){null==m&&new Fi,this.p8_1=n,this.q8_1=t}function Oi(n){var t=null==n?null:ie(n);return null==t?"null":t}function Ri(n){return new Hi(n)}function Hi(n){this.t8_1=n,this.s8_1=0}function $i(){return Qi(),k}function Gi(){return Qi(),y}function Ui(){return Qi(),q}function Vi(){return Qi(),B}function Qi(){x||(x=!0,k=new ArrayBuffer(8),y=new Float64Array($i()),new Float32Array($i()),q=new Int32Array($i()),Gi()[0]=-1,B=0!==Ui()[0]?1:0,C=1-Vi()|0)}function Zi(n,t){var r;if(Yi(n)){var i,e=n.charCodeAt(t);if(Si(),e<0?i=!0:(Si(),i=e>65535),i)throw fu("Invalid Char code: "+e);r=De(e)}else r=n.y3(t);return r}function Yi(n){return"string"==typeof n}function Wi(n){return Yi(n)?n.length:n.x3()}function Ki(n,t,r){return Yi(n)?n.substring(t,r):n.z3(t,r)}function Xi(n){return ie(n)}function Ji(n,t){var r;switch(typeof n){case"number":r="number"==typeof t?ne(n,t):t instanceof de?ne(n,t.w8()):te(n,t);break;case"string":case"boolean":r=te(n,t);break;default:r=function(n,t){return n.a4(t)}(n,t)}return r}function ne(n,t){var r;if(n<t)r=-1;else if(n>t)r=1;else if(n===t){var i;if(0!==n)i=0;else{var e=1/n;i=e===1/t?0:e<0?-1:1}r=i}else r=n!=n?t!=t?0:1:-1;return r}function te(n,t){return n<t?-1:n>t?1:0}function re(n){if(!("kotlinHashCodeValue$"in n)){var t=4294967296*Math.random()|0,r=new Object;r.value=t,r.enumerable=!1,Object.defineProperty(n,"kotlinHashCodeValue$",r)}return n.kotlinHashCodeValue$}function ie(n){return null==n?"null":function(n){return!!$e(n)||En(n)}(n)?"[...]":n.toString()}function ee(n){if(null==n)return 0;var t;switch(typeof n){case"object":t="function"==typeof n.hashCode?n.hashCode():re(n);break;case"function":t=re(n);break;case"number":t=function(n){return Qi(),(0|n)===n?Fe(n):(Gi()[0]=n,zn(Ui()[(Qi(),C)],31)+Ui()[Vi()]|0)}(n);break;case"boolean":t=n?1:0;break;default:t=ue(String(n))}return t}function ue(n){var t=0,r=0,i=n.length-1|0;if(r<=i)do{var e=r;r=r+1|0;var u=n.charCodeAt(e);t=zn(t,31)+u|0}while(e!==i);return t}function oe(n,t){return null==n?null==t:null!=t&&("object"==typeof n&&"function"==typeof n.equals?n.equals(t):n!=n?t!=t:"number"==typeof n&&"number"==typeof t?n===t&&(0!==n||1/n==1/t):n===t)}function fe(n,t){null!=Error.captureStackTrace?Error.captureStackTrace(n,t):n.stack=(new Error).stack}function se(n){return n.prototype}function ce(n){return Object.create(n)}function ae(n,t,r){Error.call(n),function(n,t,r){var i=Xe(Object.getPrototypeOf(n));if(!(1&i)){var e;if(null==t){var u;if(null!==t){var o=null==r?null:r.toString();u=null==o?A:o}else u=A;e=u}else e=t;n.message=e}2&i||(n.cause=r),n.name=Object.getPrototypeOf(n).constructor.name}(n,t,r)}function he(n){var t;return null==n?function(){throw ju()}():t=n,t}function le(){throw Iu()}function _e(){throw zu()}function ve(){j=this,this.x8_1=new de(0,-2147483648),this.y8_1=new de(-1,2147483647),this.z8_1=8,this.a9_1=64}function de(n,t){null==j&&new ve,ar.call(this),this.u8_1=n,this.v8_1=t}function ge(){return Me(),P}function we(){return Me(),I}function be(){return Me(),S}function pe(){return Me(),E}function me(){return Me(),T}function ke(n,t){if(Me(),xe(n,t))return 0;var r=Ie(n),i=Ie(t);return r&&!i?-1:!r&&i?1:Ie(qe(n,t))?-1:1}function ye(n,t){Me();var r=n.v8_1>>>16|0,i=65535&n.v8_1,e=n.u8_1>>>16|0,u=65535&n.u8_1,o=t.v8_1>>>16|0,f=65535&t.v8_1,s=t.u8_1>>>16|0,c=0,a=0,h=0,l=0;return c=(c=c+((a=(a=a+((h=(h=h+((l=l+(u+(65535&t.u8_1)|0)|0)>>>16|0)|0)+(e+s|0)|0)>>>16|0)|0)+(i+f|0)|0)>>>16|0)|0)+(r+o|0)|0,new de((h&=65535)<<16|(l&=65535),(c&=65535)<<16|(a&=65535))}function qe(n,t){return Me(),ye(n,t.e9())}function Be(n,t){if(Me(),Se(n))return ge();if(Se(t))return ge();if(xe(n,pe()))return ze(t)?pe():ge();if(xe(t,pe()))return ze(n)?pe():ge();if(Ie(n))return Ie(t)?Be(Ee(n),Ee(t)):Ee(Be(Ee(n),t));if(Ie(t))return Ee(Be(n,Ee(t)));if(Te(n,me())&&Te(t,me()))return Le(Ce(n)*Ce(t));var r=n.v8_1>>>16|0,i=65535&n.v8_1,e=n.u8_1>>>16|0,u=65535&n.u8_1,o=t.v8_1>>>16|0,f=65535&t.v8_1,s=t.u8_1>>>16|0,c=65535&t.u8_1,a=0,h=0,l=0,_=0;return l=l+((_=_+zn(u,c)|0)>>>16|0)|0,_&=65535,h=(h=h+((l=l+zn(e,c)|0)>>>16|0)|0)+((l=(l&=65535)+zn(u,s)|0)>>>16|0)|0,l&=65535,a=(a=(a=a+((h=h+zn(i,c)|0)>>>16|0)|0)+((h=(h&=65535)+zn(e,s)|0)>>>16|0)|0)+((h=(h&=65535)+zn(u,f)|0)>>>16|0)|0,h&=65535,a=a+(((zn(r,c)+zn(i,s)|0)+zn(e,f)|0)+zn(u,o)|0)|0,new de(l<<16|_,(a&=65535)<<16|h)}function Ce(n){return Me(),4294967296*n.v8_1+function(n){return Me(),n.u8_1>=0?n.u8_1:4294967296+n.u8_1}(n)}function xe(n,t){return Me(),n.v8_1===t.v8_1&&n.u8_1===t.u8_1}function je(n,t){if(Me(),t<2||36<t)throw vu("radix out of range: "+t);if(Se(n))return"0";if(Ie(n)){if(xe(n,pe())){var r=Pe(t),i=n.d9(r),e=qe(Be(i,r),n).g9();return je(i,t)+e.toString(t)}return"-"+je(Ee(n),t)}for(var u=2===t?31:t<=10?9:t<=21?7:t<=35?6:5,o=Le(Math.pow(t,u)),f=n,s="";;){var c=f.d9(o),a=qe(f,Be(c,o)).g9().toString(t);if(Se(f=c))return a+s;for(;a.length<u;)a="0"+a;s=a+s}}function Pe(n){return Me(),new de(n,n<0?-1:0)}function Ie(n){return Me(),n.v8_1<0}function Se(n){return Me(),0===n.v8_1&&0===n.u8_1}function ze(n){return Me(),!(1&~n.u8_1)}function Ee(n){return Me(),n.e9()}function Te(n,t){return Me(),ke(n,t)<0}function Le(n){if(Me(),(t=n)!=t)return ge();if(n<=-0x8000000000000000)return pe();if(n+1>=0x8000000000000000)return Me(),z;if(n<0)return Ee(Le(-n));var t,r=4294967296;return new de(n%r|0,n/r|0)}function Ne(n,t){return Me(),ke(n,t)>0}function Ae(n,t){return Me(),ke(n,t)>=0}function Me(){L||(L=!0,P=Pe(0),I=Pe(1),S=Pe(-1),z=new de(-1,2147483647),E=new de(0,-2147483648),T=Pe(16777216))}function Fe(n){return n instanceof de?n.g9():function(n){return n>2147483647?2147483647:n<-2147483648?-2147483648:0|n}(n)}function De(n){var t;return t=function(n){return n<<16>>16}(Fe(n)),function(n){return 65535&n}(t)}function Oe(n,t){return new Ht(n,t)}function Re(n,t,r,i){return He("class",n,t,r,i,null)}function He(n,t,r,i,e,u){return{kind:n,simpleName:t,associatedObjectKey:r,associatedObjects:i,suspendArity:e,$kClass$:A,iid:u}}function $e(n){return Array.isArray(n)}function Ge(n,t,r,i,e,u,o,f){null!=i&&(n.prototype=Object.create(i.prototype),n.prototype.constructor=n);var s=r(t,u,o,null==f?[]:f);n.$metadata$=s,null!=e&&((null!=s.iid?n:n.prototype).$imask$=function(n){for(var t=1,r=[],i=0,e=n.length;i<e;){var u=n[i];i=i+1|0;var o=t,f=u.prototype.$imask$,s=null==f?u.$imask$:f;null!=s&&(r.push(s),o=s.length);var c=u.$metadata$.iid,a=null==c?null:(l=void 0,v=1<<(31&(h=c)),(l=new Int32Array(1+(h>>5)|0))[_=h>>5]=l[_]|v,l);null!=a&&(r.push(a),o=Math.max(o,a.length)),o>t&&(t=o)}var h,l,_,v;return function(n,t){for(var r=0,i=new Int32Array(n);r<n;){for(var e=r,u=0,o=0,f=t.length;o<f;){var s=t[o];o=o+1|0,e<s.length&&(u|=s[e])}i[e]=u,r=r+1|0}return i}(t,r)}(e))}function Ue(n,t){return function(n,t){var r=n.$imask$;return null!=r&&function(n,t){var r=t>>5;if(r>n.length)return!1;var i=1<<(31&t);return!!(n[r]&i)}(r,t)}(n,t.$metadata$.iid)}function Ve(n){return!!$e(n)&&!n.$type$}function Qe(n){var t;switch(typeof n){case"string":case"number":case"boolean":case"function":t=!0;break;default:t=n instanceof Object}return t}function Ze(n){return"string"==typeof n||Ue(n,sr)}function Ye(n,t,r,i){return He("interface",n,t,r,i,(null==N&&(N=0),N=We()+1|0,We()))}function We(){if(null!=N)return N;!function(){throw Tu("lateinit property iid has not been initialized")}()}function Ke(n,t,r,i){return He("object",n,t,r,i,null)}function Xe(n){var t=n.constructor,r=null==t?null:t.$metadata$,i=null==r?null:r.errorInfo;if(null!=i)return i;var e,u=0;if(Je(n,"message")&&(u|=1),Je(n,"cause")&&(u|=2),3!==u){var o=(e=n,Object.getPrototypeOf(e));o!=Error.prototype&&(u|=Xe(o))}return null!=r&&(r.errorInfo=u),u}function Je(n,t){return n.hasOwnProperty(t)}function nu(n){return new Fr(n)}function tu(n,t,r){for(var i=new Int32Array(r),e=0,u=0,o=0,f=0,s=n.length;f<s;){var c=Zi(n,f);f=f+1|0;var a=t[c];if(u|=(31&a)<<o,a<32){var h=e;e=h+1|0,i[h]=u,u=0,o=0}else o=o+5|0}return i}function ru(n,t){for(var r=0,i=n.length-1|0,e=-1,u=0;r<=i;)if(t>(u=n[e=(r+i|0)/2|0]))r=e+1|0;else{if(t===u)return e;i=e-1|0}return e-(t<u?1:0)|0}function iu(){M=this;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Int32Array(128),r=0,i=Wi(n)-1|0;if(r<=i)do{var e=r;r=r+1|0,t[Zi(n,e)]=e}while(r<=i);var u=tu("hCgBpCQGYHZH5BRpBPPPPPPRMP5BPPlCPP6BkEPPPPcPXPzBvBrB3BOiDoBHwD+E3DauCnFmBmB2D6E1BlBTiBmBlBP5BhBiBrBvBjBqBnBPRtBiCmCtBlB0BmB5BiB7BmBgEmChBZgCoEoGVpBSfRhBPqKQ2BwBYoFgB4CJuTiEvBuCuDrF5DgEgFlJ1DgFmBQtBsBRGsB+BPiBlD1EIjDPRPPPQPPPPPGQSQS/DxENVNU+B9zCwBwBPPCkDPNnBPqDYY1R8B7FkFgTgwGgwUwmBgKwBuBScmEP/BPPPPPPrBP8B7F1B/ErBqC6B7BiBmBfQsBUwCw/KwqIwLwETPcPjQgJxFgBlBsD",t,222),o=new Int32Array(u.length),f=0,s=u.length-1|0;if(f<=s)do{var c=f;f=f+1|0,o[c]=0===c?u[c]:o[c-1|0]+u[c]|0}while(f<=s);this.h9_1=o,this.i9_1=tu("aaMBXHYH5BRpBPPPPPPRMP5BPPlCPPzBDOOPPcPXPzBvBjB3BOhDmBBpB7DoDYxB+EiBP1DoExBkBQhBekBPmBgBhBctBiBMWOOXhCsBpBkBUV3Ba4BkB0DlCgBXgBtD4FSdBfPhBPpKP0BvBXjEQ2CGsT8DhBtCqDpFvD1D3E0IrD2EkBJrBDOBsB+BPiBlB1EIjDPPPPPPPPPPPGPPMNLsBNPNPKCvBvBPPCkDPBmBPhDXXgD4B6FzEgDguG9vUtkB9JcuBSckEP/BPPPPPPBPf4FrBjEhBpC3B5BKaWPrBOwCk/KsCuLqDHPbPxPsFtEaaqDL",t,222),this.j9_1=tu("GFjgggUHGGFFZZZmzpz5qB6s6020B60ptltB6smt2sB60mz22B1+vv+8BZZ5s2850BW5q1ymtB506smzBF3q1q1qB1q1q1+Bgii4wDTm74g3KiggxqM60q1q1Bq1o1q1BF1qlrqrBZ2q5wprBGFZWWZGHFsjiooLowgmOowjkwCkgoiIk7ligGogiioBkwkiYkzj2oNoi+sbkwj04DghhkQ8wgiYkgoioDsgnkwC4gikQ//v+85BkwvoIsgoyI4yguI0whiwEowri4CoghsJowgqYowgm4DkwgsY/nwnzPowhmYkg6wI8yggZswikwHgxgmIoxgqYkwgk4DkxgmIkgoioBsgssoBgzgyI8g9gL8g9kI0wgwJoxgkoC0wgioFkw/wI0w53iF4gioYowjmgBHGq1qkgwBF1q1q8qBHwghuIwghyKk0goQkwgoQk3goQHGFHkyg0pBgxj6IoinkxDswno7Ikwhz9Bo0gioB8z48Rwli0xN0mpjoX8w78pDwltoqKHFGGwwgsIHFH3q1q16BFHWFZ1q10q1B2qlwq1B1q10q1B2q1yq1B6q1gq1Biq1qhxBir1qp1Bqt1q1qB1g1q1+B//3q16B///q1qBH/qlqq9Bholqq9B1i00a1q10qD1op1HkwmigEigiy6Cptogq1Bixo1kDq7/j00B2qgoBWGFm1lz50B6s5q1+BGWhggzhwBFFhgk4//Bo2jigE8wguI8wguI8wgugUog1qoB4qjmIwwi2KgkYHHH4lBgiFWkgIWoghssMmz5smrBZ3q1y50B5sm7gzBtz1smzB5smz50BqzqtmzB5sgzqzBF2/9//5BowgoIwmnkzPkwgk4C8ys65BkgoqI0wgy6FghquZo2giY0ghiIsgh24B4ghsQ8QF/v1q1OFs0O8iCHHF1qggz/B8wg6Iznv+//B08QgohsjK0QGFk7hsQ4gB",t,222)}function eu(){return null==M&&new iu,M}function uu(){F=this,this.k9_1=new Int32Array([170,186,688,704,736,837,890,7468,7544,7579,8305,8319,8336,8560,9424,11388,42652,42864,43e3,43868]),this.l9_1=new Int32Array([1,1,9,2,5,1,1,63,1,37,1,1,13,16,26,2,2,1,2,4])}function ou(){return null==F&&new uu,F}function fu(n){var t=function(n,t){return wu(n,t),su.call(t),t}(n,ce(se(su)));return fe(t,fu),t}function su(){fe(this,su)}function cu(n){var t=function(n,t){return wu(n,t),au.call(t),t}(n,ce(se(au)));return fe(t,cu),t}function au(){fe(this,au)}function hu(n){var t=function(n,t){return wu(n,t),lu.call(t),t}(n,ce(se(lu)));return fe(t,hu),t}function lu(){fe(this,lu)}function _u(n,t){return ae(t,n),du.call(t),t}function vu(n){var t=_u(n,ce(se(du)));return fe(t,vu),t}function du(){fe(this,du)}function gu(n){return function(n){ae(n),du.call(n)}(n),bu.call(n),n}function wu(n,t){return _u(n,t),bu.call(t),t}function bu(){fe(this,bu)}function pu(){var n,t=(gu(n=ce(se(ku))),ku.call(n),n);return fe(t,pu),t}function mu(n){var t=function(n,t){return wu(n,t),ku.call(t),t}(n,ce(se(ku)));return fe(t,mu),t}function ku(){fe(this,ku)}function yu(n){var t=function(n,t){return wu(n,t),qu.call(t),t}(n,ce(se(qu)));return fe(t,yu),t}function qu(){fe(this,qu)}function Bu(){var n,t=(gu(n=ce(se(xu))),xu.call(n),n);return fe(t,Bu),t}function Cu(n){var t=function(n,t){return wu(n,t),xu.call(t),t}(n,ce(se(xu)));return fe(t,Cu),t}function xu(){fe(this,xu)}function ju(){var n,t=(gu(n=ce(se(Pu))),Pu.call(n),n);return fe(t,ju),t}function Pu(){fe(this,Pu)}function Iu(){var n,t=(gu(n=ce(se(Su))),Su.call(n),n);return fe(t,Iu),t}function Su(){fe(this,Su)}function zu(){var n,t=(gu(n=ce(se(Eu))),Eu.call(n),n);return fe(t,zu),t}function Eu(){fe(this,Eu)}function Tu(n){var t=function(n,t){return wu(n,t),Lu.call(t),t}(n,ce(se(Lu)));return fe(t,Tu),t}function Lu(){fe(this,Lu)}function Nu(n,t){var r,i=n.className;return(r="(^|.*\\s+)"+t+"($|\\s+.*)",function(n,t){return Bi.call(t,n,At()),t}(r,ce(se(Bi)))).a8(i)}function Au(n,t){this.o9_1=n,this.p9_1=t}function Mu(n){this.q9_1=n}function Fu(n,t,r){var i,e=Ff(),u=Wu(),o=Mf().ga(t),f=Wu();if(0===Wi(r))i=Lf();else{var s=n.ia_1,c=null==s?null:new Mu(s).v9(r,"Copy reference to the clipboard");i=null==c?Lf():c}return e.ja([u,o,f,i])}function Du(n){n=n===A?null:n,this.ia_1=n}function Ou(n,t,r){Yu.call(this),this.ma_1=n,this.na_1=t,this.oa_1=r}function Ru(n,t){this.ra_1=n,this.sa_1=t}function Hu(n,t){Yu.call(this),this.va_1=n,this.wa_1=t}function $u(n,t){Yu.call(this),this.xa_1=n,this.ya_1=t}function Gu(n){Yu.call(this),this.za_1=n}function Uu(n){Yu.call(this),this.ab_1=n}function Vu(n){Yu.call(this),this.bb_1=n}function Qu(n,t){Yu.call(this),this.cb_1=n,this.db_1=t}function Zu(n){Yu.call(this),this.eb_1=n}function Yu(){}function Wu(){return ro(),D}function Ku(){return ro(),O}function Xu(){return ro(),R}function Ju(){return ro(),H}function no(n){return ro(),Ff().fb(Jf(to),n)}function to(n){return ro(),n.gb(["invisible-text","text-for-copy"]),lr()}function ro(){$||($=!0,D=no("`"),O=no(" "),R=no("("),H=no(")"))}function io(n,t){Yu.call(this),this.hb_1=n,this.ib_1=t}function eo(n){Yu.call(this),this.jb_1=n}function uo(n,t){Yu.call(this),this.kb_1=n,this.lb_1=t}function oo(n){Yu.call(this),this.mb_1=n}function fo(n){Yu.call(this),this.nb_1=n}function so(n){Yu.call(this),this.ob_1=n}function co(n,t,r){Yu.call(this),this.pb_1=n,this.qb_1=t,this.rb_1=r}function ao(n){Yu.call(this),this.sb_1=n}function ho(n){Yu.call(this),this.tb_1=n}function lo(n){return n.xb_1.vb_1.k()}function _o(){if(Z)return lr();Z=!0,G=new ko("Inputs",0,"Build configuration inputs"),U=new ko("ByMessage",1,"Problems grouped by message"),V=new ko("ByLocation",2,"Problems grouped by location"),Q=new ko("IncompatibleTasks",3,"Incompatible tasks")}function vo(n){yc.call(this),this.yb_1=n}function go(n){yc.call(this),this.ac_1=n}function wo(n){yc.call(this),this.bc_1=n}function bo(n){yc.call(this),this.cc_1=n}function po(n){yo.call(this),this.dc_1=n}function mo(n,t,r,i,e,u,o,f){this.ec_1=n,this.fc_1=t,this.gc_1=r,this.hc_1=i,this.ic_1=e,this.jc_1=u,this.kc_1=o,this.lc_1=f}function ko(n,t,r){Di.call(this,n,t),this.qc_1=r}function yo(){Bc.call(this)}function qo(n,t){var r=Af(),i=Jf(Lo),e=Af().y9(Jf(No),[]),u=function(n,t){var r,i=Af(),e=Jf(Oo),u=Ff().ga("Learn more about the "),o=$f();return i.y9(e,[u,o.fb(Jf((r=t,function(n){return n.bd(r.tc_1),lr()})),t.sc_1),Ff().ga(".")])}(0,t.gc_1),o=Af().y9(Jf(Ao),[Co(0,t)]),f=Af();return r.y9(i,[e,u,o,f.y9(Jf(Mo),[Io(0,Ro(),t.lc_1,lo(t.jc_1)),Io(0,Ho(),t.lc_1,lo(t.hc_1)),Io(0,$o(),t.lc_1,lo(t.ic_1)),Io(0,Go(),t.lc_1,lo(t.kc_1))])])}function Bo(n,t){var r,i,e=Af(),u=Jf(Fo);switch(t.lc_1.q8_1){case 0:r=zo(0,t.jc_1,((i=function(n){return new wo(n)}).callableName="<init>",i));break;case 3:r=zo(0,t.kc_1,function(){var n=function(n){return new bo(n)};return n.callableName="<init>",n}());break;case 1:r=zo(0,t.hc_1,function(){var n=function(n){return new go(n)};return n.callableName="<init>",n}());break;case 2:r=zo(0,t.ic_1,function(){var n=function(n){return new vo(n)};return n.callableName="<init>",n}());break;default:le()}return e.y9(u,[r])}function Co(n,t){return Af().ja([Po(0,t),xo(0,t)])}function xo(n,t){for(var r=Af(),i=t.fc_1,e=Lr(),u=0,o=i.f();o.g();){var f=o.h(),s=u;u=s+1|0,jt(e,0===wr(s)?gr(jo(Vo(),f)):bt([Gf().ja([]),jo(Vo(),f)]))}return r.ha(e)}function jo(n,t){return Df().ja([Ic(t)])}function Po(n,t){return Nf().ja([jc().ka(t.ec_1)])}function Io(n,t,r,i){var e,u,o;return Af().y9(Jf((e=i,u=t,o=r,function(n){return n.t9("group-selector"),0===e?(n.t9("group-selector--disabled"),lr()):u.equals(o)?(n.t9("group-selector--active"),lr()):(n.u9(function(n){return function(t){return new po(n)}}(u)),lr()),lr()})),[Ff().rc(t.qc_1,[So(0,i)])])}function So(n,t){return Ff().y9(Jf(Do),[Ku(),Xu(),Ff().ga(""+t),Ju()])}function zo(n,t,r){return function(n,t,r){var i,e=Af(),u=Of();return e.ja([u.ha(ys(t,(i=r,function(n){var t,r=n.cd().ub_1;return r instanceof Hu?Nc(i,(Vo(),(t=function(n){return Eo(0,n)}).callableName="viewNode",t),n,r.va_1,r.wa_1,Cc()):r instanceof $u?Nc(i,function(){var n=function(n){return Eo(0,n)};return n.callableName="viewNode",n}(Vo()),n,r.xa_1,r.ya_1,xc()):r instanceof io?Nc(i,function(){var n=function(n){return Eo(0,n)};return n.callableName="viewNode",n}(Vo()),n,r.hb_1,r.ib_1,A,So(Vo(),n.cd().vb_1.k())):r instanceof Ou?Lc(i,n,r):Nc(i,function(){var n=function(n){return Eo(0,n)};return n.callableName="viewNode",n}(Vo()),n,r)})))])}(0,t.xb_1.uc().vc(),r)}function Eo(n,t){var r;return t instanceof eo?Sc((r=t,function(n){return n.ed("project "),n.fd(r.jb_1),lr()})):t instanceof co?Sc(function(n){return function(t){return t.ed(n.pb_1+" "),t.fd(n.qb_1),t.ed(" of "),t.fd(n.rb_1),lr()}}(t)):t instanceof so?Sc(function(n){return function(t){return t.ed("system property "),t.fd(n.ob_1),lr()}}(t)):t instanceof uo?Sc(function(n){return function(t){return t.ed("task "),t.fd(n.kb_1),t.ed(" of type "),t.fd(n.lb_1),lr()}}(t)):t instanceof fo?Sc(function(n){return function(t){return t.ed("bean of type "),t.fd(n.nb_1),lr()}}(t)):t instanceof ao?Sc(function(n){return function(t){return t.ed(n.sb_1),lr()}}(t)):t instanceof ho?Sc(function(n){return function(t){return t.ed("class "),t.fd(n.tb_1),lr()}}(t)):t instanceof Zu?Sc(function(n){return function(t){return t.ed(n.eb_1),lr()}}(t)):t instanceof Gu?Ic(t.za_1):t instanceof Qu?Qo(t):Ff().ga(ie(t))}function To(n){return n.t9("report-wrapper"),lr()}function Lo(n){return n.t9("header"),lr()}function No(n){return n.t9("gradle-logo"),lr()}function Ao(n){return n.t9("title"),lr()}function Mo(n){return n.t9("groups"),lr()}function Fo(n){return n.t9("content"),lr()}function Do(n){return n.t9("group-selector__count"),lr()}function Oo(n){return n.t9("learn-more"),lr()}function Ro(){return _o(),G}function Ho(){return _o(),U}function $o(){return _o(),V}function Go(){return _o(),Q}function Uo(){Y=this}function Vo(){return null==Y&&new Uo,Y}function Qo(n){var t;return $f().fb(Jf((t=n,function(n){return n.t9("documentation-button"),n.bd(t.cb_1),lr()})),n.db_1)}function Zo(n,t,r){this.kd_1=n,this.ld_1=t,this.md_1=r}function Yo(n,t,r){this.nd_1=n,this.od_1=t,this.pd_1=r}function Wo(n,t){for(var r=vf(n),i=t.trace,e=Nr(i.length),u=0,o=i.length;u<o;){var f,s=i[u];u=u+1|0,f=Jo(s),e.d(f)}return new Zo(t,r,e)}function Ko(n,t){var r,i=null==(r=t.kd_1.error)?null:nf(r);null==i||n.d(i)}function Xo(n){return function(n,t,r){var i=null==n.error?null:new Hu(t,r);return null==i?new $u(t,r):i}(n.kd_1,new Gu(n.ld_1),ef(n.kd_1))}function Jo(n){var t;switch(n.kind){case"Project":t=new eo(n.path);break;case"Task":t=new uo(n.path,n.type);break;case"TaskPath":t=new oo(n.path);break;case"Bean":t=new fo(n.type);break;case"Field":t=new co("field",n.name,n.declaringType);break;case"InputProperty":t=new co("input property",n.name,n.task);break;case"OutputProperty":t=new co("output property",n.name,n.task);break;case"SystemProperty":t=new so(n.name);break;case"PropertyUsage":t=new co("property",n.name,n.from);break;case"BuildLogic":t=new ao(n.location);break;case"BuildLogicClass":t=new ho(n.type);break;default:t=new Zu("Gradle runtime")}return t}function nf(n){var t=n.parts;if(null==t){var r=n.summary;return null==r?null:new Gu(vf(r))}for(var i=n.summary,e=null==i?null:vf(i),u=Lr(),o=Ri(t);o.g();){var f=rf(o.h());null==f||u.d(f)}for(var s=Mn(u,"\n"),c=Lr(),a=Ri(t);a.g();){var h=tf(a.h());null==h||c.d(h)}return new Ou(e,s,c)}function tf(n){var t=rf(n);if(null==t)return null;var r,i,e=nt(new Nt(function(n,t,r,i){var e;return Jn(nr(n,["\r\n","\n","\r"],A,r=r!==A&&r,i=i===A?0:i),(e=n,function(n){return Jt(e,n)}))}(t),!0,lf));return new Ru(e,(r=!(null==n.internalText),i=e.k(),r&&i>1?ps():null))}function rf(n){var t=n.text;return null==t?n.internalText:t}function ef(n){var t=n.documentationLink;return null==t?null:new Qu(t,"")}function uf(n,t){return new cs(of(n,jf().sd(t),ps()))}function of(n,t,r){return new ks(n,function(n,t){var r,i=Jn(On(n.o()),If);return nt(Jn(new rt(i,new ff(_f)),(r=t,function(n){return of(n.v3(),n.w3().wd_1,r)})))}(t,1===Pf(t)?ms():ps()),0===Pf(t)?ps():r)}function ff(n){this.td_1=n}function sf(n){var t=Lr(),r=n.ld_1,i=Dn(r.ca_1).fa_1,e=ie(Xt(Ze(i)?i:_e())),u=r.vd(function(n,t){var r;if(!(t>=0))throw fu(ie("Requested element count "+t+" is less than zero."));if(0===t)return Rn(n);if(Ue(n,Ti)){var i=n.k()-t|0;if(i<=0)return pt();if(1===i)return gr(function(n){if(Ue(n,Ei))return Qn(n);var t=n.f();if(!t.g())throw mu("Collection is empty.");for(var r=t.h();t.g();)r=t.h();return r}(n));if(r=Nr(),Ue(n,Ei)){if(Ue(n,li)){var e=t,u=n.k();if(e<u)do{var o=e;e=e+1|0,r.d(n.j(o))}while(e<u)}else for(var f=n.l(t);f.g();){var s=f.h();r.d(s)}return r}}else r=Lr();for(var c=0,a=n.f();a.g();){var h=a.h();c>=t?r.d(h):c=c+1|0}return mt(r)}(r.ca_1,1));return t.d(new io(new Zu(e),ef(n.kd_1))),t.d(new Gu(u)),t.m(n.md_1),t.j5()}function cf(n){var t=Lr(),r=n.ld_1,i=r.vd(r.ca_1);return t.d(new $u(new Gu(i),ef(n.kd_1))),t.j5()}function af(n){var t=Lr();return t.d(Xo(n)),t.m(n.md_1),Ko(t,n),t.j5()}function hf(n){var t=Lr();return t.m(new St(n.md_1)),t.d(Xo(n)),Ko(t,n),t.j5()}function lf(n){return Wi(n)>0}function _f(n,t){return function(n,t){return n===t?0:null==n?-1:null==t?1:Ji(null!=n&&("string"==(i=typeof(r=n))||"boolean"===i||function(n){return"number"==typeof n||n instanceof de}(r)||Ue(r,cr))?n:_e(),t);var r,i}(Oi(n.v3()),Oi(t.v3()))}function vf(n){var t;return Bf().qd((t=n,function(n){for(var r=t,i=0,e=r.length;i<e;){var u=r[i];i=i+1|0;var o=u.text;null==o||n.ed(o);var f=u.name;null==f||(n.fd(f),lr())}return lr()}))}function df(n,t){return(0!==(r=n)?r.toString():"No")+" "+gf(t,n)+" "+wf(n)+" found";var r}function gf(n,t){return t<2?n:n+"s"}function wf(n){return n<=1?"was":"were"}function bf(n,t){this.sc_1=n,this.tc_1=t}function pf(n){kf.call(this),this.fa_1=n}function mf(n,t){kf.call(this),this.da_1=n,this.ea_1=t}function kf(){}function yf(){this.dd_1=Lr()}function qf(){W=this}function Bf(){return null==W&&new qf,W}function Cf(n){Bf(),this.ca_1=n}function xf(){K=this}function jf(){return null==K&&new xf,K}function Pf(n){return n.k()}function If(n){var t=n.j1(),r=n.i1();return fr(t,new Sf(Ue(r,Ni)?r:_e()))}function Sf(n){jf(),this.wd_1=n}function zf(n,t,r){var i;Tf(t,n,r),i="Component mounted at #"+n.id+".",wi(),(wi(),g).j7(i)}function Ef(n){var t=document.getElementById(n);if(null==t)throw hu("'"+n+"' element missing");return t}function Tf(n,t,r){var i,e,u;i=n.z9(r),e=t,u=function(n,t,r){return function(i){return Tf(n,r,n.ba(i,t)),lr()}}(n,r,t),fs(),e.innerHTML="",us(e,i,u)}function Lf(){return fs(),X}function Nf(){return fs(),J}function Af(){return fs(),nn}function Mf(){return fs(),tn}function Ff(){return fs(),rn}function Df(){return fs(),en}function Of(){return fs(),un}function Rf(){return fs(),on}function Hf(){return fs(),fn}function $f(){return fs(),sn}function Gf(){return fs(),cn}function Uf(n){this.x9_1=n}function Vf(){an=this}function Qf(){return null==an&&new Vf,an}function Zf(){hn=this,Xf.call(this)}function Yf(){return null==hn&&new Zf,hn}function Wf(n,t,r,i){t=t===A?pt():t,r=r===A?null:r,i=i===A?pt():i,Xf.call(this),this.be_1=n,this.ce_1=t,this.de_1=r,this.ee_1=i}function Kf(){}function Xf(){Qf()}function Jf(n){fs();var t,r=Lr();return n(new ns((t=r,function(n){return t.d(n),lr()}))),r}function ns(n){this.r9_1=n}function ts(n,t){es.call(this),this.fe_1=n,this.ge_1=t}function rs(n){es.call(this),this.he_1=n}function is(n,t){es.call(this),this.ie_1=n,this.je_1=t}function es(){}function us(n,t,r){if(fs(),t instanceof Wf)!function(n,t,r){var i=function(n,t,r){var i=n.createElement(t);return r(i),i}(he(n.ownerDocument),t,r);n.appendChild(i)}(n,t.be_1,(e=t,u=r,function(n){for(var t=e.ce_1.f();t.g();)os(n,t.h(),u);var r=e.de_1;null==r||function(n,t){n.appendChild(he(n.ownerDocument).createTextNode(t))}(n,r);for(var i=e.ee_1.f();i.g();)us(n,i.h(),u);return lr()}));else if(t instanceof Kf){var i=t instanceof Kf?t:_e();us(n,i.ke_1,function(n,t){return function(r){return n(t.le_1(r)),lr()}}(r,i))}else if(oe(t,Yf()))return lr();var e,u}function os(n,t,r){var i,e;fs(),t instanceof is?n.setAttribute(t.ie_1,t.je_1):t instanceof rs?function(n,t){for(var r=Lr(),i=0,e=t.length;i<e;){var u=t[i];i=i+1|0,Nu(n,u)||r.d(u)}var o=r;if(!o.i()){var f=n.className,s=ie(Xt(Ze(f)?f:_e())),c=bi();c.p7(s),0!==Wi(s)&&c.p7(" "),Fn(o,c," "),n.className=c.toString()}}(n,[t.he_1]):t instanceof ts&&n.addEventListener(t.fe_1,(i=r,e=t,function(n){return n.stopPropagation(),i(e.ge_1(n)),lr()}))}function fs(){ln||(ln=!0,X=Yf(),new Uf("hr"),J=new Uf("h1"),new Uf("h2"),nn=new Uf("div"),new Uf("pre"),tn=new Uf("code"),rn=new Uf("span"),en=new Uf("small"),un=new Uf("ol"),on=new Uf("ul"),fn=new Uf("li"),sn=new Uf("a"),cn=new Uf("br"),new Uf("p"))}function ss(n){as.call(this),this.ne_1=n}function cs(n){this.xb_1=n}function as(){}function hs(n){return n.me(A,A,n.wb_1.ad())}function ls(){_n=this}function _s(){return null==_n&&new ls,_n}function vs(){if(gn)return lr();gn=!0,vn=new ws("Collapsed",0),dn=new ws("Expanded",1)}function ds(n){bs.call(this),this.ve_1=n}function gs(n,t,r){bs.call(this),this.se_1=n,this.te_1=t,this.ue_1=r}function ws(n,t){Di.call(this,n,t)}function bs(){}function ps(){return vs(),vn}function ms(){return vs(),dn}function ks(n,t,r){t=t===A?pt():t,r=r===A?ps():r,this.ub_1=n,this.vb_1=t,this.wb_1=r}function ys(n,t){return nt(Jn(n,(r=t,function(n){return function(n,t){var r,i=n.cd(),e=Hf(),u=t(n),o=i.vb_1;r=null==(i.wb_1.equals(ms())&&!o.i()?o:null)?null:function(n,t){return Rf().ha(function(n,t){return ys(n.vc(),t)}(n,t))}(n,t);var f=r;return e.ja([u,null==f?Lf():f])}(n,r)})));var r}function qs(){if(kn)return lr();kn=!0,bn=new Bs("ByMessage",0,"Messages"),pn=new Bs("ByGroup",1,"Group"),mn=new Bs("ByFileLocation",2,"Locations")}function Bs(n,t,r){Di.call(this,n,t),this.cf_1=r}function Cs(n,t){this.df_1=n,this.ef_1=t}function xs(n,t){this.ff_1=n,this.gf_1=t}function js(n){return new ks(new Gu(Bf().rd(n+" more problem"+(n>1?"s have":" has")+" been skipped")))}function Ps(n,t,r,i){var e,u,o=n.v1(t);if(null==o){var f=Lr(),s=fr(new ks(new Vs(Bf().qd((u=t,function(n){return n.fd(u),lr()}))),f,ms()),f);n.h5(t,s),e=s}else e=o;e.u3_1.d(Es(r,i))}function Is(n,t,r,i){var e;if(t=t===A?Lr():t,r=r===A?oi():r,i===A){var u=wn;wn=u+1|0,e=u}else e=i;i=e,this.hf_1=n,this.if_1=t,this.jf_1=r,this.kf_1=i}function Ss(n,t){if(t.i())return null;for(var r,i=n,e=null,u=t.f();u.g();){var o=u.h();r=e;var f,s=i,c=o.ef_1+" ("+o.df_1+")",a=s.v1(c);if(null==a){var h=Lr(),l=new Is(new ks(new Vs(Bf().qd(Fs(o))),h,ms()),h);s.h5(c,l),f=l}else f=a;e=f,null==r||he(r).if_1.u(he(e).hf_1)||he(r).if_1.d(he(e).hf_1),i=he(e).jf_1}return e}function zs(n,t){if(n.k()===t.length){var r;n:{var i=function(n,t){var r=t.length,i=xt(n,10),e=Nr(Math.min(i,r)),u=0,o=n.f();t:for(;o.g();){var f,s=o.h();if(u>=r)break t;var c=u;u=c+1|0,f=fr(s,t[c]),e.d(f)}return e}(n,t);if(Ue(i,Ti)&&i.i())r=!0;else{for(var e=i.f();e.g();){var u=e.h();if(u.t3_1.df_1!==u.u3_1.name||u.t3_1.ef_1!==u.u3_1.displayName){r=!1;break n}}r=!0}}return r}return!1}function Es(n,t,r){var i=function(n,t,r){t=t===A?null:t;var i=Ns(function(n,t){return n&&null!=t.contextualLabel?he(t.contextualLabel):Ts(t)}(r=r!==A&&r,n),t).j5();return Ls(n,new Gu(i))}(n,t=t===A?null:t,r=r!==A&&r),e=function(n,t,r){r=r!==A&&r;var i,e=n.problemDetails;if(null==e)i=null;else{var u,o=e[0].text,f=null==o?null:function(n,t,r,i){if(r=r!==A&&r,i=i===A?0:i,1===t.length){var e=t[0];if(0!==Wi(e))return function(n,t,r,i){rr(i);var e=0,u=Wt(n,t,e,r);if(-1===u||1===i)return gr(ie(n));var o,f=i>0,s=Nr(f&&Kn(i,10));n:do{var c;if(c=ie(Ki(n,e,u)),s.d(c),e=u+t.length|0,f&&s.k()===(i-1|0))break n;u=Wt(n,t,e,r)}while(-1!==u);return o=ie(Ki(n,e,Wi(n))),s.d(o),s}(n,e,r,i)}for(var u=function(n){return new tt(n)}(nr(n,t,A,r,i)),o=Nr(xt(u,10)),f=u.f();f.g();){var s;s=Jt(n,f.h()),o.d(s)}return o}(o,["\n"]);if(null==f)u=null;else{for(var s=Nr(xt(f,10)),c=f.f();c.g();){var a,h=c.h();a=Ms(n)?Bf().qd(Os(h)):Bf().rd(h),s.d(a)}u=s}var l,_=u;if(null==_)l=null;else{for(var v=Nr(xt(_,10)),d=_.f();d.g();){var g;g=new ks(new Gu(d.h())),v.d(g)}l=v}var w=null==l?null:Hn(l);i=null==w?Lr():w}var b=i,p=null==b?Lr():b;r||null==n.contextualLabel||p.d(new ks(new Gu(Bf().rd(he(n.contextualLabel)))));var m=function(n){var t=n.solutions;if(null==t||0===t.length)return null;for(var r=new Vu(Bf().rd("Solutions")),i=he(n.solutions),e=Nr(i.length),u=0,o=i.length;u<o;){var f,s=i[u];u=u+1|0,f=new ks(new Uu(vf(s))),e.d(f)}return new ks(r,e)}(n);null==m||p.d(m);var k,y=n.error,q=null==y?null:nf(y);if(null==q||p.d(new ks(q)),t){var B=n.locations;k=!(null==B||0===B.length)}else k=!1;return k&&p.d(function(n){var t,r=n.locations;if(null==r)t=null;else{for(var i=Nr(r.length),e=Ri(r);e.g();){var u,o=e.h();u=new ks(new Gu(Bf().qd(Rs(o)))),i.d(u)}t=i}var f=t;return new ks(new Zu("Locations"),null==f?pt():f)}(n)),p}(n,null==t,r);return new ks(i,e)}function Ts(n){return function(n){if(0===n.length)throw mu("Array is empty.");return n[Nn(n)]}(n.problemId).displayName}function Ls(n,t){var r;switch(n.severity){case"WARNING":var i=n.documentationLink;r=new $u(t,null==i?null:new Qu(i,""));break;case"ERROR":var e=n.documentationLink;r=new Hu(t,null==e?null:new Qu(e,""));break;case"ADVICE":var u=n.documentationLink;r=new Qs(t,null==u?null:new Qu(u,""));break;default:console.error("no severity "+n.severity),r=t}return r}function Ns(n,t){t=t===A?null:t;var r,i=new yf;if(i.ed(n),null==t);else{if(null!=t.line){var e=As(t);i.xd(e+(null==(r=t).line||null==r.length?"":"-"+r.length),""+t.path+e)}var u=t.taskPath;null==u||i.fd(u);var o=t.pluginId;null!=o&&i.fd(o)}return i}function As(n){var t;if(null==n.line)t=null;else{var r,i=":"+n.line,e=n.column;t=i+(null==(r=null==e?null:":"+e)?"":r)}return null==t?"":t}function Ms(n){var t,r,i=n.problemId;n:{for(var e=0,u=i.length;e<u;){var o=i[e];if(e=e+1|0,"compilation"===o.name){r=o;break n}}r=null}if(null!=r){var f,s=n.problemId;n:{for(var c=0,a=s.length;c<a;){var h=s[c];if(c=c+1|0,"java"===h.name){f=h;break n}}f=null}t=!(null==f)}else t=!1;return t}function Fs(n){return function(t){return t.ed(n.ef_1),t.fd(n.df_1),lr()}}function Ds(n){return n.name}function Os(n){return function(t){return t.xd(function(n,t,r,i){i=i!==A&&i;var e=new RegExp(qi().t7(" "),i?"gui":"gu"),u=qi().u7(" ");return n.replace(e,u)}(n),""),lr()}}function Rs(n){return function(t){return t.ed("- "),t.fd(""+n.path+As(n)),lr()}}function Hs(){return qs(),bn}function $s(){return qs(),pn}function Gs(){return qs(),mn}function Us(n){Zs.call(this),this.lf_1=n}function Vs(n,t){t=t!==A&&t,Zs.call(this),this.mf_1=n,this.nf_1=t}function Qs(n,t){t=t===A?null:t,Yu.call(this),this.of_1=n,this.pf_1=t}function Zs(){Yu.call(this)}function Ys(n){yc.call(this),this.qf_1=n}function Ws(n){yc.call(this),this.rf_1=n}function Ks(n){yc.call(this),this.sf_1=n}function Xs(n){nc.call(this),this.tf_1=n}function Js(n,t,r,i,e,u,o,f){this.uf_1=n,this.vf_1=t,this.wf_1=r,this.xf_1=i,this.yf_1=e,this.zf_1=u,this.ag_1=o,this.bg_1=f}function nc(){Bc.call(this)}function tc(n,t){var r=Lr();lo(t.xf_1)>0&&r.d(fc(0,Hs(),t.bg_1,t.ag_1)),lo(t.yf_1)>0&&r.d(fc(0,$s(),t.bg_1,t.ag_1)),lo(t.zf_1)>0&&r.d(fc(0,Gs(),t.bg_1,t.ag_1));var i=Af(),e=Jf(hc),u=Af().y9(Jf(lc),[]),o=function(n,t){var r,i=Af(),e=Jf(wc),u=Ff().ga("Learn more about "),o=$f();return i.y9(e,[u,o.fb(Jf((r=t,function(n){return n.bd(r.tc_1),lr()})),t.sc_1),Ff().ga(".")])}(0,t.wf_1),f=Af().y9(Jf(_c),[ic(0,t)]),s=Af();return i.y9(e,[u,o,f,s.zd(Jf(vc),r)])}function rc(n,t){var r,i,e=Af(),u=Jf(dc);switch(t.bg_1.q8_1){case 0:r=sc(0,t.xf_1,((i=function(n){return new Ys(n)}).callableName="<init>",i));break;case 1:r=sc(0,t.yf_1,function(){var n=function(n){return new Ws(n)};return n.callableName="<init>",n}());break;case 2:r=sc(0,t.zf_1,function(){var n=function(n){return new Ks(n)};return n.callableName="<init>",n}());break;default:le()}return e.y9(u,[r])}function ic(n,t){return Af().ja([oc(0,t),ec(0,t)])}function ec(n,t){for(var r=Af(),i=t.vf_1,e=Lr(),u=0,o=i.f();o.g();){var f=o.h(),s=u;u=s+1|0,jt(e,0===wr(s)?gr(uc(pc(),f)):bt([Gf().ja([]),uc(pc(),f)]))}return r.ha(e)}function uc(n,t){return Df().ja([Ic(t)])}function oc(n,t){return Nf().ja([jc().ka(t.uf_1)])}function fc(n,t,r,i){var e,u,o,f;return Af().y9(Jf((e=i,u=t,o=r,function(n){return n.t9("group-selector"),0===e?(n.t9("group-selector--disabled"),lr()):u.equals(o)?(n.t9("group-selector--active"),lr()):(n.u9(function(n){return function(t){return new Xs(n)}}(u)),lr()),lr()})),[Ff().rc(t.cf_1,[(f=i,Ff().y9(Jf(gc),[Ku(),Xu(),Ff().ga(""+f),Ju()]))])])}function sc(n,t,r){return function(n,t,r){var i,e=Af(),u=Of();return e.ja([u.ha(ys(t,(i=r,function(n){return function(n,t,r,i){var e,u;return t instanceof Us?Ic(Bf().rd(t.lf_1)):t instanceof Vs?Af().y9(Jf((u=t,function(n){return u.nf_1&&(n.t9("uncategorized"),lr()),lr()})),[Af().ja([zc(r,i),Ic(t.mf_1)])]):t instanceof Ou?Lc(i,r,t):t instanceof Gu?Ic(t.za_1):t instanceof Uu?Af().ja([(Vc(),xn),Ic(t.ab_1)]):t instanceof Vu?Af().ja([zc(r,i),Ic(t.bb_1)]):t instanceof Hu?Nc(i,((e=function(n){return cc(0,n)}).callableName="viewIt",e),r,t.va_1,t.wa_1,Cc()):t instanceof Qs?Nc(i,function(){var n=function(n){return cc(0,n)};return n.callableName="viewIt",n}(),r,t.of_1,t.pf_1,(Vc(),Bn)):t instanceof $u?Nc(i,function(){var n=function(n){return cc(0,n)};return n.callableName="viewIt",n}(),r,t.xa_1,t.ya_1,xc()):t instanceof Zu?Af().ja([zc(r,i),Ic(Bf().rd(t.eb_1))]):Ff().ga("Unknown node type viewNode: "+t)}(pc(),n.cd().ub_1,n,i)})))])}(0,t.xb_1.uc().vc(),r)}function cc(n,t){var r;if(t instanceof Qu)r=Qo(t);else if(t instanceof Zu)r=Ic(Bf().rd(t.eb_1));else if(t instanceof Gu)r=Ic(t.za_1);else{var i="Unknown node type viewIt: "+t;console.error(i),r=Ff().ga(i)}return r}function ac(n){return n.t9("report-wrapper"),lr()}function hc(n){return n.t9("header"),lr()}function lc(n){return n.t9("gradle-logo"),lr()}function _c(n){return n.t9("title"),lr()}function vc(n){return n.t9("groups"),lr()}function dc(n){return n.t9("content"),lr()}function gc(n){return n.t9("group-selector__count"),lr()}function wc(n){return n.t9("learn-more"),lr()}function bc(){yn=this,document.title="Gradle - Problems Report"}function pc(){return null==yn&&new bc,yn}function mc(n,t,r){return n.pe(t.zb().oe(),r)}function kc(n){Bc.call(this),this.hd_1=n}function yc(){Bc.call(this)}function qc(n,t){Bc.call(this),this.wc_1=n,this.xc_1=t}function Bc(){}function Cc(){return Vc(),qn}function xc(){return Vc(),Cn}function jc(){return Vc(),jn}function Pc(){return Vc(),Pn}function Ic(n){return Vc(),Pc().ka(n)}function Sc(n){return Vc(),Pc().ka(Bf().qd(n))}function zc(n,t){return Vc(),n.cd().ye()?Ac(n,t):function(n){return Vc(),Ff().fb(Jf(Gc),Mc(n))}(n)}function Ec(n,t,r,i){var e,u,o;return Vc(),Ff().fb(Jf((e=r,u=t,o=i,function(n){return n.t9("java-exception-part-toggle"),n.u9(function(n,t){return function(r){return new qc(n,t())}}(u,o)),n.s9("Click to "+function(n){var t;switch(Vc(),n.q8_1){case 0:t="show";break;case 1:t="hide";break;default:le()}return t}(e)),lr()})),"("+n+" internal "+gf("line",n)+" "+function(n){var t;switch(Vc(),n.q8_1){case 0:t="hidden";break;case 1:t="shown";break;default:le()}return t}(r)+")")}function Tc(n,t){t=t===A?Lf():t,Vc();for(var r=Rf(),i=Nr(xt(n,10)),e=0,u=n.f();u.g();){var o,f=e;e=f+1|0,s=u.h(),c=(c=0===wr(f)?t:Lf())===A?Lf():c,Vc(),o=Hf().ja([Mf().ga(s),c]),i.d(o)}var s,c;return r.ha(i)}function Lc(n,t,r){Vc();var i,e,u,o=Af(),f=Ac(t,n),s=Ff().ga("Exception"),c=Ff().ja([(Vc(),In).v9(r.na_1,"Copy exception to the clipboard")]),a=null==r.ma_1?null:Ff().ga(" "),h=null==a?Lf():a,l=r.ma_1,_=null==l?null:Ic(l),v=null==_?Lf():_;switch(t.cd().wb_1.q8_1){case 0:i=Lf();break;case 1:i=function(n,t){Vc();for(var r=Af(),i=Jf(Uc),e=n.oa_1,u=Nr(xt(e,10)),o=0,f=e.f();f.g();){var s,c=f.h(),a=o;o=a+1|0;var h,l=wr(a);if(null!=c.sa_1){var _,v=Ec(c.ra_1.k(),l,c.sa_1,t),d=c.sa_1;switch(null==d?-1:d.q8_1){case 0:_=Tc(Un(c.ra_1,1),v);break;case 1:_=Tc(c.ra_1,v);break;default:le()}h=_}else h=Tc(c.ra_1);s=h,u.d(s)}return r.zd(i,u)}(r,(e=n,u=t,function(){return e(new ss(u))}));break;default:le()}return o.ja([f,s,c,h,v,i])}function Nc(n,t,r,i,e,u,o){e=e===A?null:e,u=u===A?Lf():u,o=o===A?Lf():o,Vc();var f=Af(),s=zc(r,n),c=t(i),a=null==e?null:t(e);return f.ja([s,u,c,null==a?Lf():a,o])}function Ac(n,t){var r,i;return Vc(),Ff().fb(Jf((r=n,i=t,function(n){return n.gb(["invisible-text","tree-btn"]),r.cd().wb_1===ps()&&(n.t9("collapsed"),lr()),r.cd().wb_1===ms()&&(n.t9("expanded"),lr()),n.s9("Click to "+function(n){var t;switch(Vc(),n.q8_1){case 0:t="expand";break;case 1:t="collapse";break;default:le()}return t}(r.cd().wb_1)),n.u9(function(n,t){return function(r){return n(new ss(t))}}(i,r)),lr()})),Mc(n))}function Mc(n){return Vc(),function(n,t){var r;if(!(t>=0))throw fu(ie("Count 'n' must be non-negative, but was "+t+"."));switch(t){case 0:r="";break;case 1:r=ie(n);break;default:var i="";if(0!==Wi(n))for(var e=ie(n),u=t;1&~u||(i+=e),0!=(u=u>>>1|0);)e+=e;return i}return r}("    ",n.we()-1|0)+"- "}function Fc(n){return Vc(),n.gb(["invisible-text","error-icon"]),lr()}function Dc(n){return Vc(),n.gb(["invisible-text","advice-icon"]),lr()}function Oc(n){return Vc(),n.gb(["invisible-text","warning-icon"]),lr()}function Rc(n){return Vc(),n.gb(["invisible-text","enum-icon"]),lr()}function Hc(n){return Vc(),new kc(n)}function $c(n){return Vc(),new kc(n)}function Gc(n){return Vc(),n.gb(["invisible-text","leaf-icon"]),lr()}function Uc(n){return Vc(),n.t9("java-exception"),lr()}function Vc(){if(!Sn){Sn=!0;var n=Ff();qn=n.fb(Jf(Fc),"[error] ");var t=Ff();Bn=t.fb(Jf(Dc),"[advice] ");var r=Ff();Cn=r.fb(Jf(Oc),"[warn]  ");var i=Ff();xn=i.fb(Jf(Rc),"[enum]  "),jn=new Du,Pn=new Du(Hc),In=new Mu($c)}}return Ge(Yn,A,Re),Ge(tt,A,Re),Ge(rt,A,Re),Ge(Ti,"Collection",Ye),Ge(it,"AbstractCollection",Re,A,[Ti]),Ge(et,"IteratorImpl",Re),Ge(ut,"ListIteratorImpl",Re,et),Ge(ot,"Companion",Ke),Ge(Ei,"List",Ye,A,[Ti]),Ge(st,"AbstractList",Re,it,[it,Ei]),Ge(ct,A,Re),Ge(lt,"Companion",Ke),Ge(vt,A,Re,it),Ge(Ni,"Map",Ye),Ge(dt,"AbstractMap",Re,A,[Ni]),Ge(gt,"Companion",Ke),Ge(li,"RandomAccess",Ye),Ge(yt,"EmptyList",Ke,A,[Ei,li]),Ge(qt,"ArrayAsCollection",Re,A,[Ti]),Ge(Bt,"EmptyIterator",Ke),Ge(Pt,"IntIterator",Re),Ge(It,A,Re),Ge(St,"ReversedListReadOnly",Re,st),Ge(zt,A,Re),Ge(Et,"TransformingSequence",Re),Ge(Lt,A,Re),Ge(Nt,"FilteringSequence",Re),Ge(Mi,"Set",Ye,A,[Ti]),Ge(Mt,"EmptySet",Ke,A,[Mi]),Ge(Ot,"Companion",Ke),Ge(Vt,"IntProgression",Re),Ge(Ht,"IntRange",Re,Vt),Ge($t,"IntProgressionIterator",Re,Pt),Ge(Gt,"Companion",Ke),Ge(er,A,Re),Ge(ur,"DelimitedRangesSequence",Re),Ge(or,"Pair",Re),Ge(sr,"CharSequence",Ye),Ge(cr,"Comparable",Ye),Ge(ar,"Number",Re),Ge(hr,"Unit",Ke),Ge(_r,"IntCompanionObject",Ke),Ge(mr,"AbstractMutableCollection",Re,it,[it,Ti]),Ge(kr,"IteratorImpl",Re),Ge(yr,"ListIteratorImpl",Re,kr),Ge(qr,"AbstractMutableList",Re,mr,[mr,Ti,Ei]),Ge(Br,A,Re),Ge(Cr,A,Re),Ge(Li,"Entry",Ye),Ge(Ai,"MutableEntry",Ye,A,[Li]),Ge(xr,"SimpleEntry",Re,A,[Ai]),Ge(zr,"AbstractMutableSet",Re,mr,[mr,Mi,Ti]),Ge(jr,"AbstractEntrySet",Re,zr),Ge(Pr,A,Re,zr),Ge(Ir,A,Re,mr),Ge(Sr,"AbstractMutableMap",Re,dt,[dt,Ni]),Ge(Er,"Companion",Ke),Ge(Fr,"ArrayList",Re,qr,[qr,Ti,Ei,li]),Ge(Rr,"HashCode",Ke),Ge(Hr,"EntrySet",Re,jr),Ge(Vr,"HashMap",Re,Sr,[Sr,Ni]),Ge(Zr,"HashSet",Re,zr,[zr,Mi,Ti]),Ge(Xr,A,Re),Ge(ni,"InternalMap",Ye),Ge(Jr,"InternalHashCodeMap",Re,A,[ni]),Ge(ti,"EntryIterator",Re),Ge(ri,"Companion",Ke),Ge(ei,"ChainEntry",Re,xr),Ge(ui,"EntrySet",Re,jr),Ge(si,"LinkedHashMap",Re,Vr,[Vr,Ni]),Ge(ci,"Companion",Ke),Ge(hi,"LinkedHashSet",Re,Zr,[Zr,Mi,Ti]),Ge(_i,"BaseOutput",Re),Ge(vi,"NodeJsOutput",Re,_i),Ge(gi,"BufferedOutput",Re,_i),Ge(di,"BufferedOutputToConsoleLog",Re,gi),Ge(pi,"StringBuilder",Re,A,[sr]),Ge(yi,"Companion",Ke),Ge(Bi,"Regex",Re),Ge(Ii,"Companion",Ke),Ge(zi,"Char",Re,A,[cr]),Ge(Fi,"Companion",Ke),Ge(Di,"Enum",Re,A,[cr]),Ge(Hi,A,Re),Ge(ve,"Companion",Ke),Ge(de,"Long",Re,ar,[ar,cr]),Ge(iu,"Letter",Ke),Ge(uu,"OtherLowercase",Ke),Ge(du,"Exception",Re,Error),Ge(bu,"RuntimeException",Re,du),Ge(su,"IllegalArgumentException",Re,bu),Ge(au,"IndexOutOfBoundsException",Re,bu),Ge(lu,"IllegalStateException",Re,bu),Ge(ku,"NoSuchElementException",Re,bu),Ge(qu,"ArithmeticException",Re,bu),Ge(xu,"UnsupportedOperationException",Re,bu),Ge(Pu,"NullPointerException",Re,bu),Ge(Su,"NoWhenBranchMatchedException",Re,bu),Ge(Eu,"ClassCastException",Re,bu),Ge(Lu,"UninitializedPropertyAccessException",Re,bu),Ge(Au,"Model",Re),Ge(Mu,"CopyButtonComponent",Re),Ge(Du,"PrettyTextComponent",Re),Ge(Yu,"ProblemNode",Re),Ge(Ou,"Exception",Re,Yu),Ge(Ru,"StackTracePart",Re),Ge(Hu,"Error",Re,Yu),Ge($u,"Warning",Re,Yu),Ge(Gu,"Message",Re,Yu),Ge(Uu,"ListElement",Re,Yu),Ge(Vu,"TreeNode",Re,Yu),Ge(Qu,"Link",Re,Yu),Ge(Zu,"Label",Re,Yu),Ge(io,"Info",Re,Yu),Ge(eo,"Project",Re,Yu),Ge(uo,"Task",Re,Yu),Ge(oo,"TaskPath",Re,Yu),Ge(fo,"Bean",Re,Yu),Ge(so,"SystemProperty",Re,Yu),Ge(co,"Property",Re,Yu),Ge(ao,"BuildLogic",Re,Yu),Ge(ho,"BuildLogicClass",Re,Yu),Ge(Bc,"BaseIntent",Re),Ge(yc,"TreeIntent",Re,Bc),Ge(vo,"TaskTreeIntent",Re,yc),Ge(go,"MessageTreeIntent",Re,yc),Ge(wo,"InputTreeIntent",Re,yc),Ge(bo,"IncompatibleTaskTreeIntent",Re,yc),Ge(yo,"Intent",Re,Bc),Ge(po,"SetTab",Re,yo),Ge(mo,"Model",Re),Ge(ko,"Tab",Re,Di),Ge(Uo,"ConfigurationCacheReportPage",Ke),Ge(Zo,"ImportedProblem",Re),Ge(Yo,"ImportedDiagnostics",Re),Ge(ff,"sam$kotlin_Comparator$0",Re),Ge(bf,"LearnMore",Re),Ge(kf,"Fragment",Re),Ge(pf,"Text",Re,kf),Ge(mf,"Reference",Re,kf),Ge(yf,"Builder",Re),Ge(qf,"Companion",Ke),Ge(Cf,"PrettyText",Re),Ge(xf,"Companion",Ke),Ge(Sf,"Trie",Re),Ge(Uf,"ViewFactory",Re),Ge(Vf,"Companion",Ke),Ge(Xf,"View",Re),Ge(Zf,"Empty",Ke,Xf),Ge(Wf,"Element",Re,Xf),Ge(Kf,"MappedView",Re,Xf),Ge(ns,"Attributes",Re),Ge(es,"Attribute",Re),Ge(ts,"OnEvent",Re,es),Ge(rs,"ClassName",Re,es),Ge(is,"Named",Re,es),Ge(as,"Intent",Re),Ge(ss,"Toggle",Re,as),Ge(cs,"Model",Re),Ge(ls,"TreeView",Ke),Ge(bs,"Focus",Re),Ge(ds,"Original",Re,bs),Ge(gs,"Child",Re,bs),Ge(ws,"ViewState",Re,Di),Ge(ks,"Tree",Re),Ge(Bs,"Tab",Re,Di),Ge(Cs,"ProblemIdElement",Re),Ge(xs,"ProblemSummary",Re),Ge(Is,"ProblemNodeGroup",Re),Ge(Zs,"ProblemApiNode",Re,Yu),Ge(Us,"Text",Re,Zs),Ge(Vs,"ProblemIdNode",Re,Zs),Ge(Qs,"Advice",Re,Yu),Ge(Ys,"MessageTreeIntent",Re,yc),Ge(Ws,"ProblemIdTreeIntent",Re,yc),Ge(Ks,"FileLocationTreeIntent",Re,yc),Ge(nc,"Intent",Re,Bc),Ge(Xs,"SetTab",Re,nc),Ge(Js,"Model",Re),Ge(bc,"ProblemsReportPage",Ke),Ge(kc,"Copy",Re,Bc),Ge(qc,"ToggleStackTracePart",Re,Bc),se(Yn).f=function(){return this.n_1.f()},se(tt).f=function(){return this.r_1.f()},se(rt).f=function(){var n,t,r=function(n,t){for(var r=n.f();r.g();){var i=r.h();t.d(i)}return t}(this.s_1,Lr());return n=r,t=this.t_1,function(n,t){if(n.k()<=1)return lr();var r=br(n);!function(n,t){if(function(){if(null!=l)return l;l=!1;var n=[],t=0;if(t<600)do{var r=t;t=t+1|0,n.push(r)}while(t<600);var i=Or;n.sort(i);var e=1,u=n.length;if(e<u)do{var o=e;e=e+1|0;var f=n[o-1|0],s=n[o];if((3&f)==(3&s)&&f>=s)return!1}while(e<u);return l=!0,!0}()){var r=(i=t,function(n,t){return i.compare(n,t)});n.sort(r)}else!function(n,t,r,i){var e=n.length,u=function(n){var t=0,r=n.length-1|0;if(t<=r)do{var i=t;t=t+1|0,n[i]=null}while(i!==r);return n}(Array(e)),o=Dr(n,u,0,r,i);if(o!==n){var f=0;if(f<=r)do{var s=f;f=f+1|0,n[s]=o[s]}while(s!==r)}}(n,0,Nn(n),t);var i}(r,t);var i=0,e=r.length;if(i<e)do{var u=i;i=i+1|0,n.f4(u,r[u])}while(i<e)}(n,t),r.f()},se(it).u=function(n){var t;n:if(Ue(this,Ti)&&this.i())t=!1;else{for(var r=this.f();r.g();)if(oe(r.h(),n)){t=!0;break n}t=!1}return t},se(it).v=function(n){var t;n:if(Ue(n,Ti)&&n.i())t=!0;else{for(var r=n.f();r.g();){var i=r.h();if(!this.u(i)){t=!1;break n}}t=!0}return t},se(it).i=function(){return 0===this.k()},se(it).toString=function(){return Mn(this,", ","[","]",A,A,(n=this,function(t){return t===n?"(this Collection)":Oi(t)}));var n},se(it).toArray=function(){return dr(this)},se(et).g=function(){return this.w_1<this.x_1.k()},se(et).h=function(){if(!this.g())throw pu();var n=this.w_1;return this.w_1=n+1|0,this.x_1.j(n)},se(ut).c1=function(){return this.w_1>0},se(ut).d1=function(){if(!this.c1())throw pu();return this.w_1=this.w_1-1|0,this.a1_1.j(this.w_1)},se(ot).e1=function(n,t){if(n<0||n>=t)throw cu("index: "+n+", size: "+t)},se(ot).b1=function(n,t){if(n<0||n>t)throw cu("index: "+n+", size: "+t)},se(ot).f1=function(n){for(var t=1,r=n.f();r.g();){var i=r.h(),e=zn(31,t),u=null==i?null:ee(i);t=e+(null==u?0:u)|0}return t},se(ot).g1=function(n,t){if(n.k()!==t.k())return!1;for(var r=t.f(),i=n.f();i.g();)if(!oe(i.h(),r.h()))return!1;return!0},se(st).f=function(){return new et(this)},se(st).l=function(n){return new ut(this,n)},se(st).equals=function(n){return n===this||!(null==n||!Ue(n,Ei))&&ft().g1(this,n)},se(st).hashCode=function(){return ft().f1(this)},se(ct).g=function(){return this.h1_1.g()},se(ct).h=function(){return this.h1_1.h().i1()},se(lt).k1=function(n){var t=n.j1(),r=null==t?null:ee(t),i=null==r?0:r,e=n.i1(),u=null==e?null:ee(e);return i^(null==u?0:u)},se(lt).l1=function(n){return Oi(n.j1())+"="+Oi(n.i1())},se(lt).m1=function(n,t){return!(null==t||!Ue(t,Li))&&!!oe(n.j1(),t.j1())&&oe(n.i1(),t.i1())},se(vt).r1=function(n){return this.q1_1.s1(n)},se(vt).u=function(n){return!(null!=n&&!Qe(n))&&this.r1(null==n||Qe(n)?n:_e())},se(vt).f=function(){return new ct(this.q1_1.o().f())},se(vt).k=function(){return this.q1_1.k()},se(dt).t1=function(n){return!(null==ht(this,n))},se(dt).s1=function(n){var t;n:{var r=this.o();if(Ue(r,Ti)&&r.i())t=!1;else{for(var i=r.f();i.g();)if(oe(i.h().i1(),n)){t=!0;break n}t=!1}}return t},se(dt).u1=function(n){if(null==n||!Ue(n,Li))return!1;var t=n.j1(),r=n.i1(),i=(Ue(this,Ni)?this:_e()).v1(t);return!(!oe(r,i)||null==i&&!(Ue(this,Ni)?this:_e()).t1(t))},se(dt).equals=function(n){if(n===this)return!0;if(null==n||!Ue(n,Ni))return!1;if(this.k()!==n.k())return!1;var t;n:{var r=n.o();if(Ue(r,Ti)&&r.i())t=!0;else{for(var i=r.f();i.g();){var e=i.h();if(!this.u1(e)){t=!1;break n}}t=!0}}return t},se(dt).v1=function(n){var t=ht(this,n);return null==t?null:t.i1()},se(dt).hashCode=function(){return ee(this.o())},se(dt).i=function(){return 0===this.k()},se(dt).k=function(){return this.o().k()},se(dt).toString=function(){var n;return Mn(this.o(),", ","{","}",A,A,(n=this,function(t){return n.p1(t)}))},se(dt).p1=function(n){return at(this,n.j1())+"="+at(this,n.i1())},se(dt).w1=function(){return null==this.o1_1&&(this.o1_1=new vt(this)),he(this.o1_1)},se(gt).x1=function(n){for(var t=0,r=n.f();r.g();){var i=r.h(),e=t,u=null==i?null:ee(i);t=e+(null==u?0:u)|0}return t},se(gt).y1=function(n,t){return n.k()===t.k()&&n.v(t)},se(yt).equals=function(n){return!(null==n||!Ue(n,Ei))&&n.i()},se(yt).hashCode=function(){return 1},se(yt).toString=function(){return"[]"},se(yt).k=function(){return 0},se(yt).i=function(){return!0},se(yt).a2=function(n){return n.i()},se(yt).v=function(n){return this.a2(n)},se(yt).j=function(n){throw cu("Empty list doesn't contain element at index "+n+".")},se(yt).f=function(){return Ct()},se(yt).l=function(n){if(0!==n)throw cu("Index: "+n);return Ct()},se(qt).k=function(){return this.b2_1.length},se(qt).i=function(){return 0===this.b2_1.length},se(qt).d2=function(n){return function(n,t){return An(n,t)>=0}(this.b2_1,n)},se(qt).e2=function(n){var t;n:if(Ue(n,Ti)&&n.i())t=!0;else{for(var r=n.f();r.g();){var i=r.h();if(!this.d2(i)){t=!1;break n}}t=!0}return t},se(qt).v=function(n){return this.e2(n)},se(qt).f=function(){return Ri(this.b2_1)},se(Bt).g=function(){return!1},se(Bt).c1=function(){return!1},se(Bt).h=function(){throw pu()},se(Bt).d1=function(){throw pu()},se(Pt).h=function(){return this.f2()},se(It).g=function(){return this.g2_1.c1()},se(It).c1=function(){return this.g2_1.g()},se(It).h=function(){return this.g2_1.d1()},se(It).d1=function(){return this.g2_1.h()},se(St).k=function(){return this.i2_1.k()},se(St).j=function(n){return this.i2_1.j(function(n,t){if(!(0<=t&&t<=kt(n)))throw cu("Element index "+t+" must be in range ["+Oe(0,kt(n))+"].");return kt(n)-t|0}(this,n))},se(St).f=function(){return this.l(0)},se(St).l=function(n){return new It(this,n)},se(zt).h=function(){return this.k2_1.m2_1(this.j2_1.h())},se(zt).g=function(){return this.j2_1.g()},se(Et).f=function(){return new zt(this)},se(Lt).h=function(){if(-1===this.o2_1&&Tt(this),0===this.o2_1)throw pu();var n=this.p2_1;return this.p2_1=null,this.o2_1=-1,null==n||Qe(n)?n:_e()},se(Lt).g=function(){return-1===this.o2_1&&Tt(this),1===this.o2_1},se(Nt).f=function(){return new Lt(this)},se(Mt).equals=function(n){return!(null==n||!Ue(n,Mi))&&n.i()},se(Mt).hashCode=function(){return 0},se(Mt).toString=function(){return"[]"},se(Mt).k=function(){return 0},se(Mt).i=function(){return!0},se(Mt).a2=function(n){return n.i()},se(Mt).v=function(n){return this.a2(n)},se(Mt).f=function(){return Ct()},se(Ht).y2=function(){return this.z2_1},se(Ht).c3=function(){return this.a3_1},se(Ht).i=function(){return this.z2_1>this.a3_1},se(Ht).equals=function(n){return n instanceof Ht&&(!(!this.i()||!n.i())||this.z2_1===n.z2_1&&this.a3_1===n.a3_1)},se(Ht).hashCode=function(){return this.i()?-1:zn(31,this.z2_1)+this.a3_1|0},se(Ht).toString=function(){return this.z2_1+".."+this.a3_1},se($t).g=function(){return this.f3_1},se($t).f2=function(){var n=this.g3_1;if(n===this.e3_1){if(!this.f3_1)throw pu();this.f3_1=!1}else this.g3_1=this.g3_1+this.d3_1|0;return n},se(Gt).q=function(n,t,r){return new Vt(n,t,r)},se(Vt).f=function(){return new $t(this.z2_1,this.a3_1,this.b3_1)},se(Vt).i=function(){return this.b3_1>0?this.z2_1>this.a3_1:this.z2_1<this.a3_1},se(Vt).equals=function(n){return n instanceof Vt&&(!(!this.i()||!n.i())||this.z2_1===n.z2_1&&this.a3_1===n.a3_1&&this.b3_1===n.b3_1)},se(Vt).hashCode=function(){return this.i()?-1:zn(31,zn(31,this.z2_1)+this.a3_1|0)+this.b3_1|0},se(Vt).toString=function(){return this.b3_1>0?this.z2_1+".."+this.a3_1+" step "+this.b3_1:this.z2_1+" downTo "+this.a3_1+" step "+(0|-this.b3_1)},se(er).h=function(){if(-1===this.j3_1&&ir(this),0===this.j3_1)throw pu();var n=this.m3_1,t=n instanceof Ht?n:_e();return this.m3_1=null,this.j3_1=-1,t},se(er).g=function(){return-1===this.j3_1&&ir(this),1===this.j3_1},se(ur).f=function(){return new er(this)},se(or).toString=function(){return"("+this.t3_1+", "+this.u3_1+")"},se(or).v3=function(){return this.t3_1},se(or).w3=function(){return this.u3_1},se(or).hashCode=function(){var n=null==this.t3_1?0:ee(this.t3_1);return zn(n,31)+(null==this.u3_1?0:ee(this.u3_1))|0},se(or).equals=function(n){if(this===n)return!0;if(!(n instanceof or))return!1;var t=n instanceof or?n:_e();return!!oe(this.t3_1,t.t3_1)&&!!oe(this.u3_1,t.u3_1)},se(hr).toString=function(){return"kotlin.Unit"},se(_r).b4=function(){return this.MIN_VALUE},se(_r).c4=function(){return this.MAX_VALUE},se(_r).d4=function(){return this.SIZE_BYTES},se(_r).e4=function(){return this.SIZE_BITS},se(mr).m=function(n){this.g4();for(var t=!1,r=n.f();r.g();){var i=r.h();this.d(i)&&(t=!0)}return t},se(mr).toJSON=function(){return this.toArray()},se(mr).g4=function(){},se(kr).g=function(){return this.h4_1<this.j4_1.k()},se(kr).h=function(){if(!this.g())throw pu();var n=this.h4_1;return this.h4_1=n+1|0,this.i4_1=n,this.j4_1.j(this.i4_1)},se(yr).c1=function(){return this.h4_1>0},se(yr).d1=function(){if(!this.c1())throw pu();return this.h4_1=this.h4_1-1|0,this.i4_1=this.h4_1,this.n4_1.j(this.i4_1)},se(qr).d=function(n){return this.g4(),this.p4(this.k(),n),!0},se(qr).f=function(){return new kr(this)},se(qr).u=function(n){return this.q4(n)>=0},se(qr).q4=function(n){var t=0,r=kt(this);if(t<=r)do{var i=t;if(t=t+1|0,oe(this.j(i),n))return i}while(i!==r);return-1},se(qr).l=function(n){return new yr(this,n)},se(qr).equals=function(n){return n===this||!(null==n||!Ue(n,Ei))&&ft().g1(this,n)},se(qr).hashCode=function(){return ft().f1(this)},se(Br).g=function(){return this.r4_1.g()},se(Br).h=function(){return this.r4_1.h().j1()},se(Cr).g=function(){return this.s4_1.g()},se(Cr).h=function(){return this.s4_1.h().i1()},se(xr).j1=function(){return this.t4_1},se(xr).i1=function(){return this.u4_1},se(xr).v4=function(n){var t=this.u4_1;return this.u4_1=n,t},se(xr).hashCode=function(){return _t().k1(this)},se(xr).toString=function(){return _t().l1(this)},se(xr).equals=function(n){return _t().m1(this,n)},se(jr).u=function(n){return this.w4(n)},se(Pr).y4=function(n){throw Cu("Add is not supported on keys")},se(Pr).d=function(n){return this.y4(null==n||Qe(n)?n:_e())},se(Pr).z4=function(n){return this.x4_1.t1(n)},se(Pr).u=function(n){return!(null!=n&&!Qe(n))&&this.z4(null==n||Qe(n)?n:_e())},se(Pr).f=function(){return new Br(this.x4_1.o().f())},se(Pr).k=function(){return this.x4_1.k()},se(Pr).g4=function(){return this.x4_1.g4()},se(Ir).f5=function(n){throw Cu("Add is not supported on values")},se(Ir).d=function(n){return this.f5(null==n||Qe(n)?n:_e())},se(Ir).r1=function(n){return this.e5_1.s1(n)},se(Ir).u=function(n){return!(null!=n&&!Qe(n))&&this.r1(null==n||Qe(n)?n:_e())},se(Ir).f=function(){return new Cr(this.e5_1.o().f())},se(Ir).k=function(){return this.e5_1.k()},se(Ir).g4=function(){return this.e5_1.g4()},se(Sr).g5=function(){return null==this.c5_1&&(this.c5_1=new Pr(this)),he(this.c5_1)},se(Sr).w1=function(){return null==this.d5_1&&(this.d5_1=new Ir(this)),he(this.d5_1)},se(Sr).g4=function(){},se(zr).equals=function(n){return n===this||!(null==n||!Ue(n,Mi))&&wt().y1(this,n)},se(zr).hashCode=function(){return wt().x1(this)},se(Fr).j5=function(){return this.g4(),this.c_1=!0,this.k()>0?this:Tr().i5_1},se(Fr).k=function(){return this.b_1.length},se(Fr).j=function(n){var t=this.b_1[Mr(this,n)];return null==t||Qe(t)?t:_e()},se(Fr).f4=function(n,t){this.g4(),Mr(this,n);var r=this.b_1[n];this.b_1[n]=t;var i=r;return null==i||Qe(i)?i:_e()},se(Fr).d=function(n){return this.g4(),this.b_1.push(n),this.o4_1=this.o4_1+1|0,!0},se(Fr).p4=function(n,t){this.g4(),this.b_1.splice(function(n,t){return ft().b1(t,n.k()),t}(this,n),0,t),this.o4_1=this.o4_1+1|0},se(Fr).m=function(n){if(this.g4(),n.i())return!1;for(var t,r,i,e=(t=this,r=n.k(),i=t.k(),t.b_1.length=t.k()+r|0,i),u=0,o=n.f();o.g();){var f=o.h(),s=u;u=s+1|0;var c=wr(s);this.b_1[e+c|0]=f}return this.o4_1=this.o4_1+1|0,!0},se(Fr).q4=function(n){return An(this.b_1,n)},se(Fr).toString=function(){return Ln(this.b_1,", ","[","]",A,A,Xi)},se(Fr).k5=function(){return[].slice.call(this.b_1)},se(Fr).toArray=function(){return this.k5()},se(Fr).g4=function(){if(this.c_1)throw Bu()},se(Rr).l5=function(n,t){return oe(n,t)},se(Rr).m5=function(n){var t=null==n?null:ee(n);return null==t?0:t},se(Hr).o5=function(n){throw Cu("Add is not supported on entries")},se(Hr).d=function(n){return this.o5(null!=n&&Ue(n,Ai)?n:_e())},se(Hr).w4=function(n){return this.n5_1.u1(n)},se(Hr).f=function(){return this.n5_1.t5_1.f()},se(Hr).k=function(){return this.n5_1.k()},se(Vr).t1=function(n){return this.t5_1.z4(n)},se(Vr).s1=function(n){var t;n:{var r=this.t5_1;if(Ue(r,Ti)&&r.i())t=!1;else{for(var i=r.f();i.g();){var e=i.h();if(this.u5_1.l5(e.i1(),n)){t=!0;break n}}t=!1}}return t},se(Vr).o=function(){return null==this.v5_1&&(this.v5_1=this.x5()),he(this.v5_1)},se(Vr).x5=function(){return new Hr(this)},se(Vr).v1=function(n){return this.t5_1.v1(n)},se(Vr).h5=function(n,t){return this.t5_1.h5(n,t)},se(Vr).k=function(){return this.t5_1.k()},se(Zr).d=function(n){return null==this.y5_1.h5(n,this)},se(Zr).u=function(n){return this.y5_1.t1(n)},se(Zr).i=function(){return this.y5_1.i()},se(Zr).f=function(){return this.y5_1.g5().f()},se(Zr).k=function(){return this.y5_1.k()},se(Xr).g=function(){return-1===this.z5_1&&(this.z5_1=function(n){if(null!=n.c6_1&&n.d6_1){var t=n.c6_1.length;if(n.e6_1=n.e6_1+1|0,n.e6_1<t)return 0}if(n.b6_1=n.b6_1+1|0,n.b6_1<n.a6_1.length){n.c6_1=n.g6_1.i6_1[n.a6_1[n.b6_1]];var r=n,i=n.c6_1;return r.d6_1=null!=i&&Ve(i),n.e6_1=0,0}return n.c6_1=null,1}(this)),0===this.z5_1},se(Xr).h=function(){if(!this.g())throw pu();var n=this.d6_1?this.c6_1[this.e6_1]:this.c6_1;return this.f6_1=n,this.z5_1=-1,n},se(Jr).w5=function(){return this.h6_1},se(Jr).k=function(){return this.j6_1},se(Jr).h5=function(n,t){var r=this.h6_1.m5(n),i=Kr(this,r);if(null==i)this.i6_1[r]=new xr(n,t);else{if(null==i||!Ve(i)){var e,u=i;return this.h6_1.l5(u.j1(),n)?u.v4(t):(e=[u,new xr(n,t)],this.i6_1[r]=e,this.j6_1=this.j6_1+1|0,null)}var o=i,f=Wr(o,this,n);if(null!=f)return f.v4(t);o.push(new xr(n,t))}return this.j6_1=this.j6_1+1|0,null},se(Jr).z4=function(n){return!(null==Yr(this,n))},se(Jr).v1=function(n){var t=Yr(this,n);return null==t?null:t.i1()},se(Jr).f=function(){return new Xr(this)},se(ti).g=function(){return!(null===this.m6_1)},se(ti).h=function(){if(!this.g())throw pu();var n=he(this.m6_1);this.l6_1=n;var t,r=n.b7_1;return t=r!==this.n6_1.y6_1.v6_1?r:null,this.m6_1=t,n},se(ei).v4=function(n){return this.d7_1.g4(),se(xr).v4.call(this,n)},se(ui).o5=function(n){throw Cu("Add is not supported on entries")},se(ui).d=function(n){return this.o5(null!=n&&Ue(n,Ai)?n:_e())},se(ui).w4=function(n){return this.y6_1.u1(n)},se(ui).f=function(){return new ti(this)},se(ui).k=function(){return this.y6_1.k()},se(ui).g4=function(){return this.y6_1.g4()},se(si).j5=function(){var n;if(this.g4(),this.x6_1=!0,this.k()>0)n=this;else{var t=ii().e7_1;n=Ue(t,Ni)?t:_e()}return n},se(si).t1=function(n){return this.w6_1.t1(n)},se(si).s1=function(n){var t=this.v6_1;if(null==t)return!1;var r=t;do{if(oe(r.i1(),n))return!0;r=he(r.b7_1)}while(r!==this.v6_1);return!1},se(si).x5=function(){return new ui(this)},se(si).v1=function(n){var t=this.w6_1.v1(n);return null==t?null:t.i1()},se(si).h5=function(n,t){this.g4();var r=this.w6_1.v1(n);if(null==r){var i=new ei(this,n,t);return this.w6_1.h5(n,i),function(n,t){if(null!=n.b7_1||null!=n.c7_1)throw hu(ie("Check failed."));var r=t.v6_1;if(null==r)t.v6_1=n,n.b7_1=n,n.c7_1=n;else{var i=r.c7_1;if(null==i)throw hu(ie("Required value was null."));var e=i;n.c7_1=e,n.b7_1=r,r.c7_1=n,e.b7_1=n}}(i,this),null}return r.v4(t)},se(si).k=function(){return this.w6_1.k()},se(si).g4=function(){if(this.x6_1)throw Bu()},se(hi).g4=function(){return this.y5_1.g4()},se(_i).h7=function(){this.i7("\n")},se(_i).j7=function(n){this.i7(n),this.h7()},se(vi).i7=function(n){var t=String(n);this.k7_1.write(t)},se(di).i7=function(n){var t=String(n),r=t.lastIndexOf("\n",0);if(r>=0){var i=this.m7_1;this.m7_1=i+t.substring(0,r),this.n7();var e=r+1|0;t=t.substring(e)}this.m7_1=this.m7_1+t},se(di).n7=function(){console.log(this.m7_1),this.m7_1=""},se(gi).i7=function(n){var t=this.m7_1;this.m7_1=t+String(n)},se(pi).x3=function(){return this.o7_1.length},se(pi).y3=function(n){var t=this.o7_1;if(!(n>=0&&n<=Yt(t)))throw cu("index: "+n+", length: "+this.x3()+"}");return Zi(t,n)},se(pi).z3=function(n,t){return this.o7_1.substring(n,t)},se(pi).i3=function(n){return this.o7_1=this.o7_1+new zi(n),this},se(pi).e=function(n){return this.o7_1=this.o7_1+Oi(n),this},se(pi).p7=function(n){var t=this.o7_1;return this.o7_1=t+(null==n?"null":n),this},se(pi).toString=function(){return this.o7_1},se(yi).t7=function(n){var t=this.q7_1;return n.replace(t,"\\$&")},se(yi).u7=function(n){var t=this.s7_1;return n.replace(t,"$$$$")},se(Bi).a8=function(n){this.x7_1.lastIndex=0;var t=this.x7_1.exec(ie(n));return null!=t&&0===t.index&&this.x7_1.lastIndex===Wi(n)},se(Bi).toString=function(){return this.x7_1.toString()},se(zi).o8=function(n){return ji(this.h3_1,n)},se(zi).a4=function(n){return function(n,t){return ji(n.h3_1,t instanceof zi?t.h3_1:_e())}(this,n)},se(zi).equals=function(n){return function(n,t){return t instanceof zi&&n===t.h3_1}(this.h3_1,n)},se(zi).hashCode=function(){return this.h3_1},se(zi).toString=function(){return Pi(this.h3_1)},se(Di).r8=function(n){return Ji(this.q8_1,n.q8_1)},se(Di).a4=function(n){return this.r8(n instanceof Di?n:_e())},se(Di).equals=function(n){return this===n},se(Di).hashCode=function(){return re(this)},se(Di).toString=function(){return this.p8_1},se(Hi).g=function(){return!(this.s8_1===this.t8_1.length)},se(Hi).h=function(){if(this.s8_1===this.t8_1.length)throw mu(""+this.s8_1);var n=this.s8_1;return this.s8_1=n+1|0,this.t8_1[n]},se(de).b9=function(n){return ke(this,n)},se(de).a4=function(n){return this.b9(n instanceof de?n:_e())},se(de).c9=function(n){return ye(this,n)},se(de).d9=function(n){return function(n,t){if(Me(),Se(t))throw vu("division by zero");if(Se(n))return ge();if(xe(n,pe())){if(xe(t,we())||xe(t,be()))return pe();if(xe(t,pe()))return we();var r=function(n){Me();return new de(n.u8_1>>>1|n.v8_1<<31,n.v8_1>>1)}(n),i=function(n){Me();return new de(n.u8_1<<1,n.v8_1<<1|n.u8_1>>>31)}(r.d9(t));return xe(i,ge())?Ie(t)?we():be():ye(i,qe(n,Be(t,i)).d9(t))}if(xe(t,pe()))return ge();if(Ie(n))return Ie(t)?Ee(n).d9(Ee(t)):Ee(Ee(n).d9(t));if(Ie(t))return Ee(n.d9(Ee(t)));for(var e=ge(),u=n;Ae(u,t);){for(var o=Ce(u)/Ce(t),f=Math.max(1,Math.floor(o)),s=Math.ceil(Math.log(f)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),a=Le(f),h=Be(a,t);Ie(h)||Ne(h,u);)h=Be(a=Le(f-=c),t);Se(a)&&(a=we()),e=ye(e,a),u=qe(u,h)}return e}(this,n)},se(de).e9=function(){return this.f9().c9(new de(1,0))},se(de).f9=function(){return new de(~this.u8_1,~this.v8_1)},se(de).g9=function(){return this.u8_1},se(de).w8=function(){return Ce(this)},se(de).valueOf=function(){return this.w8()},se(de).equals=function(n){return n instanceof de&&xe(this,n)},se(de).hashCode=function(){return Me(),this.u8_1^this.v8_1},se(de).toString=function(){return je(this,10)},se(Au).toString=function(){return"Model(text="+this.o9_1+", tooltip="+this.p9_1+")"},se(Au).hashCode=function(){var n=ue(this.o9_1);return zn(n,31)+ue(this.p9_1)|0},se(Au).equals=function(n){if(this===n)return!0;if(!(n instanceof Au))return!1;var t=n instanceof Au?n:_e();return this.o9_1===t.o9_1&&this.p9_1===t.p9_1},se(Mu).v9=function(n,t){return this.w9(new Au(n,t))},se(Mu).w9=function(n){var t,r;return Df().y9(Jf((t=n,r=this,function(n){return n.s9(t.p9_1),n.t9("copy-button"),n.u9(function(n,t){return function(r){return n.q9_1(t.o9_1)}}(r,t)),lr()})),[])},se(Mu).z9=function(n){return this.w9(n instanceof Au?n:_e())},se(Mu).aa=function(n,t){return t},se(Mu).ba=function(n,t){var r=null==n||Qe(n)?n:_e();return this.aa(r,t instanceof Au?t:_e())},se(Du).ka=function(n){return function(n,t){for(var r=Ff(),i=t.ca_1,e=Nr(xt(i,10)),u=i.f();u.g();){var o,f,s=u.h();s instanceof pf?f=Ff().ga(s.fa_1):s instanceof mf?f=Fu(n,s.da_1,s.ea_1):le(),o=f,e.d(o)}return r.ha(e)}(this,n)},se(Du).z9=function(n){return this.ka(n instanceof Cf?n:_e())},se(Du).la=function(n,t){return t},se(Du).ba=function(n,t){var r=null==n||Qe(n)?n:_e();return this.la(r,t instanceof Cf?t:_e())},se(Ou).pa=function(n,t,r){return new Ou(n,t,r)},se(Ou).qa=function(n,t,r,i){return n=n===A?this.ma_1:n,t=t===A?this.na_1:t,r=r===A?this.oa_1:r,i===A?this.pa(n,t,r):i.pa.call(this,n,t,r)},se(Ou).toString=function(){return"Exception(summary="+this.ma_1+", fullText="+this.na_1+", parts="+this.oa_1+")"},se(Ou).hashCode=function(){var n=null==this.ma_1?0:this.ma_1.hashCode();return n=zn(n,31)+ue(this.na_1)|0,zn(n,31)+ee(this.oa_1)|0},se(Ou).equals=function(n){if(this===n)return!0;if(!(n instanceof Ou))return!1;var t=n instanceof Ou?n:_e();return!!oe(this.ma_1,t.ma_1)&&this.na_1===t.na_1&&!!oe(this.oa_1,t.oa_1)},se(Ru).ta=function(n,t){return new Ru(n,t)},se(Ru).ua=function(n,t,r){return n=n===A?this.ra_1:n,t=t===A?this.sa_1:t,r===A?this.ta(n,t):r.ta.call(this,n,t)},se(Ru).toString=function(){return"StackTracePart(lines="+this.ra_1+", state="+this.sa_1+")"},se(Ru).hashCode=function(){var n=ee(this.ra_1);return zn(n,31)+(null==this.sa_1?0:this.sa_1.hashCode())|0},se(Ru).equals=function(n){if(this===n)return!0;if(!(n instanceof Ru))return!1;var t=n instanceof Ru?n:_e();return!!oe(this.ra_1,t.ra_1)&&!!oe(this.sa_1,t.sa_1)},se(Hu).toString=function(){return"Error(label="+this.va_1+", docLink="+this.wa_1+")"},se(Hu).hashCode=function(){var n=ee(this.va_1);return zn(n,31)+(null==this.wa_1?0:ee(this.wa_1))|0},se(Hu).equals=function(n){if(this===n)return!0;if(!(n instanceof Hu))return!1;var t=n instanceof Hu?n:_e();return!!oe(this.va_1,t.va_1)&&!!oe(this.wa_1,t.wa_1)},se($u).toString=function(){return"Warning(label="+this.xa_1+", docLink="+this.ya_1+")"},se($u).hashCode=function(){var n=ee(this.xa_1);return zn(n,31)+(null==this.ya_1?0:ee(this.ya_1))|0},se($u).equals=function(n){if(this===n)return!0;if(!(n instanceof $u))return!1;var t=n instanceof $u?n:_e();return!!oe(this.xa_1,t.xa_1)&&!!oe(this.ya_1,t.ya_1)},se(Gu).toString=function(){return"Message(prettyText="+this.za_1+")"},se(Gu).hashCode=function(){return this.za_1.hashCode()},se(Gu).equals=function(n){if(this===n)return!0;if(!(n instanceof Gu))return!1;var t=n instanceof Gu?n:_e();return!!this.za_1.equals(t.za_1)},se(Uu).toString=function(){return"ListElement(prettyText="+this.ab_1+")"},se(Uu).hashCode=function(){return this.ab_1.hashCode()},se(Uu).equals=function(n){if(this===n)return!0;if(!(n instanceof Uu))return!1;var t=n instanceof Uu?n:_e();return!!this.ab_1.equals(t.ab_1)},se(Vu).toString=function(){return"TreeNode(prettyText="+this.bb_1+")"},se(Vu).hashCode=function(){return this.bb_1.hashCode()},se(Vu).equals=function(n){if(this===n)return!0;if(!(n instanceof Vu))return!1;var t=n instanceof Vu?n:_e();return!!this.bb_1.equals(t.bb_1)},se(Qu).toString=function(){return"Link(href="+this.cb_1+", label="+this.db_1+")"},se(Qu).hashCode=function(){var n=ue(this.cb_1);return zn(n,31)+ue(this.db_1)|0},se(Qu).equals=function(n){if(this===n)return!0;if(!(n instanceof Qu))return!1;var t=n instanceof Qu?n:_e();return this.cb_1===t.cb_1&&this.db_1===t.db_1},se(Zu).toString=function(){return"Label(text="+this.eb_1+")"},se(Zu).hashCode=function(){return ue(this.eb_1)},se(Zu).equals=function(n){if(this===n)return!0;if(!(n instanceof Zu))return!1;var t=n instanceof Zu?n:_e();return this.eb_1===t.eb_1},se(io).toString=function(){return"Info(label="+this.hb_1+", docLink="+this.ib_1+")"},se(io).hashCode=function(){var n=ee(this.hb_1);return zn(n,31)+(null==this.ib_1?0:ee(this.ib_1))|0},se(io).equals=function(n){if(this===n)return!0;if(!(n instanceof io))return!1;var t=n instanceof io?n:_e();return!!oe(this.hb_1,t.hb_1)&&!!oe(this.ib_1,t.ib_1)},se(eo).toString=function(){return"Project(path="+this.jb_1+")"},se(eo).hashCode=function(){return ue(this.jb_1)},se(eo).equals=function(n){if(this===n)return!0;if(!(n instanceof eo))return!1;var t=n instanceof eo?n:_e();return this.jb_1===t.jb_1},se(uo).toString=function(){return"Task(path="+this.kb_1+", type="+this.lb_1+")"},se(uo).hashCode=function(){var n=ue(this.kb_1);return zn(n,31)+ue(this.lb_1)|0},se(uo).equals=function(n){if(this===n)return!0;if(!(n instanceof uo))return!1;var t=n instanceof uo?n:_e();return this.kb_1===t.kb_1&&this.lb_1===t.lb_1},se(oo).toString=function(){return"TaskPath(path="+this.mb_1+")"},se(oo).hashCode=function(){return ue(this.mb_1)},se(oo).equals=function(n){if(this===n)return!0;if(!(n instanceof oo))return!1;var t=n instanceof oo?n:_e();return this.mb_1===t.mb_1},se(fo).toString=function(){return"Bean(type="+this.nb_1+")"},se(fo).hashCode=function(){return ue(this.nb_1)},se(fo).equals=function(n){if(this===n)return!0;if(!(n instanceof fo))return!1;var t=n instanceof fo?n:_e();return this.nb_1===t.nb_1},se(so).toString=function(){return"SystemProperty(name="+this.ob_1+")"},se(so).hashCode=function(){return ue(this.ob_1)},se(so).equals=function(n){if(this===n)return!0;if(!(n instanceof so))return!1;var t=n instanceof so?n:_e();return this.ob_1===t.ob_1},se(co).toString=function(){return"Property(kind="+this.pb_1+", name="+this.qb_1+", owner="+this.rb_1+")"},se(co).hashCode=function(){var n=ue(this.pb_1);return n=zn(n,31)+ue(this.qb_1)|0,zn(n,31)+ue(this.rb_1)|0},se(co).equals=function(n){if(this===n)return!0;if(!(n instanceof co))return!1;var t=n instanceof co?n:_e();return this.pb_1===t.pb_1&&this.qb_1===t.qb_1&&this.rb_1===t.rb_1},se(ao).toString=function(){return"BuildLogic(location="+this.sb_1+")"},se(ao).hashCode=function(){return ue(this.sb_1)},se(ao).equals=function(n){if(this===n)return!0;if(!(n instanceof ao))return!1;var t=n instanceof ao?n:_e();return this.sb_1===t.sb_1},se(ho).toString=function(){return"BuildLogicClass(type="+this.tb_1+")"},se(ho).hashCode=function(){return ue(this.tb_1)},se(ho).equals=function(n){if(this===n)return!0;if(!(n instanceof ho))return!1;var t=n instanceof ho?n:_e();return this.tb_1===t.tb_1},se(vo).zb=function(){return this.yb_1},se(vo).toString=function(){return"TaskTreeIntent(delegate="+this.yb_1+")"},se(vo).hashCode=function(){return ee(this.yb_1)},se(vo).equals=function(n){if(this===n)return!0;if(!(n instanceof vo))return!1;var t=n instanceof vo?n:_e();return!!oe(this.yb_1,t.yb_1)},se(go).zb=function(){return this.ac_1},se(go).toString=function(){return"MessageTreeIntent(delegate="+this.ac_1+")"},se(go).hashCode=function(){return ee(this.ac_1)},se(go).equals=function(n){if(this===n)return!0;if(!(n instanceof go))return!1;var t=n instanceof go?n:_e();return!!oe(this.ac_1,t.ac_1)},se(wo).zb=function(){return this.bc_1},se(wo).toString=function(){return"InputTreeIntent(delegate="+this.bc_1+")"},se(wo).hashCode=function(){return ee(this.bc_1)},se(wo).equals=function(n){if(this===n)return!0;if(!(n instanceof wo))return!1;var t=n instanceof wo?n:_e();return!!oe(this.bc_1,t.bc_1)},se(bo).zb=function(){return this.cc_1},se(bo).toString=function(){return"IncompatibleTaskTreeIntent(delegate="+this.cc_1+")"},se(bo).hashCode=function(){return ee(this.cc_1)},se(bo).equals=function(n){if(this===n)return!0;if(!(n instanceof bo))return!1;var t=n instanceof bo?n:_e();return!!oe(this.cc_1,t.cc_1)},se(po).toString=function(){return"SetTab(tab="+this.dc_1+")"},se(po).hashCode=function(){return this.dc_1.hashCode()},se(po).equals=function(n){if(this===n)return!0;if(!(n instanceof po))return!1;var t=n instanceof po?n:_e();return!!this.dc_1.equals(t.dc_1)},se(mo).mc=function(n,t,r,i,e,u,o,f){return new mo(n,t,r,i,e,u,o,f)},se(mo).nc=function(n,t,r,i,e,u,o,f,s){return n=n===A?this.ec_1:n,t=t===A?this.fc_1:t,r=r===A?this.gc_1:r,i=i===A?this.hc_1:i,e=e===A?this.ic_1:e,u=u===A?this.jc_1:u,o=o===A?this.kc_1:o,f=f===A?this.lc_1:f,s===A?this.mc(n,t,r,i,e,u,o,f):s.mc.call(this,n,t,r,i,e,u,o,f)},se(mo).toString=function(){return"Model(heading="+this.ec_1+", summary="+this.fc_1+", learnMore="+this.gc_1+", messageTree="+this.hc_1+", locationTree="+this.ic_1+", inputTree="+this.jc_1+", incompatibleTaskTree="+this.kc_1+", tab="+this.lc_1+")"},se(mo).hashCode=function(){var n=this.ec_1.hashCode();return n=zn(n,31)+ee(this.fc_1)|0,n=zn(n,31)+this.gc_1.hashCode()|0,n=zn(n,31)+this.hc_1.hashCode()|0,n=zn(n,31)+this.ic_1.hashCode()|0,n=zn(n,31)+this.jc_1.hashCode()|0,n=zn(n,31)+this.kc_1.hashCode()|0,zn(n,31)+this.lc_1.hashCode()|0},se(mo).equals=function(n){if(this===n)return!0;if(!(n instanceof mo))return!1;var t=n instanceof mo?n:_e();return!!(this.ec_1.equals(t.ec_1)&&oe(this.fc_1,t.fc_1)&&this.gc_1.equals(t.gc_1)&&this.hc_1.equals(t.hc_1)&&this.ic_1.equals(t.ic_1)&&this.jc_1.equals(t.jc_1)&&this.kc_1.equals(t.kc_1)&&this.lc_1.equals(t.lc_1))},se(Uo).gd=function(n,t){var r,i;return n instanceof vo?r=t.nc(A,A,A,A,_s().id(n.yb_1,t.ic_1)):n instanceof go?r=t.nc(A,A,A,_s().id(n.ac_1,t.hc_1)):n instanceof wo?r=t.nc(A,A,A,A,A,_s().id(n.bc_1,t.jc_1)):n instanceof bo?r=t.nc(A,A,A,A,A,A,_s().id(n.cc_1,t.kc_1)):n instanceof qc?r=function(n,t,r,i){var e;return r instanceof go?e=n.nc(A,A,A,mc(n.hc_1,r,i)):r instanceof vo?e=n.nc(A,A,A,A,mc(n.ic_1,r,i)):r instanceof wo?e=n.nc(A,A,A,A,A,mc(n.jc_1,r,i)):r instanceof bo?e=n.nc(A,A,A,A,A,A,mc(n.kc_1,r,i)):(console.error("Unhandled tree intent: "+r),e=n),e}(t,0,n.xc_1,(i=n,function(n){var t;if(!(n instanceof Ou))throw fu(ie("Failed requirement."));for(var r=n.oa_1,e=i.wc_1,u=Nr(xt(r,10)),o=0,f=r.f();f.g();){var s,c,a=f.h(),h=o;if(o=h+1|0,e===wr(h)){var l=a.sa_1;c=a.ua(A,null==l?null:l.ad())}else c=a;s=c,u.d(s)}return t=u,n.qa(A,A,t)})):n instanceof kc?(window.navigator.clipboard.writeText(n.hd_1),r=t):n instanceof po?r=t.nc(A,A,A,A,A,A,A,n.dc_1):(console.error("Unhandled intent: "+n),r=t),r},se(Uo).ba=function(n,t){var r=n instanceof Bc?n:_e();return this.gd(r,t instanceof mo?t:_e())},se(Uo).jd=function(n){return Af().y9(Jf(To),[qo(0,n),Bo(0,n)])},se(Uo).z9=function(n){return this.jd(n instanceof mo?n:_e())},se(Zo).toString=function(){return"ImportedProblem(problem="+this.kd_1+", message="+this.ld_1+", trace="+this.md_1+")"},se(Zo).hashCode=function(){var n=ee(this.kd_1);return n=zn(n,31)+this.ld_1.hashCode()|0,zn(n,31)+ee(this.md_1)|0},se(Zo).equals=function(n){if(this===n)return!0;if(!(n instanceof Zo))return!1;var t=n instanceof Zo?n:_e();return!!oe(this.kd_1,t.kd_1)&&!!this.ld_1.equals(t.ld_1)&&!!oe(this.md_1,t.md_1)},se(ff).ud=function(n,t){return this.td_1(n,t)},se(ff).compare=function(n,t){return this.ud(n,t)},se(bf).toString=function(){return"LearnMore(text="+this.sc_1+", documentationLink="+this.tc_1+")"},se(bf).hashCode=function(){var n=ue(this.sc_1);return zn(n,31)+ue(this.tc_1)|0},se(bf).equals=function(n){if(this===n)return!0;if(!(n instanceof bf))return!1;var t=n instanceof bf?n:_e();return this.sc_1===t.sc_1&&this.tc_1===t.tc_1},se(pf).toString=function(){return"Text(text="+this.fa_1+")"},se(pf).hashCode=function(){return ue(this.fa_1)},se(pf).equals=function(n){if(this===n)return!0;if(!(n instanceof pf))return!1;var t=n instanceof pf?n:_e();return this.fa_1===t.fa_1},se(mf).toString=function(){return"Reference(name="+this.da_1+", clipboardString="+this.ea_1+")"},se(mf).hashCode=function(){var n=ue(this.da_1);return zn(n,31)+ue(this.ea_1)|0},se(mf).equals=function(n){if(this===n)return!0;if(!(n instanceof mf))return!1;var t=n instanceof mf?n:_e();return this.da_1===t.da_1&&this.ea_1===t.ea_1},se(yf).ed=function(n){return this.dd_1.d(new pf(n)),this},se(yf).xd=function(n,t){return this.dd_1.d(new mf(n,t)),this},se(yf).fd=function(n,t,r){return t=t===A?n:t,r===A?this.xd(n,t):r.xd.call(this,n,t)},se(yf).j5=function(){return new Cf(Rn(this.dd_1))},se(qf).rd=function(n){return new Cf(gr(new pf(n)))},se(qf).qd=function(n){var t=new yf;return n(t),t.j5()},se(Cf).vd=function(n){return new Cf(n)},se(Cf).toString=function(){return"PrettyText(fragments="+this.ca_1+")"},se(Cf).hashCode=function(){return ee(this.ca_1)},se(Cf).equals=function(n){if(this===n)return!0;if(!(n instanceof Cf))return!1;var t=n instanceof Cf?n:_e();return!!oe(this.ca_1,t.ca_1)},se(xf).sd=function(n){return function(n){for(var t=Gr(),r=n.f();r.g();)for(var i=t,e=r.h().f();e.g();){var u,o=e.h(),f=i,s=f.v1(o);if(null==s){var c=Gr();f.h5(o,c),u=c}else u=s;i=u instanceof Vr?u:_e()}return t}(n)},se(Sf).toString=function(){return"Trie(nestedMaps="+this.wd_1+")"},se(Sf).hashCode=function(){return ee(this.wd_1)},se(Sf).equals=function(n){return function(n,t){return t instanceof Sf&&!!oe(n,t instanceof Sf?t.wd_1:_e())}(this.wd_1,n)},se(Uf).ga=function(n){return Qf().yd(this.x9_1,A,n)},se(Uf).ha=function(n){return Qf().yd(this.x9_1,A,A,n)},se(Uf).ja=function(n){return Qf().yd(this.x9_1,A,A,nu(n))},se(Uf).y9=function(n,t){return Qf().yd(this.x9_1,n,A,nu(t))},se(Uf).zd=function(n,t){return Qf().yd(this.x9_1,n,A,t)},se(Uf).fb=function(n,t){return Qf().yd(this.x9_1,n,t)},se(Uf).rc=function(n,t){return Qf().yd(this.x9_1,A,n,nu(t))},se(Uf).toString=function(){return"ViewFactory(elementName="+this.x9_1+")"},se(Uf).hashCode=function(){return ue(this.x9_1)},se(Uf).equals=function(n){if(this===n)return!0;if(!(n instanceof Uf))return!1;var t=n instanceof Uf?n:_e();return this.x9_1===t.x9_1},se(Vf).ae=function(n,t,r,i){return new Wf(n,t,r,i)},se(Vf).yd=function(n,t,r,i,e){return t=t===A?pt():t,r=r===A?null:r,i=i===A?pt():i,e===A?this.ae(n,t,r,i):e.ae.call(this,n,t,r,i)},se(Wf).toString=function(){return"Element(elementName="+this.be_1+", attributes="+this.ce_1+", innerText="+this.de_1+", children="+this.ee_1+")"},se(Wf).hashCode=function(){var n=ue(this.be_1);return n=zn(n,31)+ee(this.ce_1)|0,n=zn(n,31)+(null==this.de_1?0:ue(this.de_1))|0,zn(n,31)+ee(this.ee_1)|0},se(Wf).equals=function(n){if(this===n)return!0;if(!(n instanceof Wf))return!1;var t=n instanceof Wf?n:_e();return this.be_1===t.be_1&&!!oe(this.ce_1,t.ce_1)&&this.de_1==t.de_1&&!!oe(this.ee_1,t.ee_1)},se(ns).u9=function(n){return this.r9_1(new ts("click",n))},se(ns).t9=function(n){return this.r9_1(new rs(n))},se(ns).gb=function(n){for(var t=0,r=n.length;t<r;){var i=n[t];t=t+1|0,this.r9_1(new rs(i))}return lr()},se(ns).s9=function(n){return this.r9_1(new is("title",n))},se(ns).bd=function(n){return this.r9_1(new is("href",n))},se(ss).oe=function(){return this.ne_1},se(ss).toString=function(){return"Toggle(focus="+this.ne_1+")"},se(ss).hashCode=function(){return ee(this.ne_1)},se(ss).equals=function(n){if(this===n)return!0;if(!(n instanceof ss))return!1;var t=n instanceof ss?n:_e();return!!oe(this.ne_1,t.ne_1)},se(cs).pe=function(n,t){return this.re(n.qe((r=t,function(n){return n.me(r(n.ub_1))})));var r},se(cs).re=function(n){return new cs(n)},se(cs).toString=function(){return"Model(tree="+this.xb_1+")"},se(cs).hashCode=function(){return this.xb_1.hashCode()},se(cs).equals=function(n){if(this===n)return!0;if(!(n instanceof cs))return!1;var t=n instanceof cs?n:_e();return!!this.xb_1.equals(t.xb_1)},se(ls).id=function(n,t){var r;if(n instanceof ss){var i=n.oe();r=t.re(i.qe(hs))}else le();return r},se(ds).cd=function(){return this.ve_1},se(ds).we=function(){return 0},se(ds).qe=function(n){return n(this.ve_1)},se(ds).toString=function(){return"Original(tree="+this.ve_1+")"},se(ds).hashCode=function(){return this.ve_1.hashCode()},se(ds).equals=function(n){if(this===n)return!0;if(!(n instanceof ds))return!1;var t=n instanceof ds?n:_e();return!!this.ve_1.equals(t.ve_1)},se(gs).cd=function(){return this.ue_1},se(gs).we=function(){return this.se_1.we()+1|0},se(gs).qe=function(n){return this.se_1.qe((t=this,r=n,function(n){for(var i,e=n.vb_1,u=t.te_1,o=Nr(xt(e,10)),f=0,s=e.f();s.g();){var c,a=s.h(),h=f;f=h+1|0,c=u===wr(h)?r(a):a,o.d(c)}return i=o,n.me(A,i)}));var t,r},se(gs).toString=function(){return"Child(parent="+this.se_1+", index="+this.te_1+", tree="+this.ue_1+")"},se(gs).hashCode=function(){var n=ee(this.se_1);return n=zn(n,31)+this.te_1|0,zn(n,31)+this.ue_1.hashCode()|0},se(gs).equals=function(n){if(this===n)return!0;if(!(n instanceof gs))return!1;var t=n instanceof gs?n:_e();return!!oe(this.se_1,t.se_1)&&this.te_1===t.te_1&&!!this.ue_1.equals(t.ue_1)},se(ws).ad=function(){var n;switch(this.q8_1){case 0:n=ms();break;case 1:n=ps();break;default:le()}return n},se(bs).vc=function(){var n,t;return Jn(On(Oe(0,this.cd().vb_1.k()-1|0)),(n=this,(t=function(t){return n.xe(t)}).callableName="child",t))},se(bs).xe=function(n){return new gs(this,n,this.cd().vb_1.j(n))},se(ks).uc=function(){return new ds(this)},se(ks).ye=function(){return!this.vb_1.i()},se(ks).ze=function(n,t,r){return new ks(n,t,r)},se(ks).me=function(n,t,r,i){return n=n===A?this.ub_1:n,t=t===A?this.vb_1:t,r=r===A?this.wb_1:r,i===A?this.ze(n,t,r):i.ze.call(this,n,t,r)},se(ks).toString=function(){return"Tree(label="+this.ub_1+", children="+this.vb_1+", state="+this.wb_1+")"},se(ks).hashCode=function(){var n=null==this.ub_1?0:ee(this.ub_1);return n=zn(n,31)+ee(this.vb_1)|0,zn(n,31)+this.wb_1.hashCode()|0},se(ks).equals=function(n){if(this===n)return!0;if(!(n instanceof ks))return!1;var t=n instanceof ks?n:_e();return!!oe(this.ub_1,t.ub_1)&&!!oe(this.vb_1,t.vb_1)&&!!this.wb_1.equals(t.wb_1)},se(Cs).toString=function(){return"ProblemIdElement(name="+this.df_1+", displayName="+this.ef_1+")"},se(Cs).hashCode=function(){var n=ue(this.df_1);return zn(n,31)+ue(this.ef_1)|0},se(Cs).equals=function(n){if(this===n)return!0;if(!(n instanceof Cs))return!1;var t=n instanceof Cs?n:_e();return this.df_1===t.df_1&&this.ef_1===t.ef_1},se(xs).toString=function(){return"ProblemSummary(problemId="+this.ff_1+", count="+this.gf_1+")"},se(xs).hashCode=function(){var n=ee(this.ff_1);return zn(n,31)+this.gf_1|0},se(xs).equals=function(n){if(this===n)return!0;if(!(n instanceof xs))return!1;var t=n instanceof xs?n:_e();return!!oe(this.ff_1,t.ff_1)&&this.gf_1===t.gf_1},se(Is).toString=function(){return"ProblemNodeGroup(tree="+this.hf_1+", children="+this.if_1+", childGroups="+this.jf_1+", id="+this.kf_1+")"},se(Is).hashCode=function(){var n=this.hf_1.hashCode();return n=zn(n,31)+ee(this.if_1)|0,n=zn(n,31)+ee(this.jf_1)|0,zn(n,31)+this.kf_1|0},se(Is).equals=function(n){if(this===n)return!0;if(!(n instanceof Is))return!1;var t=n instanceof Is?n:_e();return!!this.hf_1.equals(t.hf_1)&&!!oe(this.if_1,t.if_1)&&!!oe(this.jf_1,t.jf_1)&&this.kf_1===t.kf_1},se(Us).toString=function(){return"Text(text="+this.lf_1+")"},se(Us).hashCode=function(){return ue(this.lf_1)},se(Us).equals=function(n){if(this===n)return!0;if(!(n instanceof Us))return!1;var t=n instanceof Us?n:_e();return this.lf_1===t.lf_1},se(Vs).toString=function(){return"ProblemIdNode(prettyText="+this.mf_1+", separator="+this.nf_1+")"},se(Vs).hashCode=function(){var n=this.mf_1.hashCode();return zn(n,31)+(0|this.nf_1)|0},se(Vs).equals=function(n){if(this===n)return!0;if(!(n instanceof Vs))return!1;var t=n instanceof Vs?n:_e();return!!this.mf_1.equals(t.mf_1)&&this.nf_1===t.nf_1},se(Qs).toString=function(){return"Advice(label="+this.of_1+", docLink="+this.pf_1+")"},se(Qs).hashCode=function(){var n=ee(this.of_1);return zn(n,31)+(null==this.pf_1?0:ee(this.pf_1))|0},se(Qs).equals=function(n){if(this===n)return!0;if(!(n instanceof Qs))return!1;var t=n instanceof Qs?n:_e();return!!oe(this.of_1,t.of_1)&&!!oe(this.pf_1,t.pf_1)},se(Ys).zb=function(){return this.qf_1},se(Ys).toString=function(){return"MessageTreeIntent(delegate="+this.qf_1+")"},se(Ys).hashCode=function(){return ee(this.qf_1)},se(Ys).equals=function(n){if(this===n)return!0;if(!(n instanceof Ys))return!1;var t=n instanceof Ys?n:_e();return!!oe(this.qf_1,t.qf_1)},se(Ws).zb=function(){return this.rf_1},se(Ws).toString=function(){return"ProblemIdTreeIntent(delegate="+this.rf_1+")"},se(Ws).hashCode=function(){return ee(this.rf_1)},se(Ws).equals=function(n){if(this===n)return!0;if(!(n instanceof Ws))return!1;var t=n instanceof Ws?n:_e();return!!oe(this.rf_1,t.rf_1)},se(Ks).zb=function(){return this.sf_1},se(Ks).toString=function(){return"FileLocationTreeIntent(delegate="+this.sf_1+")"},se(Ks).hashCode=function(){return ee(this.sf_1)},se(Ks).equals=function(n){if(this===n)return!0;if(!(n instanceof Ks))return!1;var t=n instanceof Ks?n:_e();return!!oe(this.sf_1,t.sf_1)},se(Xs).toString=function(){return"SetTab(tab="+this.tf_1+")"},se(Xs).hashCode=function(){return this.tf_1.hashCode()},se(Xs).equals=function(n){if(this===n)return!0;if(!(n instanceof Xs))return!1;var t=n instanceof Xs?n:_e();return!!this.tf_1.equals(t.tf_1)},se(Js).cg=function(n,t,r,i,e,u,o,f){return new Js(n,t,r,i,e,u,o,f)},se(Js).dg=function(n,t,r,i,e,u,o,f,s){return n=n===A?this.uf_1:n,t=t===A?this.vf_1:t,r=r===A?this.wf_1:r,i=i===A?this.xf_1:i,e=e===A?this.yf_1:e,u=u===A?this.zf_1:u,o=o===A?this.ag_1:o,f=f===A?this.bg_1:f,s===A?this.cg(n,t,r,i,e,u,o,f):s.cg.call(this,n,t,r,i,e,u,o,f)},se(Js).toString=function(){return"Model(heading="+this.uf_1+", summary="+this.vf_1+", learnMore="+this.wf_1+", messageTree="+this.xf_1+", problemIdTree="+this.yf_1+", fileLocationTree="+this.zf_1+", problemCount="+this.ag_1+", tab="+this.bg_1+")"},se(Js).hashCode=function(){var n=this.uf_1.hashCode();return n=zn(n,31)+ee(this.vf_1)|0,n=zn(n,31)+this.wf_1.hashCode()|0,n=zn(n,31)+this.xf_1.hashCode()|0,n=zn(n,31)+this.yf_1.hashCode()|0,n=zn(n,31)+this.zf_1.hashCode()|0,n=zn(n,31)+this.ag_1|0,zn(n,31)+this.bg_1.hashCode()|0},se(Js).equals=function(n){if(this===n)return!0;if(!(n instanceof Js))return!1;var t=n instanceof Js?n:_e();return!!(this.uf_1.equals(t.uf_1)&&oe(this.vf_1,t.vf_1)&&this.wf_1.equals(t.wf_1)&&this.xf_1.equals(t.xf_1)&&this.yf_1.equals(t.yf_1)&&this.zf_1.equals(t.zf_1)&&this.ag_1===t.ag_1&&this.bg_1.equals(t.bg_1))},se(bc).eg=function(n,t){var r,i;return n instanceof Ks?r=t.dg(A,A,A,A,A,_s().id(n.sf_1,t.zf_1)):n instanceof Ws?r=t.dg(A,A,A,A,_s().id(n.rf_1,t.yf_1)):n instanceof Ys?r=t.dg(A,A,A,_s().id(n.qf_1,t.xf_1)):n instanceof qc?r=function(n,t,r,i){var e;return r instanceof Ys?e=n.dg(A,A,A,mc(n.xf_1,r,i)):r instanceof Ws?e=n.dg(A,A,A,A,mc(n.yf_1,r,i)):r instanceof Ks?e=n.dg(A,A,A,A,A,mc(n.zf_1,r,i)):(console.error("Unhandled tree intent: "+r),e=n),e}(t,0,n.xc_1,(i=n,function(n){var t;if(!(n instanceof Ou))throw fu(ie("Failed requirement."));for(var r=n.oa_1,e=i.wc_1,u=Nr(xt(r,10)),o=0,f=r.f();f.g();){var s,c,a=f.h(),h=o;if(o=h+1|0,e===wr(h)){var l=a.sa_1;c=a.ua(A,null==l?null:l.ad())}else c=a;s=c,u.d(s)}return t=u,n.qa(A,A,t)})):n instanceof kc?(window.navigator.clipboard.writeText(n.hd_1),r=t):n instanceof Xs?r=t.dg(A,A,A,A,A,A,A,n.tf_1):(console.error("Unhandled intent: "+n),r=t),r},se(bc).ba=function(n,t){var r=n instanceof Bc?n:_e();return this.eg(r,t instanceof Js?t:_e())},se(bc).fg=function(n){return Af().y9(Jf(ac),[tc(0,n),rc(0,n)])},se(bc).z9=function(n){return this.fg(n instanceof Js?n:_e())},se(kc).toString=function(){return"Copy(text="+this.hd_1+")"},se(kc).hashCode=function(){return ue(this.hd_1)},se(kc).equals=function(n){if(this===n)return!0;if(!(n instanceof kc))return!1;var t=n instanceof kc?n:_e();return this.hd_1===t.hd_1},se(qc).toString=function(){return"ToggleStackTracePart(partIndex="+this.wc_1+", location="+this.xc_1+")"},se(qc).hashCode=function(){var n=this.wc_1;return zn(n,31)+ee(this.xc_1)|0},se(qc).equals=function(n){if(this===n)return!0;if(!(n instanceof qc))return!1;var t=n instanceof qc?n:_e();return this.wc_1===t.wc_1&&!!oe(this.xc_1,t.xc_1)},se(Jr).k6=function(){var n=Object.create(null);return n.foo=1,delete n.foo,lr(),n},l=null,wn=0,function(){var n=configurationCacheProblems();if(null==n.problemsReport)zf(Ef("report"),Vo(),function(n){var t,r,i,e,u,o,f,s,c,a,h=function(n){for(var t=Lr(),r=Lr(),i=Lr(),e=0,u=n.length;e<u;){var o=n[e];e=e+1|0;var f,s=o.input,c=null==s?null:r.d(Wo(s,o));if(null==c){var a=o.incompatibleTask;f=null==a?null:i.d(Wo(a,o))}else f=c;if(null==f){var h=he(o.problem);t.d(Wo(h,o))}}return new Yo(t,r,i)}(n.diagnostics),l=n.totalProblemCount;return new mo((f=(t=n).buildName,s=t.requestedTasks,c=null==s?null:Wt(s," ",A,r=r!==A&&r)>=0,a=null==c||c,Bf().qd((i=t,e=f,u=s,o=a,function(n){n.ed(function(n){var t;if(Wi(n)>0){var r,i=Zi(n,0);r=function(n){return 97<=n&&n<=122||!(ji(n,128)<0)&&function(n){var t;return t=1===function(n){var t=n,r=ru(eu().h9_1,t),i=eu().h9_1[r],e=(i+eu().i9_1[r]|0)-1|0,u=eu().j9_1[r];if(t>e)return 0;var o=3&u;if(0===o){var f=2,s=i,c=0;if(c<=1)do{if(c=c+1|0,(s=s+(u>>f&127)|0)>t)return 3;if((s=s+(u>>(f=f+7|0)&127)|0)>t)return 0;f=f+7|0}while(c<=1);return 3}if(u<=7)return o;var a=t-i|0;return u>>zn(2,u<=31?a%2|0:a)&3}(n)||function(n){var t=ru(ou().k9_1,n);return t>=0&&n<(ou().k9_1[t]+ou().l9_1[t]|0)}(n),t}(n)}(i)?function(n){return function(n){var t=Pi(n).toUpperCase();if(t.length>1){var r;if(329===n)r=t;else{var i=Zi(t,0),e=t.substring(1).toLowerCase();r=Pi(i)+e}return r}return Pi(function(n){return function(n){var t=n;return 452<=t&&t<=460||497<=t&&t<=499?De(zn(3,(t+1|0)/3|0)):4304<=t&&t<=4346||4349<=t&&t<=4351?n:mi(n)}(n)}(n))}(n)}(i):Pi(i),t=ie(r)+n.substring(1)}else t=n;return t}(i.cacheAction)+" the configuration cache for ");var t=e;null==t||n.fd(t),null==e||n.ed(" build and ");var r=u;return null==(null==r?null:n.fd(r))&&n.ed("default"),n.ed(o?" tasks":" task"),lr()}))),function(n,t){var r=n.cacheActionDescription,i=null==r?null:vf(r),e=Bf().rd(function(n){var t=n.od_1.k(),r=df(t,"build configuration input");return t>0?r+" and will cause the cache to be discarded when "+(t<=1?"its":"their")+" value change":r}(t)),u=Bf().rd(function(n,t){var r=n.totalProblemCount,i=t.nd_1.k(),e=df(r,"problem");return r>i?e+", only the first "+i+" "+wf(i)+" included in this report":e}(n,t));return function(n,t){for(var r=0,i=n.length;r<i;){var e=n[r];r=r+1|0,null!=e&&t.d(e)}return t}([i,e,u],Lr())}(n,h),new bf("Gradle Configuration Cache",n.documentationLink),uf(new Zu(Ho().qc_1),Jn(On(h.nd_1),af)),uf(new Zu($o().qc_1),function(n){return Jn(On(n),hf)}(h.nd_1)),uf(new Zu(Ro().qc_1),Jn(On(h.od_1),sf)),uf(new Zu(Go().qc_1),Jn(On(h.pd_1),cf)),0===l?Ro():Ho())}(n));else{var t=n.problemsReport;zf(Ef("report"),pc(),function(n,t){for(var r=n.summaries,i=Nr(r.length),e=0,u=r.length;e<u;){var o,f=r[e];e=e+1|0;for(var s=f.problemId,c=Nr(s.length),a=0,h=s.length;a<h;){var l,_=s[a];a=a+1|0,l=new Cs(_.name,_.displayName),c.d(l)}o=new xs(c,f.count),i.d(o)}for(var v=i,d=function(n,t){for(var r=oi(),i=0,e=n.length;i<e;){var u=n[i];i=i+1|0;var o,f=Ln(u.problemId,":",A,A,A,A,Ds),s=r.v1(f);if(null==s){var c=Lr();r.h5(f,c),o=c}else o=s;o.d(u)}for(var a=r.o(),h=Nr(xt(a,10)),l=a.f();l.g();){for(var _,v=l.h(),d=v.i1(),g=Nr(xt(d,10)),w=d.f();w.g();){var b;b=Es(w.h(),null,!0),g.d(b)}var p,m=Hn(g),k=Dn(v.i1()),y=Ls(k,new Gu(Ns(Ts(k)).ed(" ("+v.i1().k()+")").j5()));n:{for(var q=t.f();q.g();){var B=q.h();if(zs(B.ff_1,k.problemId)){p=B;break n}}p=null}var C=p;null==C||m.d(js(C.gf_1)),_=new ks(y,m),h.d(_)}var x=h;return new cs(new ks(new Us("message tree root"),x))}(t,v),g=function(n,t){for(var r=function(){var n=Lr();return new Is(new ks(new Vs(Bf().rd("Ungrouped"),!0),n),n,oi())}(),i=oi(),e=0,u=n.length;e<u;){var o=n[e];e=e+1|0;for(var f=$n(Tn(o.problemId,1)),s=Nr(xt(f,10)),c=f.f();c.g();){var a,h=c.h();a=new Cs(h.name,h.displayName),s.d(a)}var l=Ss(i,s),_=Es(o);null==l?r.if_1.d(_):l.if_1.d(_)}for(var v=Nr(xt(t,10)),d=t.f();d.g();){var g,w=d.h();g=new xs($n(Gn(w.ff_1,1)),w.gf_1),v.d(g)}for(var b=oi(),p=v.f();p.g();){var m,k=p.h(),y=k.ff_1,q=b.v1(y);if(null==q){var B=Lr();b.h5(y,B),m=B}else m=q;m.d(k)}for(var C=b.o(),x=Nr(xt(C,10)),j=C.f();j.g();){for(var P,I=j.h(),S=I.j1(),z=0,E=I.i1().f();E.g();)z=z+E.h().gf_1|0;P=new xs(S,z),x.d(P)}for(var T=x.f();T.g();){var L=T.h(),N=Ss(i,L.ff_1),A=null==N?null:N.if_1;null==A||A.d(js(L.gf_1))}for(var M=i.w1(),F=Nr(xt(M,10)),D=M.f();D.g();){var O;O=D.h().hf_1,F.d(O)}var R=function(n,t){var r=Nr(n.k());return r.m(n),r.d(t),r}(F,r.hf_1);return new cs(new ks(new Us("group tree root"),R))}(t,v),w=0,b=v.f();b.g();)w=w+b.h().gf_1|0;var p=function(n,t){for(var r=Lr(),i=oi(),e=0,u=n.length;e<u;){var o=n[e];e=e+1|0;var f=o.locations;if(null==f||0===f.length)r.d(Es(o));else{var s,c=o.locations;if(null==c)s=null;else{for(var a=Lr(),h=Ri(c);h.g();){var l=h.h();null!=l.path&&a.d(l)}s=a}if(null==s);else for(var _=s.f();_.g();){var v=_.h();Ps(i,he(v.path),o,v)}var d,g=o.locations;if(null==g)d=null;else{for(var w=Lr(),b=Ri(g);b.g();){var p=b.h();null!=p.pluginId&&w.d(p)}d=w}if(null==d);else for(var m=d.f();m.g();){var k=m.h();Ps(i,he(k.pluginId),o,k)}var y,q=o.locations;if(null==q)y=null;else{for(var B=Lr(),C=Ri(q);C.g();){var x=C.h();null!=x.taskPath&&B.d(x)}y=B}if(null==y);else for(var j=y.f();j.g();){var P=j.h();Ps(i,he(P.taskPath),o,P)}}}var I=function(n,t,r){for(var i=n.w1(),e=Nr(xt(i,10)),u=i.f();u.g();){var o;o=u.h().t3_1,e.d(o)}var f=Hn(e);return t.i()||f.d(new ks(new Vs(Bf().rd("no location"),!0),t)),r>0&&f.d(js(r)),f}(i,r,t);return new cs(new ks(new Us("text"),I))}(t,w);return new Js(Bf().rd("Problems Report"),function(n,t){var r,i,e,u=n.description,o=null==u?null:gr(vf(u));return r=null==o?gr(Bf().qd((i=t,e=n,function(n){n.ed(i.length+" problems have been reported during the execution");var t=e.buildName;null==t||(n.ed(" of build "),n.fd(t));var r=e.requestedTasks;return null==r||(n.ed(" for the following tasks:"),n.fd(r),lr()),lr()}))):o,r}(n,t),new bf("reporting problems",n.documentationLink),d,g,p,t.length,function(n,t,r){return lo(r)>0?Gs():lo(n)>0?Hs():lo(t)>0?$s():Hs()}(d,g,p))}(t,n.diagnostics))}}(),n}(void 0===this["configuration-cache-report"]?{}:this["configuration-cache-report"])}}[70](),{}))));
//# sourceMappingURL=configuration-cache-report.js.map
                </script>

</body>
</html>

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/android/build/reports/problems/problems-report.html

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/app.json
{
	"expo": {
		"name": "Sommeil restant",
		"displayName": "Sommeil restant",
		"slug": "temps_de_someil_restant_V2",
		"version": "1.4.0",
		"orientation": "portrait",
		"icon": "./assets/Temps_de_someil_restant_1.png",
		"userInterfaceStyle": "light",
		"newArchEnabled": true,
		"splash": {
			"image": "./assets/Temps_de_someil_restant_1.png",
			"resizeMode": "contain",
			"backgroundColor": "#ffffff"
		},
		"ios": {
			"supportsTablet": true
		},
		"android": {
			"adaptiveIcon": {
				"foregroundImage": "./assets/Temps_de_someil_restant_1.png",
				"backgroundColor": "#ffffff"
			},
			"edgeToEdgeEnabled": true,
			"package": "com.hilnielbe.sommeilrestant"
		},
		"web": {
			"favicon": "./assets/Temps_de_someil_restant_1.png"
		},
		"extra": {
			"eas": {
				"projectId": "697d45fb-5017-4d34-8cec-073139e7d81d"
			}
		},
		"runtimeVersion": "1.0.0",
		"updates": {
			"url": "https://u.expo.dev/697d45fb-5017-4d34-8cec-073139e7d81d"
		}
	}
}

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/app.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/App.tsx
import React, { useEffect, useMemo, useState, useCallback } from "react";
import { SafeAreaView, View, Text, TextInput, Switch, StyleSheet, ImageBackground, TouchableOpacity, Pressable, AppState, AppStateStatus } from "react-native";
import { configureStore, createSlice, PayloadAction } from "@reduxjs/toolkit";
import { Provider, useDispatch, useSelector } from "react-redux";
import AsyncStorage from "@react-native-async-storage/async-storage";
import { persistReducer, persistStore } from "redux-persist";
import { PersistGate } from "redux-persist/integration/react";
import * as Notifications from "expo-notifications";
import * as Device from "expo-device";

/* ========================= Types & Constantes ========================= */

type Mode = "semaine" | "weekend";
interface TimesState {
	semaine: string;
	weekend: string;
}
interface SettingsState {
	mode: Mode | null;
	times: TimesState;
	weekendEnabled: boolean;
}

const DEFAULTS: SettingsState = {
	mode: null,
	times: { semaine: "06:30", weekend: "10:00" },
	weekendEnabled: true,
};
const STORAGE_KEY = "temps_de_someil_restant";

/* ============================== Helpers ============================== */

const isWeekend = (d: Date = new Date()) => [0, 6].includes(d.getDay());

const clamp = (v: number, min: number, max: number) => Math.min(Math.max(v, min), max);

const two = (n: number) => String(n).padStart(2, "0");

const splitHHMM = (s: string) => {
	const [hh = "00", mm = "00"] = (s || "").split(":");
	return { hh, mm };
};

const computeRemaining = (hh: number, mm: number, now: Date = new Date()) => {
	const wake = new Date(now);
	wake.setHours(hh, mm, 0, 0);
	if (wake <= now) wake.setDate(wake.getDate() + 1);
	const diffMin = Math.round((wake.getTime() - now.getTime()) / 60000);
	return { h: Math.floor(diffMin / 60), m: diffMin % 60, total: diffMin / 60 };
};

const colorFromTotal = (t: number) => (t >= 8 ? styles.boxGood : t >= 6 ? styles.boxWarn : t >= 3 ? styles.boxBad : styles.boxVeryLow);

/* ============================ Redux Slice ============================ */

const settingsSlice = createSlice({
	name: "settings",
	initialState: DEFAULTS,
	reducers: {
		ensureModeInitialized(state) {
			if (state.mode === null) state.mode = isWeekend() ? "weekend" : "semaine";
		},
		setWeekendEnabled(state, action: PayloadAction<boolean>) {
			state.weekendEnabled = action.payload;
			if (!state.weekendEnabled) state.mode = "semaine";
		},
		setMode(state, action: PayloadAction<Mode>) {
			state.mode = action.payload;
		},
		setHour(state, action: PayloadAction<{ mode: Mode; value: string }>) {
			const { mode, value } = action.payload;
			const { mm } = splitHHMM(state.times[mode]);
			state.times[mode] = `${value}:${mm}`;
		},
		setMinute(state, action: PayloadAction<{ mode: Mode; value: string }>) {
			const { mode, value } = action.payload;
			const { hh } = splitHHMM(state.times[mode]);
			state.times[mode] = `${hh}:${value}`;
		},
		resetAll: () => DEFAULTS,
	},
});
const { actions, reducer: settingsReducer } = settingsSlice;

const persistConfig = {
	key: STORAGE_KEY,
	storage: AsyncStorage,
	whitelist: ["mode", "times", "weekendEnabled"],
};
const persistedReducer = persistReducer(persistConfig, settingsReducer);
const store = configureStore({
	reducer: { settings: persistedReducer },
	middleware: (gDM) => gDM({ serializableCheck: false }),
});
const persistor = persistStore(store);

/* ============================== UI Bits ============================== */

interface SegmentedProps {
	value: Mode;
	onChange: (m: Mode) => void;
}
const Segmented: React.FC<SegmentedProps> = ({ value, onChange }) => (
	<View style={styles.segmented}>
		{(["semaine", "weekend"] as Mode[]).map((m) => {
			const active = value === m;
			return (
				<TouchableOpacity key={m} style={[styles.segmentBtn, active ? styles.segmentBtnActive : styles.segmentBtnIdle]} onPress={() => onChange(m)}>
					<Text style={[styles.segmentLabel, active && styles.segmentLabelActive]}>{m === "semaine" ? "Semaine" : "Week-end"}</Text>
				</TouchableOpacity>
			);
		})}
	</View>
);

/* ============================ Écran principal ============================ */

const HomeScreen = () => {
	const dispatch = useDispatch();
	const { mode: storeMode, times, weekendEnabled: storeWeekend } = useSelector((s: { settings: SettingsState }) => s.settings);

	const [weekendEnabled, setWeekendEnabled] = useState<boolean>(storeWeekend);
	const [mode, setMode] = useState<Mode>(storeMode ?? (isWeekend() ? "weekend" : "semaine"));

	/* -------- Initialisation + retour foreground -------- */
	useEffect(() => {
		if (weekendEnabled) {
			setMode(isWeekend() ? "weekend" : "semaine");
		} else {
			setMode("semaine");
		}
	}, [weekendEnabled]);

	const [tick, setTick] = useState(0);

	useEffect(() => {
		const sub = AppState.addEventListener("change", (state: AppStateStatus) => {
			if (state === "active") {
				if (weekendEnabled) {
					const desired: Mode = isWeekend() ? "weekend" : "semaine";
					if (mode !== desired) setMode(desired);
				}
				setTick((t) => t + 1); // force le recalcul (remain)
			}
		});
		return () => sub.remove();
	}, [weekendEnabled, mode]);

	/* -------- Synchronisation Redux -------- */
	useEffect(() => {
		if (storeWeekend !== weekendEnabled) dispatch(actions.setWeekendEnabled(weekendEnabled));
	}, [weekendEnabled, storeWeekend, dispatch]);

	useEffect(() => {
		if (storeMode !== mode) dispatch(actions.setMode(mode));
	}, [mode, storeMode, dispatch]);

	/* -------- Gestion inputs -------- */
	const { hh: hourRedux, mm: minuteRedux } = splitHHMM(times[mode]);
	const [hourInput, setHourInput] = useState(hourRedux);
	const [minuteInput, setMinuteInput] = useState(minuteRedux);

	useEffect(() => {
		const { hh, mm } = splitHHMM(times[mode]);
		setHourInput(hh);
		setMinuteInput(mm);
	}, [mode, times]);

	const onHourChange = (v: string) => {
		const clean = v.replace(/\D/g, "").slice(0, 2);
		setHourInput(clean);
		dispatch(actions.setHour({ mode, value: clean }));
	};
	const onMinuteChange = (v: string) => {
		const clean = v.replace(/\D/g, "").slice(0, 2);
		setMinuteInput(clean);
		dispatch(actions.setMinute({ mode, value: clean }));
	};

	/* -------- Calcul temps restant (uniquement sur démarrage/foreground/refresh ou modifs utilisateur) -------- */
	const refresh = useCallback(() => {
		if (weekendEnabled) {
			const desired: Mode = isWeekend() ? "weekend" : "semaine";
			if (mode !== desired) setMode(desired);
		}
		setTick((t) => t + 1);
	}, [mode, weekendEnabled]);

	const remain = useMemo(() => {
		const hh = clamp(parseInt(hourRedux || "0", 10), 0, 23);
		const mm = clamp(parseInt(minuteRedux || "0", 10), 0, 59);
		return computeRemaining(hh, mm);
	}, [hourRedux, minuteRedux, tick]);

	/* ------------ Notifications ------------ */
	useEffect(() => {
		if (Device.isDevice) {
			Notifications.requestPermissionsAsync();
			Notifications.setNotificationChannelAsync("sleep-reminder", {
				name: "Rappels sommeil",
				importance: Notifications.AndroidImportance.DEFAULT,
			});
		}
	}, []);

	const OFFSETS_MIN = [-600, -510, -480];

	const scheduleSleepNotifications = async (wakeDate: Date) => {
		const ids: string[] = [];
		for (const offset of OFFSETS_MIN) {
			const trigger: Notifications.NotificationTriggerInput = {
				type: Notifications.SchedulableTriggerInputTypes.DATE,
				date: new Date(wakeDate.getTime() + offset * 60_000),
			};
			ids.push(
				await Notifications.scheduleNotificationAsync({
					content: {
						title: "Attention, il faut dormir",
						body: `Il vous reste ${Math.floor(Math.abs(offset) / 60)} h ${Math.abs(offset) % 60} min pour dormir 8 h — il est bientôt l'heure de vous coucher`,
						sound: "default",
					},
					trigger,
				})
			);
		}
		return ids;
	};

	const cancelSleepNotifications = async () => Notifications.cancelAllScheduledNotificationsAsync();

	useEffect(() => {
		(async () => {
			await cancelSleepNotifications();
			const hh = clamp(parseInt(hourRedux || "0", 10), 0, 23);
			const mm = clamp(parseInt(minuteRedux || "0", 10), 0, 59);
			const now = new Date();
			const wake = new Date(now);
			wake.setHours(hh, mm, 0, 0);
			if (wake <= now) wake.setDate(wake.getDate() + 1);
			await scheduleSleepNotifications(wake);
		})();
	}, [hourRedux, minuteRedux, mode]);

	const colorStyle = colorFromTotal(remain.total);

	/* -------- UI -------- */

	return (
		<ImageBackground source={require("./assets/nuages_1.jpg")} style={styles.bg} resizeMode="cover">
			<SafeAreaView style={styles.container}>
				<View style={styles.card}>
					<View style={styles.row}>
						<Text style={styles.title}>Afficher un horaire distinct week-end</Text>
						<Switch style={styles.switch} value={weekendEnabled} onValueChange={setWeekendEnabled} />
					</View>

					{weekendEnabled && <Segmented value={mode} onChange={setMode} />}

					<View style={styles.centerInputs}>
						<Text style={styles.label}>Heure de réveil :</Text>
						<View style={styles.timeRow}>
							<TextInput style={styles.input} keyboardType="numeric" maxLength={2} value={hourInput} onChangeText={onHourChange} placeholder="HH" textAlign="center" />
							<Text style={styles.colon}>:</Text>
							<TextInput style={styles.input} keyboardType="numeric" maxLength={2} value={minuteInput} onChangeText={onMinuteChange} placeholder="MM" textAlign="center" />
						</View>
					</View>

					<View style={[styles.sleepBox, colorStyle]}>
						<Text style={styles.sleepText}>
							{two(remain.h)}:{two(remain.m)}
						</Text>
					</View>

					<Pressable style={styles.refreshButton} onPress={refresh}>
						<Text style={styles.refreshText}>Refresh</Text>
					</Pressable>
				</View>
			</SafeAreaView>
		</ImageBackground>
	);
};

/* ============================= Bootstrap ============================= */

export default function App() {
	return (
		<Provider store={store}>
			<PersistGate persistor={persistor} loading={null}>
				<HomeScreen />
			</PersistGate>
		</Provider>
	);
}

/* =============================== Styles =============================== */

const COLORS = {
	primary: "#0d6efd",
	success: "#198754",
	warning: "#ffc107",
	danger: "#dc3545",
	dark: "#0d0d0d",
	border: "#c8d3e8",
	segmentBg: "#eef3ff",
	white: "#fff",
	refresh: "#007bff",
};

const SPACING = {
	xs: 4,
	s: 8,
	m: 12,
	l: 16,
	xl: 20,
};

const RADII = {
	s: 6,
	m: 8,
	l: 10,
	xl: 16,
};

const FONTS = {
	base: 16,
	strong: "600" as const,
	heavy: "800" as const,
	large: 22,
	clock: 42,
};

const styles = StyleSheet.create({
	container: {
		flex: 1,
		justifyContent: "center",
		alignItems: "center",
		padding: SPACING.l,
	},

	card: {
		width: "100%",
		maxWidth: 460,
		minHeight: 480,
		justifyContent: "center",
		gap: SPACING.xl,
	},

	centerInputs: {
		alignItems: "center",
		justifyContent: "center",
		gap: SPACING.s,
	},

	row: {
		flexDirection: "row",
		alignItems: "center",
		justifyContent: "space-between",
	},

	title: {
		fontSize: 16,
		fontWeight: "600",
	},

	switch: {},

	label: {},

	timeRow: {
		flexDirection: "row",
		alignItems: "center",
	},

	input: {
		width: 64,
		height: 56,
		fontSize: 22,
		borderWidth: 1,
		borderColor: COLORS.border,
		borderRadius: 8,
		backgroundColor: COLORS.white,
		textAlign: "center",
	},

	colon: {
		fontSize: 22,
		fontWeight: "700",
		marginHorizontal: 8,
	},

	segmented: {
		flexDirection: "row",
		backgroundColor: COLORS.segmentBg,
		borderRadius: 10,
		padding: 4,
	},

	segmentBtn: {
		flex: 1,
		paddingVertical: 10,
		borderRadius: 8,
		alignItems: "center",
	},

	segmentBtnActive: { backgroundColor: COLORS.primary },
	segmentBtnIdle: { backgroundColor: "transparent" },

	segmentLabel: { fontWeight: "600", color: COLORS.primary },
	segmentLabelActive: { color: COLORS.white },

	sleepBox: {
		alignSelf: "center",
		width: 220,
		height: 220,
		borderRadius: 16,
		alignItems: "center",
		justifyContent: "center",
	},

	sleepText: {
		fontSize: 42,
		fontWeight: "800",
		color: COLORS.white,
		letterSpacing: 1,
	},

	boxGood: { backgroundColor: COLORS.success },
	boxWarn: { backgroundColor: COLORS.warning },
	boxBad: { backgroundColor: COLORS.danger },
	boxVeryLow: { backgroundColor: COLORS.dark },

	bg: {
		flex: 1,
		justifyContent: "center",
		alignItems: "center",
	},

	refreshButton: {
		alignSelf: "center",
		paddingVertical: 8,
		paddingHorizontal: 16,
		borderRadius: 6,
		backgroundColor: COLORS.refresh,
	},

	refreshText: {
		color: COLORS.white,
		fontWeight: "600",
		fontSize: 16,
	},
});

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/App.tsx

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/dist/assetmap.json
{"6fa9c485a5d94a5c970805e46cdd8320":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\assets","httpServerLocation":"/assets/assets","width":1280,"height":720,"scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\temps_de_someil_restant_react_native\\2\\temps_de_someil_restant_V2\\assets\\nuages_1.jpg"],"hash":"6fa9c485a5d94a5c970805e46cdd8320","name":"nuages_1","type":"jpg","fileHashes":["6fa9c485a5d94a5c970805e46cdd8320"]}}
# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/dist/assetmap.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"ios":{"bundle":"_expo/static/js/ios/index-956f8f079054d56e576d71a8d2ce5798.hbc","assets":[{"path":"assets\\6fa9c485a5d94a5c970805e46cdd8320","ext":"jpg"}]},"android":{"bundle":"_expo/static/js/android/index-537353e254d4f40234573ff7de47adc0.hbc","assets":[{"path":"assets\\6fa9c485a5d94a5c970805e46cdd8320","ext":"jpg"}]}}}
# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/dist/metadata.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/eas.json
{
	"cli": {
		"appVersionSource": "remote"
	},
	"build": {
		"development": {
			"developmentClient": true,
			"distribution": "internal",
			"android": {
				"buildType": "apk"
			}
		},
		"production": {
			"environment": "production",
			"distribution": "internal",
			"android": {
				"buildType": "apk"
			}
		}
	}
}

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/eas.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/.expo/devices.json
{
  "devices": [
    {
      "installationId": "525279a0-90cd-4868-9442-a688005487eb",
      "lastUsed": 1754090599253
    }
  ]
}

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/.expo/devices.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/index.ts

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/package.json
{
	"name": "temps_de_someil_restant_v2",
	"version": "1.0.0",
	"main": "index.ts",
	"scripts": {
		"start": "expo start",
		"android": "expo run:android",
		"typescript_test": "tsc --noEmit",
		"ios": "expo run:ios",
		"web": "expo start --web",
		"build_dev_apk": "eas build --platform android --profile development",
		"build": "eas build --platform android --profile production"
	},
	"dependencies": {
		"@expo/metro-runtime": "~5.0.4",
		"@react-native-async-storage/async-storage": "2.1.2",
		"@reduxjs/toolkit": "^2.8.2",
		"expo": "^53.0.20",
		"expo-dev-client": "~5.2.4",
		"expo-dev-menu": "^6.1.14",
		"expo-device": "^7.1.4",
		"expo-notifications": "^0.31.4",
		"expo-status-bar": "~2.2.3",
		"expo-updates": "~0.28.17",
		"react": "19.0.0",
		"react-dom": "19.0.0",
		"react-native": "0.79.5",
		"react-native-web": "^0.20.0",
		"react-redux": "^9.2.0",
		"redux-persist": "^6.0.0"
	},
	"devDependencies": {
		"@babel/core": "^7.25.2",
		"@types/react": "~19.0.10",
		"typescript": "~5.8.3"
	},
	"private": true
}

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/package.json

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/tsconfig.json

# ./React-Native/temps_restant/app.json
{
  "expo": {
    "name": "temps_restant",
    "slug": "temps_restant",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/temps_restant.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/temps_restant.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/temps_restant.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/temps_restant.png"
    },
    "extra": {
      "eas": {
        "projectId": "dcea6347-6198-4135-bd4c-d6134d162e62"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    },
    "updates": {
      "url": "https://u.expo.dev/dcea6347-6198-4135-bd4c-d6134d162e62"
    }
  }
}

# ./React-Native/temps_restant/app.json

# ./React-Native/temps_restant/App.tsx
// App.tsx
import React, { useEffect, useMemo, useState } from "react";
import { View, Text, StyleSheet, ScrollView } from "react-native";
import { StatusBar } from "expo-status-bar";
import { SafeAreaProvider, SafeAreaView } from "react-native-safe-area-context";

// --- Utils ---
const pad2 = (v: number) => v.toString().padStart(2, "0");
const capitalize = (s: string) => (s ? s[0].toUpperCase() + s.slice(1) : s);
const minutesBetween = (d1: Date, d2: Date) => Math.floor((d2.getTime() - d1.getTime()) / 60000);
const formatHM = (min: number) => `${Math.floor(min / 60)}h${pad2(min % 60)}`;
const hhmm = (d: Date) => `${pad2(d.getHours())}h${pad2(d.getMinutes())}`;

type Plage = { start: Date; end: Date; label: string };

function buildPlages(now: Date): Plage[] {
  const y = now.getFullYear(), m = now.getMonth(), d = now.getDate();
  return [
    { start: new Date(y, m, d, 5, 0, 0),  end: new Date(y, m, d, 8, 0, 0),  label: "pré-journée" },
    { start: new Date(y, m, d, 9, 0, 0),  end: new Date(y, m, d, 13, 0, 0), label: "matin" },
    { start: new Date(y, m, d, 13, 30, 0),end: new Date(y, m, d, 17, 30, 0),label: "après-midi" },
    { start: new Date(y, m, d, 18, 30, 0),end: new Date(y, m, d, 22, 30, 0),label: "soirée" },
  ];
}
const getActivePlage = (plages: Plage[], now: Date) =>
  plages.find((p) => now >= p.start && now < p.end) ?? null;

export default function App() {
  const [now, setNow] = useState(new Date());

  useEffect(() => {
    const id = setInterval(() => setNow(new Date()), 60_000);
    return () => clearInterval(id);
  }, []);

  const plages = useMemo(() => buildPlages(now), [now]);
  const active = useMemo(() => getActivePlage(plages, now), [plages, now]);

  const { totalMinutes, usedMinutes, remainingMinutes, lines, diffH, diffM, elapsedH, elapsedM } =
    useMemo(() => {
      let total = 0;
      for (const p of plages) total += minutesBetween(p.start, p.end);

      let used = 0;
      for (const p of plages) {
        if (now >= p.end) used += minutesBetween(p.start, p.end);
        else if (now >= p.start && now < p.end) used += minutesBetween(p.start, now);
      }
      const remaining = total - used;

      const lineItems = plages.map((p) => {
        const totalInterval = minutesBetween(p.start, p.end);
        let consumed = 0, remainingMin = 0;
        if (now >= p.end) {
          consumed = totalInterval; remainingMin = 0;
        } else if (now < p.start) {
          consumed = 0; remainingMin = totalInterval;
        } else {
          consumed = minutesBetween(p.start, now);
          remainingMin = minutesBetween(now, p.end);
        }
        return {
          key: p.label,
          label: capitalize(p.label),
          total: formatHM(totalInterval),
          consumed: formatHM(consumed),
          remaining: formatHM(remainingMin),
        };
      });

      let dH = 0, dM = 0, eH = 0, eM = 0;
      if (active) {
        const diffMs = active.end.getTime() - now.getTime();
        dH = Math.floor(diffMs / 3_600_000);
        dM = Math.floor((diffMs % 3_600_000) / 60_000);
        const elapsedMs = now.getTime() - active.start.getTime();
        eH = Math.floor(elapsedMs / 3_600_000);
        eM = Math.floor((elapsedMs % 3_600_000) / 60_000);
      }

      return { totalMinutes: total, usedMinutes: used, remainingMinutes: remaining, lines: lineItems,
        diffH: dH, diffM: dM, elapsedH: eH, elapsedM: eM };
    }, [plages, now, active]);

  return (
    <SafeAreaProvider>
      <SafeAreaView style={styles.safe} edges={["top", "right", "bottom", "left"]}>
        <StatusBar style="dark" />
        <ScrollView contentContainerStyle={styles.centered} showsVerticalScrollIndicator={false}>
          <View style={styles.card}>
            <Text style={styles.title}>
              Journée totale : <Text style={styles.strong}>{formatHM(totalMinutes)}</Text>
            </Text>
            <Text style={styles.subtitle}>
              Temps consommé : <Text style={styles.strong}>{formatHM(usedMinutes)}</Text> — Temps restant :{" "}
              <Text style={styles.strong}>{formatHM(remainingMinutes)}</Text>
            </Text>
            {lines.map((l) => (
              <Text key={l.key} style={styles.line}>
                <Text style={styles.strong}>{l.label}</Text> ({l.total}) : consommé {l.consumed} — restant {l.remaining}
              </Text>
            ))}
          </View>

          <View style={styles.card}>
            {!active ? (
              <>
                <Text style={styles.subtitle}>Aucun compte à rebours actif actuellement.</Text>
                <Text style={styles.timer}>--:--</Text>
              </>
            ) : (
              <>
                <Text style={styles.subtitle}>
                  Compte à rebours pour <Text style={styles.strong}>{active.label}</Text>
                </Text>
                <Text style={styles.subtitle}>
                  Début : {hhmm(active.start)} — Fin : {hhmm(active.end)}
                </Text>
                <Text style={styles.subtitle}>
                  Écoulé : {pad2(elapsedH)}:{pad2(elapsedM)}
                </Text>
                <Text style={styles.timer}>
                  {pad2(diffH)}:{pad2(diffM)}
                </Text>
              </>
            )}
          </View>
        </ScrollView>
      </SafeAreaView>
    </SafeAreaProvider>
  );
}

// --- Styles ---
const BLUE = "#4a90e2";
const styles = StyleSheet.create({
  safe: { flex: 1, backgroundColor: "#f0f2f5" },
  centered: {
    flexGrow: 1,
    justifyContent: "center",   // centrage vertical
    alignItems: "center",        // centrage horizontal
    padding: 16,
  },
  card: {
    backgroundColor: BLUE,
    borderRadius: 8,
    paddingVertical: 18,
    paddingHorizontal: 20,
    minWidth: 320,
    width: "100%",
    maxWidth: 520,
    marginVertical: 8,
    elevation: 4,
  },
  title: { color: "#dbe9ff", fontSize: 16, fontWeight: "700" },
  subtitle: { color: "white", fontSize: 16, fontWeight: "600", marginTop: 6, textAlign: "center" },
  line: { color: "#eef5ff", fontSize: 14, marginTop: 6 },
  strong: { fontWeight: "700", color: "white" },
  timer: { marginTop: 12, color: "white", fontSize: 48, fontWeight: "700", letterSpacing: 1, textAlign: "center" },
});

# ./React-Native/temps_restant/App.tsx

# ./React-Native/temps_restant/dist/assetmap.json
{}
# ./React-Native/temps_restant/dist/assetmap.json

# ./React-Native/temps_restant/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"ios":{"bundle":"_expo/static/js/ios/index-996ba6c6bde1f72f6849858013841850.hbc","assets":[]},"android":{"bundle":"_expo/static/js/android/index-1d0527524a479d46d43896824627ceaf.hbc","assets":[]}}}
# ./React-Native/temps_restant/dist/metadata.json

# ./React-Native/temps_restant/.expo/devices.json
{
  "devices": []
}

# ./React-Native/temps_restant/.expo/devices.json

# ./React-Native/temps_restant/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/temps_restant/index.ts

# ./React-Native/temps_restant/package.json
{
  "name": "temps_restant",
  "version": "1.0.0",
  "main": "index.ts",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "expo": "~53.0.20",
    "expo-status-bar": "~2.2.3",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-native": "0.79.5",
    "react-native-safe-area-context": "^5.5.2"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~19.0.10",
    "typescript": "~5.8.3"
  },
  "private": true
}

# ./React-Native/temps_restant/package.json

# ./React-Native/temps_restant/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/temps_restant/tsconfig.json

# ./React-Native/tracker_de_temps/app.json
{
  "expo": {
    "name": "tracker_de_temps",
    "slug": "tracker_de_temps",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/tracker_de_temps.png",
    "userInterfaceStyle": "light",
    "newArchEnabled": true,
    "splash": {
      "image": "./assets/tracker_de_temps.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/tracker_de_temps.png",
        "backgroundColor": "#ffffff"
      },
      "edgeToEdgeEnabled": true
    },
    "web": {
      "favicon": "./assets/tracker_de_temps.png"
    },
    "extra": {
      "eas": {
        "projectId": "3858828a-036d-43b5-9413-636bc17b2ea2"
      }
    },
    "runtimeVersion": {
      "policy": "appVersion"
    },
    "updates": {
      "url": "https://u.expo.dev/3858828a-036d-43b5-9413-636bc17b2ea2"
    }
  }
}

# ./React-Native/tracker_de_temps/app.json

# ./React-Native/tracker_de_temps/App.tsx
import { useCallback, useEffect, useMemo, useRef, useState } from "react";
import { Alert, FlatList, Modal, Pressable, StatusBar, StyleSheet, Text, TextInput, TouchableOpacity, View } from "react-native";
import { SafeAreaProvider, SafeAreaView } from "react-native-safe-area-context";
import { Ionicons } from "@expo/vector-icons";
import { todayKey, fmtHMS, parseHMS } from "./src/lib/time";
import { loadAll, saveAll } from "./src/lib/storage";
import { Cadre, CadreDTO, DayData, createCadre, reviveCadre } from "./src/types";

export default function App() {
	const [days, setDays] = useState<Record<string, CadreDTO[]>>({});
	const [cadres, setCadres] = useState<Cadre[]>([]);
	const [historyOpen, setHistoryOpen] = useState(false);

	// Ajout: état pour la modale "Ajouter un cadre"
	const [addState, setAddState] = useState<{ open: boolean; name: string }>({ open: false, name: "" });

	const [renameState, setRenameState] = useState<{ id?: string; name: string }>({ name: "" });
	const [resetState, setResetState] = useState<{ id?: string; value: string }>({ value: "00:00:00" });
	const tickRef = useRef<NodeJS.Timer | null>(null);
	const dayKey = useMemo(() => todayKey(), []);

	useEffect(() => {
		(async () => {
			const data = await loadAll();
			const list = (data[dayKey] ?? defaultCadres()).map(reviveCadre);
			setDays(data);
			setCadres(list);
			startTick();
		})();
		return stopTick;
	}, []);

	const startTick = () => {
		stopTick();
		tickRef.current = setInterval(() => setCadres((prev) => [...prev]), 1000);
	};
	const stopTick = () => {
		if (tickRef.current) clearInterval(tickRef.current);
		tickRef.current = null;
	};

	const persist = useCallback(
		async (nextCadres: Cadre[]) => {
			const nextDays = { ...days, [dayKey]: nextCadres };
			setDays(nextDays);
			await saveAll(nextDays);
		},
		[days, dayKey]
	);

	const onStart = (id: string) => {
		setCadres((list) => {
			const next = list.map((c) => (c.id === id ? { ...c, enCours: true, debut: Date.now() } : c));
			void persist(next);
			return next;
		});
	};

	const onPause = (id: string) => {
		setCadres((list) => {
			const next = list.map((c) => {
				if (c.id !== id || !c.enCours) return c;
				const delta = Date.now() - (c.debut ?? Date.now());
				return { ...c, enCours: false, totalMs: c.totalMs + delta, debut: null };
			});
			void persist(next);
			return next;
		});
	};

	const onResetAsk = (id: string) => setResetState({ id, value: "00:00:00" });
	const onResetConfirm = () => {
		if (!resetState.id) return;
		const ms = parseHMS(resetState.value);
		setCadres((list) => {
			const next = list.map((c) => (c.id === resetState.id ? { ...c, enCours: false, debut: null, totalMs: ms } : c));
			void persist(next);
			return next;
		});
		setResetState({ id: undefined, value: "00:00:00" });
	};

	const onRenameAsk = (id: string, current: string) => setRenameState({ id, name: current });
	const onRenameConfirm = () => {
		if (!renameState.id || !renameState.name.trim()) return;
		setCadres((list) => {
			const next = list.map((c) => (c.id === renameState.id ? { ...c, nom: renameState.name.trim() } : c));
			void persist(next);
			return next;
		});
		setRenameState({ id: undefined, name: "" });
	};

	const onDelete = (id: string) => {
		Alert.alert("Supprimer", "Supprimer définitivement ce cadre ?", [
			{ text: "Annuler", style: "cancel" },
			{
				text: "Supprimer",
				style: "destructive",
				onPress: () => {
					setCadres((list) => {
						const next = list.filter((c) => c.id !== id);
						void persist(next);
						return next;
					});
				},
			},
		]);
	};

	// Remplacement: ouverture d’une vraie modale “Ajouter un cadre”
	const onAddOpen = () => setAddState({ open: true, name: "" });
	const onAddConfirm = () => {
		const name = addState.name.trim();
		if (!name) return;
		setCadres((list) => {
			const c = createCadre(name);
			const next = [...list, c];
			void persist(next);
			return next;
		});
		setAddState({ open: false, name: "" });
	};

	const onEndDay = () => {
		setCadres((list) => {
			const paused = list.map((c) => {
				if (!c.enCours) return c;
				const delta = Date.now() - (c.debut ?? Date.now());
				return { ...c, enCours: false, totalMs: c.totalMs + delta, debut: null };
			});
			void persist(paused);
			Alert.alert("Fin de journée", "Journée enregistrée.");
			return paused;
		});
	};

	const totalToday = useMemo(() => {
		return cadres.reduce((s, c) => s + c.totalMs + (c.enCours && c.debut ? Date.now() - c.debut : 0), 0);
	}, [cadres]);

	const sortedHistoryKeys = useMemo(() => {
		const keys = Object.keys(days);
		return keys.sort((a, b) => {
			const [da, ma, ya] = a.split("-").map(Number);
			const [db, mb, yb] = b.split("-").map(Number);
			return new Date(yb, mb - 1, db).getTime() - new Date(ya, ma - 1, da).getTime();
		});
	}, [days]);

	const onEraseDay = (key: string) => {
		Alert.alert("Effacer", `Effacer la journée ${key} ?`, [
			{ text: "Annuler", style: "cancel" },
			{
				text: "Effacer",
				style: "destructive",
				onPress: async () => {
					const next = { ...days };
					delete next[key];
					setDays(next);
					await saveAll(next);
				},
			},
		]);
	};

	return (
		<SafeAreaProvider>
			<SafeAreaView style={styles.root} edges={["top", "left", "right"]}>
				<StatusBar barStyle="light-content" />

				<View style={styles.navbar}>
					<TouchableOpacity style={styles.burger} onPress={() => setHistoryOpen(true)}>
						<Ionicons name="menu" size={20} color="#0b1e35" />
					</TouchableOpacity>
					<Text style={styles.brand}>Suivi d’activité</Text>
				</View>

				<FlatList
					contentContainerStyle={styles.listContent}
					data={cadres}
					keyExtractor={(c) => c.id}
					renderItem={({ item }) => (
						<CadreCard
							cadre={item}
							onStart={() => onStart(item.id)}
							onPause={() => onPause(item.id)}
							onReset={() => onResetAsk(item.id)}
							onRename={() => onRenameAsk(item.id, item.nom)}
							onDelete={() => onDelete(item.id)}
						/>
					)}
					ListFooterComponent={
						<View style={{ paddingHorizontal: 16, paddingBottom: 24, gap: 12 }}>
							<Pressable style={[styles.btn, styles.btnPrimary]} onPress={onAddOpen}>
								<Text style={styles.btnText}>Ajouter un cadre</Text>
							</Pressable>
							<Pressable style={[styles.btn, styles.btnDanger]} onPress={onEndDay}>
								<Text style={styles.btnText}>Fin de journée</Text>
							</Pressable>
							<Text style={styles.total}>Total aujourd’hui: {fmtHMS(totalToday)}</Text>
						</View>
					}
				/>

				{/* Modale Historique */}
				<Modal visible={historyOpen} animationType="slide" onRequestClose={() => setHistoryOpen(false)}>
					<SafeAreaView style={styles.historyRoot}>
						<View style={styles.historyHeader}>
							<Text style={styles.historyTitle}>Historique</Text>
							<TouchableOpacity onPress={() => setHistoryOpen(false)}>
								<Ionicons name="close" size={24} color="#e9ecef" />
							</TouchableOpacity>
						</View>
						<FlatList
							contentContainerStyle={{ padding: 16, paddingBottom: 48 }}
							data={sortedHistoryKeys}
							keyExtractor={(k) => k}
							renderItem={({ item: k }) => {
								const list = (days[k] ?? []).map(reviveCadre);
								const total = list.reduce((s, c) => s + c.totalMs, 0);
								return (
									<View style={styles.historyDay}>
										<View style={styles.historyDayHeader}>
											<Text style={styles.historyDayTitle}>{k}</Text>
											<TouchableOpacity style={styles.chipDanger} onPress={() => onEraseDay(k)}>
												<Text style={styles.chipDangerText}>Effacer</Text>
											</TouchableOpacity>
										</View>
										<View style={styles.historyList}>
											{list.map((c) => (
												<View key={c.id} style={styles.historyItem}>
													<Text style={styles.historyItemName}>{c.nom}</Text>
													<Text style={styles.historyItemTime}>{fmtHMS(c.totalMs)}</Text>
												</View>
											))}
											<View style={[styles.historyItem, { borderTopWidth: 1, borderTopColor: "#264d73", marginTop: 8, paddingTop: 8 }]}>
												<Text style={[styles.historyItemName, { fontWeight: "700" }]}>Total</Text>
												<Text style={[styles.historyItemTime, { fontWeight: "700" }]}>{fmtHMS(total)}</Text>
											</View>
										</View>
									</View>
								);
							}}
						/>
					</SafeAreaView>
				</Modal>

				{/* Modale Ajouter un cadre */}
				<Modal transparent visible={addState.open} animationType="fade" onRequestClose={() => setAddState({ open: false, name: "" })}>
					<View style={styles.overlay}>
						<View style={styles.dialog}>
							<Text style={styles.dialogTitle}>Nouveau cadre</Text>
							<TextInput
								value={addState.name}
								onChangeText={(t) => setAddState((s) => ({ ...s, name: t }))}
								style={styles.input}
								placeholder="Nom du cadre"
								placeholderTextColor="#9aa7b3"
								autoCapitalize="sentences"
							/>
							<View style={styles.row}>
								<Pressable style={[styles.btn, styles.btnSecondary]} onPress={() => setAddState({ open: false, name: "" })}>
									<Text style={styles.btnTextDark}>Annuler</Text>
								</Pressable>
								<Pressable style={[styles.btn, styles.btnPrimary]} onPress={onAddConfirm}>
									<Text style={styles.btnText}>Ajouter</Text>
								</Pressable>
							</View>
						</View>
					</View>
				</Modal>

				{/* Modale Renommer */}
				<Modal transparent visible={!!renameState.id} animationType="fade" onRequestClose={() => setRenameState({ id: undefined, name: "" })}>
					<View style={styles.overlay}>
						<View style={styles.dialog}>
							<Text style={styles.dialogTitle}>Modifier nom</Text>
							<TextInput
								value={renameState.name}
								onChangeText={(t) => setRenameState((s) => ({ ...s, name: t }))}
								style={styles.input}
								placeholder="Nouveau nom"
								placeholderTextColor="#9aa7b3"
							/>
							<View style={styles.row}>
								<Pressable style={[styles.btn, styles.btnSecondary]} onPress={() => setRenameState({ id: undefined, name: "" })}>
									<Text style={styles.btnTextDark}>Annuler</Text>
								</Pressable>
								<Pressable style={[styles.btn, styles.btnPrimary]} onPress={onRenameConfirm}>
									<Text style={styles.btnText}>Valider</Text>
								</Pressable>
							</View>
						</View>
					</View>
				</Modal>

				{/* Modale Reset */}
				<Modal transparent visible={!!resetState.id} animationType="fade" onRequestClose={() => setResetState({ id: undefined, value: "00:00:00" })}>
					<View style={styles.overlay}>
						<View style={styles.dialog}>
							<Text style={styles.dialogTitle}>Réinitialiser (HH:MM:SS)</Text>
							<TextInput
								value={resetState.value}
								onChangeText={(t) => setResetState((s) => ({ ...s, value: t }))}
								style={styles.input}
								placeholder="00:00:00"
								placeholderTextColor="#9aa7b3"
								autoCapitalize="none"
							/>
							<View style={styles.row}>
								<Pressable style={[styles.btn, styles.btnSecondary]} onPress={() => setResetState({ id: undefined, value: "00:00:00" })}>
									<Text style={styles.btnTextDark}>Annuler</Text>
								</Pressable>
								<Pressable style={[styles.btn, styles.btnWarning]} onPress={onResetConfirm}>
									<Text style={styles.btnText}>Réinitialiser</Text>
								</Pressable>
							</View>
						</View>
					</View>
				</Modal>
			</SafeAreaView>
		</SafeAreaProvider>
	);
}

function CadreCard({
	cadre,
	onStart,
	onPause,
	onReset,
	onRename,
	onDelete,
}: {
	cadre: Cadre;
	onStart: () => void;
	onPause: () => void;
	onReset: () => void;
	onRename: () => void;
	onDelete: () => void;
}) {
	const elapsed = cadre.totalMs + (cadre.enCours && cadre.debut ? Date.now() - cadre.debut : 0);
	return (
		<View style={styles.card}>
			<View style={styles.cardHeader}>
				<Text style={styles.cardTitle}>{cadre.nom}</Text>
				<TouchableOpacity style={styles.closeBtn} onPress={onDelete} accessibilityLabel="Supprimer">
					<Ionicons name="close" size={16} color="#0b1e35" />
				</TouchableOpacity>
			</View>
			<Text style={styles.timer}>{fmtHMS(elapsed)}</Text>
			<View style={styles.actions}>
				<Pressable style={[styles.btn, styles.btnSuccess]} onPress={onStart}>
					<Text style={styles.btnText}>Start</Text>
				</Pressable>
				<Pressable style={[styles.btn, styles.btnWarning]} onPress={onPause}>
					<Text style={styles.btnText}>Pause</Text>
				</Pressable>
				<Pressable style={[styles.btn, styles.btnSecondary]} onPress={onReset}>
					<Text style={styles.btnTextDark}>Réinitialiser</Text>
				</Pressable>
				<Pressable style={[styles.btn, styles.btnOutline]} onPress={onRename}>
					<Text style={styles.btnOutlineText}>Modifier nom</Text>
				</Pressable>
			</View>
		</View>
	);
}

const styles = StyleSheet.create({
	root: { flex: 1, backgroundColor: "#0b1e35" },
	navbar: {
		flexDirection: "row",
		alignItems: "center",
		paddingHorizontal: 12,
		paddingVertical: 10,
		borderBottomWidth: 1,
		borderBottomColor: "#264d73",
		backgroundColor: "#11264d",
	},
	burger: {
		backgroundColor: "#ffffff",
		width: 34,
		height: 34,
		borderRadius: 17,
		alignItems: "center",
		justifyContent: "center",
	},
	brand: { color: "#e9ecef", marginLeft: 10, fontSize: 16, fontWeight: "600" },
	listContent: { padding: 16, paddingBottom: 8 },
	card: {
		backgroundColor: "#13294b",
		borderWidth: 1,
		borderColor: "#264d73",
		borderRadius: 8,
		padding: 12,
		marginBottom: 12,
	},
	cardHeader: { flexDirection: "row", justifyContent: "space-between", alignItems: "center" },
	cardTitle: { color: "#e9ecef", fontSize: 16, fontWeight: "600" },
	closeBtn: { width: 24, height: 24, borderRadius: 12, backgroundColor: "#ffffff", alignItems: "center", justifyContent: "center" },
	timer: { color: "#9ec5fe", fontSize: 20, fontWeight: "500", marginVertical: 8 },
	actions: { flexDirection: "row", flexWrap: "wrap", gap: 8 },
	btn: { borderRadius: 6, paddingVertical: 8, paddingHorizontal: 10, alignItems: "center", justifyContent: "center" },
	btnText: { color: "#0b1e35", fontWeight: "600" },
	btnTextDark: { color: "#0b1e35", fontWeight: "600" },
	btnPrimary: { backgroundColor: "#0d6efd" },
	btnDanger: { backgroundColor: "#dc3545" },
	btnSuccess: { backgroundColor: "#198754" },
	btnWarning: { backgroundColor: "#ffc107" },
	btnSecondary: { backgroundColor: "#d0d6db" },
	btnOutline: { borderWidth: 1, borderColor: "#6c757d", backgroundColor: "transparent" },
	btnOutlineText: { color: "#d0d6db", fontWeight: "600" },
	total: { color: "#e9ecef", textAlign: "center", marginTop: 8 },
	historyRoot: { flex: 1, backgroundColor: "#0b1e35" },
	historyHeader: {
		flexDirection: "row",
		alignItems: "center",
		justifyContent: "space-between",
		paddingHorizontal: 16,
		paddingVertical: 12,
		backgroundColor: "#11264d",
		borderBottomWidth: 1,
		borderBottomColor: "#264d73",
	},
	historyTitle: { color: "#e9ecef", fontSize: 18, fontWeight: "600" },
	historyDay: { backgroundColor: "#13294b", borderRadius: 8, borderWidth: 1, borderColor: "#264d73", padding: 12, marginBottom: 12 },
	historyDayHeader: { flexDirection: "row", justifyContent: "space-between", alignItems: "center", marginBottom: 8 },
	historyDayTitle: { color: "#e9ecef", fontWeight: "600" },
	chipDanger: { borderWidth: 1, borderColor: "#dc3545", borderRadius: 4, paddingHorizontal: 8, paddingVertical: 4 },
	chipDangerText: { color: "#dc3545", fontWeight: "600" },
	historyList: { gap: 6 },
	historyItem: { flexDirection: "row", justifyContent: "space-between" },
	historyItemName: { color: "#e9ecef" },
	historyItemTime: { color: "#e9ecef" },
	overlay: { flex: 1, backgroundColor: "rgba(0,0,0,0.5)", alignItems: "center", justifyContent: "center", padding: 16 },
	dialog: { width: "100%", maxWidth: 420, backgroundColor: "#13294b", borderWidth: 1, borderColor: "#264d73", borderRadius: 8, padding: 16 },
	dialogTitle: { color: "#e9ecef", fontWeight: "700", marginBottom: 8 },
	input: {
		backgroundColor: "#0b1e35",
		color: "#e9ecef",
		borderWidth: 1,
		borderColor: "#264d73",
		borderRadius: 6,
		paddingHorizontal: 10,
		paddingVertical: 8,
		marginBottom: 12,
	},
	row: { flexDirection: "row", justifyContent: "flex-end", gap: 8 },
});

function defaultCadres(): Cadre[] {
	return [createCadre("Heures travaillées"), createCadre("Pause nourriture"), createCadre("Pause inspiration"), createCadre("Pause toilettes")];
}

# ./React-Native/tracker_de_temps/App.tsx

# ./React-Native/tracker_de_temps/dist/assetmap.json
{"3f78af31cca60105799838a1a7a59fbd":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\AntDesign.ttf"],"hash":"3f78af31cca60105799838a1a7a59fbd","name":"AntDesign","type":"ttf","fileHashes":["3f78af31cca60105799838a1a7a59fbd"]},"31b5ffea3daddc69dd01a1f3d6cf63c5":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Entypo.ttf"],"hash":"31b5ffea3daddc69dd01a1f3d6cf63c5","name":"Entypo","type":"ttf","fileHashes":["31b5ffea3daddc69dd01a1f3d6cf63c5"]},"140c53a7643ea949007aa9a282153849":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\EvilIcons.ttf"],"hash":"140c53a7643ea949007aa9a282153849","name":"EvilIcons","type":"ttf","fileHashes":["140c53a7643ea949007aa9a282153849"]},"ca4b48e04dc1ce10bfbddb262c8b835f":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Feather.ttf"],"hash":"ca4b48e04dc1ce10bfbddb262c8b835f","name":"Feather","type":"ttf","fileHashes":["ca4b48e04dc1ce10bfbddb262c8b835f"]},"b49ae8ab2dbccb02c4d11caaacf09eab":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Fontisto.ttf"],"hash":"b49ae8ab2dbccb02c4d11caaacf09eab","name":"Fontisto","type":"ttf","fileHashes":["b49ae8ab2dbccb02c4d11caaacf09eab"]},"b06871f281fee6b241d60582ae9369b9":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome.ttf"],"hash":"b06871f281fee6b241d60582ae9369b9","name":"FontAwesome","type":"ttf","fileHashes":["b06871f281fee6b241d60582ae9369b9"]},"1f77739ca9ff2188b539c36f30ffa2be":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome5_Regular.ttf"],"hash":"1f77739ca9ff2188b539c36f30ffa2be","name":"FontAwesome5_Regular","type":"ttf","fileHashes":["1f77739ca9ff2188b539c36f30ffa2be"]},"605ed7926cf39a2ad5ec2d1f9d391d3d":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome5_Solid.ttf"],"hash":"605ed7926cf39a2ad5ec2d1f9d391d3d","name":"FontAwesome5_Solid","type":"ttf","fileHashes":["605ed7926cf39a2ad5ec2d1f9d391d3d"]},"3b89dd103490708d19a95adcae52210e":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome5_Brands.ttf"],"hash":"3b89dd103490708d19a95adcae52210e","name":"FontAwesome5_Brands","type":"ttf","fileHashes":["3b89dd103490708d19a95adcae52210e"]},"370dd5af19f8364907b6e2c41f45dbbf":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome6_Regular.ttf"],"hash":"370dd5af19f8364907b6e2c41f45dbbf","name":"FontAwesome6_Regular","type":"ttf","fileHashes":["370dd5af19f8364907b6e2c41f45dbbf"]},"adec7d6f310bc577f05e8fe06a5daccf":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome6_Solid.ttf"],"hash":"adec7d6f310bc577f05e8fe06a5daccf","name":"FontAwesome6_Solid","type":"ttf","fileHashes":["adec7d6f310bc577f05e8fe06a5daccf"]},"56c8d80832e37783f12c05db7c8849e2":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\FontAwesome6_Brands.ttf"],"hash":"56c8d80832e37783f12c05db7c8849e2","name":"FontAwesome6_Brands","type":"ttf","fileHashes":["56c8d80832e37783f12c05db7c8849e2"]},"e20945d7c929279ef7a6f1db184a4470":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Foundation.ttf"],"hash":"e20945d7c929279ef7a6f1db184a4470","name":"Foundation","type":"ttf","fileHashes":["e20945d7c929279ef7a6f1db184a4470"]},"b4eb097d35f44ed943676fd56f6bdc51":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Ionicons.ttf"],"hash":"b4eb097d35f44ed943676fd56f6bdc51","name":"Ionicons","type":"ttf","fileHashes":["b4eb097d35f44ed943676fd56f6bdc51"]},"6e435534bd35da5fef04168860a9b8fa":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\MaterialCommunityIcons.ttf"],"hash":"6e435534bd35da5fef04168860a9b8fa","name":"MaterialCommunityIcons","type":"ttf","fileHashes":["6e435534bd35da5fef04168860a9b8fa"]},"4e85bc9ebe07e0340c9c4fc2f6c38908":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\MaterialIcons.ttf"],"hash":"4e85bc9ebe07e0340c9c4fc2f6c38908","name":"MaterialIcons","type":"ttf","fileHashes":["4e85bc9ebe07e0340c9c4fc2f6c38908"]},"871378c6eab492a3e689a9385dc45a12":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Octicons.ttf"],"hash":"871378c6eab492a3e689a9385dc45a12","name":"Octicons","type":"ttf","fileHashes":["871378c6eab492a3e689a9385dc45a12"]},"d2285965fe34b05465047401b8595dd0":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\SimpleLineIcons.ttf"],"hash":"d2285965fe34b05465047401b8595dd0","name":"SimpleLineIcons","type":"ttf","fileHashes":["d2285965fe34b05465047401b8595dd0"]},"1681f34aaca71b8dfb70756bca331eb2":{"__packager_asset":true,"fileSystemLocation":"C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts","httpServerLocation":"/assets/node_modules/@expo/vector-icons/build/vendor/react-native-vector-icons/Fonts","scales":[1],"files":["C:\\Users\\Cyrille de Gasquet\\Dropbox\\Mes documents\\Existant\\Utilitaire\\Formation\\La Capsule\\3 - Cours\\Autre\\React-Native\\tracker_de_temps\\node_modules\\@expo\\vector-icons\\build\\vendor\\react-native-vector-icons\\Fonts\\Zocial.ttf"],"hash":"1681f34aaca71b8dfb70756bca331eb2","name":"Zocial","type":"ttf","fileHashes":["1681f34aaca71b8dfb70756bca331eb2"]}}
# ./React-Native/tracker_de_temps/dist/assetmap.json

# ./React-Native/tracker_de_temps/dist/metadata.json
{"version":0,"bundler":"metro","fileMetadata":{"android":{"bundle":"_expo/static/js/android/index-709826ebd15c4db6963a271d8fba9e10.hbc","assets":[{"path":"assets\\3f78af31cca60105799838a1a7a59fbd","ext":"ttf"},{"path":"assets\\31b5ffea3daddc69dd01a1f3d6cf63c5","ext":"ttf"},{"path":"assets\\140c53a7643ea949007aa9a282153849","ext":"ttf"},{"path":"assets\\ca4b48e04dc1ce10bfbddb262c8b835f","ext":"ttf"},{"path":"assets\\b49ae8ab2dbccb02c4d11caaacf09eab","ext":"ttf"},{"path":"assets\\b06871f281fee6b241d60582ae9369b9","ext":"ttf"},{"path":"assets\\1f77739ca9ff2188b539c36f30ffa2be","ext":"ttf"},{"path":"assets\\605ed7926cf39a2ad5ec2d1f9d391d3d","ext":"ttf"},{"path":"assets\\3b89dd103490708d19a95adcae52210e","ext":"ttf"},{"path":"assets\\370dd5af19f8364907b6e2c41f45dbbf","ext":"ttf"},{"path":"assets\\adec7d6f310bc577f05e8fe06a5daccf","ext":"ttf"},{"path":"assets\\56c8d80832e37783f12c05db7c8849e2","ext":"ttf"},{"path":"assets\\e20945d7c929279ef7a6f1db184a4470","ext":"ttf"},{"path":"assets\\b4eb097d35f44ed943676fd56f6bdc51","ext":"ttf"},{"path":"assets\\6e435534bd35da5fef04168860a9b8fa","ext":"ttf"},{"path":"assets\\4e85bc9ebe07e0340c9c4fc2f6c38908","ext":"ttf"},{"path":"assets\\871378c6eab492a3e689a9385dc45a12","ext":"ttf"},{"path":"assets\\d2285965fe34b05465047401b8595dd0","ext":"ttf"},{"path":"assets\\1681f34aaca71b8dfb70756bca331eb2","ext":"ttf"}]},"ios":{"bundle":"_expo/static/js/ios/index-ab8a115232f7c6593e028deef8f0755f.hbc","assets":[{"path":"assets\\3f78af31cca60105799838a1a7a59fbd","ext":"ttf"},{"path":"assets\\31b5ffea3daddc69dd01a1f3d6cf63c5","ext":"ttf"},{"path":"assets\\140c53a7643ea949007aa9a282153849","ext":"ttf"},{"path":"assets\\ca4b48e04dc1ce10bfbddb262c8b835f","ext":"ttf"},{"path":"assets\\b49ae8ab2dbccb02c4d11caaacf09eab","ext":"ttf"},{"path":"assets\\b06871f281fee6b241d60582ae9369b9","ext":"ttf"},{"path":"assets\\1f77739ca9ff2188b539c36f30ffa2be","ext":"ttf"},{"path":"assets\\605ed7926cf39a2ad5ec2d1f9d391d3d","ext":"ttf"},{"path":"assets\\3b89dd103490708d19a95adcae52210e","ext":"ttf"},{"path":"assets\\370dd5af19f8364907b6e2c41f45dbbf","ext":"ttf"},{"path":"assets\\adec7d6f310bc577f05e8fe06a5daccf","ext":"ttf"},{"path":"assets\\56c8d80832e37783f12c05db7c8849e2","ext":"ttf"},{"path":"assets\\e20945d7c929279ef7a6f1db184a4470","ext":"ttf"},{"path":"assets\\b4eb097d35f44ed943676fd56f6bdc51","ext":"ttf"},{"path":"assets\\6e435534bd35da5fef04168860a9b8fa","ext":"ttf"},{"path":"assets\\4e85bc9ebe07e0340c9c4fc2f6c38908","ext":"ttf"},{"path":"assets\\871378c6eab492a3e689a9385dc45a12","ext":"ttf"},{"path":"assets\\d2285965fe34b05465047401b8595dd0","ext":"ttf"},{"path":"assets\\1681f34aaca71b8dfb70756bca331eb2","ext":"ttf"}]}}}
# ./React-Native/tracker_de_temps/dist/metadata.json

# ./React-Native/tracker_de_temps/.expo/devices.json
{
  "devices": []
}

# ./React-Native/tracker_de_temps/.expo/devices.json

# ./React-Native/tracker_de_temps/index.ts
import { registerRootComponent } from 'expo';

import App from './App';

// registerRootComponent calls AppRegistry.registerComponent('main', () => App);
// It also ensures that whether you load the app in Expo Go or in a native build,
// the environment is set up appropriately
registerRootComponent(App);

# ./React-Native/tracker_de_temps/index.ts

# ./React-Native/tracker_de_temps/package.json
{
  "name": "tracker_de_temps",
  "version": "1.0.0",
  "main": "index.ts",
  "scripts": {
    "start": "expo start",
    "android": "expo start --android",
    "ios": "expo start --ios",
    "web": "expo start --web"
  },
  "dependencies": {
    "@expo/vector-icons": "^15.0.2",
    "@react-native-async-storage/async-storage": "^2.2.0",
    "expo": "~53.0.22",
    "expo-status-bar": "~2.2.3",
    "expo-updates": "~0.28.17",
    "react": "19.0.0",
    "react-native": "0.79.6",
    "react-native-safe-area-context": "^5.6.1",
    "react-native-uuid": "^2.0.3"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~19.0.10",
    "typescript": "~5.8.3"
  },
  "private": true
}

# ./React-Native/tracker_de_temps/package.json

# ./React-Native/tracker_de_temps/src/lib/storage.ts
// src/lib/storage.ts
import AsyncStorage from "@react-native-async-storage/async-storage";
import type { DayData } from "../types";

const STORAGE_KEY = "tracker_de_temps_quotidien";

export async function loadAll(): Promise<DayData> {
	try {
		const raw = await AsyncStorage.getItem(STORAGE_KEY);
		return raw ? JSON.parse(raw) : {};
	} catch {
		return {};
	}
}

export async function saveAll(data: DayData): Promise<void> {
	await AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

# ./React-Native/tracker_de_temps/src/lib/storage.ts

# ./React-Native/tracker_de_temps/src/lib/time.ts
// src/lib/time.ts
export const fmtHMS = (ms: number): string => {
	const t = Math.max(0, Math.floor(ms / 1000));
	const h = Math.floor(t / 3600);
	const m = Math.floor((t % 3600) / 60);
	const s = t % 60;
	return [h, m, s].map((n) => String(n).padStart(2, "0")).join(":");
};

export const parseHMS = (str: string): number => {
	const p = str.split(":").map((n) => parseInt(n, 10) || 0);
	const [h, m = 0, s = 0] = p;
	return (h * 3600 + m * 60 + s) * 1000;
};

export const todayKey = (): string => new Date().toLocaleDateString("fr-FR").replace(/\//g, "-");

# ./React-Native/tracker_de_temps/src/lib/time.ts

# ./React-Native/tracker_de_temps/src/types.ts
// src/types.ts
import uuid from "react-native-uuid";

export type CadreDTO = {
	id: string;
	nom: string;
	totalMs: number;
	enCours: boolean;
	debut: number | null;
};

export type Cadre = CadreDTO;

export const createCadre = (nom: string): Cadre => ({
	id: String(uuid.v4()), // v4 sync, compatible RN
	nom,
	totalMs: 0,
	enCours: false,
	debut: null,
});

export const reviveCadre = (o: any): Cadre => ({
	id: String(o.id),
	nom: String(o.nom),
	totalMs: Number(o.totalMs ?? 0),
	enCours: Boolean(o.enCours),
	debut: typeof o.debut === "number" ? o.debut : o.debut ? Number(o.debut) : null,
});

export type DayData = Record<string, CadreDTO[]>;

# ./React-Native/tracker_de_temps/src/types.ts

# ./React-Native/tracker_de_temps/tsconfig.json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true
  }
}

# ./React-Native/tracker_de_temps/tsconfig.json

# ./Web/AI_team/data/projet-marrant-1_20250919-114716/config.json
{
  "company": "SimuCorp",
  "project": {
    "name": "Projet marrant 1",
    "goal": "faire une petite app en go qui fait un CRUD sur la ressources plantes pour une liste de plante modifiable supprimable en 1 seule page basique",
    "description": "Le but est de voir comment une équipe fonctionne\n"
  },
  "roles": [
    {
      "id": "CHEF",
      "name": "Chef d'équipe",
      "description": "Supervise l'ensemble du projet et prend les décisions finales."
    },
    {
      "id": "MAN",
      "name": "Manager",
      "description": "Planifie les tâches, suit l'avancement et communique entre les membres."
    },
    {
      "id": "GRA",
      "name": "Graphiste",
      "description": "Réalise les maquettes et éléments visuels."
    },
    {
      "id": "DEV",
      "name": "Développeur",
      "description": "Implémente les fonctionnalités et assure la qualité du code."
    }
  ],
  "employees": [
    {
      "id": "U1",
      "name": "Alice",
      "roleId": "CHEF"
    },
    {
      "id": "U2",
      "name": "Bob",
      "roleId": "MAN"
    },
    {
      "id": "U3",
      "name": "Chloé",
      "roleId": "GRA"
    },
    {
      "id": "U4",
      "name": "David",
      "roleId": "DEV"
    },
    {
      "id": "U5",
      "name": "Emma",
      "roleId": "DEV"
    }
  ],
  "workflow": {
    "stages": [
      "Idée",
      "Planification",
      "Production",
      "Test",
      "Présentation"
    ]
  }
}
# ./Web/AI_team/data/projet-marrant-1_20250919-114716/config.json

# ./Web/AI_team/data/projet-marrant-1_20250919-114716/meta.json
{
  "id": "projet-marrant-1_20250919-114716",
  "createdAt": "2025-09-19T09:47:16.062Z",
  "status": "idle",
  "currentSprint": 1,
  "model": "gpt-4o"
}
# ./Web/AI_team/data/projet-marrant-1_20250919-114716/meta.json

# ./Web/AI_team/data/projet-marrant-1_20250919-114716/sprint-1.json
{
  "meta": {
    "number": 1,
    "startedAt": "2025-09-19T09:47:22.614Z",
    "status": "finished",
    "endedAt": "2025-09-19T09:47:41.572Z"
  },
  "order": [
    "CHEF",
    "MAN",
    "DEV",
    "GRA"
  ],
  "messages": [
    {
      "roleId": "CHEF",
      "content": "Objectif du sprint: Finaliser le CRUD pour la ressource plantes.\n\n1. **Tâches à accomplir**:\n   - **DEV**: Terminer les fonctionnalités de mise à jour et suppression des plantes.\n   - **GRA**: Proposer une maquette simple pour l'interface utilisateur de la page.\n\n2. **Suivi**:\n   - **MAN**: Assurer un suivi quotidien avec DEV et GRA, confirmer l'avancement et ajuster si nécessaire.\n\nDécisions finales: Priorité sur la fonctionnalité avant esthétique. Avancer tous ensemble afin de s'assurer que la maquette correspond aux fonctionnalités en place. Ajuster en cas de besoin pour livrer en temps. Pousser les commits régulièrement pour assurer la synchronisation.\n\nSuivons ce plan, et atteignons notre objectif!",
      "at": "2025-09-19T09:47:30.203Z"
    },
    {
      "roleId": "MAN",
      "content": "Bonjour équipe,\n\n1. **DEV**, peux-tu confirmer que le développement des fonctionnalités de mise à jour et suppression des plantes est en bonne voie? Besoin d'un support?\n2. **GRA**, as-tu avancé sur la maquette? Assure-toi qu’elle est en adéquation avec les fonctionnalités, communique avec le DEV si nécessaire.\n3. Je vous rappelle de pousser vos commits régulièrement pour assurer la synchronisation.\n\nN'hésitez pas à me signaler tout obstacle. Continuons ensemble pour rester sur la bonne route.",
      "at": "2025-09-19T09:47:33.759Z"
    },
    {
      "roleId": "DEV",
      "content": "DEV: Bonjour,\n\n1. La fonctionnalité de mise à jour est pratiquement terminée, je finalise les tests aujourd'hui.\n2. La suppression fonctionne côté serveur, il reste à intégrer l'interface. Je pourrais avoir besoin de quelques indications graphiques de **GRA** pour cela. \n3. Je m'assure de pousser les commits d'ici la fin de la journée. \n\nJe vous tiens informés de l'avancée.",
      "at": "2025-09-19T09:47:37.073Z"
    },
    {
      "roleId": "GRA",
      "content": "GRA: Bonjour,\n\n1. J'ai une maquette de base prête intégrant les sections nécessaires pour la mise à jour et la suppression.\n2. J'enverrai les détails à **DEV** pour garantir une intégration fluide.\n3. Je m'assure de vous partager la version finale cet après-midi pour feedback.\n\nRestons coordonnés!",
      "at": "2025-09-19T09:47:39.810Z"
    },
    {
      "roleId": "CHEF",
      "content": "CHEF: Excellent travail, équipe.\n\n1. **DEV**: Assure-toi d'intégrer la maquette de **GRA** pour finaliser l'interface. \n\n2. **GRA**: Partage ta maquette avec **DEV** dès que possible pour faciliter l'intégration.\n\nCela semble bien parti pour conclure ce sprint très bientôt. [FIN_SPRINT]",
      "at": "2025-09-19T09:47:41.554Z"
    }
  ]
}
# ./Web/AI_team/data/projet-marrant-1_20250919-114716/sprint-1.json

# ./Web/AI_team/index.html
<!doctype html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<title>Simu Entreprise – Orchestrateur</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
	<style>
		body {
			background: #f7f9fc
		}

		.mono {
			font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace
		}

		.offcanvas-start {
			width: 300px
		}
	</style>
</head>

<body>
	<nav class="navbar navbar-light bg-white border-bottom sticky-top">
		<div class="container-fluid">
			<button class="btn btn-outline-secondary" data-bs-toggle="offcanvas" data-bs-target="#menu">☰</button>
			<span class="navbar-brand mb-0 h1">Simu Entreprise</span>
			<div class="d-flex gap-2">
				<button id="btnRender" class="btn btn-success btn-sm">Afficher</button>
				<button id="btnStartSprint" class="btn btn-primary btn-sm d-none">Commencer le sprint</button>
				<button id="btnNextSprint" class="btn btn-outline-primary btn-sm d-none">Sprint suivant</button>
				<button id="btnPause" class="btn btn-outline-warning btn-sm d-none">Mettre en pause</button>
				<button id="btnEnd" class="btn btn-outline-danger btn-sm d-none">Mettre fin</button>
			</div>
		</div>
	</nav>

	<div class="offcanvas offcanvas-start" tabindex="-1" id="menu">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title">Projets</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
		</div>
		<div class="offcanvas-body">
			<div id="projectsList" class="small text-muted">Aucun projet chargé.</div>
		</div>
	</div>

	<main class="container my-4">
		<div class="row g-4">
			<div class="col-12">
				<label for="configInput" class="form-label">Configuration (JSON ou YAML)</label>
				<textarea id="configInput" class="form-control mono" rows="10"
					placeholder="Collez ici votre config..."></textarea>
				<div class="form-text">Le CHEF initiera le premier message. Le back orchestre tout.</div>
			</div>
			<div class="col-12">
				<div id="alertZone"></div>
			</div>

			<div class="col-12 col-lg-4">
				<div class="card shadow-sm">
					<div class="card-body">
						<h5 class="card-title">Projet</h5>
						<div id="projectPanel" class="small text-muted">Aucune configuration chargée.</div>
					</div>
				</div>
			</div>

			<div class="col-12 col-lg-4">
				<div class="card shadow-sm">
					<div class="card-body">
						<h5 class="card-title">Rôles</h5>
						<div id="rolesPanel" class="small text-muted">—</div>
					</div>
				</div>
			</div>

			<div class="col-12 col-lg-4">
				<div class="card shadow-sm">
					<div class="card-body">
						<h5 class="card-title">Équipe</h5>
						<div id="teamPanel" class="small text-muted">—</div>
					</div>
				</div>
			</div>

			<div class="col-12">
				<div class="card shadow-sm">
					<div class="card-body">
						<h5 class="card-title">Workflow</h5>
						<div id="workflowPanel" class="small text-muted">—</div>
					</div>
				</div>
			</div>

			<div class="col-12">
				<div class="card shadow-sm">
					<div class="card-body">
						<h5 class="card-title">Conversation du sprint (lecture seule)</h5>
						<div id="chatView" class="border p-2" style="height:300px; overflow-y:auto; background:#fff;"></div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<footer class="container my-4 text-center text-muted small">
		Stockage serveur par projet (JSON+sprints, livrables/ avec git). Le front n’orchestré pas, il affiche.
	</footer>

	<script>
		let currentConfig = null;
		let currentProjectId = null;
		let pollTimer = null;

		function showAlert(kind, title, details = []) {
			const z = document.getElementById('alertZone');
			const list = details.map(d => `<li>${escapeHtml(String(d))}</li>`).join('');
			z.innerHTML = `
      <div class="alert alert-${kind}"><strong>${escapeHtml(title)}</strong>
      ${details.length ? `<ul class="mb-0">${list}</ul>` : ''}</div>`;
		}
		function clearAlerts() {document.getElementById('alertZone').innerHTML = '';}
		function escapeHtml(s) {return String(s).replace(/[&<>"']/g, m => ({'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'}[m]));}

		function parseConfig(raw) {
			const t = (raw || '').trim();
			if (!t) throw new Error('Configuration vide.');
			if (/^\s*[\{\[]/.test(t)) return JSON.parse(t);
			return jsyaml.load(t);
		}

		function validate(cfg) {
			const issues = [];
			['company', 'project', 'roles', 'employees'].forEach(k => {if (!(k in cfg)) issues.push(`Manque: ${k}`);});
			if (cfg.project) {['name', 'goal', 'description'].forEach(k => {if (!(k in cfg.project)) issues.push(`project.${k} manquant`);});}
			if (!Array.isArray(cfg.roles)) issues.push('roles doit être une liste');
			if (!Array.isArray(cfg.employees)) issues.push('employees doit être une liste');
			return issues;
		}

		function renderUI(cfg) {
			const p = cfg.project || {};
			document.getElementById('projectPanel').innerHTML = `
      <div><strong>Entreprise :</strong> ${escapeHtml(cfg.company || '—')}</div>
      <div><strong>Nom du projet :</strong> ${escapeHtml(p.name || '—')}</div>
      <div><strong>Objectif :</strong> ${escapeHtml(p.goal || '—')}</div>
      <div class="mt-2">${escapeHtml(p.description || '')}</div>`;
			const roles = Array.isArray(cfg.roles) ? cfg.roles : [];
			document.getElementById('rolesPanel').innerHTML = roles.length ? roles.map(r => `
      <div class="border rounded p-2 mb-2">
        <div><strong>${escapeHtml(r.name)}</strong> <span class="badge bg-secondary">${escapeHtml(r.id)}</span></div>
        <div class="text-muted small">${escapeHtml(r.description || '—')}</div>
      </div>`).join('') : 'Aucun rôle.';
			const emps = Array.isArray(cfg.employees) ? cfg.employees : [];
			document.getElementById('teamPanel').innerHTML = emps.length ? `
      <div class="table-responsive"><table class="table table-sm">
        <thead><tr><th>Nom</th><th>Rôle</th><th>Id</th></tr></thead>
        <tbody>${emps.map(u => `<tr><td>${escapeHtml(u.name)}</td><td>${escapeHtml(u.roleId)}</td><td class="text-muted">${escapeHtml(u.id)}</td></tr>`).join('')}</tbody>
      </table></div>` : 'Aucun employé.';
			const stages = (cfg.workflow && Array.isArray(cfg.workflow.stages)) ? cfg.workflow.stages : [];
			document.getElementById('workflowPanel').innerHTML = stages.length ? stages.map((s, i) => `
      <span class="badge rounded-pill bg-${i === stages.length - 1 ? 'success' : 'info'} me-1 mb-1">${escapeHtml(s)}</span>`).join('') : '—';
		}

		async function initProject(cfg) {
			const r = await fetch('/api/project/init', {
				method: 'POST', headers: {'Content-Type': 'application/json'},
				body: JSON.stringify({config: cfg})
			});
			const data = await r.json();
			if (!r.ok) throw new Error(data.error || 'Init échouée');
			return data.projectId;
		}

		async function startSprint(projectId) {
			const r = await fetch('/api/sprint/start', {
				method: 'POST', headers: {'Content-Type': 'application/json'},
				body: JSON.stringify({projectId})
			});
			const data = await r.json();
			if (!r.ok) throw new Error(data.error || 'Start sprint échoué');
			return data;
		}

		async function getState(projectId) {
			const r = await fetch(`/api/project/${encodeURIComponent(projectId)}/state`);
			const data = await r.json();
			if (!r.ok) throw new Error(data.error || 'State échoué');
			return data;
		}

		function renderChat(sprint) {
			const box = document.getElementById('chatView');
			if (!sprint) {box.textContent = '—'; return;}
			const lines = (sprint.messages || []).map(m => `<div><strong>${escapeHtml(m.roleId)}:</strong> ${escapeHtml(m.content)}</div>`);
			box.innerHTML = lines.join('');
			box.scrollTop = box.scrollHeight;
		}

		function setButtons(meta) {
			const btnStart = document.getElementById('btnStartSprint');
			const btnNext = document.getElementById('btnNextSprint');
			const btnPause = document.getElementById('btnPause');
			const btnEnd = document.getElementById('btnEnd');

			// Affichages selon status
			btnStart.classList.toggle('d-none', !(meta.status === 'idle' || meta.currentSprint === 0));
			btnNext.classList.toggle('d-none', !(meta.status === 'idle' && meta.currentSprint > 0));
			btnPause.classList.toggle('d-none', !(meta.status === 'running'));
			btnEnd.classList.toggle('d-none', !(meta.status !== 'ended'));
		}

		function startPolling() {
			stopPolling();
			pollTimer = setInterval(async () => {
				if (!currentProjectId) return;
				try {
					const st = await getState(currentProjectId);
					renderChat(st.sprint);
					setButtons(st.meta);
				} catch (e) {
					console.error(e);
				}
			}, 2000);
		}
		function stopPolling() {if (pollTimer) {clearInterval(pollTimer); pollTimer = null;} }

		document.getElementById('btnRender').addEventListener('click', async () => {
			clearAlerts();
			try {
				const cfg = parseConfig(document.getElementById('configInput').value);
				const issues = validate(cfg);
				if (issues.length) {showAlert('warning', 'Validation partielle', issues);}
				renderUI(cfg);
				currentConfig = cfg;
				// Init projet serveur
				currentProjectId = await initProject(cfg);
				showAlert('success', `Projet initialisé: ${currentProjectId}`);
				document.getElementById('btnStartSprint').classList.remove('d-none');
				startPolling();
			} catch (e) {
				showAlert('danger', 'Erreur', [String(e)]);
			}
		});

		document.getElementById('btnStartSprint').addEventListener('click', async () => {
			if (!currentProjectId) return;
			try {
				await startSprint(currentProjectId);
				showAlert('info', 'Sprint démarré');
			} catch (e) {
				showAlert('danger', 'Démarrage sprint échoué', [String(e)]);
			}
		});

		document.getElementById('btnNextSprint').addEventListener('click', async () => {
			if (!currentProjectId) return;
			const r = await fetch('/api/sprint/next', {
				method: 'POST', headers: {'Content-Type': 'application/json'},
				body: JSON.stringify({projectId: currentProjectId})
			});
			const data = await r.json();
			if (!r.ok) showAlert('danger', 'Sprint suivant échoué', [data.error || '']);
			else showAlert('info', 'Sprint suivant démarré');
		});

		document.getElementById('btnPause').addEventListener('click', async () => {
			if (!currentProjectId) return;
			const r = await fetch('/api/project/pause', {
				method: 'POST', headers: {'Content-Type': 'application/json'},
				body: JSON.stringify({projectId: currentProjectId})
			});
			const data = await r.json();
			if (!r.ok) showAlert('danger', 'Pause échouée', [data.error || '']);
			else showAlert('info', 'Projet en pause');
		});

		document.getElementById('btnEnd').addEventListener('click', async () => {
			if (!currentProjectId) return;
			const r = await fetch('/api/project/end', {
				method: 'POST', headers: {'Content-Type': 'application/json'},
				body: JSON.stringify({projectId: currentProjectId})
			});
			const data = await r.json();
			if (!r.ok) showAlert('danger', 'Fin projet échouée', [data.error || '']);
			else showAlert('info', 'Projet terminé');
		});
	</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>

# ./Web/AI_team/index.html

# ./Web/AI_team/package.json
{
	"name": "ai_team",
	"version": "1.0.0",
	"description": "",
	"main": "index.js",
	"scripts": {
		"test": "echo \"Error: no test specified\" && exit 1",
		"start": "node server.js"
	},
	"keywords": [],
	"author": "",
	"license": "ISC",
	"type": "module",
	"dependencies": {
		"cors": "^2.8.5",
		"dotenv": "^17.2.2",
		"express": "^5.1.0",
		"node-fetch": "^3.3.2"
	}
}

# ./Web/AI_team/package.json

# ./Web/AI_team/server.js
import express from "express";
import cors from "cors";
import fetch from "node-fetch";
import path from "path";
import { fileURLToPath } from "url";
import { exec as execCb } from "child_process";
import fs from "fs/promises";
import "dotenv/config";

const exec = (cmd, opts = {}) =>
  new Promise((resolve, reject) =>
    execCb(cmd, opts, (err, stdout, stderr) =>
      err ? reject(new Error(stderr || stdout || String(err))) : resolve({ stdout, stderr })
    )
  );

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// ---------- Utilitaires ----------
function nowStamp() {
  const d = new Date();
  const pad = (n) => String(n).padStart(2, "0");
  return (
    d.getFullYear().toString() +
    pad(d.getMonth() + 1) +
    pad(d.getDate()) +
    "-" +
    pad(d.getHours()) +
    pad(d.getMinutes()) +
    pad(d.getSeconds())
  );
}
function slugify(s) {
  return String(s).toLowerCase().normalize("NFKD")
    .replace(/[\u0300-\u036f]/g, "")
    .replace(/[^a-z0-9]+/g, "-")
    .replace(/^-+|-+$/g, "");
}
async function ensureDir(p) {
  await fs.mkdir(p, { recursive: true });
}
async function writeJSON(p, obj) {
  const data = JSON.stringify(obj, null, 2);
  await fs.writeFile(p, data, "utf-8");
}
async function readJSON(p) {
  const txt = await fs.readFile(p, "utf-8");
  return JSON.parse(txt);
}

// ---------- OpenAI ----------
async function openAIChat(messages, model = "gpt-4o") {
  if (!process.env.OPENAI_API_KEY) throw new Error("Clé API manquante.");
  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      Authorization: `Bearer ${process.env.OPENAI_API_KEY}`,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({ model, messages }),
  });
  const data = await res.json();
  if (!res.ok) throw new Error(data?.error?.message || "Erreur OpenAI");
  return data.choices?.[0]?.message?.content ?? "";
}

// ---------- Mémoire process (index projets en cours) ----------
const projects = new Map();
/*
  projects.set(projectId, {
    id, rootDir, livrablesDir, metaPath, status: 'idle'|'running'|'paused'|'ended',
    config, currentSprint, maxTours, model
  })
*/

// ---------- Orchestration ----------
function computeOrder(config) {
  const roles = Array.isArray(config.roles) ? config.roles : [];
  const idToRole = new Map(roles.map((r) => [r.id, r]));
  const has = (id) => idToRole.has(id);
  const order = [];

  if (has("CHEF")) order.push("CHEF");
  if (has("MAN") || has("MANAGER")) order.push(has("MAN") ? "MAN" : "MANAGER");

  const rest = roles
    .map((r) => r.id)
    .filter((id) => !order.includes(id))
    .sort();

  return [...order, ...rest];
}

function buildSystemPrompt(config) {
  const goal = config?.project?.goal || "";
  const desc = config?.project?.description || "";
  const rolesTxt = (config.roles || [])
    .map((r) => `- ${r.id} (${r.name}): ${r.description || ""}`)
    .join("\n");
  return [
    {
      role: "system",
      content:
        "Tu es un orchestrateur de sprint agile strict. Réponds en français, concis, actionnable. " +
        "Chaque message doit faire avancer le sprint. Balise [FIN_SPRINT] quand les objectifs du sprint courant sont atteints.",
    },
    {
      role: "system",
      content:
        `Contexte projet:\nBut: ${goal}\nDescription: ${desc}\nRôles:\n${rolesTxt}\n` +
        "Rappels: pas de fioritures, propose tâches et décisions. Si tu es CHEF, fixe le cadre et objectif du sprint.",
    },
  ];
}

function buildRoleUserPrompt(roleId, config, conversation) {
  const role = (config.roles || []).find((r) => r.id === roleId);
  const name = role?.name || roleId;
  const brief = role?.description || "";
  const lastTurns = conversation.slice(-6).map((m) => `${m.roleId}: ${m.content}`).join("\n");
  return (
    `Tu parles au nom du rôle ${roleId} (${name}).\n` +
    `Ta description: ${brief}\n` +
    `Historique récent:\n${lastTurns || "(début)"}\n` +
    `Contrainte: 1 à 3 points courts max, ou un court paragraphe. Si tu es CHEF et que le sprint peut se conclure, ajoute [FIN_SPRINT].`
  );
}

async function ensureGitRepo(rootDir) {
  // Init si pas déjà un repo
  try {
    await fs.access(path.join(rootDir, ".git"));
  } catch {
    await exec("git init", { cwd: rootDir });
    await exec('git config user.email "simu@example.com"', { cwd: rootDir });
    await exec('git config user.name "SimuBot"', { cwd: rootDir });
    await exec("git add .", { cwd: rootDir });
    await exec('git commit -m "Initialisation projet"', { cwd: rootDir });
  }
}

async function commitIfChanged(rootDir, message) {
  await exec("git add .", { cwd: rootDir });
  const { stdout } = await exec("git status --porcelain", { cwd: rootDir });
  if (stdout.trim().length > 0) {
    await exec(`git commit -m "${message.replace(/"/g, '\\"')}"`, { cwd: rootDir });
  }
}

// ---------- API ----------
const app = express();
app.use(cors());
app.use(express.json());

// Sert index.html à la racine
app.get("/", (req, res) => {
  res.sendFile(path.join(__dirname, "index.html"));
});

// Init projet: crée dossier, meta, git, sprint=0
app.post("/api/project/init", async (req, res) => {
  try {
    const cfg = req.body?.config;
    if (!cfg?.project?.name) return res.status(400).json({ error: "config.project.name manquant" });

    const slug = slugify(cfg.project.name);
    const id = `${slug}_${nowStamp()}`;
    const rootDir = path.join(__dirname, "data", id);
    const livrablesDir = path.join(rootDir, "livrables");
    const metaPath = path.join(rootDir, "meta.json");

    await ensureDir(rootDir);
    await ensureDir(livrablesDir);

    const meta = {
      id,
      createdAt: new Date().toISOString(),
      status: "idle",
      currentSprint: 0,
      model: req.body?.model || "gpt-4o",
    };
    await writeJSON(metaPath, meta);

    // Écrire config brute
    await writeJSON(path.join(rootDir, "config.json"), cfg);

    await ensureGitRepo(rootDir);
    await commitIfChanged(rootDir, "Ajout configuration initiale");

    projects.set(id, {
      id,
      rootDir,
      livrablesDir,
      metaPath,
      status: "idle",
      config: cfg,
      currentSprint: 0,
      maxTours: 12,
      model: meta.model,
    });

    res.json({ projectId: id });
  } catch (e) {
    res.status(500).json({ error: String(e) });
  }
});

// Démarrer un sprint: crée fichier sprint-N.json et lance l’orchestrateur
app.post("/api/sprint/start", async (req, res) => {
  const { projectId } = req.body || {};
  if (!projectId || !projects.has(projectId)) return res.status(404).json({ error: "Projet introuvable" });
  const p = projects.get(projectId);

  try {
    // Charger meta depuis disque (source de vérité)
    const meta = await readJSON(p.metaPath);
    const sprintNum = meta.currentSprint + 1;
    const order = computeOrder(p.config);

    const sprintPath = path.join(p.rootDir, `sprint-${sprintNum}.json`);
    const sprint = {
      meta: {
        number: sprintNum,
        startedAt: new Date().toISOString(),
        status: "running",
      },
      order,
      messages: [], // {roleId, content, at}
    };
    await writeJSON(sprintPath, sprint);

    // MAJ meta
    meta.status = "running";
    meta.currentSprint = sprintNum;
    await writeJSON(p.metaPath, meta);

    // MAJ mémoire
    p.status = "running";
    p.currentSprint = sprintNum;

    // Lancer l’orchestration (async "fire-and-forget", le front pollera l’état)
    orchestrateSprint(p, sprintPath).catch(async (err) => {
      // En cas d’erreur, marquer le sprint en échec
      try {
        const s = await readJSON(sprintPath);
        s.meta.status = "error";
        s.meta.error = String(err);
        s.meta.endedAt = new Date().toISOString();
        await writeJSON(sprintPath, s);
        const metaNow = await readJSON(p.metaPath);
        metaNow.status = "idle";
        await writeJSON(p.metaPath, metaNow);
        p.status = "idle";
      } catch {}
      console.error("orchestrateSprint error:", err);
    });

    res.json({ ok: true, sprint: sprintNum, order });
  } catch (e) {
    res.status(500).json({ error: String(e) });
  }
});

async function orchestrateSprint(p, sprintPath) {
  const config = p.config;
  const system = buildSystemPrompt(config);
  const order = (await readJSON(sprintPath)).order;
  const maxTours = p.maxTours;

  // Premier message : CHEF initie si présent, sinon premier de l’ordre
  let conversation = [];
  let tour = 0;
  let fin = false;

  while (!fin && tour < maxTours) {
    for (const roleId of order) {
      // Construire messages
      const userPrompt = buildRoleUserPrompt(roleId, config, conversation);
      const messages = [...system, ...conversation.map(m => ({
        role: "user", content: `${m.roleId}: ${m.content}`,
      })), { role: "user", content: userPrompt }];

      const content = await openAIChat(messages, p.model);
      const msg = { roleId, content, at: new Date().toISOString() };
      conversation.push(msg);

      // Persister incrémentalement
      const s = await readJSON(sprintPath);
      s.messages = conversation;
      await writeJSON(sprintPath, s);

      // Fin de sprint ?
      if (/\[FIN_SPRINT\]/i.test(content)) {
        fin = true;
        break;
      }
    }
    tour++;
  }

  // Clôture sprint
  const sFinal = await readJSON(sprintPath);
  sFinal.meta.status = "finished";
  sFinal.meta.endedAt = new Date().toISOString();
  await writeJSON(sprintPath, sFinal);

  // MAJ meta projet
  const meta = await readJSON(p.metaPath);
  meta.status = "idle";
  await writeJSON(p.metaPath, meta);
  p.status = "idle";

  // Commit livrables si présents
  await commitIfChanged(p.rootDir, `Fin sprint ${sFinal.meta.number}`);
}

// État projet (meta + dernier sprint)
app.get("/api/project/:id/state", async (req, res) => {
  const { id } = req.params;
  if (!projects.has(id)) return res.status(404).json({ error: "Projet introuvable" });
  const p = projects.get(id);

  try {
    const meta = await readJSON(p.metaPath);
    const sprintNum = meta.currentSprint;
    let sprint = null;
    if (sprintNum > 0) {
      const sprintPath = path.join(p.rootDir, `sprint-${sprintNum}.json`);
      try { sprint = await readJSON(sprintPath); } catch {}
    }
    res.json({ meta, sprint });
  } catch (e) {
    res.status(500).json({ error: String(e) });
  }
});

// Sprint suivant (repart de l’état actuel)
app.post("/api/sprint/next", async (req, res) => {
  const { projectId } = req.body || {};
  if (!projectId || !projects.has(projectId)) return res.status(404).json({ error: "Projet introuvable" });
  // On réutilise /api/sprint/start
  req.body = { projectId };
  return app._router.handle(req, res, { method: "POST", url: "/api/sprint/start" });
});

// Pause / Fin projet
app.post("/api/project/pause", async (req, res) => {
  const { projectId } = req.body || {};
  if (!projectId || !projects.has(projectId)) return res.status(404).json({ error: "Projet introuvable" });
  const p = projects.get(projectId);
  const meta = await readJSON(p.metaPath);
  meta.status = "paused";
  await writeJSON(p.metaPath, meta);
  p.status = "paused";
  res.json({ ok: true });
});

app.post("/api/project/end", async (req, res) => {
  const { projectId } = req.body || {};
  if (!projectId || !projects.has(projectId)) return res.status(404).json({ error: "Projet introuvable" });
  const p = projects.get(projectId);
  const meta = await readJSON(p.metaPath);
  meta.status = "ended";
  await writeJSON(p.metaPath, meta);
  p.status = "ended";
  res.json({ ok: true });
});

// Sert index.html
app.get("/", (req, res) => {
  res.sendFile(path.join(__dirname, "index.html"));
});

// Lancement serveur
const PORT = process.env.PORT || 3001;
app.listen(PORT, () =>
  console.log(`Serveur prêt sur http://localhost:${PORT}`)
);

# ./Web/AI_team/server.js

# ./Web/cours_git_avance/assets/cours.json
{
  "cours": {
    "Synchronisation": [
      {
        "commande": "Git fetch",
        "description": "Récupère les mises à jour du dépôt distant sans les fusionner. Permet de voir les nouveaux commits avant intégration."
      },
      {
        "commande": "Git pull --rebase",
        "description": "Récupère les changements distants et réapplique vos commits au-dessus pour un historique linéaire. Évite les merges inutiles."
      },
      {
        "commande": "Git remote -v",
        "description": "Liste les dépôts distants configurés avec leurs URLs. Sert à vérifier vos remotes."
      }
    ],
    "Historique et inspection": [
      {
        "commande": "Git log --oneline --graph --decorate --all",
        "description": "Affiche un historique visuel compact de toutes les branches. Utile pour comprendre l’état global du projet."
      },
      {
        "commande": "Git blame <fichier>",
        "description": "Montre qui a modifié chaque ligne d’un fichier. Permet d’identifier l’origine d’un changement."
      },
      {
        "commande": "Git show <commit>",
        "description": "Affiche le détail d’un commit et ses modifications. Sert à inspecter un commit précis."
      }
    ],
    "Branches et corrections": [
      {
        "commande": "Git rebase",
        "description": "Réécrit l’historique d’une branche pour appliquer vos commits après une autre base. Maintient un historique propre."
      },
      {
        "commande": "Git cherry-pick <commit>",
        "description": "Applique un commit spécifique d’une autre branche. Pratique pour récupérer un correctif isolé."
      },
      {
        "commande": "Git revert <commit>",
        "description": "Crée un nouveau commit qui annule un commit précédent. Plus sûr qu’un reset sur une branche partagée."
      },
      {
        "commande": "Git reset --hard <commit>",
        "description": "Replace la branche sur un commit donné et supprime les changements locaux. À utiliser seulement en local."
      }
    ],
    "Sauvegarde temporaire": [
      {
        "commande": "Git stash / git stash pop",
        "description": "Sauvegarde temporairement vos modifications non validées pour changer de branche rapidement. Restaure ensuite avec pop."
      }
    ],
    "Versions et balises": [
      {
        "commande": "Git tag <nom>",
        "description": "Marque un point précis de l’historique pour signaler une version stable ou une release."
      }
    ]
  }
}

# ./Web/cours_git_avance/assets/cours.json

# ./Web/cours_git_avance/index.html
<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Jeu Git Avancé</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			margin: 0;
			background: #f8f9fa;
		}

		/* Layout poussé à droite quand le menu sort */
		.layout {
			display: flex;
			transition: margin-left .3s;
		}

		.layout.shifted {
			margin-left: 280px;
		}

		/* Menu latéral */
		#side-menu {
			position: fixed;
			top: 0;
			left: -280px;
			width: 280px;
			height: 100%;
			background: #343a40;
			color: #fff;
			overflow-y: auto;
			transition: left .3s;
			padding: 20px;
			z-index: 1000;
		}

		#side-menu.show {
			left: 0;
		}

		.menu-btn {
			position: fixed;
			top: 10px;
			left: 10px;
			z-index: 1100;
		}

		/* État grisé du bouton/menu pour niveaux > 3 */
		.menu-btn.disabled {
			opacity: .5;
			pointer-events: none;
		}

		#side-menu.disabled {
			opacity: .5;
			pointer-events: none;
		}

		/* Marge pour éviter recouvrement par le bouton */
		.cours {
			margin-top: 48px;
		}

		/* Zone cours centrale (affichée aux niveaux 1–3 via bouton) */
		#cours-container {
			max-height: 300px;
			overflow-y: auto;
			border: 1px solid #ddd;
			padding: 10px;
		}

		.hidden {
			display: none;
		}

		.level-btn {
			margin: 5px;
		}

		/* Items du cours (menu) */
		.menu-cmd {
			margin-bottom: 12px;
		}

		.menu-cmd-title {
			font-weight: 600;
		}

		.menu-cmd-desc {
			font-size: .9rem;
			color: #cfd3d7;
		}

		/* Cartes questions */
		.q-card {
			border: 1px solid #dee2e6;
			border-radius: .5rem;
			padding: 1rem;
			background: #fff;
			transition: border-color .2s, box-shadow .2s;
		}

		.q-weight {
			font-size: .85rem;
			color: #6c757d;
		}

		/* États après correction */
		.q-correct {
			border-color: #198754;
			box-shadow: 0 0 0 .15rem rgba(25, 135, 84, .15);
		}

		.q-wrong {
			border-color: #dc3545;
			box-shadow: 0 0 0 .15rem rgba(220, 53, 69, .15);
		}

		/* Boutons de choix (QCM) : mise en évidence */
		.btn-choice.active {
			outline: 2px solid #0d6efd;
		}

		.btn-choice.correct {
			background: #198754;
			color: #fff;
			border-color: #198754;
		}

		.btn-choice.wrong {
			background: #dc3545;
			color: #fff;
			border-color: #dc3545;
		}

		/* Inputs libres : marquage après correction */
		.input-correct {
			border-color: #198754 !important;
			box-shadow: 0 0 0 .2rem rgba(25, 135, 84, .25) !important;
		}

		.input-wrong {
			border-color: #dc3545 !important;
			box-shadow: 0 0 0 .2rem rgba(220, 53, 69, .25) !important;
		}

		/* Zone de navigation questions */
		.nav-questions {
			display: flex;
			justify-content: center;
			gap: .5rem;
			flex-wrap: wrap;
		}
	</style>
</head>

<body>

	<button class="btn btn-primary menu-btn" id="menu-toggle">☰</button>

	<aside id="side-menu" aria-label="Menu latéral cours">
		<h5 class="mb-3 cours">Cours Git</h5>
		<div id="menu-cours"></div>
	</aside>

	<main class="layout" id="layout">
		<div class="container py-4">
			<h1 class="text-center mb-4">Jeu Git Avancé</h1>

			<div class="d-flex justify-content-center flex-wrap gap-2 mb-3">
				<button class="btn btn-danger" id="reset-btn">Réinitialiser le jeu</button>
				<button class="btn btn-outline-secondary d-none" id="btn-cours">Afficher/Masquer le cours</button>
			</div>

			<div id="level-selection" class="mb-4 text-center"></div>

			<div id="cours-container" class="hidden mb-4"></div>

			<div id="quiz-container" class="row gy-3"></div>

			<div class="mt-3 text-center nav-questions">
				<button class="btn btn-outline-secondary d-none" id="btn-prev">Précédent</button>
				<button class="btn btn-outline-primary d-none" id="btn-next">Suivant</button>
				<button class="btn btn-primary d-none" id="btn-validate-chunk">Valider</button>
				<button class="btn btn-primary d-none" id="btn-validate-level">Valider</button>
				<button class="btn btn-outline-secondary d-none" id="btn-reset-niv">Réinitialiser les réponses</button>
			</div>

			<div id="resultat" class="mt-3 text-center fw-bold"></div>
		</div>
	</main>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		// ----------- Constantes & Données -----------
		const STORAGE_KEY = "cours_git_avance_1";

		// Questions concrètes (1 à 3 par commande). Même set pour tous les niveaux.
		const QUESTIONS = [
			// git fetch (2)
			{
				id: "fetch_1", weight: 1, label: "Vous voulez voir les nouveaux commits distants sans modifier votre branche locale.", correct: "git fetch",
				options: ["git fetch", "git pull", "git merge origin/main", "Je ne sais pas"]
			},
			{
				id: "fetch_2", weight: 2, label: "Vous suspectez une nouvelle branche créée à distance et voulez la récupérer localement sans fusionner.", correct: "git fetch --all",
				options: ["git fetch --all", "git clone --mirror", "git pull --rebase", "Je ne sais pas"]
			},

			// git pull --rebase (2)
			{
				id: "pullrb_1", weight: 2, label: "Vous avez des commits locaux et voulez intégrer l’upstream en replaçant vos commits par-dessus.", correct: "git pull --rebase",
				options: ["git pull --rebase", "git pull", "git rebase --continue", "Je ne sais pas"]
			},
			{
				id: "pullrb_2", weight: 2, label: "Sur votre feature branch, vous souhaitez éviter un commit de merge superflu en récupérant l’upstream.", correct: "git pull --rebase",
				options: ["git pull --rebase", "git merge origin/main", "git fetch && git merge", "Je ne sais pas"]
			},

			// git rebase (3)
			{
				id: "rebase_1", weight: 2, label: "Vous devez repositionner vos commits de feature sur la dernière version de main.", correct: "git rebase origin/main",
				options: ["git rebase origin/main", "git merge origin/main", "git reset --hard origin/main", "Je ne sais pas"]
			},
			{
				id: "rebase_2", weight: 2, label: "Après résolution de conflit lors d’un rebase, vous devez continuer la procédure.", correct: "git rebase --continue",
				options: ["git rebase --continue", "git rebase --abort", "git commit --amend", "Je ne sais pas"]
			},
			{
				id: "rebase_3", weight: 1, label: "Vous voulez annuler le rebase en cours et revenir à l’état précédent.", correct: "git rebase --abort",
				options: ["git rebase --abort", "git reset --hard", "git revert HEAD", "Je ne sais pas"]
			},

			// git cherry-pick (2)
			{
				id: "cherry_1", weight: 3, label: "Vous devez appliquer le commit abc123 de main sur votre branche hotfix.", correct: "git cherry-pick abc123",
				options: ["git cherry-pick abc123", "git merge abc123", "git apply abc123.patch", "Je ne sais pas"]
			},
			{
				id: "cherry_2", weight: 2, label: "Vous souhaitez cherry-pick plusieurs commits consécutifs de a1 à a5.", correct: "git cherry-pick a1..a5",
				options: ["git cherry-pick a1..a5", "git cherry-pick a1^..a5", "git cherry-pick a1...a5", "Je ne sais pas"]
			},

			// git stash / git stash pop (3)
			{
				id: "stash_1", weight: 1, label: "Vous devez changer de branche sans valider vos modifications locales.", correct: "git stash",
				options: ["git stash", "git reset --soft", "git commit -a", "Je ne sais pas"]
			},
			{
				id: "stash_2", weight: 2, label: "Après un changement de branche, vous voulez réappliquer vos modifications sauvegardées et les supprimer du stash.", correct: "git stash pop",
				options: ["git stash pop", "git stash apply", "git cherry-pick stash@{0}", "Je ne sais pas"]
			},
			{
				id: "stash_3", weight: 2, label: "Vous voulez appliquer vos modifications sauvegardées mais les conserver dans le stash.", correct: "git stash apply",
				options: ["git stash apply", "git stash pop", "git stash keep", "Je ne sais pas"]
			},

			// git log --oneline (2)
			{
				id: "log_1", weight: 1, label: "Vous souhaitez afficher un historique compact de vos commits sur une ligne chacun.", correct: "git log --oneline",
				options: ["git log --oneline", "git log", "git show", "Je ne sais pas"]
			},
			{
				id: "log_2", weight: 1, label: "Vous voulez un historique compact des 5 derniers commits.", correct: "git log --oneline -5",
				options: ["git log --oneline -5", "git log -5", "git reflog -5", "Je ne sais pas"]
			},

			// git show (1)
			{
				id: "show_1", weight: 1, label: "Vous désirez voir le diff et les métadonnées du commit abc123.", correct: "git show abc123",
				options: ["git show abc123", "git log abc123", "git diff abc123", "Je ne sais pas"]
			},

			// git revert (2)
			{
				id: "revert_1", weight: 2, label: "Sur une branche partagée, vous devez annuler le commit abc123 sans réécrire l’historique.", correct: "git revert abc123",
				options: ["git revert abc123", "git reset --hard abc123^", "git rebase -i abc123~3", "Je ne sais pas"]
			},
			{
				id: "revert_2", weight: 2, label: "Vous voulez annuler plusieurs commits récents proprement en un seul revert.", correct: "git revert HEAD~3..HEAD",
				options: ["git revert HEAD~3..HEAD", "git reset --hard HEAD~3", "git revert --no-commit HEAD~3..HEAD && git commit", "Je ne sais pas"]
			},

			// git reset --hard (2)
			{
				id: "reset_1", weight: 3, label: "Localement, vous voulez jeter toutes vos modifs et remettre l’état au commit abc123.", correct: "git reset --hard abc123",
				options: ["git reset --hard abc123", "git revert abc123", "git clean -fd", "Je ne sais pas"]
			},
			{
				id: "reset_2", weight: 2, label: "Vous voulez vous aligner exactement sur origin/main localement.", correct: "git reset --hard origin/main",
				options: ["git reset --hard origin/main", "git checkout origin/main", "git pull --rebase origin main", "Je ne sais pas"]
			},

			// git tag (2)
			{
				id: "tag_1", weight: 1, label: "Vous créez une balise légère v1.0 sur le commit actuel.", correct: "git tag v1.0",
				options: ["git tag v1.0", "git tag -a v1.0 -m \"v1.0\"", "git annotate v1.0", "Je ne sais pas"]
			},
			{
				id: "tag_2", weight: 2, label: "Vous créez une balise annotée v1.1 avec message.", correct: "git tag -a v1.1 -m \"v1.1\"",
				options: ["git tag -a v1.1 -m \"v1.1\"", "git tag v1.1 -m \"v1.1\"", "git tag --message v1.1", "Je ne sais pas"]
			},

			// git remote -v (1)
			{
				id: "remote_1", weight: 1, label: "Vous voulez lister les remotes avec leurs URLs.", correct: "git remote -v",
				options: ["git remote -v", "git remote", "git config --get remote.origin.url", "Je ne sais pas"]
			},

			// git blame (1)
			{
				id: "blame_1", weight: 2, label: "Vous souhaitez savoir qui a modifié chaque ligne du fichier app.js.", correct: "git blame app.js",
				options: ["git blame app.js", "git log -p app.js", "git show -- app.js", "Je ne sais pas"]
			}
		];

		// Barèmes niveaux 1–5
		const posBase = {1: 1, 2: 2, 3: 3, 4: 5, 5: 8};
		const negBase = {1: 0, 2: 1, 3: 2, 4: 3, 5: 5};

		// ----------- État -----------
		let progression = {unlocked: 0, lastTrainingIndex: 0};
		let coursData = null;
		let niveauCourant = 0;

		// Réponses et marquage
		// answers[qid] = { value: string, validated: boolean, correct: boolean|null }
		const answers = {};

		// Navigation
		let currentIndex = 0;       // pour niveaux 1–5 (question par question)
		let currentGroupStart = 0;  // pour niveaux 6–10 (groupes)
		let chunkSize = 0;          // taille du groupe courant (1, 3, 6, ou all)
		let niveau0Parcouru = false;

		// ----------- Persistance -----------
		function chargerProgression() {
			const saved = localStorage.getItem(STORAGE_KEY);
			if (saved) {
				try {
					progression = JSON.parse(saved);
				} catch (e) {
					progression = {unlocked: 0, lastTrainingIndex: 0};
				}
			} else {
				progression = {unlocked: 0, lastTrainingIndex: 0};
			}

			// Valeurs par défaut si clé absente (compat anciennes sauvegardes)
			if (typeof progression.unlocked !== 'number') progression.unlocked = 0;
			if (typeof progression.lastTrainingIndex !== 'number') progression.lastTrainingIndex = 0;
		}

		function sauvegarderProgression() {
			localStorage.setItem(STORAGE_KEY, JSON.stringify(progression));
		}

		function resetProgression() {
			// Première confirmation
			if (!window.confirm("Vous allez réinitialiser votre progression. Êtes-vous sûr ?")) return;

			// Seconde confirmation
			if (!window.confirm("Êtes-vous vraiment sûr de vouloir tout réinitialiser ?")) return;

			// Exécute le reset une seule fois
			progression = {unlocked: 0};
			sauvegarderProgression();
			clearUI();
			renderLevels();
			lancerNiveau(0);
		}

		// ----------- Cours (JSON externe) -----------
		async function chargerCours() {
			const response = await fetch('./assets/cours.json');
			if (!response.ok) throw new Error('Chargement JSON impossible');
			coursData = await response.json();
			remplirMenuCours();
		}
		function remplirMenuCours() {
			const menu = document.getElementById('menu-cours');
			menu.innerHTML = '';
			for (const [categorie, commandes] of Object.entries(coursData.cours)) {
				const cat = document.createElement('div');
				cat.className = 'mb-2';
				cat.innerHTML = `<div class="text-uppercase text-white-50 small mb-1">${categorie}</div>`;
				commandes.forEach(cmd => {
					const wrap = document.createElement('div');
					wrap.className = 'menu-cmd';
					wrap.innerHTML = `<div class="menu-cmd-title">${cmd.commande}</div><div class="menu-cmd-desc">${cmd.description}</div>`;
					cat.appendChild(wrap);
				});
				menu.appendChild(cat);
			}
		}
		function afficherCoursCompletCentre() {
			if (!coursData) return;
			const box = document.getElementById('cours-container');
			box.innerHTML = '';
			for (const [categorie, commandes] of Object.entries(coursData.cours)) {
				const h = document.createElement('h5'); h.textContent = categorie; box.appendChild(h);
				commandes.forEach(cmd => {
					const d = document.createElement('div');
					d.innerHTML = `<strong>${cmd.commande}</strong>: ${cmd.description}`;
					box.appendChild(d);
				});
			}
			box.classList.remove('hidden');
		}

		// ----------- UI Niveaux -----------
		function renderLevels() {
			const container = document.getElementById('level-selection');
			container.innerHTML = '';
			for (let i = 0; i <= 11; i++) {
				const btn = document.createElement('button');
				btn.textContent = `Niveau ${i}`;
				btn.className = 'btn btn-secondary level-btn';
				if (i === 1 && !niveau0Parcouru) {
					btn.disabled = true;
				} else {
					btn.disabled = i > progression.unlocked;
				}
				btn.onclick = () => lancerNiveau(i);
				container.appendChild(btn);
			}
		}

		function clearUI() {
			document.getElementById('cours-container').classList.add('hidden');
			document.getElementById('cours-container').innerHTML = '';
			document.getElementById('quiz-container').innerHTML = '';
			document.getElementById('resultat').textContent = '';
			['btn-prev', 'btn-next', 'btn-validate-chunk', 'btn-validate-level', 'btn-reset-niv', 'btn-cours']
				.forEach(id => {
					const el = document.getElementById(id);
					if (el) el.classList.add('d-none');
				});
			// reset marquages visuels
			document.querySelectorAll('.q-card').forEach(el => el.classList.remove('q-correct', 'q-wrong'));
			document.querySelectorAll('.btn-choice').forEach(b => b.classList.remove('correct', 'wrong', 'active'));
			document.querySelectorAll('input.form-control').forEach(i => i.classList.remove('input-correct', 'input-wrong'));
		}

		// Mélange simple de tableau (Fisher-Yates)
		function shuffleArray(array) {
			const arr = array.slice();
			for (let i = arr.length - 1; i > 0; i--) {
				const j = Math.floor(Math.random() * (i + 1));
				[arr[i], arr[j]] = [arr[j], arr[i]];
			}
			return arr;
		}

		function lancerNiveau(niv) {
			niveauCourant = niv;
			clearUI();

			// Menu burger actif pour 0..3, grisé sinon
			const menuBtn = document.getElementById('menu-toggle');
			const sideMenu = document.getElementById('side-menu');
			if (niv <= 3) {
				menuBtn.classList.remove('disabled'); sideMenu.classList.remove('disabled');
				document.getElementById('btn-cours').classList.remove('d-none');
				document.getElementById('btn-cours').onclick = () => {
					const box = document.getElementById('cours-container');
					if (box.classList.contains('hidden')) afficherCoursCompletCentre();
					else box.classList.add('hidden');
				};
			} else {
				menuBtn.classList.add('disabled'); sideMenu.classList.add('disabled');
				sideMenu.classList.remove('show'); document.getElementById('layout').classList.remove('shifted');
			}

			if (niv === 0) {
				currentIndex = 0;
				chunkSize = 1;
				niveau0Parcouru = false;
				renderSingleQCMTraining(currentIndex);
				setupNavSingleTraining();
			}

			// Init réponses (ne pas écraser les anciennes si rejoué)
			QUESTIONS.forEach(q => {if (!answers[q.id]) answers[q.id] = {value: '', validated: false, correct: null};});

			// Config navigation selon niveau
			if (niv >= 1 && niv <= 3) { // QCM, 1 question à la fois, bouton Valider par question
				currentIndex = 0;
				chunkSize = 1;
				renderSingleQCM(currentIndex);
				setupNavSingle({gated: true, showValidatePerQuestion: true, validateGroupEvery: null});
			} else if (niv >= 4 && niv <= 5) { // QCM, 1 question à la fois, Valider tous les 3
				currentIndex = 0;
				chunkSize = 1;
				renderSingleQCM(currentIndex);
				setupNavSingle({gated: true, showValidatePerQuestion: false, validateGroupEvery: 3});
			} else if (niv >= 6 && niv <= 7) { // saisie libre, groupes de 3
				currentGroupStart = 0;
				chunkSize = 3;
				renderGroupInputs(currentGroupStart, chunkSize);
				setupNavGroups({groupSize: 3});
			} else if (niv >= 8 && niv <= 10) { // saisie libre, groupes de 6
				currentGroupStart = 0;
				chunkSize = 6;
				renderGroupInputs(currentGroupStart, chunkSize);
				setupNavGroups({groupSize: 6});
			} else if (niv === 11) { // tout affiché, valider une fois
				renderAllInputs();
				const btnLevel = document.getElementById('btn-validate-level');
				btnLevel.classList.remove('d-none');
				btnLevel.onclick = () => evaluerNiveau(11);
				document.getElementById('btn-reset-niv').classList.remove('d-none');
				document.getElementById('btn-reset-niv').onclick = () => relancerNiveau(niv);
			}
		}

		function relancerNiveau(niv) {
			// Efface les réponses visibles uniquement
			if (niv <= 5) {
				// remets l'étape au début
				currentIndex = 0;
				QUESTIONS.forEach(q => {answers[q.id] = {value: '', validated: false, correct: null};});
				if (niv <= 3) {renderSingleQCM(currentIndex); setupNavSingle({gated: true, showValidatePerQuestion: true, validateGroupEvery: null});}
				else {renderSingleQCM(currentIndex); setupNavSingle({gated: true, showValidatePerQuestion: false, validateGroupEvery: 3});}
			} else if (niv <= 10) {
				currentGroupStart = 0;
				QUESTIONS.forEach(q => {answers[q.id] = {value: '', validated: false, correct: null};});
				const size = (niv <= 7) ? 3 : 6;
				renderGroupInputs(currentGroupStart, size);
				setupNavGroups({groupSize: size});
			} else {
				QUESTIONS.forEach(q => {answers[q.id] = {value: '', validated: false, correct: null};});
				renderAllInputs();
			}
			document.getElementById('resultat').textContent = '';
		}

		// ----------- Rendus (QCM / Inputs) -----------
		function renderSingleQCM(index) {
			const qc = document.getElementById('quiz-container'); qc.innerHTML = '';
			const q = QUESTIONS[index];
			const col = document.createElement('div'); col.className = 'col-12';
			const card = document.createElement('div'); card.className = 'q-card'; card.dataset.qid = q.id;
			const title = document.createElement('div');
			title.innerHTML = `<strong>Q${index + 1}/${QUESTIONS.length}.</strong> ${q.label} <span class="q-weight">(poids ${q.weight})</span>`;
			const group = document.createElement('div'); group.className = 'mt-2 d-flex flex-wrap gap-2';

			shuffleArray(q.options).forEach(opt => {
				const btn = document.createElement('button');
				btn.type = 'button';
				btn.className = 'btn btn-outline-primary btn-sm btn-choice';
				btn.dataset.qid = q.id; btn.dataset.value = opt;
				btn.textContent = opt;
				if (answers[q.id].value && answers[q.id].value === opt) btn.classList.add('active');
				btn.onclick = (e) => {
					[...group.querySelectorAll('button')].forEach(b => b.classList.remove('active'));
					e.currentTarget.classList.add('active');
					answers[q.id].value = opt;
					// gating: activer "Suivant" si 0..5
					if (niveauCourant <= 5) updateNextEnabledSingle();
				};
				group.appendChild(btn);
			});

			card.appendChild(title); card.appendChild(group); col.appendChild(card); qc.appendChild(col);

			// Montrer boutons
			document.getElementById('btn-reset-niv').classList.remove('d-none');
			document.getElementById('btn-reset-niv').onclick = () => relancerNiveau(niveauCourant);
			document.getElementById('btn-validate-level').classList.remove('d-none');
			document.getElementById('btn-validate-level').onclick = () => evaluerNiveau(niveauCourant);
		}

		function renderSingleQCMTraining(index) {
			const qc = document.getElementById('quiz-container');
			qc.innerHTML = '';
			const q = QUESTIONS[index];
			const col = document.createElement('div'); col.className = 'col-12';
			const card = document.createElement('div'); card.className = 'q-card'; card.dataset.qid = q.id;

			const title = document.createElement('div');
			title.innerHTML = `<strong>Q${index + 1}/${QUESTIONS.length}.</strong> ${q.label} <span class="q-weight">(poids ${q.weight})</span>`;
			const group = document.createElement('div'); group.className = 'mt-2 d-flex flex-wrap gap-2';

			// Réponses affichées et colorées directement, sans interaction
			shuffleArray(q.options).forEach(opt => {
				const btn = document.createElement('button');
				btn.type = 'button';
				btn.className = 'btn btn-sm btn-choice';
				btn.textContent = opt;
				btn.disabled = true;
				if (norm(opt) === norm(q.correct)) {
					btn.classList.add('correct');
				} else {
					btn.classList.add('wrong');
				}
				group.appendChild(btn);
			});

			card.appendChild(title);
			card.appendChild(group);
			col.appendChild(card);
			qc.appendChild(col);

			// Bouton Valider : passe à la question suivante ou au niveau 1 si dernière
			const btnValidate = document.getElementById('btn-validate-level');
			btnValidate.classList.remove('d-none');

			// Si on est déjà allé STRICTEMENT plus loin, pas de délai
			if (progression.lastTrainingIndex > index) {
				btnValidate.disabled = false;
			} else {
				btnValidate.disabled = true;
				setTimeout(() => {btnValidate.disabled = false;}, 1000);
			}

			btnValidate.onclick = () => {
				// Met à jour le plus loin atteint
				progression.lastTrainingIndex = Math.max(progression.lastTrainingIndex, index + 1);
				sauvegarderProgression();

				if (index < QUESTIONS.length - 1) {
					currentIndex++;
					renderSingleQCMTraining(currentIndex);
					setupNavSingleTraining();
				} else {
					progression.unlocked = Math.max(progression.unlocked, 1);
					sauvegarderProgression();
					renderLevels();
					lancerNiveau(1);
				}
			};
		}

		function renderGroupInputs(start, size) {
			const qc = document.getElementById('quiz-container'); qc.innerHTML = '';
			const end = Math.min(start + size, QUESTIONS.length);
			for (let i = start; i < end; i++) {
				const q = QUESTIONS[i];
				const col = document.createElement('div'); col.className = 'col-12';
				const card = document.createElement('div'); card.className = 'q-card'; card.dataset.qid = q.id;
				const title = document.createElement('div');
				title.innerHTML = `<strong>Q${i + 1}/${QUESTIONS.length}.</strong> ${q.label} <span class="q-weight">(poids ${q.weight})</span>`;
				const input = document.createElement('input');
				input.className = 'form-control mt-2';
				input.placeholder = 'Tapez la commande exacte (ou "je ne sais pas")';
				input.dataset.qid = q.id;
				input.value = answers[q.id].value || '';
				input.oninput = (e) => {answers[q.id].value = e.target.value;};

				card.appendChild(title); card.appendChild(input); col.appendChild(card); qc.appendChild(col);
			}

			// Montrer boutons
			document.getElementById('btn-reset-niv').classList.remove('d-none');
			document.getElementById('btn-reset-niv').onclick = () => relancerNiveau(niveauCourant);
			document.getElementById('btn-validate-level').classList.remove('d-none');
			document.getElementById('btn-validate-level').onclick = () => evaluerNiveau(niveauCourant);
		}

		function renderAllInputs() {
			const qc = document.getElementById('quiz-container'); qc.innerHTML = '';
			for (let i = 0; i < QUESTIONS.length; i++) {
				const q = QUESTIONS[i];
				const col = document.createElement('div'); col.className = 'col-12';
				const card = document.createElement('div'); card.className = 'q-card'; card.dataset.qid = q.id;
				const title = document.createElement('div');
				title.innerHTML = `<strong>Q${i + 1}/${QUESTIONS.length}.</strong> ${q.label} <span class="q-weight">(poids ${q.weight})</span>`;
				const input = document.createElement('input');
				input.className = 'form-control mt-2';
				input.placeholder = 'Tapez la commande exacte (ou "je ne sais pas")';
				input.dataset.qid = q.id;
				input.value = answers[q.id].value || '';
				input.oninput = (e) => {answers[q.id].value = e.target.value;};
				card.appendChild(title); card.appendChild(input); col.appendChild(card); qc.appendChild(col);
			}
			document.getElementById('btn-reset-niv').classList.remove('d-none');
			document.getElementById('btn-reset-niv').onclick = () => relancerNiveau(niveauCourant);
		}

		// ----------- Navigation : Single-question (niv 1–5) -----------
		function setupNavSingle({gated, showValidatePerQuestion, validateGroupEvery}) {
			const btnPrev = document.getElementById('btn-prev');
			const btnNext = document.getElementById('btn-next');
			const btnValidateChunk = document.getElementById('btn-validate-chunk');
			btnPrev.classList.remove('d-none');
			btnNext.classList.remove('d-none');

			btnPrev.onclick = () => {
				if (currentIndex > 0) {
					currentIndex--;
					renderSingleQCM(currentIndex);
					setupNavSingle({gated, showValidatePerQuestion, validateGroupEvery});
				}
			};

			btnNext.onclick = () => {
				// gating 0..5 : question suivante seulement si toutes les précédentes remplies
				if (gated && !allPreviousAnswered(currentIndex)) return;
				if (currentIndex < QUESTIONS.length - 1) {
					currentIndex++;
					renderSingleQCM(currentIndex);
					setupNavSingle({gated, showValidatePerQuestion, validateGroupEvery});
				}
			};

			// Valider par question (niv 1–3)
			if (showValidatePerQuestion) {
				btnValidateChunk.textContent = "Valider";
				btnValidateChunk.classList.remove('d-none');
				btnValidateChunk.onclick = () => validateQCMQuestion(currentIndex, {colorize: true});
			} else if (validateGroupEvery) {
				// Valider tous les 3 (niv 4–5) ou à la fin si restant <3
				const from = Math.floor(currentIndex / validateGroupEvery) * validateGroupEvery;
				const to = Math.min(from + validateGroupEvery - 1, QUESTIONS.length - 1);
				btnValidateChunk.textContent = `Valider (Q${from + 1} à Q${to + 1})`;
				btnValidateChunk.classList.remove('d-none');
				btnValidateChunk.onclick = () => validateQCMRange(from, to, {colorize: true});
			}

			// Activer/désactiver Next si gated 0..5
			updateNextEnabledSingle();

			// Toujours disponible : Valider le niveau (évalue tout)
			const btnLevel = document.getElementById('btn-validate-level');
			btnLevel.classList.remove('d-none');
			btnLevel.onclick = () => evaluerNiveau(niveauCourant);

			document.getElementById('btn-reset-niv').classList.remove('d-none');
			document.getElementById('btn-reset-niv').onclick = () => relancerNiveau(niveauCourant);
		}

		function setupNavSingleTraining() {
			const btnPrev = document.getElementById('btn-prev');
			btnPrev.classList.remove('d-none');
			btnPrev.disabled = (currentIndex === 0); // désactivé au début du niveau 0
			btnPrev.onclick = () => {
				if (currentIndex > 0) {
					currentIndex--;
					renderSingleQCMTraining(currentIndex);
					setupNavSingleTraining();
				}
			};

			// Pas de bouton Suivant distinct au niveau 0, on masque
			document.getElementById('btn-next').classList.add('d-none');

			// Masquer les autres boutons inutiles
			document.getElementById('btn-reset-niv').classList.add('d-none');
		}


		function allPreviousAnswered(idx) {
			for (let i = 0; i <= idx; i++) {
				const q = QUESTIONS[i];
				if (!answers[q.id].value) return false;
			}
			return true;
		}

		function updateNextEnabledSingle() {
			const btnNext = document.getElementById('btn-next');
			if (niveauCourant <= 5) {
				btnNext.disabled = !allPreviousAnswered(currentIndex);
			} else {
				btnNext.disabled = false;
			}
			// Prev disabled ?
			const btnPrev = document.getElementById('btn-prev');
			btnPrev.disabled = (currentIndex === 0);
		}

		function validateQCMQuestion(idx, {colorize}) {
			const q = QUESTIONS[idx];
			const card = document.querySelector(`.q-card[data-qid="${q.id}"]`);
			if (!card) return;
			const chosen = card.querySelector('.btn-choice.active');
			const correctBtn = Array.from(card.querySelectorAll('.btn-choice'))
				.find(b => norm(b.dataset.value) === norm(q.correct));

			// remettre l'état visuel
			card.classList.remove('q-correct', 'q-wrong');
			card.querySelectorAll('.btn-choice').forEach(b => b.classList.remove('correct', 'wrong'));

			if (correctBtn) correctBtn.classList.add('correct');

			if (!chosen) return; // pas de choix -> rien à colorer
			const val = chosen.dataset.value;

			const isCorrect =
				(q.correct.startsWith('git cherry-pick') && val.toLowerCase().startsWith('git cherry-pick'))
				|| (norm(val) === norm(q.correct));

			if (val.toLowerCase().startsWith('je ne sais pas')) {
				chosen.classList.add('wrong'); card.classList.add('q-wrong');
				answers[q.id].validated = true; answers[q.id].correct = false;
				return;
			}
			if (isCorrect) {
				chosen.classList.add('correct'); if (colorize) card.classList.add('q-correct');
				answers[q.id].validated = true; answers[q.id].correct = true;
			} else {
				chosen.classList.add('wrong'); if (colorize) card.classList.add('q-wrong');
				answers[q.id].validated = true; answers[q.id].correct = false;
			}
		}

		function validateQCMRange(from, to, {colorize}) {
			for (let i = from; i <= to; i++) validateQCMQuestion(i, {colorize});
		}

		// ----------- Navigation : Groupes (niv 6–10) -----------
		function setupNavGroups({groupSize}) {
			const btnPrev = document.getElementById('btn-prev');
			const btnNext = document.getElementById('btn-next');
			const btnValidateChunk = document.getElementById('btn-validate-chunk');

			btnPrev.classList.remove('d-none');
			btnNext.classList.remove('d-none');
			btnValidateChunk.classList.remove('d-none');
			btnValidateChunk.textContent = "Valider";

			btnPrev.onclick = () => {
				if (currentGroupStart - groupSize >= 0) {
					currentGroupStart -= groupSize;
					renderGroupInputs(currentGroupStart, groupSize);
					setupNavGroups({groupSize});
				}
			};
			btnNext.onclick = () => {
				if (currentGroupStart + groupSize < QUESTIONS.length) {
					currentGroupStart += groupSize;
					renderGroupInputs(currentGroupStart, groupSize);
					setupNavGroups({groupSize});
				}
			};
			btnValidateChunk.onclick = () => validateInputsRange(currentGroupStart, Math.min(currentGroupStart + groupSize - 1, QUESTIONS.length - 1));

			// Valider le niveau (évalue tout)
			const btnLevel = document.getElementById('btn-validate-level');
			btnLevel.classList.remove('d-none');
			btnLevel.onclick = () => evaluerNiveau(niveauCourant);

			document.getElementById('btn-reset-niv').classList.remove('d-none');
			document.getElementById('btn-reset-niv').onclick = () => relancerNiveau(niveauCourant);

			// Disable prev/next ends
			btnPrev.disabled = (currentGroupStart === 0);
			btnNext.disabled = (currentGroupStart + groupSize >= QUESTIONS.length);
		}

		function validateInputsRange(from, to) {
			for (let i = from; i <= to; i++) {
				const q = QUESTIONS[i];
				const card = document.querySelector(`.q-card[data-qid="${q.id}"]`);
				const input = card.querySelector('input.form-control');
				const r = matchLibreReponse(q.correct, input.value);
				card.classList.remove('q-correct', 'q-wrong');
				input.classList.remove('input-correct', 'input-wrong');

				if (r.type === 'correct') {
					input.classList.add('input-correct'); card.classList.add('q-correct');
					answers[q.id].validated = true; answers[q.id].correct = true;
				} else {
					input.classList.add('input-wrong'); card.classList.add('q-wrong');
					answers[q.id].validated = true; answers[q.id].correct = false;
				}
			}
		}

		// ----------- Normalisation & matching (inputs) -----------
		const norm = s => (s || '').replace(/\s+/g, ' ').trim().toLowerCase();
		function matchLibreReponse(expected, given) {
			const g = norm(given);
			if (g === '' || g === 'je ne sais pas' || g === 'je ne sais pas.') return {type: 'unknown'};

			// tolérances spécifiques
			if (expected.startsWith('git cherry-pick')) {
				const r1 = /^git\s+cherry-pick\s+[0-9a-z]+$/i;
				const r2 = /^git\s+cherry-pick\s+[0-9a-z]+\.\.[0-9a-z]+$/i;
				if (r1.test(given) || r2.test(given)) return {type: 'correct'};
			}
			if (/^git\s+show\s+\S+$/i.test(given) && expected.startsWith('git show ')) return {type: 'correct'};
			if (/^git\s+reset\s+--hard\s+\S+$/i.test(given) && expected.startsWith('git reset --hard ')) return {type: 'correct'};
			if (/^git\s+rebase\s+--continue$/i.test(g)) return {type: norm(expected) === 'git rebase --continue' ? 'correct' : 'wrong'};
			if (/^git\s+rebase\s+--abort$/i.test(g)) return {type: norm(expected) === 'git rebase --abort' ? 'correct' : 'wrong'};
			if (/^git\s+rebase\s+\S+$/i.test(given) && expected.startsWith('git rebase ')) return {type: 'correct'};
			if (/^git\s+revert\s+\S+$/i.test(given) && expected.startsWith('git revert ')) return {type: 'correct'};
			if (/^git\s+tag\s+-a\s+\S+\s+-m\s+.+$/i.test(given) && expected.startsWith('git tag -a ')) return {type: 'correct'};
			if (/^git\s+tag\s+\S+$/i.test(given) && expected.startsWith('git tag ')) return {type: 'correct'};
			if (/^git\s+blame\s+\S+$/i.test(given) && expected.startsWith('git blame ')) return {type: 'correct'};
			if (/^git\s+remote\s+-v$/i.test(g)) return {type: norm(expected) === 'git remote -v' ? 'correct' : 'wrong'};
			if (/^git\s+stash\s+pop$/i.test(g)) return {type: norm(expected) === 'git stash pop' ? 'correct' : 'wrong'};
			if (/^git\s+stash\s+apply$/i.test(g)) return {type: norm(expected) === 'git stash apply' ? 'correct' : 'wrong'};
			if (/^git\s+stash$/i.test(g)) return {type: norm(expected) === 'git stash' ? 'correct' : 'wrong'};
			if (/^git\s+fetch(\s+--all)?$/i.test(g)) return {type: norm(expected) === norm(g) ? 'correct' : 'wrong'};
			if (/^git\s+pull\s+--rebase$/i.test(g)) return {type: norm(expected) === 'git pull --rebase' ? 'correct' : 'wrong'};
			if (/^git\s+log\s+--oneline(\s+-\d+)?$/i.test(g)) return norm(g).startsWith(norm(expected)) ? {type: 'correct'} : {type: 'wrong'};

			return {type: 'wrong'};
		}

		// ----------- Évaluation globale & progression -----------
		function evaluerNiveau(niv) {
			const res = document.getElementById('resultat');
			res.textContent = '';
			let score = 0;
			let elimine = false;

			// Nettoyage des marquages (on garde ceux déjà posés par validations partielles)
			document.querySelectorAll('.q-card').forEach(el => el.classList.remove('q-correct', 'q-wrong'));
			document.querySelectorAll('.btn-choice').forEach(b => b.classList.remove('correct', 'wrong'));
			document.querySelectorAll('input.form-control').forEach(i => i.classList.remove('input-correct', 'input-wrong'));

			if (niv >= 1 && niv <= 5) {
				const pos = posBase[niv], neg = negBase[niv];
				// QCM sur tout l'ensemble
				QUESTIONS.forEach(q => {
					const chosenVal = answers[q.id].value || '';
					const card = document.querySelector(`.q-card[data-qid="${q.id}"]`);
					if (card) {
						const btns = card.querySelectorAll('.btn-choice');
						btns.forEach(b => {
							if (norm(b.dataset.value) === norm(q.correct)) b.classList.add('correct');
						});
					}
					if (!chosenVal) return;

					if (chosenVal.toLowerCase().startsWith('je ne sais pas')) {
						if (card) card.classList.add('q-wrong');
						answers[q.id].validated = true; answers[q.id].correct = false;
						return;
					}
					const isCorrect =
						(q.correct.startsWith('git cherry-pick') && chosenVal.toLowerCase().startsWith('git cherry-pick')) ||
						(norm(chosenVal) === norm(q.correct));
					if (isCorrect) {
						score += pos * q.weight;
						if (card) card.classList.add('q-correct');
						answers[q.id].validated = true; answers[q.id].correct = true;
					} else {
						score -= neg * q.weight;
						if (card) card.classList.add('q-wrong');
						answers[q.id].validated = true; answers[q.id].correct = false;
					}
				});

				const passe = score > 0;
				res.textContent = passe ? `Réussi. Score: ${score}.` : `Échec. Score: ${score}.`;
				// Vérifie que toutes les questions ont été répondues/validées
				const toutesRepondues = QUESTIONS.every(q => answers[q.id] && answers[q.id].value !== '');
				if (passe && toutesRepondues && progression.unlocked < niv + 1) {
					progression.unlocked = niv + 1;
					sauvegarderProgression();
					renderLevels();
				}
				return;
			}

			if (niv >= 6 && niv <= 10) {
				const malusUnknown = (niv - 5);
				QUESTIONS.forEach(q => {
					const val = answers[q.id].value || '';
					const r = matchLibreReponse(q.correct, val);
					const card = document.querySelector(`.q-card[data-qid="${q.id}"]`);
					const input = card ? card.querySelector('input.form-control') : null;

					if (r.type === 'correct') {
						if (input) input.classList.add('input-correct');
						if (card) card.classList.add('q-correct');
						answers[q.id].validated = true;
						answers[q.id].correct = true;
					} else if (r.type === 'unknown') {
						score -= malusUnknown * q.weight;
						if (input) input.classList.add('input-wrong');
						if (card) card.classList.add('q-wrong');
						answers[q.id].validated = true;
						answers[q.id].correct = false;
					} else {
						if (input) input.classList.add('input-wrong');
						if (card) card.classList.add('q-wrong');
						answers[q.id].validated = true;
						answers[q.id].correct = false;
						elimine = true;
					}
				});

				if (elimine) {
					res.textContent = 'Éliminé : une ou plusieurs réponses fausses.';
					return;
				}

				res.textContent = `Réussi. Pénalité “je ne sais pas”: ${score}.`;

				// Vérifie que toutes les questions ont une réponse avant de débloquer le niveau suivant
				const toutesRepondues = QUESTIONS.every(q => answers[q.id] && answers[q.id].value !== '');
				if (toutesRepondues && progression.unlocked < niv + 1) {
					progression.unlocked = niv + 1;
					sauvegarderProgression();
					renderLevels();
				}
				return;
			}

			if (niv === 11) {
				let allCorrect = true;
				QUESTIONS.forEach(q => {
					const val = answers[q.id].value || '';
					const r = matchLibreReponse(q.correct, val);
					const card = document.querySelector(`.q-card[data-qid="${q.id}"]`);
					const input = card ? card.querySelector('input.form-control') : null;
					if (r.type === 'correct') {
						if (input) input.classList.add('input-correct'); if (card) card.classList.add('q-correct');
					} else {
						if (input) input.classList.add('input-wrong'); if (card) card.classList.add('q-wrong');
						allCorrect = false;
					}
				});
				if (allCorrect) {
					res.textContent = 'Félicitations, vous avez gagné le jeu !';
					if (progression.unlocked < 11) {progression.unlocked = 11; sauvegarderProgression(); renderLevels();}
				} else {
					res.textContent = 'Échec : aucune erreur ni “je ne sais pas” tolérée au niveau 11.';
				}
			}
		}

		// ----------- Menu Burger -----------
		document.getElementById('menu-toggle').addEventListener('click', () => {
			if (document.getElementById('menu-toggle').classList.contains('disabled')) return;
			document.getElementById('side-menu').classList.toggle('show');
			document.getElementById('layout').classList.toggle('shifted');
		});

		// ----------- Boutons globaux -----------
		document.getElementById('reset-btn').addEventListener('click', resetProgression);

		// ----------- Initialisation -----------
		(async function init() {
			chargerProgression();
			renderLevels();
			try {
				await chargerCours();
			} catch (e) {
				document.getElementById('menu-cours').innerHTML =
					'<div class="text-warning">Impossible de charger le cours.</div>';
			}

			const nivAuto = Math.min(Math.max(progression.unlocked ?? 0, 0), 11);

			if (nivAuto === 0) {
				// Prépare les réponses comme validées
				QUESTIONS.forEach(q => {
					answers[q.id] = {value: q.correct, validated: true, correct: true};
				});

				niveauCourant = 0;
				currentIndex = 0;

				// Désactive le menu burger
				const menuBtn = document.getElementById('menu-toggle');
				const sideMenu = document.getElementById('side-menu');
				sideMenu.classList.remove('show');
				document.getElementById('layout').classList.remove('shifted');

				// Affiche directement le niveau 0
				clearUI();              // Nettoie l’UI
				renderLevels();         // Dessine les boutons des niveaux
				renderSingleQCMTraining(currentIndex); // Affiche la 1ʳᵉ question colorée
				setupNavSingleTraining();
			} else {
				lancerNiveau(nivAuto);
			}
		})();
	</script>
</body>

</html>

# ./Web/cours_git_avance/index.html

# ./Web/gestion/data/noms.js
window.NOMS_POOL = [
	"Pierre Martin",
	"Marie Bernard",
	"Jean Dubois",
	"Sophie Laurent",
	"Nicolas Lefebvre",
	"Claire Moreau",
	"Thomas Simon",
	"Julie Michel",
	"Antoine Garcia",
	"Laura Petit",
	"Lucas Roux",
	"Emma Fontaine",
	"Mathieu Lambert",
	"Camille Faure",
	"Hugo Blanc",
	"Chloé Barbier",
	"Adrien Guérin",
	"Manon Henry",
	"Romain Robert",
	"Léa Mathieu",
	"Vincent Marchand",
	"Anaïs Caron",
	"Baptiste Noël",
	"Pauline Renard",
	"Alexandre Girard",
	"Charlotte Roy",
	"Julien Nicolas",
	"Marion Dupont",
	"Quentin Colin",
	"Sarah Gauthier",
	"Maxime Masson",
	"Élodie Perrin",
	"Arthur Robin",
	"Aurore Renaud",
	"Guillaume Poirier",
	"Mélanie Charles",
	"Damien Bonnet",
	"Hélène Schmitt",
	"Kévin Morel",
	"Élise Morin",
	"Florian Étienne",
	"Marine Leclerc",
	"Yann Deschamps",
	"Audrey Lefèvre",
	"Stéphane Dumas",
	"Nadia Benali",
	"Pascal Leroy",
	"Isabelle Lucas",
	"Cédric Meyer",
	"Sandrine Chartier",
	"Gaël Boucher",
	"Nora Diallo",
	"Sébastien Chauvin",
	"Ingrid Pelletier",
	"Olivier Carpentier",
	"Valérie Pruvost",
	"Loïc Perrot",
	"Amélie Daniel",
	"Jérôme Marin",
	"Caroline Georges",
	"Laurent Barre",
	"Estelle Maillard",
	"Benoît André",
	"Aline Michaud",
	"Théo Bernardin",
	"Justine Rolland",
	"Lucas Dupuy",
	"Clara Lemaire",
	"Paul Aubert",
	"Inès Le Gall",
	"Victor Pons",
	"Mélissa Cohen",
	"Gaspard Lefort",
	"Eva Bourdon",
	"Simon Collet",
	"Mathilde Boulanger",
	"Nathan Marty",
	"Alice Hébert",
	"Raphaël Louvet",
	"Nina Tessier",
	"Éric Martel",
	"Océane Lemaître",
	"Tristan Roger",
	"Margot Millet",
	"Sacha Humbert",
	"Zoé Delorme",
	"Rémi Alexandre",
	"Agathe Paris",
	"Léo Marchal",
	"Aurélie Besnard",
	"Maël Renou",
	"Noémie Leblanc",
	"Arnaud Allard",
	"Salomé Barret",
	"Émile Joly",
	"Camille Dupuis",
	"Idriss Ben Amar",
	"Aïcha Zeroual",
	"Mehdi Belkacem",
	"Yasmine Aït-Salem",
];

# ./Web/gestion/data/noms.js

# ./Web/gestion/index.html
<!doctype html>
<html lang="fr">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" type="image/x-icon" href="./assets/gestion.ico">
	<title>Planificateur</title>
	<!-- Bootstrap 5 CDN -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		body {
			padding-top: 1rem;
		}

		.sticky-actions {
			position: sticky;
			bottom: 0;
			background: #fff;
			padding: 1rem 0;
		}

		.group-split {
			color: #b02a37;
			font-weight: 600;
		}

		.smallcaps {
			font-variant: small-caps;
		}

		.card-elevator {
			min-width: 320px;
		}

		.table-fixed {
			table-layout: fixed;
		}

		.table-fixed td,
		.table-fixed th {
			word-wrap: break-word;
		}

		details>summary {
			cursor: pointer;
		}
	</style>
</head>

<body>
	<div class="container-xxl">
		<ul class="nav nav-tabs mb-3" id="mainTabs" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active" id="tab-elevators" data-bs-toggle="tab" data-bs-target="#pane-elevators"
					type="button" role="tab">Ascenseurs</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="tab-convoiturage" data-bs-toggle="tab" data-bs-target="#pane-convoiturage"
					type="button" role="tab">Convoiturage</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="tab-calendrider" data-bs-toggle="tab" data-bs-target="#pane-calendrider"
					type="button" role="tab">Calendrider personnel</button>
			</li>
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="tab-interop" data-bs-toggle="tab" data-bs-target="#pane-interop" type="button"
					role="tab">
					Optimiser des emploi du temps interdépendants
				</button>
			</li>

		</ul>

		<div class="tab-content">
			<!-- L'onglet 1 est rendu par elevators.js -->
			<div class="tab-pane fade show active" id="pane-elevators" role="tabpanel" aria-labelledby="tab-elevators">
			</div>

			<!-- Convoiturage -->
			<div class="tab-pane fade" id="pane-convoiturage" role="tabpanel" aria-labelledby="tab-convoiturage"></div>

			<!-- Placeholder onglet 3 -->
			<div class="tab-pane fade" id="pane-calendrider" role="tabpanel" aria-labelledby="tab-calendrider">
				<p class="text-muted">Contenu du calendrider personnel.</p>
			</div>
			<div class="tab-pane fade" id="pane-interop" role="tabpanel" aria-labelledby="tab-interop">
				<p class="text-muted">Contenu de l’optimisation des emplois du temps interdépendants.</p>
			</div>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<!-- Import ES module sans Node.js -->
	<script src="./data/noms.js"></script>
	<script src="./utils/GestionUIJS.js"></script>
	<script src="./utils/utils.js"></script>

	<!-- Ascenseur -->
	<script src="./javascript/ascenseur/ascenseur_modele.js"></script>
	<script src="./javascript/ascenseur/ascenseur_view.js"></script>
	<script src="./javascript/ascenseur/ascenseur_controller.js"></script>

	<!-- Convoiturage -->
	<script src="./javascript/covoiturage/covoiturage_modele.js"></script>
	<script src="./javascript/covoiturage/covoiturage_view.js"></script>
	<script src="./javascript/covoiturage/covoiturage_controller.js"></script>

	<!-- Calendrier personnel -->
	<script src="./javascript/calendrier/calendrier_modele.js"></script>
	<script src="./javascript/calendrier/calendrier_view.js"></script>
	<script src="./javascript/calendrier/calendrier_controller.js"></script>

	<script>
		window.addEventListener('DOMContentLoaded', function () {
			// Onglet 1 : Ascenseurs
			var mount1 = document.getElementById('pane-elevators');
			window.initElevators({mount: mount1});

			// Onglet 2 : Convoiturage
			var mount2 = document.getElementById('pane-convoiturage');
			window.initConvoiturage({mount: mount2});

			// Onglet 3 : calendrider personnel
			var mount3 = document.getElementById('pane-calendrider');
			window.initCalendrier({mount: mount3});
		});
	</script>
</body>

</html>

# ./Web/gestion/index.html

# ./Web/gestion/javascript/ascenseur/ascenseur_controller.js
/* ascenseur_controller.js — Contrôleur (ES5, 2014) */
(function (window) {
	"use strict";

	var Modele = window.AscenseurModele;
	var View = window.AscenseurView;

	// API publique conservée
	window.initElevators = function initElevators(opts) {
		if (!opts || !opts.mount) throw new Error("initElevators: {mount} requis.");

		var ui = View.createUI({ mount: opts.mount });

		// Écouteurs
		ui.cFloors.input.addEventListener("change", function () {
			var max = Math.max(1, parseInt(ui.cFloors.input.value, 10) || 1);
			ui.elevList.setMaxFor("maxFloor", max);
			ui.groupsTbl.setMaxFor("dest", max);
		});

		ui.btnAdd.button.addEventListener("click", function () {
			const val = parseInt(ui.cFloors.input.value, 10) || 5;
			console.log(">>> Valeur lue dans #elev-floors :", ui.cFloors.input.value);
			console.log(">>> Valeur convertie utilisée pour maxFloor :", val);

			ui.elevList.setMaxFor("maxFloor", val);

			ui.elevList.add({
				capacity: 2,
				start: 0,
				maxFloor: val,
				evenOnly: false,
				oddOnly: false,
			});
		});

		ui.cGroups.input.addEventListener("change", function () {
			ui.groupsTbl.setRowCount(Math.max(1, parseInt(ui.cGroups.input.value, 10) || 1));
			ui.groupsTbl.rerollRandoms();
		});

		ui.btnReg.button.addEventListener("click", function () {
			ui.groupsTbl.rerollRandoms();
		});

		ui.btnCompute.addEventListener("click", function () {
			var stateRaw = ui.collectState();
			var validation = Modele.validateState(stateRaw);
			if (!validation.ok) {
				window.GestionUI.alert(ui.spanAlert, "danger", validation.message);
				ui.results.innerHTML = "";
				return;
			}
			var state = Modele.attachPeopleToGroups(stateRaw);
			var itemsWrap = Modele.partitionGroups(state);
			var plan = Modele.assignItemsToTrips(itemsWrap.items, state);
			View.renderPlan(ui.results, plan, state);
			window.GestionUI.alert(ui.spanAlert, "success", "Plan généré.");
		});
	};
})(window);

# ./Web/gestion/javascript/ascenseur/ascenseur_controller.js

# ./Web/gestion/javascript/ascenseur/ascenseur_modele.js
/* ascenseur_modele.js — Modèle (ES5, 2014) */
(function (window) {
	"use strict";

	var NAME_POOL = window.NOMS_POOL || [];
	var nameCounter = 0;

	function nextPersonName() {
		var base = NAME_POOL[nameCounter % NAME_POOL.length];
		var round = Math.floor(nameCounter / NAME_POOL.length);
		nameCounter++;
		return round === 0 ? base : base + " (" + (round + 1) + ")";
	}

	/* ========= logique métier ========= */
	function validateState(state) {
		if (!state.elevators || !state.elevators.length) return { ok: false, message: "Ajoutez au moins un ascenseur." };
		// Étages uniques
		var seen = {},
			i;
		for (i = 0; i < state.groups.length; i++) seen[state.groups[i].dest] = true;
		for (var k in seen)
			if (seen.hasOwnProperty(k)) {
				var f = parseInt(k, 10),
					ok = false;
				for (i = 0; i < state.elevators.length; i++) {
					if (elevatorCanServeFloor(state.elevators[i], f)) {
						ok = true;
						break;
					}
				}
				if (!ok) return { ok: false, message: "Aucun ascenseur ne dessert l’étage " + f + " (parité/hauteur)." };
			}
		return { ok: true };
	}

	function elevatorCanServeFloor(elevator, floor) {
		if (!elevator || elevator.maxFloor < floor) return false;
		if (elevator.evenOnly && floor % 2 !== 0) return false;
		if (elevator.oddOnly && floor % 2 !== 1) return false;
		return true;
	}

	function attachPeopleToGroups(state) {
		nameCounter = 0;
		var groups = [],
			i,
			p;
		for (i = 0; i < state.groups.length; i++) {
			var g = state.groups[i],
				people = [];
			for (p = 0; p < g.size; p++) people.push({ name: nextPersonName(), dest: g.dest, groupId: g.id });
			groups.push({ id: g.id, size: g.size, dest: g.dest, people: people });
		}
		return { floors: state.floors, elevators: state.elevators, groups: groups };
	}

	function partitionGroups(state) {
		var items = [],
			i,
			e;
		for (i = 0; i < state.groups.length; i++) {
			var g = state.groups[i],
				bestCap = 0;
			for (e = 0; e < state.elevators.length; e++) {
				var el = state.elevators[e];
				if (elevatorCanServeFloor(el, g.dest) && el.capacity > bestCap) bestCap = el.capacity;
			}
			if (g.size <= bestCap) {
				items.push({ groupId: g.id, partIndex: 1, parts: 1, size: g.size, dest: g.dest, people: g.people.slice(0) });
			} else {
				var parts = Math.ceil(g.size / bestCap),
					remaining = g.size,
					offset = 0,
					p,
					take,
					slice;
				for (p = 1; p <= parts; p++) {
					take = Math.min(bestCap, remaining);
					slice = g.people.slice(offset, offset + take);
					items.push({ groupId: g.id, partIndex: p, parts: parts, size: take, dest: g.dest, people: slice, forced: true });
					remaining -= take;
					offset += take;
				}
			}
		}
		items.sort(function (a, b) {
			return b.dest - a.dest || b.size - a.size;
		});
		return { items: items };
	}

	function assignItemsToTrips(items, state) {
		var openTrips = [],
			trips = [],
			tCounter = 0;
		var tripsPerElevator = {},
			i,
			e;
		for (e = 0; e < state.elevators.length; e++) tripsPerElevator[state.elevators[e].id] = 0;

		for (i = 0; i < items.length; i++) {
			var it = items[i],
				best = null,
				bestWaste = Infinity,
				ot,
				t;
			for (ot = 0; ot < openTrips.length; ot++) {
				t = openTrips[ot];
				if (t.capLeft >= it.size && elevatorCanServeFloor(getElevatorById(state.elevators, t.elevatorId), it.dest)) {
					var waste = t.capLeft - it.size;
					if (waste < bestWaste) {
						bestWaste = waste;
						best = t;
					}
				}
			}
			var chosen = best;
			if (!chosen) {
				var chosenElev = null;
				for (e = 0; e < state.elevators.length; e++) {
					var el = state.elevators[e];
					if (!elevatorCanServeFloor(el, it.dest)) continue;
					if (!chosenElev) chosenElev = el;
					else if (el.capacity > chosenElev.capacity) chosenElev = el;
					else if (el.capacity === chosenElev.capacity && (tripsPerElevator[el.id] || 0) < (tripsPerElevator[chosenElev.id] || 0)) chosenElev = el;
				}
				chosen = { id: ++tCounter, elevatorId: chosenElev.id, capLeft: chosenElev.capacity, maxCap: chosenElev.capacity, stops: [], items: [] };
				openTrips.push(chosen);
				tripsPerElevator[chosenElev.id] = (tripsPerElevator[chosenElev.id] || 0) + 1;
			}
			chosen.items.push(it);
			chosen.capLeft -= it.size;
			addStopUnique(chosen.stops, it.dest);
			if (chosen.capLeft === 0) closeTrip(chosen);
		}
		for (var k = openTrips.length - 1; k >= 0; k--) closeTrip(openTrips[k]);

		function closeTrip(t) {
			t.stops.sort(function (a, b) {
				return a - b;
			});
			trips.push({ id: t.id, elevatorId: t.elevatorId, capacity: t.maxCap, stops: t.stops.slice(0), items: t.items.slice(0) });
			var idx = indexOfTrip(openTrips, t);
			if (idx >= 0) openTrips.splice(idx, 1);
		}
		trips.sort(function (a, b) {
			var d = a.elevatorId - b.elevatorId;
			return d !== 0 ? d : maxOfArray(b.stops) - maxOfArray(a.stops);
		});
		return trips;
	}

	/* ========= helpers (modèle) ========= */
	function addStopUnique(stops, floor) {
		for (var i = 0; i < stops.length; i++) if (stops[i] === floor) return;
		stops.push(floor);
	}
	function getElevatorById(arr, id) {
		for (var i = 0; i < arr.length; i++) if (arr[i].id === id) return arr[i];
		return null;
	}
	function indexOfTrip(arr, t) {
		for (var i = 0; i < arr.length; i++) if (arr[i] === t) return i;
		return -1;
	}
	function maxOfArray(a) {
		if (!a.length) return -Infinity;
		var m = a[0];
		for (var i = 1; i < a.length; i++) if (a[i] > m) m = a[i];
		return m;
	}
	function clampInt(v, min, max) {
		var n = Math.floor(Number(v) || 0);
		if (n < min) n = min;
		if (n > max) n = max;
		return n;
	}

	/* ========= export ========= */
	window.AscenseurModele = {
		validateState: validateState,
		elevatorCanServeFloor: elevatorCanServeFloor,
		attachPeopleToGroups: attachPeopleToGroups,
		partitionGroups: partitionGroups,
		assignItemsToTrips: assignItemsToTrips,
		clampInt: clampInt,
		getElevatorById: getElevatorById,
	};
})(window);

# ./Web/gestion/javascript/ascenseur/ascenseur_modele.js

# ./Web/gestion/javascript/ascenseur/ascenseur_view.js
/* ascenseur_view.js — Vue (ES5, 2014) */
(function (window, document) {
	"use strict";

	/* ========= construction UI ========= */
	function createUI(opts) {
		if (!opts || !opts.mount) throw new Error("AscenseurView.createUI: {mount} requis.");
		var mount = opts.mount;

		// Barre de paramètres
		var row = document.createElement("div");
		row.className = "row g-3 align-items-end mb-3";
		var cFloors = colControl("Nombre d'étages (0 à N)", "number", "elev-floors", 5, { min: 1 });
		var btnAdd = buttonControl("Ajouter un ascenseur", "elev-btnAddElevator", "btn btn-outline-primary");
		var cGroups = colControl("Nombre de groupes", "number", "elev-groupCount", 1, { min: 1 });
		var btnReg = buttonControl("Régénérer les groupes", "elev-btnRegenerateGroups", "btn btn-outline-secondary");
		row.appendChild(cFloors.col);
		row.appendChild(btnAdd.col);
		row.appendChild(cGroups.col);
		row.appendChild(btnReg.col);
		mount.appendChild(row);

		// Liste des ascenseurs
		var listHost = document.createElement("div");
		listHost.className = "mb-4";
		mount.appendChild(listHost);
		var elevList = window.GestionUI.listEditor(listHost, {
			title: "Ascenseur",
			addLabel: "Ajouter un ascenseur",
			fields: [
				{ key: "capacity", label: "Capacité max", type: "number", min: 1, value: 2 },
				{ key: "start", label: "Étage de départ", type: "number", min: 0, value: 0 },
				{ key: "maxFloor", label: "Étage max desservi", type: "number", min: 0, max: 5, value: 5 },
			],
			checks: [
				{ key: "evenOnly", label: "Dessert uniquement les étages pairs", exclusiveWith: "oddOnly" },
				{ key: "oddOnly", label: "Dessert uniquement les étages impairs", exclusiveWith: "evenOnly" },
			],
			initial: [{ capacity: 2, start: 0, maxFloor: 5, evenOnly: false, oddOnly: false }],
			idKey: "id",
		});

		// Groupes
		var groupsHost = document.createElement("div");
		mount.appendChild(groupsHost);
		var groupsTbl = window.GestionUI.tableEditor(groupsHost, {
			title: "Groupes (départ RDC = 0)",
			rowLabel: "Groupe",
			initialRows: 1,
			columns: [
				{ key: "size", label: "Taille (personnes)", type: "number", min: 1, max: 4, value: 1, defaultRandom: true },
				{ key: "dest", label: "Étage d'arrivée", type: "number", min: 1, value: 1, defaultRandom: true },
			],
			randomizeRow: function (col) {
				if (col.key === "size") return window.random_int(col.min || 1, col.max || 4);
				if (col.key === "dest") {
					var floors = parseInt(document.getElementById("elev-floors").value, 10) || 5;
					return window.random_int(col.min || 1, floors);
				}
				return "";
			},
		});

		// Actions
		var actions = document.createElement("div");
		actions.className = "sticky-actions border-top";
		var btnCompute = document.createElement("button");
		btnCompute.className = "btn btn-lg btn-primary";
		btnCompute.textContent = "Générer le résultat";
		var spanAlert = document.createElement("span");
		spanAlert.id = "elev-computeAlert";
		spanAlert.className = "ms-3";
		actions.appendChild(btnCompute);
		actions.appendChild(spanAlert);
		mount.appendChild(actions);

		// Résultats
		var results = document.createElement("div");
		results.id = "elev-results";
		results.className = "mt-4";
		mount.appendChild(results);

		function collectState() {
			var floors = Math.max(1, parseInt(cFloors.input.value, 10) || 1);
			var elevators = elevList.getData();
			for (var i = 0; i < elevators.length; i++) {
				if (elevators[i].maxFloor > floors) elevators[i].maxFloor = floors;
			}
			var groups = groupsTbl.getData();
			return { floors: floors, elevators: elevators, groups: groups };
		}

		return {
			mount: mount,
			cFloors: cFloors,
			btnAdd: btnAdd,
			cGroups: cGroups,
			btnReg: btnReg,
			btnCompute: btnCompute,
			spanAlert: spanAlert,
			results: results,
			elevList: elevList,
			groupsTbl: groupsTbl,
			collectState: collectState,
		};
	}

	/* ========= rendu ========= */
	function renderPlan(mount, trips, state) {
		var split = {},
			t,
			i;
		for (t = 0; t < trips.length; t++)
			for (i = 0; i < trips[t].items.length; i++) {
				var gid = trips[t].items[i].groupId;
				split[gid] = (split[gid] || 0) + 1;
			}
		var actuallySplit = 0;
		for (var g in split) if (split.hasOwnProperty(g) && split[g] > 1) actuallySplit++;

		var kpis =
			'<div class="row g-3 mb-3">' +
			' <div class="col-auto"><div class="badge text-bg-primary p-3">Allers‑retours totaux&nbsp;: <strong>' +
			trips.length +
			"</strong></div></div>" +
			' <div class="col-auto"><div class="badge text-bg-secondary p-3">Groupes séparés&nbsp;: <strong>' +
			actuallySplit +
			"</strong></div></div>" +
			' <div class="col-auto"><div class="badge text-bg-light border p-3">Étages max immeuble&nbsp;: <strong>' +
			state.floors +
			"</strong></div></div>" +
			"</div>";

		var thead =
			'<thead class="table-light"><tr>' +
			'<th style="width:70px;">#</th><th style="width:110px;">Ascenseur</th><th style="width:110px;">Capacité</th>' +
			'<th>Groupes embarqués</th><th style="width:210px;">Étages desservis</th><th style="width:220px;">Remarques</th>' +
			"</tr></thead>";

		var rows = "";
		for (t = 0; t < trips.length; t++) {
			var trip = trips[t];
			var e = getElevatorById(state.elevators, trip.elevatorId);
			var groupsHtml = "";
			for (i = 0; i < trip.items.length; i++) {
				var it = trip.items[i];
				var title = "G" + it.groupId + (it.parts > 1 ? " (part " + it.partIndex + "/" + it.parts + ")" : "") + " : " + it.size + "p → " + it.dest;
				var names = [];
				if (it.people) for (var n = 0; n < it.people.length; n++) names.push(it.people[n].name);
				groupsHtml +=
					'<div class="mb-2"><div>' +
					escapeHtml(title) +
					"</div>" +
					"<details><summary>" +
					it.size +
					" personne(s)</summary><small>" +
					(names.length ? escapeHtml(names.join(", ")) : "—") +
					"</small></details></div>";
			}
			var stopsTxt = trip.stops.length ? "0 → " + trip.stops.join(" → ") + " → 0" : "—";
			var remarks = [];
			if (e.start !== 0) remarks.push("Départ réel à l’étage " + e.start);
			if (e.evenOnly) remarks.push("Pairs uniquement");
			if (e.oddOnly) remarks.push("Impairs uniquement");
			var hasSplit = false;
			for (i = 0; i < trip.items.length; i++)
				if (trip.items[i].parts > 1) {
					hasSplit = true;
					break;
				}
			if (hasSplit) remarks.push('<span class="group-split">Séparation nécessaire</span>');

			rows +=
				"<tr><td>" +
				(t + 1) +
				"</td><td>#" +
				e.id +
				"</td><td>" +
				trip.capacity +
				" p</td>" +
				"<td>" +
				groupsHtml +
				"</td><td>" +
				stopsTxt +
				"</td><td>" +
				(remarks.length ? remarks.join("<br>") : "—") +
				"</td></tr>";
		}

		mount.innerHTML =
			kpis +
			'<div class="card"><div class="card-header">Séquence optimale (heuristique)</div>' +
			'<div class="card-body p-0"><div class="table-responsive"><table class="table table-striped table-hover align-middle table-fixed mb-0">' +
			thead +
			"<tbody>" +
			(rows || '<tr><td colspan="6" class="text-center text-muted">Aucun trajet nécessaire</td></tr>') +
			"</tbody></table></div></div>" +
			'<div class="card-footer text-muted">Objectif&nbsp;: minimiser les allers‑retours puis éviter les séparations. Les groupes ne sont séparés que si la capacité maximale des ascenseurs le rend inévitable.</div>' +
			"</div>";
	}

	/* ========= helpers (vue) ========= */
	function colControl(label, type, id, val, attrs) {
		var col = document.createElement("div");
		col.className = "col-auto";
		var lab = document.createElement("label");
		lab.className = "form-label";
		lab.setAttribute("for", id);
		lab.textContent = label;
		var inp = document.createElement("input");
		inp.className = "form-control";
		inp.id = id;
		inp.type = type || "text";
		inp.value = val || "";
		if (attrs) for (var k in attrs) if (attrs.hasOwnProperty(k)) inp.setAttribute(k, attrs[k]);
		col.appendChild(lab);
		col.appendChild(inp);
		return { col: col, input: inp };
	}
	function buttonControl(text, id, klass) {
		var col = document.createElement("div");
		col.className = "col-auto";
		var btn = document.createElement("button");
		btn.className = klass || "btn btn-secondary";
		btn.id = id;
		btn.type = "button";
		btn.textContent = text;
		col.appendChild(btn);
		return { col: col, button: btn };
	}
	function getElevatorById(arr, id) {
		for (var i = 0; i < arr.length; i++) if (arr[i].id === id) return arr[i];
		return null;
	}
	function escapeHtml(s) {
		return String(s).replace(/[&<>"']/g, function (m) {
			return { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[m];
		});
	}

	/* ========= export ========= */
	window.AscenseurView = {
		createUI: createUI,
		renderPlan: renderPlan,
	};
})(window, document);

# ./Web/gestion/javascript/ascenseur/ascenseur_view.js

# ./Web/gestion/javascript/calendrier/calendrier_controller.js
(function (window) {
	"use strict";
	var Modele = window.CalendrierModele;

	window.initCalendrier = function initCalendrier(opts) {
		if (!opts || !opts.mount) throw new Error("initCalendrier: {mount} requis.");

		var state = Modele.loadAll();
		if (!state.currentProfileKey || !Object.keys(state.profils).length) {
			Modele.createProfile(state);
		}
		Modele.saveAll(state);

		var view = window.CalendrierView.createUI({ mount: opts.mount });

		var ctx = (function () {
			var t = new Date();
			return { y: t.getFullYear(), m: t.getMonth() };
		})();

		function refreshProfilesSelect() {
			var sel = view.profileSelect;
			sel.innerHTML = "";
			var keys = Object.keys(state.profils);
			for (var i = 0; i < keys.length; i++) {
				var k = keys[i],
					p = state.profils[k];
				var op = document.createElement("option");
				op.value = k;
				op.textContent = p.name || "Profil " + (i + 1);
				if (k === state.currentProfileKey) op.selected = true;
				sel.appendChild(op);
			}
		}
		function currentProfile() {
			return Modele.getCurrentProfile(state);
		}

		var formRefs = view.getForm();
		var formEl = opts.mount.querySelector("#cal-form");
		var deleteBtn = formEl ? formEl.querySelector("button.btn-outline-danger") : null;

		function selectedEventObj() {
			var key = state.currentProfileKey;
			var id = formRefs.id.value || null;
			if (!key || !id) return null;
			return Modele.getEventById(state, key, id);
		}

		function renderAll() {
			var p = currentProfile();
			if (!p) return;
			view.renderMonth({ y: ctx.y, m: ctx.m, profile: p });
			view.renderTasks(p, selectedEventObj());
			Modele.saveAll(state);
		}

		function setToday() {
			var t = new Date();
			ctx.y = t.getFullYear();
			ctx.m = t.getMonth();
			renderAll();
		}
		function pad2(n) {
			return (n < 10 ? "0" : "") + n;
		}

		/* Profils */
		refreshProfilesSelect();
		view.profileSelect.addEventListener("change", function () {
			Modele.setCurrentProfile(state, this.value);
			renderAll();
		});
		view.btnNewProfile.addEventListener("click", function () {
			Modele.createProfile(state);
			Modele.saveAll(state);
			refreshProfilesSelect();
			renderAll();
		});
		view.btnRenameProfile.addEventListener("click", function () {
			if (!state.currentProfileKey) return;
			var curr = currentProfile();
			var name = prompt("Nouveau nom du profil :", curr && curr.name ? curr.name : "");
			if (!name) return;
			Modele.renameProfile(state, state.currentProfileKey, String(name).trim());
			Modele.saveAll(state);
			refreshProfilesSelect();
			renderAll();
		});
		view.btnDeleteProfile.addEventListener("click", function () {
			if (!state.currentProfileKey) return;
			if (!confirm("Supprimer le profil courant ?")) return;
			Modele.deleteProfile(state, state.currentProfileKey);
			Modele.saveAll(state);
			refreshProfilesSelect();
			renderAll();
		});

		/* Navigation mois */
		view.btnPrev.addEventListener("click", function () {
			ctx.m -= 1;
			if (ctx.m < 0) {
				ctx.m = 11;
				ctx.y -= 1;
			}
			renderAll();
		});
		view.btnNext.addEventListener("click", function () {
			ctx.m += 1;
			if (ctx.m > 11) {
				ctx.m = 0;
				ctx.y += 1;
			}
			renderAll();
		});
		view.btnToday.addEventListener("click", setToday);

		/* CRUD évènements */
		if (formEl) {
			formEl.addEventListener("submit", function (e) {
				e.preventDefault();
				saveEvent();
			});
		}
		if (deleteBtn) {
			deleteBtn.addEventListener("click", function () {
				deleteEvent();
			});
		}

		// Réagir à la sélection d’un évènement depuis la vue
		opts.mount.addEventListener("cal:event-selected", function () {
			renderAll();
		});

		function parseFormToEvent(existingId) {
			var ymd = String(formRefs.date.value || "");
			if (!ymd) return null;
			var p = ymd.split("-");
			var y = +p[0],
				m = +p[1] - 1,
				d = +p[2];
			function hm(v, def) {
				v = v || def;
				return { h: +v.slice(0, 2), m: +v.slice(3, 5) };
			}
			var s = hm(formRefs.start.value, "09:00"),
				e = hm(formRefs.end.value, "10:00");
			var evt = {
				id: existingId || null,
				startISO: new Date(y, m, d, s.h, s.m, 0, 0).toISOString(),
				endISO: new Date(y, m, d, e.h, e.m, 0, 0).toISOString(),
				title: String(formRefs.title.value || ""),
				attendeesCsv: String(formRefs.people.value || ""),
				content: String(formRefs.content.value || ""),
				subtasks: [],
			};
			// si on modifie, préserver tasks existantes
			if (evt.id) {
				var cur = Modele.getEventById(state, state.currentProfileKey, evt.id);
				if (cur && Array.isArray(cur.tasks)) evt.tasks = cur.tasks;
			} else {
				evt.tasks = [];
			}
			return evt;
		}

		function saveEvent() {
			var key = state.currentProfileKey;
			if (!key) return;
			var isEdit = !!formRefs.id.value;
			var evt = parseFormToEvent(isEdit ? formRefs.id.value : null);
			if (!evt) return;

			if (isEdit) {
				evt.id = formRefs.id.value;
				Modele.updateEvent(state, key, evt);
			} else {
				Modele.addEvent(state, key, evt);
				formRefs.id.value = evt.id;
			}

			if (formRefs.subChk && formRefs.subChk.checked) {
				evt = Modele.expandIntoSubtasks(evt, formRefs.subN && formRefs.subN.value ? formRefs.subN.value : 3);
				Modele.updateEvent(state, key, evt);
			}

			var overlap = Modele.detectOverlap(currentProfile(), evt);
			if (overlap && confirm("Chevauchement détecté avec « " + (overlap.title || "(sans objet)") + " ». Proposer un déplacement automatique ?")) {
				var prop = Modele.proposeMove(currentProfile(), evt);
				if (prop) {
					evt.startISO = prop.startISO;
					evt.endISO = prop.endISO;
					Modele.updateEvent(state, key, evt);
					alert("Évènement déplacé.");
				}
			}

			Modele.saveAll(state);
			renderAll();
		}

		function deleteEvent() {
			var key = state.currentProfileKey;
			if (!key || !formRefs.id.value) return;
			if (!confirm("Supprimer cet évènement ?")) return;
			Modele.deleteEvent(state, key, formRefs.id.value);
			formRefs.id.value = "";
			Modele.saveAll(state);
			renderAll();
		}

		/* Tâches + commentaires (par évènement) */
		var tasksUI = view.tasksUI;

		tasksUI.addBtn.addEventListener("click", function () {
			var key = state.currentProfileKey,
				ev = selectedEventObj();
			if (!key || !ev) return;
			var title = (tasksUI.newInput.value || "").trim();
			Modele.addTaskToEvent(state, key, ev.id, title);
			tasksUI.newInput.value = "";
			Modele.saveAll(state);
			renderAll();
		});
		tasksUI.newInput.addEventListener("keydown", function (e) {
			if (e.key === "Enter") {
				e.preventDefault();
				tasksUI.addBtn.click();
			}
		});

		tasksUI.list.addEventListener("change", function (evn) {
			var trow = evn.target.closest("[data-task-id]");
			var key = state.currentProfileKey;
			var ev = selectedEventObj();
			if (!trow || !key || !ev) return;
			var taskId = trow.getAttribute("data-task-id");
			if (evn.target.classList.contains("cal-task-done")) {
				Modele.toggleTaskInEvent(state, key, ev.id, taskId, !!evn.target.checked);
				Modele.saveAll(state);
			} else if (evn.target.classList.contains("cal-task-title")) {
				Modele.updateTaskTitleInEvent(state, key, ev.id, taskId, evn.target.value);
				Modele.saveAll(state);
			}
		});
		tasksUI.list.addEventListener("input", function (evn) {
			var trow = evn.target.closest("[data-task-id]");
			var key = state.currentProfileKey;
			var ev = selectedEventObj();
			if (!trow || !key || !ev) return;
			var taskId = trow.getAttribute("data-task-id");
			if (evn.target.classList.contains("cal-task-title")) {
				Modele.updateTaskTitleInEvent(state, key, ev.id, taskId, evn.target.value);
				Modele.saveAll(state);
			}
		});
		tasksUI.list.addEventListener("click", function (evn) {
			var trow = evn.target.closest("[data-task-id]");
			var key = state.currentProfileKey;
			var ev = selectedEventObj();
			if (!trow || !key || !ev) return;
			var taskId = trow.getAttribute("data-task-id");

			if (evn.target.classList.contains("cal-task-del")) {
				if (confirm("Supprimer cette tâche ?")) {
					Modele.deleteTaskInEvent(state, key, ev.id, taskId);
					Modele.saveAll(state);
					renderAll();
				}
			}
			if (evn.target.classList.contains("cal-cmt-add")) {
				var input = trow.querySelector(".cal-cmt-text");
				var txt = input ? input.value.trim() : "";
				if (!txt) return;
				Modele.addCommentInEvent(state, key, ev.id, taskId, txt);
				Modele.saveAll(state);
				renderAll();
			}
			if (evn.target.classList.contains("cal-cmt-edit")) {
				var crow = evn.target.closest("[data-cmt-id]");
				if (!crow) return;
				var cmtId = crow.getAttribute("data-cmt-id");
				var old = crow.querySelector("div").innerText.split("\n")[0] || "";
				var neu = prompt("Modifier le commentaire :", old);
				if (neu == null) return;
				Modele.updateCommentInEvent(state, key, ev.id, taskId, cmtId, neu);
				Modele.saveAll(state);
				renderAll();
			}
			if (evn.target.classList.contains("cal-cmt-del")) {
				var crow2 = evn.target.closest("[data-cmt-id]");
				if (!crow2) return;
				var cmtId2 = crow2.getAttribute("data-cmt-id");
				if (confirm("Supprimer ce commentaire ?")) {
					Modele.deleteCommentInEvent(state, key, ev.id, cmtId2);
					Modele.saveAll(state);
					renderAll();
				}
			}
		});

		/* Premier rendu */
		refreshProfilesSelect();
		renderAll();
	};
})(window);

# ./Web/gestion/javascript/calendrier/calendrier_controller.js

# ./Web/gestion/javascript/calendrier/calendrier_modele.js
(function (window) {
	"use strict";
	var STORAGE_KEY = "calendrier_personnel";

	function nowFrLabel() {
		var d = new Date();
		var date = d.toLocaleDateString("fr-FR");
		var time = d.toLocaleTimeString("fr-FR", { hour: "2-digit", minute: "2-digit" });
		return date + " " + time;
	}
	function uid() {
		return "e" + Math.random().toString(36).slice(2, 10);
	}

	function loadAll() {
		try {
			var raw = window.localStorage.getItem(STORAGE_KEY);
			var obj = raw ? JSON.parse(raw) : { profils: {}, currentProfileKey: null };
			if (!obj || typeof obj !== "object") obj = { profils: {}, currentProfileKey: null };
			var profils = obj.profils || {};
			for (var k in profils)
				if (Object.prototype.hasOwnProperty.call(profils, k)) {
					var p = profils[k] || {};
					if (!Array.isArray(p.events)) p.events = [];
					for (var i = 0; i < p.events.length; i++) {
						var ev = p.events[i];
						if (!Array.isArray(ev.subtasks)) ev.subtasks = [];
						if (!Array.isArray(ev.tasks)) ev.tasks = []; // tâches par évènement
					}
					profils[k] = p;
				}
			obj.profils = profils;
			return obj;
		} catch (e) {
			return { profils: {}, currentProfileKey: null };
		}
	}
	function saveAll(state) {
		window.localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
	}

	function nextProfilNumber(state) {
		var max = 0,
			keys = Object.keys(state.profils || {});
		for (var i = 0; i < keys.length; i++) {
			var p = state.profils[keys[i]];
			var m = /^Profil\s+(\d+)$/.exec(p && p.name);
			if (m) max = Math.max(max, parseInt(m[1], 10));
		}
		return max + 1;
	}

	function createProfile(state, name) {
		var label = String(name || "Profil " + nextProfilNumber(state)).trim();
		var createdFr = nowFrLabel();
		var subKey = label + " — créé le " + createdFr;
		if (state.profils[subKey]) subKey += " #" + Math.floor(Math.random() * 1000);
		state.profils[subKey] = {
			name: label,
			createdFr: createdFr,
			createdISO: new Date().toISOString(),
			events: [], // chaque évènement contient ses propres tasks[]
		};
		state.currentProfileKey = subKey;
		return subKey;
	}
	function renameProfile(state, key, newName) {
		if (!state.profils[key]) return;
		var label = String(newName || "").trim();
		if (!label) return;
		state.profils[key].name = label;
	}
	function deleteProfile(state, key) {
		if (state.profils[key]) {
			delete state.profils[key];
			state.currentProfileKey = Object.keys(state.profils)[0] || null;
		}
	}
	function setCurrentProfile(state, key) {
		if (state.profils[key]) state.currentProfileKey = key;
	}
	function getCurrentProfile(state) {
		if (!state.currentProfileKey) return null;
		return state.profils[state.currentProfileKey] || null;
	}

	/* ======== Évènements ======== */
	function addEvent(state, profileKey, evt) {
		evt.id = uid();
		if (!Array.isArray(evt.subtasks)) evt.subtasks = [];
		if (!Array.isArray(evt.tasks)) evt.tasks = []; // initialise conteneur de tâches
		state.profils[profileKey].events.push(evt);
		return evt.id;
	}
	function updateEvent(state, profileKey, evt) {
		var list = state.profils[profileKey].events;
		for (var i = 0; i < list.length; i++)
			if (list[i].id === evt.id) {
				// préserver tasks si non fourni
				if (!Array.isArray(evt.tasks)) evt.tasks = Array.isArray(list[i].tasks) ? list[i].tasks : [];
				if (!Array.isArray(evt.subtasks)) evt.subtasks = Array.isArray(list[i].subtasks) ? list[i].subtasks : [];
				list[i] = evt;
				return true;
			}
		return false;
	}
	function deleteEvent(state, profileKey, id) {
		var list = state.profils[profileKey].events;
		for (var i = list.length - 1; i >= 0; i--) if (list[i].id === id) list.splice(i, 1);
	}
	function listEventsOnDay(profile, y, m, d) {
		var out = [];
		for (var i = 0; i < profile.events.length; i++) {
			var e = profile.events[i];
			var dt = new Date(e.startISO);
			if (dt.getFullYear() === y && dt.getMonth() === m && dt.getDate() === d) out.push(e);
		}
		out.sort(function (a, b) {
			return +new Date(a.startISO) - +new Date(b.startISO);
		});
		return out;
	}
	function detectOverlap(profile, evt) {
		var s = +new Date(evt.startISO),
			e = +new Date(evt.endISO);
		for (var i = 0; i < profile.events.length; i++) {
			var it = profile.events[i];
			if (it.id === evt.id) continue;
			var s2 = +new Date(it.startISO),
				e2 = +new Date(it.endISO);
			if (Math.max(s, s2) < Math.min(e, e2)) return it;
		}
		return null;
	}
	function proposeMove(profile, evt) {
		var start = new Date(evt.startISO),
			end = new Date(evt.endISO);
		var day = start.getDate(),
			mon = start.getMonth(),
			yr = start.getFullYear();
		for (var tries = 48; tries-- > 0; ) {
			var clash = detectOverlap(profile, { id: evt.id, startISO: start.toISOString(), endISO: end.toISOString() });
			if (!clash && start.getDate() === day && start.getMonth() === mon && start.getFullYear() === yr) {
				return { startISO: start.toISOString(), endISO: end.toISOString() };
			}
			start = new Date(+start + 30 * 60000);
			end = new Date(+end + 30 * 60000);
		}
		return null;
	}
	function planBetween(profile, eventIdA, eventIdB, draft) {
		var A = null,
			B = null;
		for (var i = 0; i < profile.events.length; i++) {
			if (profile.events[i].id === eventIdA) A = profile.events[i];
			if (profile.events[i].id === eventIdB) B = profile.events[i];
		}
		if (!A || !B) return null;
		var aEnd = +new Date(A.endISO),
			bStart = +new Date(B.startISO);
		if (bStart <= aEnd) return null;
		var mid = new Date((aEnd + bStart) / 2);
		var durMin = Math.max(15, draft.durationMin || 30);
		var start = new Date(+mid - (durMin * 60000) / 2);
		var end = new Date(+start + durMin * 60000);
		return { startISO: start.toISOString(), endISO: end.toISOString() };
	}
	function expandIntoSubtasks(evt, n) {
		n = Math.max(1, Math.floor(Number(n) || 0));
		var subs = [];
		for (var i = 1; i <= n; i++) subs.push({ id: uid(), label: "Sous-tâche " + i, done: false });
		evt.subtasks = subs;
		return evt;
	}
	function getEventById(state, profileKey, eventId) {
		var list = (state.profils[profileKey] || {}).events || [];
		for (var i = 0; i < list.length; i++) if (list[i].id === eventId) return list[i];
		return null;
	}

	/* ======== Tâches PAR ÉVÈNEMENT ======== */
	function addTaskToEvent(state, profileKey, eventId, title) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev) return null;
		if (!Array.isArray(ev.tasks)) ev.tasks = [];
		var t = { id: uid(), title: String(title || "").trim() || "Nouvelle tâche", done: false, comments: [] };
		ev.tasks.push(t);
		return t.id;
	}
	function updateTaskTitleInEvent(state, profileKey, eventId, taskId, title) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev || !Array.isArray(ev.tasks)) return;
		for (var i = 0; i < ev.tasks.length; i++)
			if (ev.tasks[i].id === taskId) {
				ev.tasks[i].title = String(title || "").trim();
				return;
			}
	}
	function toggleTaskInEvent(state, profileKey, eventId, taskId, done) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev || !Array.isArray(ev.tasks)) return;
		for (var i = 0; i < ev.tasks.length; i++)
			if (ev.tasks[i].id === taskId) {
				ev.tasks[i].done = !!done;
				return;
			}
	}
	function deleteTaskInEvent(state, profileKey, eventId, taskId) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev || !Array.isArray(ev.tasks)) return;
		for (var i = ev.tasks.length - 1; i >= 0; i--)
			if (ev.tasks[i].id === taskId) {
				ev.tasks.splice(i, 1);
				return;
			}
	}
	function addCommentInEvent(state, profileKey, eventId, taskId, text) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev || !Array.isArray(ev.tasks)) return;
		for (var i = 0; i < ev.tasks.length; i++)
			if (ev.tasks[i].id === taskId) {
				ev.tasks[i].comments.push({ id: uid(), text: String(text || "").trim(), createdISO: new Date().toISOString() });
				return;
			}
	}
	function updateCommentInEvent(state, profileKey, eventId, taskId, commentId, text) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev || !Array.isArray(ev.tasks)) return;
		for (var i = 0; i < ev.tasks.length; i++)
			if (ev.tasks[i].id === taskId) {
				var cs = ev.tasks[i].comments;
				for (var j = 0; j < cs.length; j++)
					if (cs[j].id === commentId) {
						cs[j].text = String(text || "").trim();
						cs[j].updatedISO = new Date().toISOString();
						return;
					}
			}
	}
	function deleteCommentInEvent(state, profileKey, eventId, commentId) {
		var ev = getEventById(state, profileKey, eventId);
		if (!ev || !Array.isArray(ev.tasks)) return;
		for (var i = 0; i < ev.tasks.length; i++) {
			var cs = ev.tasks[i].comments;
			for (var j = cs.length - 1; j >= 0; j--)
				if (cs[j].id === commentId) {
					cs.splice(j, 1);
					return;
				}
		}
	}

	window.CalendrierModele = {
		STORAGE_KEY: STORAGE_KEY,
		loadAll: loadAll,
		saveAll: saveAll,
		createProfile: createProfile,
		renameProfile: renameProfile,
		deleteProfile: deleteProfile,
		setCurrentProfile: setCurrentProfile,
		getCurrentProfile: getCurrentProfile,
		addEvent: addEvent,
		updateEvent: updateEvent,
		deleteEvent: deleteEvent,
		listEventsOnDay: listEventsOnDay,
		detectOverlap: detectOverlap,
		proposeMove: proposeMove,
		planBetween: planBetween,
		expandIntoSubtasks: expandIntoSubtasks,
		// tâches par évènement
		addTaskToEvent: addTaskToEvent,
		updateTaskTitleInEvent: updateTaskTitleInEvent,
		toggleTaskInEvent: toggleTaskInEvent,
		deleteTaskInEvent: deleteTaskInEvent,
		addCommentInEvent: addCommentInEvent,
		updateCommentInEvent: updateCommentInEvent,
		deleteCommentInEvent: deleteCommentInEvent,
		getEventById: getEventById,
	};
})(window);

# ./Web/gestion/javascript/calendrier/calendrier_modele.js

# ./Web/gestion/javascript/calendrier/calendrier_view.js
(function (window, document) {
	"use strict";
	function pad2(n) {
		return (n < 10 ? "0" : "") + n;
	}
	function formatTime(dt) {
		return pad2(dt.getHours()) + ":" + pad2(dt.getMinutes());
	}
	function weekdayNames() {
		return ["Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"];
	}
	function ucFirstFr(s) {
		return s ? s.charAt(0).toLocaleUpperCase("fr-FR") + s.slice(1) : s;
	}
	function escapeHtml(s) {
		return String(s).replace(/[&<>"']/g, function (m) {
			return { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[m];
		});
	}

	function createUI(opts) {
		if (!opts || !opts.mount) throw new Error("CalendrierView.createUI: {mount} requis.");
		var mount = opts.mount;
		mount.innerHTML = "";

		/* Barre profils */
		var bar = document.createElement("div");
		bar.className = "d-flex align-items-end flex-wrap gap-3 mb-3";
		var profGroup = document.createElement("div");
		profGroup.className = "d-flex align-items-end gap-2";
		var labP = document.createElement("label");
		labP.className = "form-label small mb-0";
		labP.textContent = "Profil";
		var selP = document.createElement("select");
		selP.className = "form-select";
		selP.style.minWidth = "280px";
		var btnNewP = document.createElement("button");
		btnNewP.className = "btn btn-outline-primary";
		btnNewP.type = "button";
		btnNewP.textContent = "Nouveau profil +";
		var btnRenP = document.createElement("button");
		btnRenP.className = "btn btn-outline-secondary";
		btnRenP.type = "button";
		btnRenP.textContent = "Renommer";
		var btnDelP = document.createElement("button");
		btnDelP.className = "btn btn-outline-danger";
		btnDelP.type = "button";
		btnDelP.textContent = "Supprimer le profil";
		profGroup.appendChild(labP);
		profGroup.appendChild(selP);
		profGroup.appendChild(btnNewP);
		profGroup.appendChild(btnRenP);
		profGroup.appendChild(btnDelP);

		/* Nav mois */
		var nav = document.createElement("div");
		nav.className = "d-flex align-items-center gap-2 ms-auto";
		var btnPrev = document.createElement("button");
		btnPrev.className = "btn btn-outline-secondary";
		btnPrev.type = "button";
		btnPrev.textContent = "‹";
		var title = document.createElement("h5");
		title.className = "mb-0";
		var btnNext = document.createElement("button");
		btnNext.className = "btn btn-outline-secondary";
		btnNext.type = "button";
		btnNext.textContent = "›";
		var btnToday = document.createElement("button");
		btnToday.className = "btn btn-outline-secondary";
		btnToday.type = "button";
		btnToday.textContent = "Aujourd’hui";
		nav.appendChild(btnPrev);
		nav.appendChild(title);
		nav.appendChild(btnNext);
		nav.appendChild(btnToday);

		bar.appendChild(profGroup);
		bar.appendChild(nav);
		mount.appendChild(bar);

		/* Grille + colonne droite */
		var row = document.createElement("div");
		row.className = "row g-3";

		// Grille calendrier
		var colGrid = document.createElement("div");
		colGrid.className = "col-lg-8";
		var gridCard = document.createElement("div");
		gridCard.className = "card";
		var gridHead = document.createElement("div");
		gridHead.className = "card-header";
		gridHead.textContent = "Calendrier (mois)";
		var gridBody = document.createElement("div");
		gridBody.className = "card-body p-0";
		var table = document.createElement("table");
		table.className = "table table-sm mb-0 align-middle table-fixed";
		var thead = document.createElement("thead");
		thead.className = "table-light";
		var trh = document.createElement("tr");
		var wdays = weekdayNames();
		for (var i = 0; i < wdays.length; i++) {
			var th = document.createElement("th");
			th.textContent = wdays[i];
			trh.appendChild(th);
		}
		thead.appendChild(trh);
		var tbody = document.createElement("tbody");
		table.appendChild(thead);
		table.appendChild(tbody);
		gridBody.appendChild(table);
		gridCard.appendChild(gridHead);
		gridCard.appendChild(gridBody);
		colGrid.appendChild(gridCard);

		// Colonne droite
		var colRight = document.createElement("div");
		colRight.className = "col-lg-4";

		// Carte Évènement
		var editCard = document.createElement("div");
		editCard.className = "card";
		var editHead = document.createElement("div");
		editHead.className = "card-header";
		editHead.textContent = "Évènement";
		var editBody = document.createElement("div");
		editBody.className = "card-body";
		var form = document.createElement("form");
		form.id = "cal-form";

		function input(label, type) {
			var g = document.createElement("div");
			g.className = "mb-2";
			var l = document.createElement("label");
			l.className = "form-label";
			l.textContent = label;
			var i = document.createElement("input");
			i.type = type || "text";
			i.className = "form-control";
			g.appendChild(l);
			g.appendChild(i);
			return { group: g, input: i };
		}
		function textarea(label) {
			var g = document.createElement("div");
			g.className = "mb-2";
			var l = document.createElement("label");
			l.className = "form-label";
			l.textContent = label;
			var t = document.createElement("textarea");
			t.className = "form-control";
			t.rows = 3;
			g.appendChild(l);
			g.appendChild(t);
			return { group: g, input: t };
		}

		var fDate = input("Date", "date"),
			fStart = input("Début (HH:MM)", "time"),
			fEnd = input("Fin (HH:MM)", "time");
		var fTitle = input("Objet", "text"),
			fPeople = textarea("Personnes présentes (séparées par des virgules)"),
			fContent = textarea("Contenu / Notes");
		var fSubWrap = document.createElement("div");
		fSubWrap.className = "mb-2";
		var fSubChk = document.createElement("input");
		fSubChk.type = "checkbox";
		fSubChk.className = "form-check-input me-2";
		var fSubLab = document.createElement("label");
		fSubLab.className = "form-check-label me-2";
		fSubLab.textContent = "Créer des sous-tâches";
		var fSubN = document.createElement("input");
		fSubN.type = "number";
		fSubN.min = "1";
		fSubN.value = "3";
		fSubN.className = "form-control d-inline-block";
		fSubN.style.width = "90px";
		fSubWrap.appendChild(fSubChk);
		fSubWrap.appendChild(fSubLab);
		fSubWrap.appendChild(fSubN);

		var fHiddenId = document.createElement("input");
		fHiddenId.type = "hidden";
		var btnRow = document.createElement("div");
		btnRow.className = "d-flex gap-2 mt-2";
		var btnSave = document.createElement("button");
		btnSave.type = "submit";
		btnSave.className = "btn btn-primary";
		btnSave.textContent = "Enregistrer";
		var btnDelete = document.createElement("button");
		btnDelete.type = "button";
		btnDelete.className = "btn btn-outline-danger ms-auto";
		btnDelete.textContent = "Supprimer";

		form.appendChild(fDate.group);
		form.appendChild(fStart.group);
		form.appendChild(fEnd.group);
		form.appendChild(fTitle.group);
		form.appendChild(fPeople.group);
		form.appendChild(fContent.group);
		form.appendChild(fSubWrap);
		form.appendChild(fHiddenId);
		btnRow.appendChild(btnSave);
		btnRow.appendChild(btnDelete);
		form.appendChild(btnRow);
		editBody.appendChild(form);
		editCard.appendChild(editHead);
		editCard.appendChild(editBody);

		// Carte Tâches (liées à l'évènement sélectionné)
		var taskCard = document.createElement("div");
		taskCard.className = "card mt-3";
		var taskHead = document.createElement("div");
		taskHead.className = "card-header";
		taskHead.textContent = "Tâches (de l’évènement)";
		var taskBody = document.createElement("div");
		taskBody.className = "card-body";
		var hint = document.createElement("p");
		hint.className = "text-muted small mb-2";
		hint.textContent = "Sélectionnez ou enregistrez un évènement pour gérer ses tâches.";
		var newRow = document.createElement("div");
		newRow.className = "input-group mb-2";
		var inpNewTask = document.createElement("input");
		inpNewTask.type = "text";
		inpNewTask.className = "form-control";
		inpNewTask.placeholder = "Nouvelle tâche…";
		var btnAddTask = document.createElement("button");
		btnAddTask.className = "btn btn-outline-primary";
		btnAddTask.type = "button";
		btnAddTask.textContent = "Ajouter";
		newRow.appendChild(inpNewTask);
		newRow.appendChild(btnAddTask);
		var taskList = document.createElement("div");
		taskList.id = "cal-task-list";
		taskList.className = "d-flex flex-column gap-2";
		taskBody.appendChild(hint);
		taskBody.appendChild(newRow);
		taskBody.appendChild(taskList);
		taskCard.appendChild(taskHead);
		taskCard.appendChild(taskBody);

		colRight.appendChild(editCard);
		colRight.appendChild(taskCard);
		row.appendChild(colGrid);
		row.appendChild(colRight);
		mount.appendChild(row);

		function renderMonth(ctx) {
			var label = new Date(ctx.y, ctx.m, 1).toLocaleDateString("fr-FR", { month: "long", year: "numeric" });
			title.textContent = ucFirstFr(label);

			tbody.innerHTML = "";
			var first = new Date(ctx.y, ctx.m, 1);
			var jsDay = first.getDay();
			if (jsDay === 0) jsDay = 7;
			var leading = jsDay - 1;
			var days = new Date(ctx.y, ctx.m + 1, 0).getDate();
			var cells = leading + days,
				rows = Math.ceil(cells / 7);
			var d = 1;
			for (var r = 0; r < rows; r++) {
				var tr = document.createElement("tr");
				for (var c = 0; c < 7; c++) {
					var td = document.createElement("td");
					td.style.verticalAlign = "top";
					td.className = "align-top";
					if (r === 0 && c < leading) {
						td.innerHTML = "&nbsp;";
					} else if (d <= days) {
						(function (day) {
							var head = document.createElement("div");
							head.className = "d-flex justify-content-between align-items-start";
							var strong = document.createElement("strong");
							strong.textContent = String(day);
							var btnAdd = document.createElement("button");
							btnAdd.type = "button";
							btnAdd.className = "btn btn-sm btn-outline-primary";
							btnAdd.textContent = "+";
							head.appendChild(strong);
							head.appendChild(btnAdd);
							td.appendChild(head);

							var list = document.createElement("div");
							list.className = "mt-1 d-flex flex-column gap-1";
							var items = window.CalendrierModele.listEventsOnDay(ctx.profile, ctx.y, ctx.m, day);
							for (var i2 = 0; i2 < items.length; i2++) {
								var e = items[i2],
									sdt = new Date(e.startISO),
									edt = new Date(e.endISO);
								var b = document.createElement("button");
								b.type = "button";
								b.className = "btn btn-sm btn-light text-start";
								b.setAttribute("data-id", e.id);
								b.innerHTML = '<span class="badge text-bg-secondary me-1">' + formatTime(sdt) + "-" + formatTime(edt) + "</span>" + escapeHtml(e.title || "(sans objet)");
								list.appendChild(b);
							}
							td.appendChild(list);

							btnAdd.addEventListener("click", function () {
								var base = new Date(ctx.y, ctx.m, day);
								var iso = base.toISOString().slice(0, 10);
								fHiddenId.value = ""; // pas d’évènement encore
								fDate.input.value = iso;
								fStart.input.value = "09:00";
								fEnd.input.value = "10:00";
								fTitle.input.value = "";
								fPeople.input.value = "";
								fContent.input.value = "";
								mount.dispatchEvent(new CustomEvent("cal:event-selected")); // rafraîchir panel tâches (désactivé)
							});
							list.addEventListener("click", function (ev) {
								var b = ev.target.closest("button[data-id]");
								if (!b) return;
								var id = b.getAttribute("data-id");
								var evts = ctx.profile.events;
								for (var j = 0; j < evts.length; j++)
									if (evts[j].id === id) {
										var e2 = evts[j],
											s = new Date(e2.startISO),
											en = new Date(e2.endISO);
										fHiddenId.value = e2.id;
										fDate.input.value = e2.startISO.slice(0, 10);
										fStart.input.value = pad2(s.getHours()) + ":" + pad2(s.getMinutes());
										fEnd.input.value = pad2(en.getHours()) + ":" + pad2(en.getMinutes());
										fTitle.input.value = e2.title || "";
										fPeople.input.value = e2.attendeesCsv || "";
										fContent.input.value = e2.content || "";
										mount.dispatchEvent(new CustomEvent("cal:event-selected")); // rafraîchir panel tâches (lié à cet évènement)
										break;
									}
							});
						})(d);
						d++;
					} else {
						td.innerHTML = "&nbsp;";
					}
					tr.appendChild(td);
				}
				tbody.appendChild(tr);
			}
		}

		function renderTasks(profile, eventObj) {
			// État disabled si pas d’évènement sélectionné
			var hasEvent = !!(eventObj && eventObj.id);
			inpNewTask.disabled = !hasEvent;
			btnAddTask.disabled = !hasEvent;
			taskList.innerHTML = "";
			if (!hasEvent) return;

			for (var i = 0; i < (eventObj.tasks || []).length; i++) {
				var t = eventObj.tasks[i];

				var row = document.createElement("div");
				row.className = "border rounded p-2";
				row.setAttribute("data-task-id", t.id);

				var top = document.createElement("div");
				top.className = "d-flex align-items-center gap-2";
				var chk = document.createElement("input");
				chk.type = "checkbox";
				chk.className = "form-check-input cal-task-done";
				chk.checked = !!t.done;
				var titleInp = document.createElement("input");
				titleInp.type = "text";
				titleInp.className = "form-control form-control-sm cal-task-title";
				titleInp.value = t.title;
				var btnDel = document.createElement("button");
				btnDel.type = "button";
				btnDel.className = "btn btn-sm btn-outline-danger cal-task-del ms-auto";
				btnDel.textContent = "Supprimer";
				top.appendChild(chk);
				top.appendChild(titleInp);
				top.appendChild(btnDel);

				var cWrap = document.createElement("div");
				cWrap.className = "mt-2";
				var cTitle = document.createElement("div");
				cTitle.className = "fw-semibold mb-1";
				cTitle.textContent = "Commentaires";
				var cList = document.createElement("div");
				cList.className = "d-flex flex-column gap-1";

				for (var j = 0; j < (t.comments || []).length; j++) {
					var c = t.comments[j];
					var line = document.createElement("div");
					line.className = "d-flex align-items-start gap-2";
					line.setAttribute("data-cmt-id", c.id);
					var txt = document.createElement("div");
					txt.className = "flex-grow-1";
					var meta = new Date(c.createdISO).toLocaleString("fr-FR", { hour: "2-digit", minute: "2-digit", day: "2-digit", month: "2-digit", year: "numeric" });
					var upd = c.updatedISO
						? " (modifié " + new Date(c.updatedISO).toLocaleString("fr-FR", { hour: "2-digit", minute: "2-digit", day: "2-digit", month: "2-digit", year: "numeric" }) + ")"
						: "";
					txt.innerHTML = "<div>" + escapeHtml(c.text) + '</div><small class="text-muted">' + meta + upd + "</small>";
					var btnEdit = document.createElement("button");
					btnEdit.type = "button";
					btnEdit.className = "btn btn-sm btn-outline-secondary cal-cmt-edit";
					btnEdit.textContent = "Modifier";
					var btnDelC = document.createElement("button");
					btnDelC.type = "button";
					btnDelC.className = "btn btn-sm btn-outline-danger cal-cmt-del";
					btnDelC.textContent = "Supprimer";
					line.appendChild(txt);
					line.appendChild(btnEdit);
					line.appendChild(btnDelC);
					cList.appendChild(line);
				}

				var addRow = document.createElement("div");
				addRow.className = "input-group input-group-sm mt-1";
				var inp = document.createElement("input");
				inp.type = "text";
				inp.className = "form-control cal-cmt-text";
				inp.placeholder = "Nouveau commentaire…";
				var btnAdd = document.createElement("button");
				btnAdd.className = "btn btn-outline-primary cal-cmt-add";
				btnAdd.type = "button";
				btnAdd.textContent = "Ajouter";
				addRow.appendChild(inp);
				addRow.appendChild(btnAdd);

				cWrap.appendChild(cTitle);
				cWrap.appendChild(cList);
				cWrap.appendChild(addRow);

				row.appendChild(top);
				row.appendChild(cWrap);
				taskList.appendChild(row);
			}
		}

		return {
			mount: mount,
			profileSelect: selP,
			btnNewProfile: btnNewP,
			btnRenameProfile: btnRenP,
			btnDeleteProfile: btnDelP,
			btnPrev: btnPrev,
			btnNext: btnNext,
			btnToday: btnToday,
			renderMonth: renderMonth,
			renderTasks: renderTasks,
			getForm: function () {
				return {
					id: (function () {
						return fHiddenId;
					})(),
					date: fDate.input,
					start: fStart.input,
					end: fEnd.input,
					title: fTitle.input,
					people: fPeople.input,
					content: fContent.input,
					subChk: fSubChk,
					subN: fSubN,
				};
			},
			tasksUI: { list: taskList, addBtn: btnAddTask, newInput: inpNewTask },
			notify: {
				eventSelectedOnMount: function () {
					mount.dispatchEvent(new CustomEvent("cal:event-selected"));
				},
			},
		};
	}

	window.CalendrierView = { createUI: createUI };
})(window, document);

# ./Web/gestion/javascript/calendrier/calendrier_view.js

# ./Web/gestion/javascript/covoiturage/covoiturage_controller.js
/* convoiturage_controller.js — Contrôleur */
(function (window) {
	"use strict";

	var Modele = window.ConvoiturageModele;
	var View = window.ConvoiturageView;

	// API publique
	window.initConvoiturage = function initConvoiturage(opts) {
		if (!opts || !opts.mount) throw new Error("initConvoiturage: {mount} requis.");

		var ui = View.createUI({ mount: opts.mount });

		// bornes de l'index d'arrêt saisi par l'utilisateur (1 = départ, N = arrivée)
		function refreshStopMax() {
			var stops = ui.collectStops(); // [ "Origine", ...escales..., "Destination" ]
			ui.groupsTbl.setMaxFor("stop", Math.max(1, stops.length)); // 1..N (N = nb arrêts totaux)
			ui.updateNLabels(stops.length); // maj "N" -> nombre contextuel
		}

		// Handlers
		ui.btnAddStop.button.addEventListener("click", function () {
			ui.stopsList.add({ label: "Nouvelle escale" });
			refreshStopMax();
		});

		// Si l'utilisateur modifie/supprime une escale via l'UI interne du listEditor
		ui.stopsHost.addEventListener("input", refreshStopMax);
		ui.stopsHost.addEventListener("change", refreshStopMax);
		ui.stopsHost.addEventListener("click", function () {
			// laisse le DOM se mettre à jour puis recalcule
			setTimeout(refreshStopMax, 0);
		});

		ui.btnAddCar.button.addEventListener("click", function () {
			ui.carsList.add({ capacity: 4, name: "" });
		});

		ui.cGroupCount.input.addEventListener("change", function () {
			ui.groupsTbl.setRowCount(Math.max(1, parseInt(ui.cGroupCount.input.value, 10) || 1));
			ui.groupsTbl.rerollRandoms();
		});

		ui.btnReg.button.addEventListener("click", function () {
			ui.groupsTbl.rerollRandoms();
		});

		ui.btnCompute.addEventListener("click", function () {
			var raw = ui.collectState();
			var check = Modele.validateState(raw);
			if (!check.ok) {
				window.GestionUI.alert(ui.spanAlert, "danger", check.message);
				ui.results.innerHTML = "";
				return;
			}
			var stateWithPeople = Modele.attachPeopleToGroups(raw);
			var itemsWrap = Modele.partitionGroups(stateWithPeople);
			var plan = Modele.assignItemsToTrips(itemsWrap.items, stateWithPeople);
			View.renderPlan(ui.results, plan, stateWithPeople);
			window.GestionUI.alert(ui.spanAlert, "success", "Plan généré.");
		});

		// Init bornes
		refreshStopMax();
	};
})(window);

# ./Web/gestion/javascript/covoiturage/covoiturage_controller.js

# ./Web/gestion/javascript/covoiturage/covoiturage_modele.js
/* convoiturage_modele.js — Modèle */
(function (window) {
	"use strict";

	var NAME_POOL = window.NOMS_POOL || [];
	var nameCounter = 0;

	function nextPersonName() {
		var base = NAME_POOL[nameCounter % NAME_POOL.length] || "Personne " + (nameCounter + 1);
		var round = Math.floor(nameCounter / NAME_POOL.length);
		nameCounter++;
		return round === 0 ? base : base + " (" + (round + 1) + ")";
	}

	/* ====== validation ====== */
	function validateState(state) {
		if (!state.cars || !state.cars.length) return { ok: false, message: "Ajoutez au moins une voiture." };
		if (!state.stops || state.stops.length < 2) return { ok: false, message: "Définissez au minimum Origine et Destination." };
		var S = state.stops.length - 1;
		for (var i = 0; i < state.groups.length; i++) {
			var st = parseInt(state.groups[i].stop, 10);
			if (!(st >= 1 && st <= S)) return { ok: false, message: "Un groupe a un arrêt invalide (doit être entre 1 et " + S + ")." };
		}
		return { ok: true };
	}

	/* ====== people attach ====== */
	function attachPeopleToGroups(state) {
		nameCounter = 0;
		var groups = [],
			i,
			p;
		for (i = 0; i < state.groups.length; i++) {
			var g = state.groups[i],
				people = [];
			for (p = 0; p < g.size; p++) people.push({ name: nextPersonName(), stop: g.stop, groupId: g.id });
			groups.push({ id: g.id, size: g.size, stop: g.stop, people: people });
		}
		return { stops: state.stops, cars: state.cars, groups: groups };
	}

	/* ====== partition (éviter la séparation sauf contrainte capacité) ====== */
	function partitionGroups(state) {
		var items = [],
			i,
			c;
		var bestCap = 0;
		for (c = 0; c < state.cars.length; c++) if (state.cars[c].capacity > bestCap) bestCap = state.cars[c].capacity;

		for (i = 0; i < state.groups.length; i++) {
			var g = state.groups[i];
			if (g.size <= bestCap) {
				items.push({ groupId: g.id, partIndex: 1, parts: 1, size: g.size, stop: g.stop, people: g.people.slice(0) });
			} else {
				var parts = Math.ceil(g.size / bestCap),
					remaining = g.size,
					offset = 0,
					p,
					take,
					slice;
				for (p = 1; p <= parts; p++) {
					take = Math.min(bestCap, remaining);
					slice = g.people.slice(offset, offset + take);
					items.push({ groupId: g.id, partIndex: p, parts: parts, size: take, stop: g.stop, people: slice, forced: true });
					remaining -= take;
					offset += take;
				}
			}
		}
		// trier par arrêt le plus loin puis par taille décroissante
		items.sort(function (a, b) {
			return b.stop - a.stop || b.size - a.size;
		});
		return { items: items };
	}

	/* ====== assignation en trajets (min allers-retours puis compacité) ====== */
	function assignItemsToTrips(items, state) {
		var openTrips = [],
			trips = [],
			tCounter = 0;
		var tripsPerCar = {},
			i,
			c;

		for (c = 0; c < state.cars.length; c++) tripsPerCar[state.cars[c].id] = 0;

		for (i = 0; i < items.length; i++) {
			var it = items[i],
				best = null,
				bestWaste = Infinity,
				ot,
				t;

			// Essayer de remplir un trajet ouvert
			for (ot = 0; ot < openTrips.length; ot++) {
				t = openTrips[ot];
				if (t.capLeft >= it.size) {
					var waste = t.capLeft - it.size;
					if (waste < bestWaste) {
						bestWaste = waste;
						best = t;
					}
				}
			}

			var chosen = best;
			if (!chosen) {
				// ouvrir un nouveau trajet sur la plus grande capacité disponible (ou la moins chargée ex æquo)
				var chosenCar = null;
				for (c = 0; c < state.cars.length; c++) {
					var car = state.cars[c];
					if (!chosenCar) chosenCar = car;
					else if (car.capacity > chosenCar.capacity) chosenCar = car;
					else if (car.capacity === chosenCar.capacity && (tripsPerCar[car.id] || 0) < (tripsPerCar[chosenCar.id] || 0)) chosenCar = car;
				}
				chosen = { id: ++tCounter, carId: chosenCar.id, capLeft: chosenCar.capacity, maxCap: chosenCar.capacity, stops: [], items: [] };
				openTrips.push(chosen);
				tripsPerCar[chosenCar.id] = (tripsPerCar[chosenCar.id] || 0) + 1;
			}

			chosen.items.push(it);
			chosen.capLeft -= it.size;
			addStopUnique(chosen.stops, it.stop);

			if (chosen.capLeft === 0) closeTrip(chosen);
		}

		// fermer les trajets restants
		for (var k = openTrips.length - 1; k >= 0; k--) closeTrip(openTrips[k]);

		function closeTrip(t) {
			// Les arrêts se font dans l’ordre croissant (du plus proche au plus lointain), Origine implicite (0)
			t.stops.sort(function (a, b) {
				return a - b;
			});
			trips.push({ id: t.id, carId: t.carId, capacity: t.maxCap, stops: t.stops.slice(0), items: t.items.slice(0) });
			var idx = indexOfTrip(openTrips, t);
			if (idx >= 0) openTrips.splice(idx, 1);
		}

		// ordre d’affichage : par voiture puis par arrêt max desservi
		trips.sort(function (a, b) {
			var d = a.carId - b.carId;
			return d !== 0 ? d : maxOfArray(b.stops) - maxOfArray(a.stops);
		});
		return trips;
	}

	/* ====== helpers ====== */
	function addStopUnique(stops, s) {
		for (var i = 0; i < stops.length; i++) if (stops[i] === s) return;
		stops.push(s);
	}
	function indexOfTrip(arr, t) {
		for (var i = 0; i < arr.length; i++) if (arr[i] === t) return i;
		return -1;
	}
	function maxOfArray(a) {
		if (!a.length) return -Infinity;
		var m = a[0];
		for (var i = 1; i < a.length; i++) if (a[i] > m) m = a[i];
		return m;
	}

	window.ConvoiturageModele = {
		validateState: validateState,
		attachPeopleToGroups: attachPeopleToGroups,
		partitionGroups: partitionGroups,
		assignItemsToTrips: assignItemsToTrips,
	};
})(window);

# ./Web/gestion/javascript/covoiturage/covoiturage_modele.js

# ./Web/gestion/javascript/covoiturage/covoiturage_view.js
/* convoiturage_view.js — Vue */
(function (window, document) {
	"use strict";

	function createUI(opts) {
		if (!opts || !opts.mount) throw new Error("ConvoiturageView.createUI: {mount} requis.");
		var mount = opts.mount;

		// Barre de paramètres générales
		var rowTop = document.createElement("div");
		rowTop.className = "row g-3 align-items-end mb-3";
		var cOrigin = colControl("Provenance", "text", "conv-origin", "Origine");
		var cDest = colControl("Destination", "text", "conv-dest", "Destination");
		var cStopCnt = colControl("Nombre d'escales (via +)", "number", "conv-stopCount", 0, { min: 0, readonly: true });
		rowTop.appendChild(cOrigin.col);
		rowTop.appendChild(cDest.col);
		rowTop.appendChild(cStopCnt.col);
		mount.appendChild(rowTop);

		// Escales (entre Origine et Destination)
		var stopsHost = document.createElement("div");
		mount.appendChild(stopsHost);
		var stopsList = window.GestionUI.listEditor(stopsHost, {
			title: "Escale",
			// 1 SEUL bouton : on supprime le bouton interne du listEditor
			addLabel: null,
			fields: [{ key: "label", label: "Nom de l'escale", type: "text", value: "Escale" }],
			initial: [],
			idKey: "id",
		});
		var btnAddStop = buttonControl("Ajouter une escale", "conv-btnAddStop", "btn btn-outline-primary mb-3");
		stopsHost.appendChild(btnAddStop.col);

		// Titre dynamique des groupes (on gère nous-mêmes le libellé avec N)
		var groupsTitle = document.createElement("h5");
		groupsTitle.id = "conv-groups-title";
		groupsTitle.className = "mt-3";
		mount.appendChild(groupsTitle);

		// Voitures
		var carsHost = document.createElement("div");
		mount.appendChild(carsHost);
		var carsList = window.GestionUI.listEditor(carsHost, {
			title: "Voiture",
			// 1) Supprime le bouton interne bleu -> un seul bouton (le nôtre)
			addLabel: null,
			fields: [
				{ key: "name", label: "Nom (optionnel)", type: "text", value: "" },
				{ key: "capacity", label: "Places", type: "number", min: 1, value: 4 },
			],
			initial: [{ name: "", capacity: 4 }],
			idKey: "id",
		});
		var btnAddCar = buttonControl("Ajouter une voiture", "conv-btnAddCar", "btn btn-outline-secondary mb-3");
		carsHost.appendChild(btnAddCar.col);

		// Helpers N dynamiques
		function countStopsTotal() {
			// N = Origine + escales + Destination
			var escalesCount = (stopsList.getData() || []).length;
			return 2 + escalesCount;
		}
		function mkStopLabel(N) {
			return "Arrêt (1 = départ, " + N + " = arrivée)";
		}

		// Groupes
		var rowMid = document.createElement("div");
		rowMid.className = "row g-3 align-items-end mb-3";
		var cGroupCnt = colControl("Nombre de groupes", "number", "conv-groupCount", 1, { min: 1 });
		var btnReg = buttonControl("Régénérer les groupes", "conv-btnRegenerateGroups", "btn btn-outline-secondary");
		rowMid.appendChild(cGroupCnt.col);
		rowMid.appendChild(btnReg.col);
		mount.appendChild(rowMid);

		var groupsHost = document.createElement("div");
		mount.appendChild(groupsHost);
		// libellés initiaux avec N courant
		var N0 = countStopsTotal();
		groupsTitle.textContent = "Groupes (" + mkStopLabel(N0) + ")";
		var groupsTbl = window.GestionUI.tableEditor(groupsHost, {
			title: "", // on gère notre titre à part (groupsTitle)
			rowLabel: "Groupe",
			initialRows: 1,
			columns: [
				// 2) Taille non bornée à 4
				{ key: "size", label: "Taille (personnes)", type: "number", min: 1, value: 1, defaultRandom: true },
				// 2) & 3) Libellé d'arrêt dynamique
				{ key: "stop", label: mkStopLabel(N0), type: "number", min: 1, value: 1, defaultRandom: true },
			],
			randomizeRow: function (col) {
				if (col.key === "size") return window.random_int(col.min || 1, col.max || 4); // random par défaut
				if (col.key === "stop") return 1; // max dynamique via setMaxFor côté contrôleur
				return "";
			},
		});

		// Actions & résultats
		var actions = document.createElement("div");
		actions.className = "sticky-actions border-top";
		var btnCompute = document.createElement("button");
		btnCompute.className = "btn btn-lg btn-primary";
		btnCompute.textContent = "Générer le plan";
		var spanAlert = document.createElement("span");
		spanAlert.id = "conv-computeAlert";
		spanAlert.className = "ms-3";
		actions.appendChild(btnCompute);
		actions.appendChild(spanAlert);
		mount.appendChild(actions);

		var results = document.createElement("div");
		results.id = "conv-results";
		results.className = "mt-4";
		mount.appendChild(results);

		function collectStops() {
			var origin = cOrigin.input.value || "Origine";
			var dest = cDest.input.value || "Destination";
			var escales = stopsList.getData().map(function (e) {
				return String(e.label || "Escale");
			});
			// compteur visuel (lecture seule) : nombre d'escales uniquement
			cStopCnt.input.value = String(escales.length);
			// Index humain: 1..N avec N = list.length (1=Origine, N=Destination)
			var list = [origin].concat(escales).concat([dest]);
			return list;
		}

		function collectState() {
			var stops = collectStops();
			var cars = carsList.getData().map(function (c) {
				return { id: c.id, capacity: Math.max(1, Math.floor(Number(c.capacity) || 1)), name: c.name || "Voiture #" + c.id };
			});
			var groupsHuman = groupsTbl.getData().map(function (g) {
				return { id: g.id, size: Math.max(1, Math.floor(Number(g.size) || 1)), stop: Math.max(1, Math.floor(Number(g.stop) || 1)) };
			});

			// Conversion "1 = départ … N = arrivée" -> interne 1..S (S = nb arrêts après l'origine)
			var S = Math.max(1, stops.length - 1); // 1..S (S inclut Destination)
			var groups = [];
			for (var i = 0; i < groupsHuman.length; i++) {
				var h = groupsHuman[i].stop; // 1..N
				var converted = Math.max(1, Math.min(h - 1, S)); // 1..S  (h-1 : on retire l'origine)
				groups.push({ id: groupsHuman[i].id, size: groupsHuman[i].size, stop: converted });
			}

			return { stops: stops, cars: cars, groups: groups };
		}

		// Mise à jour dynamique de "N" partout (titre + en-tête de colonne)
		function updateNLabels(N) {
			groupsTitle.textContent = "Groupes (" + mkStopLabel(N) + ")";
			// met à jour l'en-tête de colonne "stop" dans le thead rendu par tableEditor
			var thead = groupsHost.querySelector("thead");
			if (thead) {
				var ths = thead.querySelectorAll("th");
				for (var i = 0; i < ths.length; i++) {
					var th = ths[i];
					if (th.textContent.indexOf("Arrêt (") !== -1) {
						th.textContent = mkStopLabel(N);
						break;
					}
				}
			}
		}

		return {
			// exposés
			mount: mount,
			stopsHost: stopsHost,
			cOrigin: cOrigin,
			cDest: cDest,
			cStopCount: cStopCnt,
			stopsList: stopsList,
			btnAddStop: btnAddStop,
			carsList: carsList,
			btnAddCar: btnAddCar,
			cGroupCount: cGroupCnt,
			btnReg: btnReg,
			groupsTbl: groupsTbl,
			btnCompute: btnCompute,
			spanAlert: spanAlert,
			results: results,
			collectStops: collectStops,
			collectState: collectState,
			updateNLabels: updateNLabels,
		};
	}

	function renderPlan(mount, trips, state) {
		var split = {},
			t,
			i;
		for (t = 0; t < trips.length; t++)
			for (i = 0; i < trips[t].items.length; i++) {
				var gid = trips[t].items[i].groupId;
				split[gid] = (split[gid] || 0) + 1;
			}
		var actuallySplit = 0;
		for (var g in split) if (split.hasOwnProperty(g) && split[g] > 1) actuallySplit++;

		var kpis =
			'<div class="row g-3 mb-3">' +
			' <div class="col-auto"><div class="badge text-bg-primary p-3">Allers-retours totaux : <strong>' +
			trips.length +
			"</strong></div></div>" +
			' <div class="col-auto"><div class="badge text-bg-secondary p-3">Groupes séparés : <strong>' +
			actuallySplit +
			"</strong></div></div>" +
			' <div class="col-auto"><div class="badge text-bg-light border p-3">Arrêts (hors origine) : <strong>' +
			(state.stops.length - 1) +
			"</strong></div></div>" +
			"</div>";

		var thead =
			'<thead class="table-light"><tr>' +
			'<th style="width:70px;">#</th><th style="width:110px;">Voiture</th><th style="width:110px;">Capacité</th>' +
			'<th>Groupes embarqués</th><th style="width:260px;">Parcours</th><th style="width:220px;">Remarques</th>' +
			"</tr></thead>";

		var rows = "";
		for (t = 0; t < trips.length; t++) {
			var trip = trips[t];
			var car = getById(state.cars, trip.carId);
			var groupsHtml = "";
			for (i = 0; i < trip.items.length; i++) {
				var it = trip.items[i];
				var stopName = state.stops[it.stop]; // interne: 1..S => affiche bon libellé
				var title = "G" + it.groupId + (it.parts > 1 ? " (part " + it.partIndex + "/" + it.parts + ")" : "") + " : " + it.size + "p → " + stopName;
				var names = [];
				if (it.people) for (var n = 0; n < it.people.length; n++) names.push(it.people[n].name);
				groupsHtml +=
					'<div class="mb-2"><div>' +
					escapeHtml(title) +
					"</div>" +
					"<details><summary>" +
					it.size +
					" personne(s)</summary><small>" +
					(names.length ? escapeHtml(names.join(", ")) : "—") +
					"</small></details></div>";
			}

			var pathTxt =
				"Origine → " +
				trip.stops
					.map(function (s) {
						return state.stops[s];
					})
					.join(" → ") +
				" → Origine";
			var hasSplit = trip.items.some(function (it) {
				return it.parts > 1;
			});
			var remarks = [];
			if (hasSplit) remarks.push('<span class="group-split">Séparation nécessaire</span>');
			if (!trip.stops.length) remarks.push("—");

			rows +=
				"<tr>" +
				"<td>" +
				(t + 1) +
				"</td>" +
				"<td>#" +
				car.id +
				(car.name ? " — " + escapeHtml(car.name) : "") +
				"</td>" +
				"<td>" +
				trip.capacity +
				" p</td>" +
				"<td>" +
				groupsHtml +
				"</td>" +
				"<td>" +
				pathTxt +
				"</td>" +
				"<td>" +
				(remarks.length ? remarks.join("<br>") : "—") +
				"</td>" +
				"</tr>";
		}

		mount.innerHTML =
			kpis +
			'<div class="card"><div class="card-header">Séquence optimale (heuristique)</div>' +
			'<div class="card-body p-0"><div class="table-responsive"><table class="table table-striped table-hover align-middle table-fixed mb-0">' +
			thead +
			"<tbody>" +
			(rows || '<tr><td colspan="6" class="text-center text-muted">Aucun trajet nécessaire</td></tr>') +
			"</tbody></table></div></div>" +
			'<div class="card-footer text-muted">Objectif : minimiser les allers-retours puis éviter les séparations. Les groupes ne sont séparés que si les capacités le rendent inévitables.</div>' +
			"</div>";
	}

	/* ========== helpers vue ========== */
	function colControl(label, type, id, val, attrs) {
		var col = document.createElement("div");
		col.className = "col-auto";
		var lab = document.createElement("label");
		lab.className = "form-label";
		lab.setAttribute("for", id);
		lab.textContent = label;
		var inp = document.createElement("input");
		inp.className = "form-control";
		inp.id = id;
		inp.type = type || "text";
		inp.value = val || "";
		if (attrs) for (var k in attrs) if (attrs.hasOwnProperty(k)) inp.setAttribute(k, attrs[k]);
		col.appendChild(lab);
		col.appendChild(inp);
		return { col: col, input: inp };
	}
	function buttonControl(text, id, klass) {
		var col = document.createElement("div");
		col.className = "col-auto";
		var btn = document.createElement("button");
		btn.className = klass || "btn btn-secondary";
		btn.id = id;
		btn.type = "button";
		btn.textContent = text;
		col.appendChild(btn);
		return { col: col, button: btn };
	}
	function getById(arr, id) {
		for (var i = 0; i < arr.length; i++) if (arr[i].id === id) return arr[i];
		return null;
	}
	function escapeHtml(s) {
		return String(s).replace(/[&<>"']/g, function (m) {
			return { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[m];
		});
	}

	window.ConvoiturageView = { createUI: createUI, renderPlan: renderPlan };
})(window, document);

# ./Web/gestion/javascript/covoiturage/covoiturage_view.js

# ./Web/gestion/utils/GestionUIJS.js
/* GestionUIJS.js — micro-outillage UI (ES5, 2014) */
(function (window, document) {
	"use strict";

	var GestionUI = {};

	/* ============ utilitaires DOM ============ */
	function el(tag, attrs) {
		var node = document.createElement(tag);
		if (attrs)
			for (var k in attrs)
				if (attrs.hasOwnProperty(k)) {
					if (k === "class") node.className = attrs[k];
					else if (k === "text") node.textContent = attrs[k];
					else node.setAttribute(k, attrs[k]);
				}
		return node;
	}
	function empty(node) {
		while (node.firstChild) node.removeChild(node.firstChild);
	}
	function on(node, evt, fn) {
		node.addEventListener(evt, fn);
	}
	function setAttrs(node, attrs) {
		for (var k in attrs)
			if (attrs.hasOwnProperty(k)) {
				if (k === "class") node.className = attrs[k];
				else node.setAttribute(k, attrs[k]);
			}
	}

	/* ============ alert badge ============ */
	GestionUI.alert = function (container, flavor, text) {
		container.innerHTML = '<span class="badge text-bg-' + flavor + '">' + escapeHtml(text) + "</span>";
	};

	/* ============ éditeur de liste (cartes) ============ */
	// options: { title, addLabel, fields: [{key,label,type,min,max}], checks:[{key,label,exclusiveWith}], initial:[], idKey }
	GestionUI.listEditor = function (mount, options) {
		var idKey = options.idKey || "id";
		var seq = 0;
		var items = [];
		var root = el("div");

		var list = el("div", { class: "d-flex flex-wrap gap-3 mb-3" });
		var addBtn = el("button", { class: "btn btn-outline-primary mb-3", type: "button" });
		addBtn.textContent = options.addLabel || "Ajouter";
		on(addBtn, "click", function () {
			addItem();
		});

		root.appendChild(addBtn);
		root.appendChild(list);
		mount.appendChild(root);

		function addItem(preset) {
			var data = {};
			for (var i = 0; i < options.fields.length; i++) {
				var f = options.fields[i];
				data[f.key] = typeof f.value === "number" || typeof f.value === "string" ? f.value : "";
			}
			if (options.checks) {
				for (var c = 0; c < options.checks.length; c++) {
					data[options.checks[c].key] = false;
				}
			}
			if (preset) for (var k in preset) if (preset.hasOwnProperty(k)) data[k] = preset[k];

			data[idKey] = ++seq;

			var card = el("div", { class: "card card-elevator", "data-id": String(data[idKey]) });
			var header = el("div", { class: "card-header d-flex justify-content-between align-items-center" });
			header.appendChild(el("strong", { text: (options.title || "Item") + " #" + data[idKey] }));
			var del = el("button", { class: "btn btn-sm btn-outline-danger", type: "button" });
			del.textContent = "Supprimer";
			on(del, "click", function () {
				list.removeChild(card);
				for (var i = items.length - 1; i >= 0; i--) if (items[i][idKey] === data[idKey]) items.splice(i, 1);
			});
			header.appendChild(del);

			var body = el("div", { class: "card-body" });
			var row = el("div", { class: "row g-3" });

			// champs
			for (var i2 = 0; i2 < options.fields.length; i2++) {
				var f2 = options.fields[i2];
				var col = el("div", { class: "col-4" });
				var lab = el("label", { class: "form-label", text: f2.label });
				var inp = el("input", { class: "form-control", "data-key": f2.key, type: f2.type || "text" });
				if (typeof f2.min !== "undefined") inp.setAttribute("min", f2.min);
				if (typeof f2.max !== "undefined") inp.setAttribute("max", f2.max);
				inp.value = data[f2.key];
				on(inp, "change", syncData);
				col.appendChild(lab);
				col.appendChild(inp);
				row.appendChild(col);
			}
			body.appendChild(row);

			// checks
			if (options.checks && options.checks.length) {
				var row2 = el("div", { class: "row mt-2" });
				var colc = el("div", { class: "col-12" });
				for (var j = 0; j < options.checks.length; j++) {
					var ck = options.checks[j];
					var wrap = el("div", { class: "form-check form-check-inline" });
					var inpCk = el("input", { class: "form-check-input", type: "checkbox", "data-ck": ck.key, id: ck.key + "-" + data[idKey] });
					var labCk = el("label", { class: "form-check-label" });
					labCk.setAttribute("for", ck.key + "-" + data[idKey]);
					labCk.textContent = ck.label;
					on(
						inpCk,
						"change",
						(function (ckLocal) {
							return function () {
								data[ckLocal.key] = !!this.checked;
								// exclusivité
								if (ckLocal.exclusiveWith && this.checked) {
									var other = card.querySelector('input[data-ck="' + ckLocal.exclusiveWith + '"]');
									if (other) {
										other.checked = false;
										data[ckLocal.exclusiveWith] = false;
									}
								}
							};
						})(ck)
					);
					wrap.appendChild(inpCk);
					wrap.appendChild(labCk);
					colc.appendChild(wrap);
				}
				row2.appendChild(colc);
				body.appendChild(row2);
			}

			card.appendChild(header);
			card.appendChild(body);
			list.appendChild(card);

			items.push(data);
			return data;

			function syncData() {
				var inputs = card.querySelectorAll("input[data-key]");
				for (var ii = 0; ii < inputs.length; ii++) {
					var k2 = inputs[ii].getAttribute("data-key");
					var type = inputs[ii].getAttribute("type");
					var v = inputs[ii].value;
					if (type === "number") data[k2] = Math.floor(Number(v) || 0);
					else data[k2] = v;
				}
			}
		}

		// init
		if (options.initial && options.initial.length) {
			for (var z = 0; z < options.initial.length; z++) addItem(options.initial[z]);
		}

		return {
			add: addItem,
			getData: function () {
				// relire les champs courants
				var cards = list.querySelectorAll(".card-elevator");
				for (var c = 0; c < cards.length; c++) {
					var id = parseInt(cards[c].getAttribute("data-id"), 10);
					var inputs = cards[c].querySelectorAll("input[data-key]");
					for (var ii = 0; ii < inputs.length; ii++) {
						var key = inputs[ii].getAttribute("data-key");
						var type = inputs[ii].getAttribute("type");
						var v = inputs[ii].value;
						for (var it = 0; it < items.length; it++)
							if (items[it][idKey] === id) {
								items[it][key] = type === "number" ? Math.floor(Number(v) || 0) : v;
							}
					}
					// checks
					var cks = cards[c].querySelectorAll("input[data-ck]");
					for (var jj = 0; jj < cks.length; jj++) {
						var kck = cks[jj].getAttribute("data-ck");
						for (var it2 = 0; it2 < items.length; it2++) if (items[it2][idKey] === id) items[it2][kck] = !!cks[jj].checked;
					}
				}
				return items.slice(0);
			},
			setMaxFor: function (key, maxVal) {
				var inputs = list.querySelectorAll('input[data-key="' + key + '"]');
				for (var i3 = 0; i3 < inputs.length; i3++) inputs[i3].setAttribute("max", maxVal);
			},
		};
	};

	/* ============ éditeur de tableau (lignes simples) ============ */
	// config: { rowLabel, columns:[{key,label,type,min,max}], initialRows, randomizeRow(fn)->row }
	GestionUI.tableEditor = function (mount, config) {
		var wrapper = el("div", { class: "card mb-3" });
		var head = el("div", { class: "card-header" });
		head.textContent = config.title || "Table";
		var body = el("div", { class: "card-body p-0" });
		var table = el("table", { class: "table table-sm mb-0 align-middle table-fixed" });
		var thead = el("thead", { class: "table-light" });
		var trh = el("tr");
		trh.appendChild(el("th", { style: "width:90px;", text: config.rowLabel || "Ligne" }));
		for (var c = 0; c < config.columns.length; c++) trh.appendChild(el("th", { text: config.columns[c].label }));
		thead.appendChild(trh);
		var tbody = el("tbody");

		table.appendChild(thead);
		table.appendChild(tbody);
		body.appendChild(el("div", { class: "table-responsive" })).appendChild(table);
		wrapper.appendChild(head);
		wrapper.appendChild(body);
		mount.appendChild(wrapper);

		function setRowCount(n) {
			n = Math.max(1, Math.floor(n || 1));
			empty(tbody);
			for (var i = 1; i <= n; i++) {
				var tr = el("tr");
				tr.appendChild(el("td", { class: "smallcaps", text: (config.rowLabel || "Ligne") + " " + i }));
				for (var j = 0; j < config.columns.length; j++) {
					var col = config.columns[j];
					var td = el("td");
					var inp = el("input", { class: "form-control form-control-sm", "data-col": col.key, type: col.type || "text" });
					if (typeof col.min !== "undefined") inp.setAttribute("min", col.min);
					if (typeof col.max !== "undefined") inp.setAttribute("max", col.max);
					// valeur par défaut
					if (config.randomizeRow && col.defaultRandom) {
						inp.value = config.randomizeRow(col);
					} else if (typeof col.value !== "undefined") {
						inp.value = col.value;
					}
					td.appendChild(inp);
					tr.appendChild(td);
				}
				tbody.appendChild(tr);
			}
		}

		function getData() {
			var rows = tbody.querySelectorAll("tr");
			var out = [];
			for (var r = 0; r < rows.length; r++) {
				var obj = { id: r + 1 };
				var inputs = rows[r].querySelectorAll("input[data-col]");
				for (var i = 0; i < inputs.length; i++) {
					var k = inputs[i].getAttribute("data-col");
					var type = inputs[i].getAttribute("type");
					var v = inputs[i].value;
					obj[k] = type === "number" ? Math.floor(Number(v) || 0) : v;
				}
				out.push(obj);
			}
			return out;
		}

		function setMaxFor(colKey, maxVal) {
			var inputs = tbody.querySelectorAll('input[data-col="' + colKey + '"]');
			for (var i = 0; i < inputs.length; i++) inputs[i].setAttribute("max", maxVal);
		}

		function rerollRandoms() {
			if (!config.randomizeRow) return;
			var rows = tbody.querySelectorAll("tr");
			for (var r = 0; r < rows.length; r++) {
				var inputs = rows[r].querySelectorAll("input[data-col]");
				for (var i = 0; i < inputs.length; i++) {
					var k = inputs[i].getAttribute("data-col");
					// seuls les colonnes avec defaultRandom = true
					for (var j = 0; j < config.columns.length; j++)
						if (config.columns[j].key === k && config.columns[j].defaultRandom) {
							inputs[i].value = config.randomizeRow(config.columns[j]);
						}
				}
			}
		}

		// init
		setRowCount(config.initialRows || 1);

		return {
			setRowCount: setRowCount,
			getData: getData,
			setMaxFor: setMaxFor,
			rerollRandoms: rerollRandoms,
		};
	};

	function escapeHtml(s) {
		return String(s).replace(/[&<>"']/g, function (m) {
			return { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[m];
		});
	}

	window.GestionUI = GestionUI;
})(window, document);

# ./Web/gestion/utils/GestionUIJS.js

# ./Web/gestion/utils/utils.js
function random_int(min, max) {
	min = Math.floor(Number(min) || 0);
	max = Math.floor(Number(max) || 0);
	if (min > max) {
		var tmp = min;
		min = max;
		max = tmp;
	}
	var r = min + Math.floor(Math.random() * (max - min + 1));
	if (r < min) r = min;
	if (r > max) r = max;
	return r;
}

# ./Web/gestion/utils/utils.js

# ./Web/heure_de_reveil/heure_de_reveil.html
<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="icon" type="image/x-icon" href="./heure_de_reveil.ico">
	<title>Heure de réveil</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			background: url('./nuages_1.jpg') no-repeat center center fixed;
			background-size: cover;
			display: flex;
			justify-content: center;
			align-items: center;
			min-height: 100vh;
		}

		#timeCard {
			width: 540px;
			background-color: rgba(255, 255, 255, .85);
			box-shadow: 0 0.5rem 1rem rgba(13, 110, 253, .2);
		}

		.time-big {
			font-size: 3rem;
			font-weight: 700;
		}

		.time-small {
			font-size: 1.25rem;
		}
	</style>
</head>

<body>
	<div id="timeCard" class="card border-primary text-center">
		<div class="card-header bg-primary text-white fw-bold">Heure dans 8&nbsp;h</div>

		<div class="card-body">
			<div id="t8" class="time-big mb-3"></div>

			<div class="d-flex justify-content-around">
				<div>
					<div class="fw-semibold">+7&nbsp;h&nbsp;30</div>
					<div id="t7_30" class="time-small"></div>
				</div>
				<div>
					<div class="fw-semibold">+6&nbsp;h&nbsp;30</div>
					<div id="t6_30" class="time-small"></div>
				</div>
				<div>
					<div class="fw-semibold">+6&nbsp;h</div>
					<div id="t6" class="time-small"></div>
				</div>
			</div>

			<button id="boutonActualiser" class="btn btn-outline-primary mt-4">Actualiser</button>
		</div>
	</div>

	<script>
		(function programmePrincipal() {
			/* Décalages à appliquer pour chaque zone d’affichage */
			const listeDecalages = [
				{idElement: 't8', heuresAjoutees: 8, minutesAjoutees: 0},
				{idElement: 't7_30', heuresAjoutees: 7, minutesAjoutees: 30},
				{idElement: 't6_30', heuresAjoutees: 6, minutesAjoutees: 30},
				{idElement: 't6', heuresAjoutees: 6, minutesAjoutees: 0}
			];

			/* Ajoute un zéro devant les nombres < 10 */
			const ajouterZero = nombre => nombre.toString().padStart(2, '0');

			/* Formate une instance Date en HH:MM */
			const formaterHeure = date =>
				`${ajouterZero(date.getHours())}:${ajouterZero(date.getMinutes())}`;

			/* Calcule et affiche toutes les heures décalées */
			function mettreAJourHeures() {
				const dateActuelle = new Date();

				listeDecalages.forEach(decalage => {
					const minutesTotal = (decalage.heuresAjoutees * 60) + decalage.minutesAjoutees;
					const datePlusTard = new Date(dateActuelle.getTime() + minutesTotal * 60 * 1000);
					document.getElementById(decalage.idElement).textContent = formaterHeure(datePlusTard);
				});
			}

			/* Initialisation et rafraîchissements périodiques */
			mettreAJourHeures();
			setInterval(mettreAJourHeures, 1000);
			document.getElementById('boutonActualiser')
				.addEventListener('click', mettreAJourHeures);
		})();
	</script>
</body>

</html>

# ./Web/heure_de_reveil/heure_de_reveil.html

# ./Web/mini_langage/package.json
{
	"name": "minilang",
	"version": "1.0.0",
	"scripts": {
		"cli": "ts-node src/cli.ts",
		"web": "ts-node src/server.ts"
	},
	"dependencies": {
		"@types/express": "^5.0.3",
		"@types/node": "^24.3.0",
		"express": "^5.1.0",
		"ts-node": "^10.9.2",
		"typescript": "^5.9.2"
	}
}

# ./Web/mini_langage/package.json

# ./Web/mini_langage/public/index.html
<!doctype html>
<html lang="fr">

<head>
	<meta charset="utf-8" />
	<title>MiniLang – Web</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<style>
		html,
		body {
			margin: 0;
			height: 100%;
			font-family: system-ui, sans-serif;
			background: #111;
			color: #eee
		}

		.screen {
			display: none;
			height: 100%;
			padding: 16px
		}

		.screen.active {
			display: block
		}

		.menu .item {
			padding: 8px 12px
		}

		.menu .item.sel {
			background: #2a2a2a
		}

		.panel {
			border: 1px solid #333;
			padding: 12px;
			border-radius: 8px;
			background: #181818
		}

		textarea {
			width: 100%;
			height: 60vh;
			background: #000;
			color: #0f0;
			border: none;
			outline: none;
			font-family: ui-monospace, monospace;
			font-size: 14px;
			resize: none
		}

		pre {
			white-space: pre-wrap
		}

		.hint {
			color: #aaa;
			margin-top: 8px
		}

		/* Palette Mots-clés — dans la zone éditable */
		.palette {
			position: relative
		}

		.palette .overlay {
			position: absolute;
			right: 8px;
			top: 8px;
			width: 360px;
			max-height: 50vh;
			overflow: auto;
			background: #0b0b0b;
			border: 1px solid #444;
			border-radius: 8px;
			padding: 8px;
			display: none;
		}

		.palette .overlay.open {
			display: block
		}

		.cat {
			color: #8ab4ff;
			margin: 6px 2px 4px
		}

		.kw {
			padding: 4px 6px;
			border-radius: 6px
		}

		.kw.sel {
			background: #2a2a2a
		}
	</style>
</head>

<body>
	<div id="menu" class="screen active">
		<div class="panel">
			<div class="menu" id="menuList">
				<div class="item sel">Éditer le programme</div>
				<div class="item">Exécuter</div>
				<div class="item">Voir aide</div>
			</div>
			<div class="hint">↑/↓, Entrée, Échap. En éditeur : P/p ouvre le menu Mots-clés, Échap le ferme.</div>
		</div>
	</div>

	<div id="editor" class="screen">
		<div class="panel palette">
			<div style="margin-bottom:8px">Éditeur (P/p: Mots-clés, Ctrl+Entrée: Exécuter, Échap: Menu)</div>
			<textarea id="code"></textarea>
			<div id="palette" class="overlay" aria-hidden="true"></div>
			<div class="hint">Souris désactivée. Utiliser uniquement le clavier.</div>
		</div>
	</div>

	<div id="output" class="screen">
		<div class="panel">
			<div style="margin-bottom:8px">Sortie (Échap: Menu, G: Guide)</div>
			<pre id="out">(aucune sortie)</pre>
		</div>
	</div>

	<div id="guide" class="screen">
		<div class="panel">
			<div style="margin-bottom:8px">Guide (↑/↓ pour défiler, Échap: Menu)</div>
			<pre id="guideText"></pre>
		</div>
	</div>

	<script src="ui.js"></script>
</body>

</html>

# ./Web/mini_langage/public/index.html

# ./Web/mini_langage/public/ui.js
// Écrans
const screens = {
	menu: document.getElementById("menu"),
	editor: document.getElementById("editor"),
	output: document.getElementById("output"),
	guide: document.getElementById("guide"),
};
const menuItems = [...document.getElementById("menuList").querySelectorAll(".item")];
let selMenu = 0;

function show(name) {
	Object.values(screens).forEach((s) => s.classList.remove("active"));
	screens[name].classList.add("active");
	if (name === "editor") {
		if (!code.value.trim()) code.value = DEFAULT_PROGRAM.trimStart();
		code.focus();
	}
}
function renderMenu() {
	menuItems.forEach((el, i) => el.classList.toggle("sel", i === selMenu));
}
renderMenu();

// Neutraliser la souris (clavier only)
addEventListener("mousedown", (e) => e.preventDefault(), { capture: true });
addEventListener("click", (e) => e.preventDefault(), { capture: true });

// Guide
const GUIDE = [
	"Syntaxe MiniLang :",
	"  LET x = 3 + 4",
	'  PRINT "Texte" | PRINT x + 1',
	"  ARR A[2,3,4]",
	"  SET A[1,2,3] = 10 - 2",
	"  PRINT GET A[1,2,3]",
	"  FUNC f a",
	"    PRINT a + 1",
	"  END",
	"  CALL f 41",
	"",
	"Navigation :",
	"  Menu: ↑/↓, Entrée, Échap",
	"  Éditeur: P/p ouvre Mots-clés (flèches/Entrée/Échap), Ctrl+Entrée exécute",
].join("\n");
document.getElementById("guideText").textContent = GUIDE;

// Données palette mots-clés (catégories style TI)
const KEYWORDS = [
	{
		cat: "Déclarations",
		items: [
			{ label: "LET", insert: "LET " },
			{ label: "ARR", insert: "ARR A[2,2]" },
			{ label: "FUNC … END", insert: "FUNC f a\n  PRINT a\nEND" },
		],
	},
	{
		cat: "Instructions",
		items: [
			{ label: "PRINT", insert: 'PRINT "Texte"' },
			{ label: "SET", insert: "SET A[1,1] = 0" },
			{ label: "CALL", insert: "CALL f 1" },
		],
	},
	{
		cat: "Expressions",
		items: [
			{ label: "GET", insert: "GET A[1,1]" },
			{ label: "+ / -", insert: "x + 1" },
		],
	},
];

const DEFAULT_PROGRAM = `
# Tapez votre programme ici
LET x = 40 + 2
PRINT x
`.trim();

// Palette DOM
const palette = document.getElementById("palette");
const code = document.getElementById("code");
let paletteOpen = false;
let flatItems = []; // {catIdx, itemIdx, label, insert}
let selKw = 0;

// Construire la palette (liste plate avec en-têtes)
function buildPalette() {
	const parts = [];
	flatItems = [];
	let idx = 0;
	KEYWORDS.forEach((group, gi) => {
		parts.push(`<div class="cat">▸ ${group.cat}</div>`);
		group.items.forEach((it, ii) => {
			flatItems.push({ catIdx: gi, itemIdx: ii, label: it.label, insert: it.insert });
			parts.push(`<div class="kw${idx === 0 ? " sel" : ""}" data-i="${idx}">${it.label}</div>`);
			idx++;
		});
	});
	palette.innerHTML = parts.join("");
	selKw = 0;
}
buildPalette();

function openPalette() {
	palette.classList.add("open");
	palette.setAttribute("aria-hidden", "false");
	paletteOpen = true;
	highlightKw();
}
function closePalette() {
	palette.classList.remove("open");
	palette.setAttribute("aria-hidden", "true");
	paletteOpen = false;
	code.focus();
}
function highlightKw() {
	[...palette.querySelectorAll(".kw")].forEach((el, i) => el.classList.toggle("sel", i === selKw));
	palette.scrollTop = Math.max(0, palette.querySelector(".kw.sel")?.offsetTop - 60);
}

// Insérer du texte à la position du curseur
function insertAtCursor(textarea, text) {
	const start = textarea.selectionStart;
	const end = textarea.selectionEnd;
	const before = textarea.value.slice(0, start);
	const after = textarea.value.slice(end);
	textarea.value = before + text + after;
	const pos = start + text.length;
	textarea.selectionStart = textarea.selectionEnd = pos;
	textarea.focus();
}

// Actions globales
async function run() {
	const res = await fetch("/run", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ code: code.value }) });
	const j = await res.json();
	document.getElementById("out").textContent = j.ok ? j.output || "(aucune sortie)" : "Erreur: " + j.error;
	show("output");
}
function openEditor() {
	show("editor");
}
function openGuide() {
	show("guide");
}
function backToMenu() {
	show("menu");
	renderMenu();
}

// Gestion clavier globale
document.addEventListener("keydown", (e) => {
	const active = document.querySelector(".screen.active");

	// Écrans Menu/Output/Guide (comme avant)
	if (active === screens.menu) {
		if (e.key === "ArrowUp") {
			selMenu = (selMenu - 1 + menuItems.length) % menuItems.length;
			renderMenu();
		} else if (e.key === "ArrowDown") {
			selMenu = (selMenu + 1) % menuItems.length;
			renderMenu();
		} else if (e.key === "Enter") {
			if (selMenu === 0) openEditor();
			else if (selMenu === 1) run();
			else openGuide();
		} else if (e.key === "Escape") {
			/* rester */
		}
	} else if (active === screens.output) {
		if (e.key === "Escape") backToMenu();
		else if (e.key.toLowerCase() === "g") openGuide();
	} else if (active === screens.guide) {
		const g = document.getElementById("guideText");
		if (e.key === "ArrowDown") g.scrollTop += 24;
		else if (e.key === "ArrowUp") g.scrollTop -= 24;
		else if (e.key === "Escape") backToMenu();
	}

	// Écran Éditeur + Palette
	if (active === screens.editor) {
		// Ouverture / fermeture de la palette
		if (!paletteOpen && (e.key === "p" || e.key === "P")) {
			e.preventDefault();
			openPalette();
			return;
		}
		if (paletteOpen) {
			// Navigation palette
			if (e.key === "ArrowDown") {
				e.preventDefault();
				selKw = Math.min(selKw + 1, flatItems.length - 1);
				highlightKw();
				return;
			}
			if (e.key === "ArrowUp") {
				e.preventDefault();
				selKw = Math.max(selKw - 1, 0);
				highlightKw();
				return;
			}
			if (e.key === "Enter") {
				e.preventDefault();
				insertAtCursor(code, flatItems[selKw].insert + "\n");
				closePalette();
				return;
			}
			if (e.key === "Escape") {
				e.preventDefault();
				closePalette();
				return;
			}
			// Empêcher autres touches d’écrire pendant la palette
			if (!["ArrowLeft", "ArrowRight", "Home", "End", "PageUp", "PageDown"].includes(e.key)) {
				e.preventDefault();
			}
			return;
		}
		// Palette fermée : édition standard clavier (textarea natif)
		if (e.key === "Escape") {
			e.preventDefault();
			backToMenu();
			return;
		}
		if (e.key === "Enter" && e.ctrlKey) {
			e.preventDefault();
			run();
			return;
		}
		// sinon: laisser le textarea gérer déplacement/effacement (← → ↑ ↓, Backspace, Delete, etc.)
	}
});

// Démarrage
show("menu");

# ./Web/mini_langage/public/ui.js

# ./Web/mini_langage/src/cli.ts
import * as readline from "readline";
import { Runtime } from "./runtime";
import { Interpreter } from "./interpreter";
import { listPrograms, saveProgram, loadProgram, hasProgram, removeProgram } from "./storage";

type MenuItem = { label: string; action: () => Promise<void>; keys: string[] };

const rl = readline.createInterface({ input: process.stdin, output: process.stdout });
readline.emitKeypressEvents(process.stdin, rl as any);
if (process.stdin.isTTY) process.stdin.setRawMode(true);

// État courant
let currentName: string | null = null;
let programBuffer = ``; // vide au départ

const rt = new Runtime();
const itp = new Interpreter(rt);

// ——— utilitaires UI ———
function waitKey(): Promise<any> {
	return new Promise((res) => {
		const onKey = (_s: any, key: any) => {
			process.stdin.off("keypress", onKey);
			res(key);
		};
		process.stdin.on("keypress", onKey);
	});
}

async function inputLine(prompt: string, validate?: (s: string) => string | null): Promise<string> {
	return new Promise((res) => {
		let buf = "";
		const render = () => {
			console.clear();
			console.log(prompt + "\n" + buf + "\n\n[Entrée=valider | Échap=annuler | Retour arrière=supprimer]");
		};
		render();
		const onData = (chunk: Buffer) => {
			const code = chunk[0];
			if (code === 0x1b) {
				// ESC
				process.stdin.off("data", onData);
				res("");
				return;
			}
			if (code === 0x7f) {
				buf = buf.slice(0, -1);
				render();
				return;
			}
			if (code === 0x0d) {
				// Enter
				if (validate) {
					const err = validate(buf);
					if (err) {
						console.clear();
						console.log(prompt + "\n" + buf + "\n\n" + err + "\n\nAppuyez sur une touche…");
						process.stdin.once("keypress", () => render());
						return;
					}
				}
				process.stdin.off("data", onData);
				res(buf.trim());
				return;
			}
			// A..Z / 0..9 / _ / - / espace / . etc. (on reste simple)
			const s = chunk.toString("utf8");
			buf += s;
			render();
		};
		process.stdin.on("data", onData);
	});
}

async function pause(msg = "Échap: retour menu"): Promise<void> {
	return new Promise((res) => {
		console.log("\n" + msg);
		const onKey = (_s: any, key: any) => {
			if (key?.name === "escape") {
				process.stdin.off("keypress", onKey);
				res();
			}
		};
		process.stdin.on("keypress", onKey);
	});
}

// ——— actions ———
async function runProgram() {
	console.clear();
	rt.output = [];
	try {
		const out = itp.run(programBuffer || "");
		console.log(out || "(aucune sortie)");
	} catch (e: any) {
		console.log("Erreur:", e.message);
	}
	await pause();
}

async function editProgram() {
	console.clear();
	console.log(`Édition "${currentName ?? "(non sauvegardé)"}" (Échap pour valider)\n`);
	console.log(programBuffer);
	let buf = programBuffer;
	const onKey = (chunk: Buffer) => {
		const code = chunk[0];
		if (code === 0x1b) {
			process.stdin.off("data", onKey);
			programBuffer = buf;
			return;
		} // ESC
		if (code === 0x7f) buf = buf.slice(0, -1);
		else if (code === 0x0d) buf += "\n";
		else buf += chunk.toString("utf8");
		console.clear();
		console.log(`Édition "${currentName ?? "(non sauvegardé)"}" (Échap pour valider)\n`);
		console.log(buf);
	};
	process.stdin.on("data", onKey);
	await pause();
}

async function newProgram() {
	const name = await inputLine("Nouveau programme — entrez un nom unique:", (s) => {
		if (!s.trim()) return "Nom requis.";
		if (/[^\w\-]/.test(s)) return "Utilisez lettres/chiffres/underscore/tiret.";
		if (hasProgram(s)) return "Nom déjà existant.";
		return null;
	});
	if (!name) return; // annulé
	currentName = name;
	programBuffer = ""; // vide
	try {
		saveProgram(name, programBuffer);
		console.clear();
		console.log(`Programme "${name}" créé.`);
	} catch (e: any) {
		console.clear();
		console.log("Erreur:", e.message);
	}
	await pause();
}

async function openProgram() {
	const list = listPrograms();
	if (!list.length) {
		console.clear();
		console.log("Aucun programme enregistré.");
		await pause();
		return;
	}
	let sel = 0;
	while (true) {
		console.clear();
		console.log("Ouvrir programme (↑/↓, Entrée, Échap)\n");
		list.forEach((n, i) => console.log(`${i === sel ? "> " : "  "}${n}`));
		const key = await waitKey();
		if (key.name === "escape") return;
		if (key.name === "up") sel = (sel - 1 + list.length) % list.length;
		else if (key.name === "down") sel = (sel + 1) % list.length;
		else if (key.name === "return") {
			const name = list[sel];
			currentName = name;
			programBuffer = loadProgram(name);
			console.clear();
			console.log(`Ouvert: ${name}`);
			await pause();
			return;
		}
	}
}

async function saveCurrent() {
	if (!currentName) {
		const name = await inputLine("Enregistrer sous — entrez un nom unique:", (s) => {
			if (!s.trim()) return "Nom requis.";
			if (/[^\w\-]/.test(s)) return "Utilisez lettres/chiffres/underscore/tiret.";
			if (hasProgram(s)) return "Nom déjà existant.";
			return null;
		});
		if (!name) return;
		currentName = name;
	}
	try {
		saveProgram(currentName, programBuffer);
		console.clear();
		console.log(`Sauvegardé: ${currentName}`);
	} catch (e: any) {
		console.clear();
		console.log("Erreur:", e.message);
	}
	await pause();
}

async function deleteProgram() {
	const list = listPrograms();
	if (!list.length) {
		console.clear();
		console.log("Aucun programme à supprimer.");
		await pause();
		return;
	}
	let sel = 0;
	while (true) {
		console.clear();
		console.log("Supprimer programme (↑/↓, Entrée pour supprimer, Échap pour annuler)\n");
		list.forEach((n, i) => console.log(`${i === sel ? "> " : "  "}${n}`));
		const key = await waitKey();
		if (key.name === "escape") return;
		if (key.name === "up") sel = (sel - 1 + list.length) % list.length;
		else if (key.name === "down") sel = (sel + 1) % list.length;
		else if (key.name === "return") {
			const name = list[sel];
			removeProgram(name);
			if (currentName === name) {
				currentName = null;
				programBuffer = "";
			}
			console.clear();
			console.log(`Supprimé: ${name}`);
			await pause();
			return;
		}
	}
}

async function viewGuide() {
	const GUIDE_TEXT = [
		"Guide MiniLang",
		"",
		"Mots-clés :",
		"  LET x = 3 + 4",
		'  PRINT "Texte" | PRINT x + 1',
		"  ARR A[2,3,4]",
		"  SET A[1,2,3] = 10 - 2",
		"  PRINT GET A[1,2,3]",
		"  FUNC f a",
		"    PRINT a + 1",
		"  END",
		"  CALL f 41",
		"",
		"Raccourcis: chiffres 1..9 et lettres A..Z. Échap=retour.",
	].join("\n");
	console.clear();
	console.log(GUIDE_TEXT);
	await pause();
}

// ——— menu principal (instantané, SANS attente de double-lettre) ———
async function main() {
	const items: MenuItem[] = [
		{ label: "1 • Nouveau programme [N]", action: newProgram, keys: ["1", "n"] },
		{ label: "2 • Ouvrir programme [O]", action: openProgram, keys: ["2", "o"] },
		{ label: "3 • Éditer programme [E]", action: editProgram, keys: ["3", "e"] },
		{ label: "4 • Exécuter [X]", action: runProgram, keys: ["4", "x"] },
		{ label: "5 • Enregistrer [S]", action: saveCurrent, keys: ["5", "s"] },
		{ label: "6 • Supprimer [D]", action: deleteProgram, keys: ["6", "d"] },
		{ label: "7 • Guide [G]", action: viewGuide, keys: ["7", "g"] },
		{
			label: "9 • Quitter [Q]",
			action: async () => {
				rl.close();
				process.exit(0);
			},
			keys: ["9", "q"],
		},
	];
	let sel = 0;

	while (true) {
		console.clear();
		console.log(`MiniLang – Menu (↑/↓, Entrée, Échap). Programme courant: ${currentName ?? "(non sauvegardé)"}\n`);
		items.forEach((it, i) => console.log(`${i === sel ? "> " : "  "}${it.label}`));
		const key = await waitKey();

		if (key.name === "escape") {
			rl.close();
			process.exit(0);
		} else if (key.name === "up") sel = (sel - 1 + items.length) % items.length;
		else if (key.name === "down") sel = (sel + 1) % items.length;
		else if (key.name === "return") await items[sel].action();
		else if (key.sequence) {
			const k = key.sequence.toLowerCase();
			const hit = items.find((it) => it.keys.includes(k));
			if (hit) await hit.action();
		}
	}
}

main().catch((e) => {
	console.error(e);
	process.exit(1);
});

# ./Web/mini_langage/src/cli.ts

# ./Web/mini_langage/src/interpreter.ts
import { Runtime } from "./runtime";

type Tok = string;
function tokenize(line: string): Tok[] {
	const out: Tok[] = [];
	let i = 0;
	while (i < line.length) {
		const c = line[i];
		if (c === "#") break; // commentaire
		if (/\s/.test(c)) {
			i++;
			continue;
		}
		if (c === '"') {
			let j = i + 1,
				s = "";
			while (j < line.length && line[j] !== '"') {
				s += line[j++];
			}
			if (j >= line.length) throw new Error("Guillemet non fermé");
			out.push(`" ${s}"`); // token texte (préfixé pour le distinguer)
			i = j + 1;
			continue;
		}
		if (/[A-Za-z_\[\],]/.test(c)) {
			out.push(c);
			i++;
			continue;
		}
		if (/[0-9+\-=/]/.test(c)) {
			out.push(c);
			i++;
			continue;
		}
		throw new Error(`Caractère invalide: ${c}`);
	}
	// regrouper identifiants/ nombres contigus
	return line.match(/"[^"]*"|[A-Za-z_]+|\[|\]|,|[0-9]+|[+\-=/]/g)?.filter((t) => t) ?? out;
}

function parseIndices(tokens: Tok[], start: number): { idx: number[]; next: number } {
	if (tokens[start] !== "[") throw new Error("Attendu '['");
	const idx: number[] = [];
	let i = start + 1;
	while (tokens[i] !== "]") {
		if (!/^[0-9]+$/.test(tokens[i])) throw new Error("Index entier attendu");
		idx.push(parseInt(tokens[i], 10));
		i++;
		if (tokens[i] === ",") i++;
	}
	return { idx, next: i + 1 };
}

export class Interpreter {
	constructor(private rt: Runtime) {}

	private evalExpr(tokens: Tok[], env: Map<string, number | string>): number | string {
		// Expressions très simples: entiers/variables/GET/ + -
		// Shunting-yard minimal pour + et - gauche→droite
		const toVal = (t: Tok): number | string => {
			if (/^"[^"]*"$/.test(t)) return t.slice(1); // retire le préfixe " et conserve texte
			if (/^[0-9]+$/.test(t)) return parseInt(t, 10);
			if (/^[A-Za-z_][A-Za-z_0-9]*$/.test(t)) {
				const v = env.has(t) ? env.get(t) : this.rt.vars.get(t);
				if (v === undefined) throw new Error(`Var ${t} non définie`);
				return v!;
			}
			throw new Error(`Token expr invalide: ${t}`);
		};

		// Remplace séquences GET A[...]
		let i = 0;
		const flat: (Tok | number | string)[] = [];
		while (i < tokens.length) {
			if (tokens[i] === "GET") {
				const name = tokens[i + 1];
				const { idx, next } = parseIndices(tokens, i + 2);
				const v = this.rt.getArray(name, idx);
				flat.push(v);
				i = next;
			} else if (tokens[i] !== "=") {
				flat.push(tokens[i]);
				i++;
			} else i++;
		}

		// Évalue gauche→droite (uniquement + et -)
		let acc = toVal(String(flat[0]));
		for (let j = 1; j < flat.length; j += 2) {
			const op = flat[j];
			const rhs = toVal(String(flat[j + 1]));
			if (typeof acc === "string" || typeof rhs === "string") {
				if (op !== "+") throw new Error("Concat autorisée seulement avec +");
				acc = String(acc) + String(rhs);
			} else {
				if (op === "+") acc = acc + (rhs as number);
				else if (op === "-") acc = acc - (rhs as number);
				else throw new Error(`Opérateur inconnu: ${op}`);
			}
		}
		return acc;
	}

	run(program: string): string {
		const lines = program.split(/\r?\n/);
		const rt = this.rt;
		const funcs = rt.functions;

		// Pré-scan des fonctions
		for (let i = 0; i < lines.length; i++) {
			const raw = lines[i].trim();
			if (!raw) continue;
			const tokens = tokenize(raw);
			if (tokens[0] === "FUNC") {
				const name = tokens[1];
				const arg = tokens[2];
				const body: string[] = [];
				i++;
				while (i < lines.length && lines[i].trim() !== "END") {
					body.push(lines[i]);
					i++;
				}
				if (i >= lines.length) throw new Error("END manquant");
				funcs.set(name, { arg, body });
			}
		}

		// Exécution des lignes hors fonctions
		const execLines = lines.filter((l) => !/^FUNC\b/.test(l.trim()) && l.trim() !== "END");
		for (let pc = 0; pc < execLines.length; pc++) {
			const raw = execLines[pc].trim();
			if (!raw || raw.startsWith("#")) continue;
			const t = tokenize(raw);
			const head = t[0];

			if (head === "PRINT") {
				const val = this.evalExpr(t.slice(1), new Map());
				rt.print(val);
				continue;
			}

			if (head === "LET") {
				const name = t[1];
				const eq = t[2];
				if (eq !== "=") throw new Error("Syntaxe: LET x = expr");
				const val = this.evalExpr(t.slice(3), new Map());
				rt.vars.set(name, val);
				continue;
			}

			if (head === "ARR") {
				const name = t[1].replace(/\[.*/, "");
				const dims = raw
					.match(/\[(.*?)\]/)?.[1]
					.split(",")
					.map((s) => parseInt(s.trim(), 10));
				if (!dims || dims.some(isNaN)) throw new Error("Dimensions invalides");
				rt.defineArray(name, dims);
				continue;
			}

			if (head === "SET") {
				const name = t[1];
				const { idx, next } = parseIndices(t, 2);
				if (t[next] !== "=") throw new Error("SET … = expr attendu");
				const val = this.evalExpr(t.slice(next + 1), new Map());
				if (typeof val === "string") throw new Error("SET exige un nombre");
				rt.setArray(name, idx, val);
				continue;
			}

			if (head === "CALL") {
				const name = t[1];
				const fn = funcs.get(name);
				if (!fn) throw new Error(`Fonction ${name} inconnue`);
				const argVal = this.evalExpr(t.slice(2), new Map());
				const local = new Map<string, number | string>([[fn.arg, argVal]]);
				for (const line of fn.body) {
					const lt = tokenize(line.trim());
					if (!lt.length) continue;
					if (lt[0] === "PRINT") {
						const v = this.evalExpr(lt.slice(1), local);
						rt.print(v);
					} else if (lt[0] === "LET") {
						if (lt[2] !== "=") throw new Error("Syntaxe LET locale");
						const v = this.evalExpr(lt.slice(3), local);
						local.set(lt[1], v);
					} else if (lt[0] === "SET") {
						const nm = lt[1];
						const { idx, next } = parseIndices(lt, 2);
						const v = this.evalExpr(lt.slice(next + 1), local);
						if (typeof v === "string") throw new Error("SET exige un nombre");
						rt.setArray(nm, idx, v);
					} else if (lt[0] === "CALL") {
						// Appels imbriqués simples
						const callee = lt[1];
						const f2 = funcs.get(callee);
						if (!f2) throw new Error(`Fonction ${callee} inconnue`);
						const arg2 = this.evalExpr(lt.slice(2), local);
						const local2 = new Map<string, number | string>([[f2.arg, arg2]]);
						for (const l2 of f2.body) {
							const lt2 = tokenize(l2.trim());
							if (!lt2.length) continue;
							if (lt2[0] === "PRINT") {
								rt.print(this.evalExpr(lt2.slice(1), local2));
							}
						}
					} else {
						throw new Error(`Instruction inconnue en fonction: ${lt[0]}`);
					}
				}
				continue;
			}

			// GET utilisé seulement dans des expressions
			throw new Error(`Instruction inconnue: ${head}`);
		}
		return rt.getOutput();
	}
}

# ./Web/mini_langage/src/interpreter.ts

# ./Web/mini_langage/src/runtime.ts
export type Value = number | string;
export type NDArray = { dims: number[]; store: Map<string, number> };

export class Runtime {
	vars = new Map<string, Value>();
	arrays = new Map<string, NDArray>();
	functions = new Map<string, { arg: string; body: string[] }>();
	output: string[] = [];

	print(v: Value) {
		this.output.push(String(v));
	}
	getOutput(): string {
		return this.output.join("\n");
	}

	defineArray(name: string, dims: number[]) {
		this.arrays.set(name, { dims, store: new Map() });
	}
	keyFromIdx(idx: number[]): string {
		return idx.join(",");
	}

	setArray(name: string, idx: number[], val: number) {
		const arr = this.arrays.get(name);
		if (!arr) throw new Error(`Array ${name} non défini`);
		if (idx.length !== arr.dims.length) throw new Error(`Dimensions incorrectes`);
		for (let i = 0; i < idx.length; i++) {
			if (idx[i] < 1 || idx[i] > arr.dims[i]) throw new Error(`Index hors limites`);
		}
		arr.store.set(this.keyFromIdx(idx), val);
	}
	getArray(name: string, idx: number[]): number {
		const arr = this.arrays.get(name);
		if (!arr) throw new Error(`Array ${name} non défini`);
		const k = this.keyFromIdx(idx);
		const v = arr.store.get(k);
		if (v === undefined) throw new Error(`Case ${name}[${k}] vide`);
		return v;
	}
}

# ./Web/mini_langage/src/runtime.ts

# ./Web/mini_langage/src/server.ts
import express, { type Request, type Response } from "express";
import path from "path";
import { Runtime } from "./runtime";
import { Interpreter } from "./interpreter";

const app = express();
app.use(express.json());

// sert /public depuis la racine du projet
const projectRoot = path.resolve();
app.use(express.static(path.join(projectRoot, "public")));

app.post("/run", (req: Request, res: Response) => {
	const code: string = (req.body?.code ?? "") as string;
	const rt = new Runtime();
	const itp = new Interpreter(rt);
	try {
		const out = itp.run(code);
		res.json({ ok: true, output: out });
	} catch (e: any) {
		res.json({ ok: false, error: e.message });
	}
});

const PORT = 3000;
app.listen(PORT, () => console.log(`Web UI: http://localhost:${PORT}`));

# ./Web/mini_langage/src/server.ts

# ./Web/mini_langage/src/storage.ts
import * as fs from "fs";
import * as path from "path";

const DATA_DIR = path.resolve("data");
const LIST_FILE = path.join(DATA_DIR, "Programmes.txt");
const PROGS_DIR = path.join(DATA_DIR, "programmes");

function ensureDirs() {
	if (!fs.existsSync(DATA_DIR)) fs.mkdirSync(DATA_DIR, { recursive: true });
	if (!fs.existsSync(PROGS_DIR)) fs.mkdirSync(PROGS_DIR, { recursive: true });
	if (!fs.existsSync(LIST_FILE)) fs.writeFileSync(LIST_FILE, "", "utf8");
}

export function listPrograms(): string[] {
	ensureDirs();
	const raw = fs.readFileSync(LIST_FILE, "utf8");
	return raw
		.split(/\r?\n/)
		.map((s) => s.trim())
		.filter(Boolean);
}

export function hasProgram(name: string): boolean {
	return listPrograms().includes(name);
}

export function saveProgram(name: string, content: string) {
	ensureDirs();
	if (/[^\w\-]/.test(name)) throw new Error("Nom invalide: utilisez lettres/chiffres/underscore/tiret");
	const file = path.join(PROGS_DIR, `${name}.txt`);
	fs.writeFileSync(file, content, "utf8");
	const set = new Set(listPrograms());
	set.add(name);
	fs.writeFileSync(LIST_FILE, [...set].sort().join("\n") + "\n", "utf8");
}

export function loadProgram(name: string): string {
	ensureDirs();
	const file = path.join(PROGS_DIR, `${name}.txt`);
	if (!fs.existsSync(file)) throw new Error(`Programme introuvable: ${name}`);
	return fs.readFileSync(file, "utf8");
}

export function removeProgram(name: string) {
	ensureDirs();
	const file = path.join(PROGS_DIR, `${name}.txt`);
	if (fs.existsSync(file)) fs.unlinkSync(file);
	const remaining = listPrograms().filter((n) => n !== name);
	fs.writeFileSync(LIST_FILE, remaining.join("\n") + (remaining.length ? "\n" : ""), "utf8");
}

# ./Web/mini_langage/src/storage.ts

# ./Web/mini_langage/tsconfig.json
{
	"compilerOptions": {
		"module": "commonjs",
		"target": "es2020",
		"lib": ["es2020"],
		"types": ["node"],
		"esModuleInterop": true,
		"strict": true,
		"skipLibCheck": true,
		"isolatedModules": false
	}
}

# ./Web/mini_langage/tsconfig.json

# ./Web/organisation_le_matin/organisation_le_matin.html
<!doctype html>
<html lang="fr">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="icon" type="image/x-icon" href="organisation_le_matin.ico">
	<title>Routine avant de partir — calculateur</title>
	<!-- Bootstrap 5 (CDN) -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		:root {
			--warm1: #FFB703;
			--warm2: #FB8500;
			--warm3: #FCA311;
			--gray1: #f8f9fa;
			--gray2: #e9ecef;
			--gray3: #ced4da;
			--text: #212529;
		}

		body {
			min-height: 100vh;
			color: var(--text);
			background: linear-gradient(180deg, #fff6d6 0%, #ffd89b 35%, #f9a43f 60%, #f28c28 100%);
			background-attachment: fixed;
		}

		.app-card {
			background: linear-gradient(180deg, rgba(255, 255, 255, .95), rgba(255, 255, 255, .92));
			border: 1px solid var(--gray3);
			box-shadow: 0 10px 30px rgba(0, 0, 0, .08);
			border-radius: 14px;
		}

		.badge-warm {
			background: linear-gradient(90deg, var(--warm1), var(--warm2));
		}

		.handle {
			cursor: grab;
			user-select: none;
			font-size: 1.25rem;
			line-height: 1;
			color: #6c757d;
			display: flex;
			align-items: center;
			justify-content: center;
			width: 2rem;
		}

		.handle:active {
			cursor: grabbing;
		}

		.step-item {
			background: var(--gray1);
			border: 1px solid var(--gray3);
			border-radius: 10px;
			padding: .5rem .5rem;
			display: flex;
			align-items: center;
			gap: .5rem;
		}

		.step-item.dragging {
			opacity: .6;
		}

		.step-item .minutes {
			width: 7rem;
		}

		.step-item .name {
			flex: 1 1 auto;
			min-width: 8rem;
		}

		.drop-marker {
			height: 10px;
			border-radius: 6px;
			background: linear-gradient(90deg, var(--warm2), var(--warm1));
			margin: .25rem 0;
			display: none;
		}

		.drop-marker.active {
			display: block;
		}

		.subtle {
			color: #6c757d;
		}

		.metric {
			background: var(--gray1);
			border: 1px dashed var(--gray3);
			border-radius: 10px;
			padding: .75rem 1rem;
		}

		.progress {
			height: .5rem;
		}

		.footer-links a {
			color: #495057;
			text-decoration: underline dotted;
		}

		.input-time {
			max-width: 11rem;
		}

		@media (max-width:576px) {
			.step-item {
				flex-wrap: wrap;
			}

			.step-item .minutes {
				width: 100%;
			}

			.step-item .name {
				width: 100%;
			}
		}

		/* Petits boutons dans les onglets */
		.tab-close {
			border: none;
			background: transparent;
			color: #6c757d;
			margin-left: .25rem;
			line-height: 1;
			padding: 0 .25rem;
		}

		.tab-close:hover {
			color: #dc3545;
		}
	</style>
</head>

<body>
	<main class="container py-4 py-md-5">
		<header class="mb-4 text-center">
			<h1 class="h3 fw-bold mb-1">Calculateur « Avant de partir »</h1>
			<p class="mb-0 subtle">Durées modifiables, ordre réorganisable par poignées, calculs en direct.</p>
		</header>

		<section class="app-card p-3 p-md-4">
			<!-- Onglets de profils -->
			<ul id="profileTabs" class="nav nav-tabs mb-3"></ul>
			<div class="d-flex flex-wrap gap-2 justify-content-end mb-3">
				<button id="newProfileBtn" class="btn btn-sm btn-outline-primary">Nouvel onglet</button>
				<button id="renameProfileBtn" class="btn btn-sm btn-outline-secondary">Renommer l’onglet</button>
				<button id="deleteProfileBtn" class="btn btn-sm btn-outline-danger">Supprimer l’onglet</button>
			</div>

			<div class="row g-3 align-items-end">
				<div class="col-12 col-md">
					<label for="departureTime" class="form-label fw-semibold">Heure de départ</label>
					<input id="departureTime" type="time" class="form-control input-time" step="60" />
				</div>
				<div class="col-12 col-md">
					<div class="metric">
						<div class="d-flex justify-content-between">
							<span class="fw-semibold">Départ dans</span>
							<span id="countdown" class="fw-bold"></span>
						</div>
						<div class="progress mt-2">
							<div id="countdownBar" class="progress-bar" role="progressbar" style="width:0%"></div>
						</div>
					</div>
				</div>
				<div class="col-12 col-md-auto text-md-end d-flex gap-2">
					<button id="resetBtn" class="btn btn-outline-secondary">Réinitialiser</button>
				</div>
			</div>

			<hr class="my-4">

			<div class="d-flex align-items-center justify-content-between mb-2">
				<h2 class="h5 mb-0">Étapes de la routine</h2>
				<span class="badge badge-warm text-dark">Glisser-déposer avec la poignée</span>
			</div>

			<ul id="steps" class="list-unstyled d-grid gap-2 mb-2"></ul>
			<div id="dropMarker" class="drop-marker"></div>
			<div class="d-grid mb-3">
				<button id="addBtn" class="btn btn-sm btn-outline-primary">Ajouter</button>
			</div>

			<!-- Intervalle entre Manger et Toilette 2 (pas une étape) -->
			<div class="row g-2 mb-4">
				<div class="col-12 col-md-6">
					<label class="form-label fw-semibold" for="intervalToilettes">
						Intervalle entre « Manger » et « Toilette 2 »
					</label>
					<div class="input-group input-group-sm" style="max-width:14rem">
						<input id="intervalToilettes" type="number" class="form-control" min="0" max="240" step="5"
							value="60" />
						<span class="input-group-text">min</span>
					</div>
					<div class="form-text">
						Pris en compte dans la durée totale <span id="intervalStatus" class="fw-semibold"></span>.
					</div>
				</div>
			</div>

			<div class="row g-3">
				<div class="col-12 col-lg-4">
					<div class="metric">
						<div class="fw-semibold">Durée totale</div>
						<div id="totalDuration" class="fs-5 fw-bold"></div>
						<div id="totalMinutes" class="subtle"></div>
					</div>
				</div>
				<div class="col-12 col-lg-4">
					<div class="metric">
						<div class="fw-semibold">Début au plus tard</div>
						<div id="latestStart" class="fs-5 fw-bold"></div>
						<div id="latestStartRel" class="subtle"></div>
					</div>
				</div>
				<div class="col-12 col-lg-4">
					<div class="metric">
						<div class="fw-semibold">Marge</div>
						<div id="slack" class="fs-5 fw-bold"></div>
						<div id="slackHint" class="subtle"></div>
					</div>
				</div>
			</div>
		</section>

		<footer class="text-center mt-4 subtle footer-links">
			<small>Astuce : cochez/décochez pour inclure une étape. « Ajouter » crée une nouvelle activité de 15 min.
				L’intervalle est ajouté seulement si « Manger » est avant « Toilette 2 ».</small>
		</footer>
	</main>

	<script>
		// ========================
		//   Constantes & défauts
		// ========================
		const STORAGE_NS = 'a_faire_avant_de_partir'; // namespace
		const PROFILE_DEFAULT_NAME = 'routine du matin';

		const DEFAULT_STEPS = [
			{id: "wake", label: "Se lever", minutes: 30, min: 0, max: 240, enabled: true},
			{id: "toilette1", label: "Toilette 1", minutes: 15, min: 0, max: 120, enabled: true},
			{id: "prep", label: "Mise en condition (coiffer / raser)", minutes: 15, min: 0, max: 120, enabled: true},
			{id: "eat", label: "Manger", minutes: 15, min: 0, max: 120, enabled: true},
			{id: "toilette2", label: "Toilette 2", minutes: 15, min: 0, max: 120, enabled: true},
			{id: "buffer", label: "Battement (s'habiller + vérifier fenêtres)", minutes: 10, min: 0, max: 120, enabled: true}
		];
		const DEFAULT_INTERVAL_TOILETTES = 60; // minutes

		// ========================
		//       État global
		// ========================
		const state = {
			profile: PROFILE_DEFAULT_NAME,
			steps: structuredClone(DEFAULT_STEPS),
			intervalToilettes: DEFAULT_INTERVAL_TOILETTES,
			drag: {id: null, placeholderIndex: -1},
			_intervalApplies: true
		};

		// ========================
		//         Sélecteurs
		// ========================
		const $profileTabs = document.getElementById('profileTabs');
		const $newProfileBtn = document.getElementById('newProfileBtn');
		const $renameProfileBtn = document.getElementById('renameProfileBtn');
		const $deleteProfileBtn = document.getElementById('deleteProfileBtn');

		const $steps = document.getElementById('steps');
		const $dropMarker = document.getElementById('dropMarker');
		const $departureTime = document.getElementById('departureTime');
		const $countdown = document.getElementById('countdown');
		const $countdownBar = document.getElementById('countdownBar');
		const $totalDuration = document.getElementById('totalDuration');
		const $totalMinutes = document.getElementById('totalMinutes');
		const $latestStart = document.getElementById('latestStart');
		const $latestStartRel = document.getElementById('latestStartRel');
		const $slack = document.getElementById('slack');
		const $slackHint = document.getElementById('slackHint');
		const $resetBtn = document.getElementById('resetBtn');
		const $intervalToilettes = document.getElementById('intervalToilettes');
		const $intervalStatus = document.getElementById('intervalStatus');
		const $addBtn = document.getElementById('addBtn');

		// ========================
		//        Utilitaires
		// ========================
		const pad = n => String(n).padStart(2, '0');
		const clamp = (v, min, max) => Math.min(max, Math.max(min, v));
		const minutesToHm = total => {
			const sign = total < 0 ? '-' : '';
			const m = Math.abs(total), h = Math.floor(m / 60), mm = m % 60;
			return sign + (h ? `${h} h ${pad(mm)} min` : `${mm} min`);
		};
		const timeToMinutes = t => {if (!t) return 8 * 60 + 25; const [h, m] = t.split(':').map(Number); return h * 60 + m;};
		const minutesToTime = m => {m = ((m % 1440) + 1440) % 1440; const h = Math.floor(m / 60), mm = m % 60; return `${pad(h)}:${pad(mm)}`;};
		function nextDateForTime(hhmm) {
			const now = new Date(); const [h, m] = hhmm.split(':').map(Number);
			const d = new Date(now); d.setHours(h, m, 0, 0); if (d <= now) d.setDate(d.getDate() + 1); return d;
		}

		// ========================
		//        Stockage
		// ========================
		const manifestKey = () => `${STORAGE_NS}:manifest`;
		const profileKey = (name) => `${STORAGE_NS}:${name}`;

		function saveManifest(m) {
			try {localStorage.setItem(manifestKey(), JSON.stringify(m));} catch (_) { }
		}
		function loadManifest() {
			try {
				const raw = localStorage.getItem(manifestKey());
				if (raw) return JSON.parse(raw);
			} catch (_) { }
			// Migration éventuelle de l’ancien stockage mono-profil
			const legacy = localStorage.getItem(STORAGE_NS);
			if (legacy) {
				try {
					localStorage.setItem(profileKey(PROFILE_DEFAULT_NAME), legacy);
					localStorage.removeItem(STORAGE_NS);
				} catch (_) { }
			} else {
				// Si aucun profil, créer le défaut
				const data = defaultProfileData();
				try {localStorage.setItem(profileKey(PROFILE_DEFAULT_NAME), JSON.stringify(data));} catch (_) { }
			}
			const m = {active: PROFILE_DEFAULT_NAME, order: [PROFILE_DEFAULT_NAME]};
			saveManifest(m);
			return m;
		}
		function saveProfile(name, data) {
			try {localStorage.setItem(profileKey(name), JSON.stringify(data));} catch (_) { }
		}
		function loadProfile(name) {
			try {
				const raw = localStorage.getItem(profileKey(name));
				return raw ? JSON.parse(raw) : null;
			} catch (_) {return null;}
		}
		function deleteProfileFromStorage(name) {
			try {localStorage.removeItem(profileKey(name));} catch (_) { }
		}

		function defaultProfileData() {
			return {
				steps: structuredClone(DEFAULT_STEPS),
				intervalToilettes: DEFAULT_INTERVAL_TOILETTES,
				departureTime: '08:25'
			};
		}
		function currentProfileData() {
			return {
				steps: state.steps.map(s => ({
					id: s.id, label: s.label, minutes: Number(s.minutes) || 0,
					min: s.min ?? 0, max: s.max ?? 600, enabled: s.enabled !== false
				})),
				intervalToilettes: Number(state.intervalToilettes) || 0,
				departureTime: $departureTime.value || '08:25'
			};
		}

		// ========================
		//   Gestion des profils
		// ========================
		let manifest = loadManifest();

		function ensureUniqueName(base) {
			const clean = (base || '').trim() || 'Onglet';
			if (!manifest.order.includes(clean)) return clean;
			let n = 2;
			while (manifest.order.includes(`${clean} (${n})`)) n++;
			return `${clean} (${n})`;
		}
		function nextPreparationName() {
			const nums = manifest.order
				.map(n => n.match(/^Préparation\s+(\d+)$/i))
				.filter(Boolean).map(m => parseInt(m[1], 10));
			let i = 1; while (nums.includes(i)) i++;
			return `Préparation ${i}`;
		}

		function buildTabs() {
			$profileTabs.innerHTML = '';
			manifest.order.forEach(name => {
				const li = document.createElement('li'); li.className = 'nav-item';
				const btn = document.createElement('button');
				btn.type = 'button';
				btn.className = 'nav-link' + (name === state.profile ? ' active' : '');
				btn.textContent = name;
				btn.addEventListener('click', () => switchProfile(name));
				li.appendChild(btn);
				$profileTabs.appendChild(li);
			});
		}

		function switchProfile(name) {
			// Sauvegarder l’actuel avant de basculer
			saveState(); // écrit dans la clé du profil actif
			// Charger le nouveau
			const data = loadProfile(name) || defaultProfileData();
			applyProfileData(name, data);
			manifest.active = name;
			saveManifest(manifest);
			buildTabs();
			rebuildList();
			renderMetrics();
		}

		function applyProfileData(name, data) {
			state.profile = name;
			state.steps = Array.isArray(data.steps)
				? data.steps.map(s => ({
					id: s.id ?? `custom_${Date.now()}`, label: s.label ?? 'Activité à faire',
					minutes: Number(s.minutes) || 0, min: s.min ?? 0, max: s.max ?? 600,
					enabled: s.enabled !== false
				}))
				: structuredClone(DEFAULT_STEPS);
			state.intervalToilettes = (typeof data.intervalToilettes === 'number') ? data.intervalToilettes : DEFAULT_INTERVAL_TOILETTES;
			$intervalToilettes.value = state.intervalToilettes;
			$departureTime.value = data.departureTime || '08:25';
		}

		function createProfile() {
			const name = ensureUniqueName(nextPreparationName());
			const data = defaultProfileData();
			saveProfile(name, data);
			manifest.order.push(name);
			manifest.active = name;
			saveManifest(manifest);
			switchProfile(name);
		}

		function renameCurrentProfile() {
			const oldName = state.profile;
			const input = prompt('Nouveau nom de l’onglet :', oldName);
			if (input === null) return; // annulé
			const trimmed = input.trim();
			if (!trimmed) return;
			const newName = trimmed === oldName ? oldName : ensureUniqueName(trimmed);

			if (newName === oldName) {buildTabs(); return;}

			// Déplacer les données sous la nouvelle clé
			saveState(); // s’assurer que l’état est à jour
			const data = loadProfile(oldName) || currentProfileData();
			saveProfile(newName, data);
			deleteProfileFromStorage(oldName);

			// Mettre à jour le manifeste
			manifest.order = manifest.order.map(n => n === oldName ? newName : n);
			manifest.active = newName;
			saveManifest(manifest);

			// Appliquer et rerender
			applyProfileData(newName, data);
			buildTabs();
			rebuildList();
			renderMetrics();
		}

		function deleteCurrentProfile() {
			const name = state.profile;
			const ok = confirm(`Supprimer l’onglet « ${name} » ?\nCette action efface ses données locales.`);
			if (!ok) return;

			deleteProfileFromStorage(name);
			manifest.order = manifest.order.filter(n => n !== name);

			if (manifest.order.length === 0) {
				const def = PROFILE_DEFAULT_NAME;
				const data = defaultProfileData();
				saveProfile(def, data);
				manifest.order = [def];
				manifest.active = def;
				saveManifest(manifest);
				applyProfileData(def, data);
			} else {
				const next = manifest.order[0];
				manifest.active = next;
				saveManifest(manifest);
				const data = loadProfile(next) || defaultProfileData();
				applyProfileData(next, data);
			}

			buildTabs();
			rebuildList();
			renderMetrics();
		}

		// ========================
		//   Stockage (profil)
		// ========================
		function saveState() {
			const data = currentProfileData();
			saveProfile(state.profile, data);
		}
		function loadState() {
			const data = loadProfile(state.profile);
			if (!data) return false;
			applyProfileData(state.profile, data);
			return true;
		}

		// ========================
		//   Construction UI steps
		// ========================
		function buildStepItem(step) {
			const li = document.createElement('li'); li.className = 'step-item'; li.dataset.id = step.id;

			const handle = document.createElement('div');
			handle.className = 'handle'; handle.title = 'Glisser pour réordonner';
			handle.setAttribute('aria-label', 'Poignée de réorganisation');
			handle.textContent = '≡'; handle.setAttribute('draggable', 'true');

			const cb = document.createElement('input');
			cb.type = 'checkbox'; cb.className = 'form-check-input m-0'; cb.checked = step.enabled !== false;
			cb.title = 'Inclure cette étape dans le calcul';

			const nameWrap = document.createElement('div'); nameWrap.className = 'name';
			nameWrap.innerHTML = `<input type="text" class="form-control form-control-sm" value="${step.label}">`;
			const nameInput = nameWrap.querySelector('input');

			const minutesWrap = document.createElement('div'); minutesWrap.className = 'minutes';
			minutesWrap.innerHTML = `
        <div class="input-group input-group-sm">
          <input type="number" class="form-control" min="${step.min ?? 0}" max="${step.max ?? 600}" step="1" value="${step.minutes}" aria-label="Minutes pour ${step.label}">
          <span class="input-group-text">min</span>
        </div>`;
			const minutesInput = minutesWrap.querySelector('input');

			const delBtn = document.createElement('button');
			delBtn.className = 'btn btn-sm btn-outline-danger';
			delBtn.textContent = 'Supprimer';
			delBtn.title = 'Supprimer cette étape';

			li.append(handle, cb, nameWrap, minutesWrap, delBtn);

			cb.addEventListener('change', () => {step.enabled = cb.checked; renderMetrics();});
			nameInput.addEventListener('input', () => {step.label = nameInput.value || 'Activité'; minutesInput.setAttribute('aria-label', `Minutes pour ${step.label}`); saveState();});
			minutesInput.addEventListener('input', () => {
				const v = clamp(parseInt(minutesInput.value || '0', 10), step.min ?? 0, step.max ?? 600);
				minutesInput.value = v; step.minutes = v; renderMetrics();
			});
			delBtn.addEventListener('click', () => {
				const idx = state.steps.findIndex(s => s.id === step.id);
				if (idx !== -1) {state.steps.splice(idx, 1); rebuildList(); renderMetrics();}
			});

			handle.addEventListener('dragstart', (e) => {
				state.drag.id = step.id;
				li.classList.add('dragging');
				e.dataTransfer.effectAllowed = 'move';
				e.dataTransfer.setData('text/plain', step.id);
			});
			handle.addEventListener('dragend', () => {
				li.classList.remove('dragging');
				state.drag.id = null;
				$dropMarker.classList.remove('active');
			});

			return li;
		}

		function rebuildList() {
			$steps.innerHTML = '';
			for (const step of state.steps) {$steps.appendChild(buildStepItem(step));}
		}

		// --- DnD helpers
		const itemsWithoutDragging = () => [...$steps.querySelectorAll('.step-item:not(.dragging)')];
		function getDropIndexByY(y) {
			const els = itemsWithoutDragging();
			let closest = {offset: Number.NEGATIVE_INFINITY, element: null};
			for (const el of els) {
				const box = el.getBoundingClientRect();
				const offset = y - (box.top + box.height / 2);
				if (offset < 0 && offset > closest.offset) {closest = {offset, element: el};}
			}
			return closest.element ? els.indexOf(closest.element) : els.length;
		}
		function positionDropMarkerByIndex(idx) {
			const els = itemsWithoutDragging();
			$dropMarker.classList.add('active');
			if (idx >= 0 && idx < els.length) {els[idx].before($dropMarker);} else {$steps.appendChild($dropMarker);}
			$dropMarker.style.width = '100%';
		}

		// ========================
		//         Calculs
		// ========================
		function intervalApplies() {
			const idxEat = state.steps.findIndex(s => s.id === 'eat');
			const idxT2 = state.steps.findIndex(s => s.id === 'toilette2');
			const eatEnabled = idxEat !== -1 && (state.steps[idxEat].enabled !== false);
			const t2Enabled = idxT2 !== -1 && (state.steps[idxT2].enabled !== false);
			return eatEnabled && t2Enabled && idxEat < idxT2;
		}
		function totalMinutes() {
			const stepsSum = state.steps.reduce((s, st) => s + ((st.enabled !== false) ? (parseInt(st.minutes, 10) || 0) : 0), 0);
			const interval = parseInt(state.intervalToilettes, 10) || 0;
			const applies = intervalApplies();
			state._intervalApplies = applies;
			return stepsSum + (applies ? interval : 0);
		}

		// ========================
		//          Rendu
		// ========================
		function renderMetrics() {
			const total = totalMinutes();
			const depStr = $departureTime.value || '08:25';
			const dep = nextDateForTime(depStr);
			const now = new Date();

			$totalDuration.textContent = minutesToHm(total);
			$totalMinutes.textContent = `${total} minutes`;

			if (state._intervalApplies) {
				$intervalStatus.textContent = '(appliqué)';
				$intervalStatus.classList.remove('text-danger'); $intervalStatus.classList.add('text-success');
			} else {
				$intervalStatus.textContent = "(non appliqué car ordre/état ne le permet pas)";
				$intervalStatus.classList.remove('text-success'); $intervalStatus.classList.add('text-danger');
			}

			const depMinutes = timeToMinutes(depStr);
			const latestStartMinutes = depMinutes - total;
			$latestStart.textContent = minutesToTime(latestStartMinutes);

			const latestStartDate = new Date(dep);
			latestStartDate.setMinutes(latestStartDate.getMinutes() - total);
			$latestStartRel.textContent = relativeFromNow(latestStartDate);

			const minUntilDep = Math.round((dep - now) / 60000);
			const slackMin = minUntilDep - total;
			$slack.textContent = minutesToHm(slackMin);
			$slack.classList.toggle('text-success', slackMin >= 0);
			$slack.classList.toggle('text-danger', slackMin < 0);
			$slackHint.textContent = slackMin >= 0
				? "Temps disponible en plus si vous commencez maintenant."
				: "Retard si vous commencez maintenant (à rattraper).";

			renderCountdown(dep);
			saveState();
		}

		function renderCountdown(depDate) {
			const now = new Date(); let ms = depDate - now; if (ms < 0) ms = 0;
			const s = Math.floor(ms / 1000), h = Math.floor(s / 3600), m = Math.floor((s % 3600) / 60);
			$countdown.textContent = `${pad(h)}:${pad(m)}`;
			const startWindow = new Date(depDate); startWindow.setHours(startWindow.getHours() - 8);
			const totalWindow = depDate - startWindow, elapsed = now - startWindow;
			const pct = clamp(Math.round((elapsed / totalWindow) * 100), 0, 100);
			$countdownBar.style.width = pct + '%';
			$countdownBar.style.background = 'linear-gradient(90deg, var(--warm1), var(--warm2))';
		}

		function relativeFromNow(target) {
			const now = new Date(); const diffMin = Math.round((target - now) / 60000);
			if (diffMin > 0) return `dans ${minutesToHm(diffMin)}`;
			if (diffMin < 0) return `il y a ${minutesToHm(-diffMin)}`;
			return "maintenant";
		}

		function setDefaultDeparture() {$departureTime.value = '08:25';}

		// ========================
		//     Initialisation
		// ========================
		function init() {
			// Charger profil actif du manifeste
			state.profile = manifest.active || PROFILE_DEFAULT_NAME;
			if (!loadState()) { // si pas de données, créer défaut
				const data = defaultProfileData();
				saveProfile(state.profile, data);
				applyProfileData(state.profile, data);
			}

			buildTabs();
			rebuildList();
			renderMetrics();

			// DnD liste
			$steps.addEventListener('dragover', (e) => {
				if (!state.drag.id) return;
				e.preventDefault();
				const idx = getDropIndexByY(e.clientY);
				state.drag.placeholderIndex = idx;
				positionDropMarkerByIndex(idx);
			});
			$steps.addEventListener('drop', (e) => {
				if (!state.drag.id) return;
				e.preventDefault();
				const fromIdx = state.steps.findIndex(s => s.id === state.drag.id);
				let toIdx = state.drag.placeholderIndex;
				if (fromIdx === -1 || toIdx === -1) {$dropMarker.classList.remove('active'); return;}
				if (fromIdx < toIdx) toIdx--;
				const [moved] = state.steps.splice(fromIdx, 1);
				state.steps.splice(Math.max(0, Math.min(toIdx, state.steps.length)), 0, moved);
				rebuildList();
				renderMetrics();
				$dropMarker.classList.remove('active');
				state.drag.id = null;
			});

			// Inputs
			$departureTime.addEventListener('input', renderMetrics);
			$intervalToilettes.addEventListener('input', () => {
				const v = clamp(parseInt($intervalToilettes.value || '0', 10), 0, 240);
				$intervalToilettes.value = v; state.intervalToilettes = v; renderMetrics();
			});
			$addBtn.addEventListener('click', () => {
				const newStep = {id: `custom_${Date.now()}`, label: 'Activité à faire', minutes: 15, min: 0, max: 600, enabled: true};
				state.steps.push(newStep);
				rebuildList();
				renderMetrics();
			});
			$resetBtn.addEventListener('click', () => {
				state.steps = structuredClone(DEFAULT_STEPS);
				state.intervalToilettes = DEFAULT_INTERVAL_TOILETTES;
				$intervalToilettes.value = DEFAULT_INTERVAL_TOILETTES;
				setDefaultDeparture();
				rebuildList();
				renderMetrics();
				saveState(); // par profil
			});

			// Boutons profils
			$newProfileBtn.addEventListener('click', createProfile);
			$renameProfileBtn.addEventListener('click', renameCurrentProfile);
			$deleteProfileBtn.addEventListener('click', deleteCurrentProfile);

			// Tick 1s
			setInterval(() => {
				const dep = nextDateForTime($departureTime.value || '08:25');
				renderCountdown(dep);
				const now = new Date();
				const minUntilDep = Math.round((dep - now) / 60000);
				const total = totalMinutes();
				const slackMin = minUntilDep - total;
				$slack.textContent = minutesToHm(slackMin);
				$slack.classList.toggle('text-success', slackMin >= 0);
				$slack.classList.toggle('text-danger', slackMin < 0);
				$latestStartRel.textContent = relativeFromNow(new Date(dep.getTime() - total * 60000));
				if (state._intervalApplies) {
					$intervalStatus.textContent = '(appliqué)';
					$intervalStatus.classList.remove('text-danger'); $intervalStatus.classList.add('text-success');
				} else {
					$intervalStatus.textContent = "(non appliqué car ordre/état ne le permet pas)";
					$intervalStatus.classList.remove('text-success'); $intervalStatus.classList.add('text-danger');
				}
			}, 1000);
		}

		document.addEventListener('DOMContentLoaded', init);
	</script>
</body>

</html>
# ./Web/organisation_le_matin/organisation_le_matin.html

# ./Web/pomodoro/pomodoro.html
﻿<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="cp1252">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Suivi 8h–22h</title>
	<link rel="icon" href="favicon.ico" type="image/x-icon" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		html,
		body {
			height: 100%;
			margin: 0
		}

		body {
			background:
				linear-gradient(to bottom, rgba(160, 230, 255, 0.7), rgba(168, 230, 207, 0.7)),
				url("./Images/petit-palmier.jpg");
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.card {
			background: rgba(255, 255, 255, 0.6);
			border: 5px solid #ff7f11;
			border-radius: 5px;
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
			width: 90%;
			max-width: 400px;
			padding: 20px;
		}

		.big {
			font-size: 2.5rem;
		}

		.small {
			font-size: 0.9rem;
		}
	</style>
</head>

<body>
	<div class="card text-center">
		<div class="small mb-2">
			Heure de début : <strong>08h00</strong> — Heure de fin : <strong>22h00</strong>
		</div>
		<div id="nextHalfHour" class="big mb-3"></div>
		<div id="details" class="small"></div>
	</div>

	<script>
		//  # Données
		const H_START = 8, H_END = 22;

		//  # Fonctions utilitaires
		function formatTwoDigits(nombre) {
			return nombre < 10 ? '0' + nombre : nombre.toString();
		}

		function getClampedMinutes(date) {
			const total = (H_END - H_START) * 60;
			const passed = (date.getHours() - H_START) * 60 + date.getMinutes();
			return Math.max(0, Math.min(total, passed));
		}

		function getToNextHalf(date) {
			const minutes = date.getMinutes();
			return (minutes < 30 ? 30 : 60) - minutes;
		}

		//  # Ajout : Fonctions pour les nouvelles infos demandées
		function getHalfHourStart(date) {
			// Retourne l'heure de début de la demi-heure courante, formatée
			const hour = date.getHours();
			const minute = date.getMinutes() < 30 ? 0 : 30;
			return formatTwoDigits(hour) + 'h' + formatTwoDigits(minute);
		}

		function getHalfHourEnd(date) {
			// Retourne l'heure de fin de la demi-heure courante, formatée
			const hour = date.getHours();
			if (date.getMinutes() < 30) {
				return formatTwoDigits(hour) + 'h30';
			} else {
				return formatTwoDigits(hour + 1) + 'h00';
			}
		}

		function getMinutesSinceHalfHour(date) {
			// Minutes écoulées depuis début demi-heure
			return date.getMinutes() < 30 ? date.getMinutes() : date.getMinutes() - 30;
		}

		//  # Fonctions principales
		function updateDisplay() {
			const now = new Date();
			const passed = getClampedMinutes(now);
			const total = (H_END - H_START) * 60;
			const rem = total - passed;

			if (now.getHours() < H_START || now.getHours() >= H_END) {
				document.getElementById('nextHalfHour').textContent = 'Hors plage';
				document.getElementById('details').textContent = '';
				return;
			}

			document.getElementById('nextHalfHour').textContent =
				`${formatTwoDigits(getToNextHalf(now))} min avant demi-heure`;

			// Ajout des nouvelles infos
			const demiHeureDebut = getHalfHourStart(now);
			const demiHeureFin = getHalfHourEnd(now);
			const minutesDansDemiHeure = getMinutesSinceHalfHour(now);
			const tempsRestantDemiHeure = getToNextHalf(now);

			document.getElementById('details').innerHTML =
				`Demi-heures passées : ${Math.floor(passed / 30)}<br>` +
				`Temps passé : ${Math.floor(passed / 60)}h${formatTwoDigits(passed % 60)}<br>` +
				`Temps restant : ${Math.floor(rem / 60)}h${formatTwoDigits(rem % 60)}<br>` +
				`<hr style="margin:5px 0">` +
				`Demi-heure en cours : ${demiHeureDebut} à ${demiHeureFin}<br>` +
				`Temps écoulé depuis le début de cette demi-heure : ${minutesDansDemiHeure} min<br>` +
				`Temps restant dans cette demi-heure : ${tempsRestantDemiHeure} min`;
		}

		//  # Main
		function main() {
			document.addEventListener('DOMContentLoaded', () => {
				updateDisplay();
				setInterval(updateDisplay, 60000);
			});
		}

		//  # Lancement du programme
		main();

	</script>

</body>

</html>

# ./Web/pomodoro/pomodoro.html

# ./Web/snake/snake_10_niveau.html
<!doctype html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<title>Snake – 10 niveaux (Bootstrap)</title>
	<link rel="icon" type="image/x-icon" href="favicon.ico">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<!-- Bootstrap 5 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		:root {
			--cell: 20px;
			--grid: 24;
			--canvas: calc(var(--cell) * var(--grid));
		}

		body {
			background: #0f172a;
			color: #e2e8f0;
		}

		canvas {
			background: #0b1220;
			border: 1px solid #334155;
			width: 100%;
			height: auto;
			image-rendering: pixelated;
		}

		.game-wrap {
			max-width: 1100px;
		}

		.hud .badge {
			font-size: .9rem;
		}

		.dpad button {
			width: 64px;
			height: 64px;
		}

		.legend {
			font-size: .9rem;
			color: #94a3b8;
		}

		.card {
			background: #0b1220;
			border-color: #1f2a44;
		}

		.progress {
			background: #0f172a;
			height: 10px;
		}

		.progress-bar {
			background: linear-gradient(90deg, #22c55e, #16a34a);
		}

		.form-range::-webkit-slider-thumb {
			background: #22c55e;
		}
	</style>
</head>

<body>
	<div class="container py-4 game-wrap">
		<div class="row g-4 align-items-start">
			<div class="col-lg-7">
				<div class="ratio ratio-1x1">
					<canvas id="game" width="480" height="480"></canvas>
				</div>
				<div class="mt-2 legend">
					Flèches ou Z/Q/S/D. Espace: Pause. Manger 5 pommes pour monter de niveau.
				</div>
			</div>

			<div class="col-lg-5">
				<div class="card">
					<div class="card-body">
						<div class="d-flex justify-content-between align-items-center mb-2 hud">
							<span class="badge text-bg-primary">Niveau <span id="level">1</span>/10</span>
							<span class="badge text-bg-success">Score <span id="score">0</span></span>
							<span class="badge text-bg-secondary">Vitesse <span id="speed">200</span>ms</span>
						</div>

						<div class="mb-2">
							Objectif niveau: <strong><span id="target">5</span></strong> pommes
							<div class="progress mt-1">
								<div id="progress" class="progress-bar" style="width:0%"></div>
							</div>
						</div>

						<!-- Nouveau: sélection directe du niveau -->
						<div class="row g-2 align-items-end mb-3">
							<div class="col-6">
								<label for="levelInput" class="form-label mb-1">Choisir le niveau (1–10)</label>
								<input id="levelInput" class="form-control" type="number" min="1" max="10" step="1"
									value="1">
							</div>
							<div class="col-6 d-grid">
								<button id="btnGoLevel" class="btn btn-outline-primary">Aller à ce niveau</button>
							</div>
						</div>

						<div class="d-flex gap-2 my-3 flex-wrap">
							<button id="btnStart" class="btn btn-success">Démarrer</button>
							<button id="btnPause" class="btn btn-warning">Pause</button>
							<button id="btnResume" class="btn btn-info">Reprendre</button>
							<button id="btnRestart" class="btn btn-outline-light">Recommencer</button>
						</div>

						<div class="d-grid gap-2 d-md-none dpad justify-content-center text-center">
							<div><button class="btn btn-outline-secondary" data-dir="up">↑</button></div>
							<div class="d-flex justify-content-center gap-2">
								<button class="btn btn-outline-secondary" data-dir="left">←</button>
								<button class="btn btn-outline-secondary" data-dir="down">↓</button>
								<button class="btn btn-outline-secondary" data-dir="right">→</button>
							</div>
						</div>

						<hr>
						<p class="mb-1">Niveaux</p>
						<ul class="small mb-0">
							<li>1: libre</li>
							<li>2: anneau central</li>
							<li>3: croix</li>
							<li>4: doubles murs</li>
							<li>5: coins</li>
							<li>6: diagonale</li>
							<li>7: clôture à portails</li>
							<li>8: barres horizontales</li>
							<li>9: blocs aléatoires</li>
							<li>10: labyrinthe simple</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Modals -->
	<div class="modal fade" id="modalEnd" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content bg-dark text-light">
				<div class="modal-header">
					<h5 class="modal-title" id="endTitle">Fin de niveau</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
						aria-label="Fermer"></button>
				</div>
				<div class="modal-body">
					<p id="endMessage" class="mb-0"></p>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary" data-bs-dismiss="modal" id="btnNext">Continuer</button>
					<button class="btn btn-outline-light" id="btnModalRestart">Recommencer</button>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		(() => {
			// === Constantes & Config ===
			const GRID = 24;
			const CELL = 20; // px
			const TARGET_PER_LEVEL = 5;
			const SPEEDS = [200, 180, 165, 150, 135, 120, 105, 95, 85, 75]; // ms par tick (niveaux 1..10)

			// === État de jeu ===
			let ctx, canvas;
			let snake, dir, nextDir, food;
			let obstacles = new Set();
			let levelIdx = 0; // 0..9
			let foodsEaten = 0;
			let score = 0;
			let running = false;
			let loopHandle = null;

			// === Helpers ===
			const key = (x, y) => `${x},${y}`;
			const unkey = k => k.split(',').map(Number);
			const inBounds = (x, y) => x >= 0 && y >= 0 && x < GRID && y < GRID;

			// === UI refs ===
			const $level = document.getElementById('level');
			const $score = document.getElementById('score');
			const $speed = document.getElementById('speed');
			const $target = document.getElementById('target');
			const $progress = document.getElementById('progress');
			const $levelInput = document.getElementById('levelInput');
			const modalEndEl = document.getElementById('modalEnd');
			const modalEnd = new bootstrap.Modal(modalEndEl);
			const $endTitle = document.getElementById('endTitle');
			const $endMessage = document.getElementById('endMessage');

			// === Entrée ===
			const DIRS = {
				ArrowUp: {x: 0, y: -1}, ArrowDown: {x: 0, y: 1}, ArrowLeft: {x: -1, y: 0}, ArrowRight: {x: 1, y: 0},
				w: {x: 0, y: -1}, a: {x: -1, y: 0}, s: {x: 0, y: 1}, d: {x: 1, y: 0},
				z: {x: 0, y: -1}, q: {x: -1, y: 0}
			};

			document.addEventListener('keydown', e => {
				if (e.code === 'Space') {e.preventDefault(); togglePause(); return;}
				const d = DIRS[e.key];
				if (!d) return;
				if (snake.length > 1 && d.x === -dir.x && d.y === -dir.y) return;
				nextDir = d;
			});

			document.querySelectorAll('.dpad [data-dir]').forEach(btn => {
				btn.addEventListener('click', () => {
					const m = btn.getAttribute('data-dir');
					const map = {up: 'ArrowUp', down: 'ArrowDown', left: 'ArrowLeft', right: 'ArrowRight'};
					const evt = new KeyboardEvent('keydown', {key: map[m]});
					document.dispatchEvent(evt);
				});
			});

			// === API Jeu ===
			function startGame(startLevel = null) {
				stopLoop();
				score = 0;
				// Avant: levelIdx = clampLevelIndex((startLevel ?? Number($levelInput.value) || 1) - 1);
				const chosenLevel = (startLevel ?? (Number($levelInput.value) || 1)); // parenthèses indispensables
				levelIdx = clampLevelIndex(chosenLevel - 1);
				startLevelAt(levelIdx);
				startLoop();
			}

			function startLevelAt(idx) {
				running = true;
				foodsEaten = 0;
				snake = [
					{x: Math.floor(GRID / 2) + 1, y: Math.floor(GRID / 2)},
					{x: Math.floor(GRID / 2), y: Math.floor(GRID / 2)},
					{x: Math.floor(GRID / 2) - 1, y: Math.floor(GRID / 2)}
				];
				dir = {x: 1, y: 0};
				nextDir = dir;
				obstacles = buildLevel(idx);
				placeFood();
				syncHUD();
				draw();
			}

			function nextLevel() {
				if (levelIdx < 9) {
					levelIdx++;
					startLevelAt(levelIdx);
					popup(`Niveau ${levelIdx} terminé`, `Passage au niveau ${levelIdx + 1}.`, false);
				} else {
					running = false;
					stopLoop();
					popup('Victoire', `Vous avez terminé les 10 niveaux. Score: ${score}.`, true);
				}
			}

			function gameLoop() {
				if (!running) return;
				update();
				draw();
			}

			function update() {
				dir = nextDir;
				const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
				if (!inBounds(head.x, head.y)) return gameOver('Collision avec le mur');
				if (obstacles.has(key(head.x, head.y))) return gameOver('Collision avec un obstacle');
				for (let i = 0; i < snake.length; i++) {
					if (snake[i].x === head.x && snake[i].y === head.y) return gameOver('Collision avec votre queue');
				}
				snake.unshift(head);
				if (head.x === food.x && head.y === food.y) {
					score += 10;
					foodsEaten += 1;
					if (foodsEaten >= TARGET_PER_LEVEL) {nextLevel(); return;}
					placeFood();
				} else {
					snake.pop();
				}
				syncHUD();
			}

			function draw() {
				ctx.fillStyle = '#0b1220';
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				ctx.strokeStyle = '#0f1b33'; ctx.lineWidth = 1;
				for (let i = 1; i < GRID; i++) {
					const p = i * CELL + .5;
					ctx.beginPath(); ctx.moveTo(p, 0); ctx.lineTo(p, canvas.height); ctx.stroke();
					ctx.beginPath(); ctx.moveTo(0, p); ctx.lineTo(canvas.width, p); ctx.stroke();
				}
				for (const k of obstacles) {const [x, y] = unkey(k); rect(x, y, '#334155');}
				rect(food.x, food.y, '#ef4444');
				snake.forEach((seg, i) => rect(seg.x, seg.y, i === 0 ? '#22c55e' : '#16a34a'));
			}

			function gameOver(msg) {
				running = false;
				stopLoop();
				popup('Game Over', `${msg}. Score: ${score}.`, true);
			}

			function popup(title, message, showRestart) {
				$endTitle.textContent = title;
				$endMessage.textContent = message;
				document.getElementById('btnNext').style.display = showRestart ? 'none' : '';
				document.getElementById('btnModalRestart').style.display = showRestart ? '' : 'none';
				modalEnd.show();
			}

			function startLoop() {
				stopLoop();
				const spd = SPEEDS[levelIdx] ?? 120;
				loopHandle = setInterval(gameLoop, spd);
			}
			function stopLoop() {if (loopHandle) {clearInterval(loopHandle); loopHandle = null;} }
			function togglePause() {if (!snake) return; if (running) {running = false; stopLoop();} else {running = true; startLoop();} }
			function syncHUD() {
				$level.textContent = (levelIdx + 1).toString();
				$score.textContent = score.toString();
				$speed.textContent = (SPEEDS[levelIdx] ?? 0).toString();
				$target.textContent = TARGET_PER_LEVEL.toString();
				const pct = Math.round(100 * foodsEaten / TARGET_PER_LEVEL);
				$progress.style.width = pct + '%';
			}

			function placeFood() {
				const occupied = new Set(obstacles);
				snake.forEach(s => occupied.add(key(s.x, s.y)));
				const free = [];
				for (let y = 0; y < GRID; y++) for (let x = 0; x < GRID; x++) {
					const k = key(x, y); if (!occupied.has(k)) free.push({x, y});
				}
				if (free.length === 0) return gameOver('Plus de place pour la nourriture');
				food = free[Math.floor(Math.random() * free.length)];
			}

			function buildLevel(idx) {
				const S = new Set();
				const add = (x, y) => {if (inBounds(x, y)) S.add(key(x, y));};
				const ring = (m) => {
					for (let x = m; x < GRID - m; x++) {add(x, m); add(x, GRID - 1 - m);}
					for (let y = m; y < GRID - m; y++) {add(m, y); add(GRID - 1 - m, y);}
				};
				switch (idx + 1) {
					case 1: break;
					case 2: ring(5); for (let i = 10; i <= 13; i++) {S.delete(key(i, 5)); S.delete(key(i, GRID - 1 - 5));} break;
					case 3:
						for (let i = 4; i < GRID - 4; i++) {add(Math.floor(GRID / 2), i); add(i, Math.floor(GRID / 2));}
						S.delete(key(Math.floor(GRID / 2), Math.floor(GRID / 2))); break;
					case 4: {
						const x1 = 7, x2 = GRID - 8;
						for (let y = 2; y < GRID - 2; y++) {add(x1, y); add(x2, y);}
						for (let y = 10; y <= 13; y++) {S.delete(key(x1, y)); S.delete(key(x2, y));}
						break;
					}
					case 5:
						for (let y = 1; y <= 4; y++) for (let x = 1; x <= 4; x++) add(x, y);
						for (let y = GRID - 5; y <= GRID - 2; y++) for (let x = 1; x <= 4; x++) add(x, y);
						for (let y = 1; y <= 4; y++) for (let x = GRID - 5; x <= GRID - 2; x++) add(x, y);
						for (let y = GRID - 5; y <= GRID - 2; y++) for (let x = GRID - 5; x <= GRID - 2; x++) add(x, y);
						break;
					case 6: for (let i = 3; i < GRID - 3; i += 2) add(i, i); break;
					case 7: ring(0); for (let x = 10; x <= 13; x++) {S.delete(key(x, 0)); S.delete(key(x, GRID - 1));} break;
					case 8:
						for (let y = 3; y < GRID; y += 4) {for (let x = 2; x < GRID - 2; x++) add(x, y); for (let x = 9; x <= 12; x++) S.delete(key(x, y));}
						break;
					case 9: {
						const rnd = mulberry32(42); let placed = 0;
						while (placed < 40) {
							const x = Math.floor(rnd() * GRID), y = Math.floor(rnd() * GRID);
							const center = Math.abs(x - Math.floor(GRID / 2)) + Math.abs(y - Math.floor(GRID / 2));
							if (center < 4) continue; add(x, y); placed++;
						} break;
					}
					case 10:
						for (let y = 2; y < GRID - 2; y += 2) {
							for (let x = 1; x < GRID - 1; x++) add(x, y);
							const gap = (y % 4 === 0) ? 4 : GRID - 5;
							for (let dx = 0; dx < 3; dx++) S.delete(key(gap + dx, y));
						} break;
				}
				const cx = Math.floor(GRID / 2), cy = Math.floor(GRID / 2);
				[key(cx, cy), key(cx + 1, cy), key(cx - 1, cy), key(cx, cy + 1), key(cx, cy - 1)].forEach(k => S.delete(k));
				return S;
			}

			function mulberry32(a) {return function () {let t = a += 0x6D2B79F5; t = Math.imul(t ^ t >>> 15, t | 1); t ^= t + Math.imul(t ^ t >>> 7, t | 61); return ((t ^ t >>> 14) >>> 0) / 4294967296;}}
			function rect(x, y, color) {ctx.fillStyle = color; ctx.fillRect(x * CELL, y * CELL, CELL - 1, CELL - 1);}
			function clampLevelIndex(i) {return Math.max(0, Math.min(9, i));}

			// === Boutons ===
			document.getElementById('btnStart').addEventListener('click', () => startGame());
			document.getElementById('btnRestart').addEventListener('click', () => startGame(1));
			document.getElementById('btnModalRestart').addEventListener('click', () => {modalEnd.hide(); startGame(1);});
			document.getElementById('btnPause').addEventListener('click', () => {if (running) togglePause();});
			document.getElementById('btnResume').addEventListener('click', () => {if (!running) togglePause();});
			document.getElementById('btnNext').addEventListener('click', () => {modalEnd.hide();});
			document.getElementById('btnGoLevel').addEventListener('click', () => {
				const desired = clampLevelIndex((Number($levelInput.value) || 1) - 1);
				stopLoop(); score = 0; levelIdx = desired; startLevelAt(levelIdx); startLoop();
			});

			// === Pause automatique quand une fenêtre apparaît ===
			modalEndEl.addEventListener('show.bs.modal', () => {running = false; stopLoop();});

			// === Boot ===
			window.addEventListener('load', () => {
				canvas = document.getElementById('game');
				ctx = canvas.getContext('2d');
				ctx.fillStyle = '#0b1220'; ctx.fillRect(0, 0, canvas.width, canvas.height);
				ctx.fillStyle = '#22c55e'; ctx.font = 'bold 28px system-ui,Segoe UI,Roboto';
				ctx.fillText('Snake – 10 niveaux', 16, 48);
				ctx.fillStyle = '#94a3b8'; ctx.font = '16px system-ui,Segoe UI,Roboto';
				ctx.fillText('Cliquez sur Démarrer. ZQSD/WASD ou flèches. Espace: pause.', 16, 80);
			});
		})();
	</script>
</body>

</html>
# ./Web/snake/snake_10_niveau.html

# ./Web/temps_de_someil_restant/temps_de_someil_restant.html
<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8" />
	<title>Calcul du sommeil restant</title>
	<link rel="icon" href="./Temps_de_someil_restant_1.ico" type="image/x-icon" />
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
		integrity="sha384-..." crossorigin="anonymous" />
	<style>
		body {
			background: url('./nuages_1.jpg') no-repeat center center;
			background-size: cover;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.card-glass {
			backdrop-filter: blur(6px);
			background: rgba(255, 255, 255, 0.75);
			border: 1px solid rgba(255, 255, 255, 0.4);
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
		}

		.mode-toggle .btn {
			border-radius: 2rem;
			padding: .5rem 1rem;
			font-weight: 600;
		}

		.mode-toggle .btn-check:checked+.btn,
		.mode-toggle .btn.active {
			color: #fff;
			background: linear-gradient(135deg, #0d6efd 0%, #6f42c1 100%);
			border-color: transparent;
			box-shadow: 0 0.5rem 1rem rgba(13, 110, 253, .2);
		}

		#sleep-box {
			width: 220px;
			height: 220px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 2.5rem;
			font-weight: bold;
		}
	</style>
</head>

<body>

	<div class="card card-glass p-4">
		<!-- Case "week-end" : décide si 1 seule heure (décochée) ou 2 heures + onglets (cochée) -->
		<div class="form-check form-switch mb-2 text-center">
			<input class="form-check-input" type="checkbox" role="switch" id="toggle-weekend" checked>
			<label class="form-check-label" for="toggle-weekend">Afficher un horaire distinct week‑end</label>
		</div>

		<!-- Onglets : l’onglet actif est auto-sélectionné selon le jour -->
		<div id="mode-toggle-wrapper" class="text-center mb-3">
			<div class="mode-toggle btn-group" role="group" aria-label="Choix du mode">
				<input type="radio" class="btn-check" name="mode" id="mode-semaine" value="semaine" autocomplete="off">
				<label class="btn btn-outline-primary" for="mode-semaine">Semaine</label>

				<input type="radio" class="btn-check" name="mode" id="mode-weekend" value="weekend" autocomplete="off">
				<label class="btn btn-outline-primary" for="mode-weekend">Week‑end</label>
			</div>
		</div>

		<div class="mb-3">
			<label for="wake-time" class="form-label">Heure de réveil :</label>
			<input type="time" id="wake-time" class="form-control" />
		</div>

		<div class="d-flex justify-content-center">
			<div id="sleep-box" class="rounded"></div>
		</div>
	</div>

	<script>
		// --- Constantes & helpers stockage ---
		const STORAGE_KEY = 'temps_de_someil_restant';
		const DEFAULTS = {
			mode: null, // défini selon le jour si absent
			times: {semaine: '06:30', weekend: '10:00'}, // par défaut
			weekendEnabled: true
		};

		function isWeekend(date = new Date()) {
			const d = date.getDay(); // 0=Dim, 6=Sam
			return d === 0 || d === 6;
		}

		function loadState() {
			try {
				return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
			} catch {
				return {};
			}
		}

		function saveState(state) {
			localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
		}

		function getInitialState() {
			const saved = loadState();
			const weekendEnabled = saved.weekendEnabled ?? DEFAULTS.weekendEnabled;
			const mode = saved.mode ?? (isWeekend() ? 'weekend' : 'semaine');
			const times = {
				semaine: saved?.times?.semaine ?? DEFAULTS.times.semaine,
				weekend: saved?.times?.weekend ?? DEFAULTS.times.weekend
			};
			return {mode, times, weekendEnabled};
		}

		// --- Calcul heures restantes ---
		function calcHoursUntilWake(h, m) {
			const now = new Date();
			const wake = new Date();
			wake.setHours(h, m, 0, 0);
			if (wake <= now) wake.setDate(wake.getDate() + 1); // réveil le lendemain si nécessaire
			return (wake - now) / (1000 * 60 * 60);
		}

		// --- UI update ---
		function updateBox() {
			const val = document.getElementById('wake-time').value || '00:00';
			const [h, m] = val.split(':').map(Number);
			const hrs = calcHoursUntilWake(h, m);

			const box = document.getElementById('sleep-box');
			const hInt = Math.floor(hrs);
			const mInt = Math.floor((hrs - hInt) * 60);
			box.textContent = `${String(hInt).padStart(2, '0')}:${String(mInt).padStart(2, '0')}`;

			let bg, color = 'black';
			if (hrs >= 8) bg = 'bg-success';
			else if (hrs >= 6) bg = 'bg-warning';
			else if (hrs >= 3) bg = 'bg-danger';
			else {bg = 'bg-dark'; color = 'white';}

			box.className = `rounded ${bg} text-${color}`;
		}

		// --- Initialisation & événements ---
		function initApp() {
			const state = getInitialState();

			// Positionner le switcher d'onglets selon l'état sauvegardé (auto : week-end si samedi/dimanche)
			document.getElementById('mode-semaine').checked = state.mode === 'semaine';
			document.getElementById('mode-weekend').checked = state.mode === 'weekend';

			// Case "week-end" : montre/cache les onglets + décide 1h ou 2h
			const toggleWeekend = document.getElementById('toggle-weekend');
			const toggleWrapper = document.getElementById('mode-toggle-wrapper');
			toggleWeekend.checked = state.weekendEnabled;
			toggleWrapper.classList.toggle('d-none', !state.weekendEnabled);

			// Heure de réveil initiale selon le mode ou unique si case décochée
			const wakeInput = document.getElementById('wake-time');
			wakeInput.value = state.weekendEnabled ? state.times[state.mode] : state.times.semaine;

			// Changement d'onglet (uniquement visible si case cochée)
			document.querySelectorAll('input[name="mode"]').forEach(radio => {
				radio.addEventListener('change', () => {
					const newMode = document.querySelector('input[name="mode"]:checked').value;
					const s = loadState();
					const times = {
						semaine: s?.times?.semaine ?? DEFAULTS.times.semaine,
						weekend: s?.times?.weekend ?? DEFAULTS.times.weekend
					};
					document.getElementById('wake-time').value = times[newMode];
					const weekendEnabled = s.weekendEnabled ?? DEFAULTS.weekendEnabled;
					saveState({mode: newMode, times, weekendEnabled});
					updateBox();
				});
			});

			// Changement d'heure : enregistre dans le mode courant si séparé, sinon pour tous
			wakeInput.addEventListener('input', () => {
				const s = loadState();
				const weekendEnabled = s.weekendEnabled ?? DEFAULTS.weekendEnabled;
				const mode = s.mode ?? (isWeekend() ? 'weekend' : 'semaine');
				const times = {
					semaine: s?.times?.semaine ?? DEFAULTS.times.semaine,
					weekend: s?.times?.weekend ?? DEFAULTS.times.weekend
				};
				if (weekendEnabled) {
					times[mode] = wakeInput.value;
				} else {
					times.semaine = wakeInput.value;
					times.weekend = wakeInput.value;
				}
				saveState({mode, times, weekendEnabled});
				updateBox();
			});

			// Case "week-end" : montre/cache les onglets et choisit l'onglet selon le jour si affiché
			toggleWeekend.addEventListener('change', () => {
				const s = loadState();
				const weekendEnabled = toggleWeekend.checked;
				const times = {
					semaine: s?.times?.semaine ?? DEFAULTS.times.semaine,
					weekend: s?.times?.weekend ?? DEFAULTS.times.weekend
				};

				if (!weekendEnabled) {
					// Cacher onglets, une seule heure (semaine)
					toggleWrapper.classList.add('d-none');
					document.getElementById('mode-semaine').checked = true;
					document.getElementById('mode-weekend').checked = false;
					wakeInput.value = times.semaine;
					saveState({mode: 'semaine', times, weekendEnabled});
				} else {
					// Montrer onglets, auto-sélection selon le jour courant
					toggleWrapper.classList.remove('d-none');
					const autoMode = isWeekend() ? 'weekend' : 'semaine';
					document.getElementById('mode-' + autoMode).checked = true;
					wakeInput.value = times[autoMode];
					saveState({mode: autoMode, times, weekendEnabled});
				}
				updateBox();
			});

			// Premier rendu
			updateBox();
		}

		window.addEventListener('DOMContentLoaded', initApp);
	</script>
</body>

</html>

# ./Web/temps_de_someil_restant/temps_de_someil_restant.html

# ./Web/temps_restant/affiche_temps_avant_Live_Code.html
<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8" />
	<title>Temps restant par plage horaire</title>
	<link rel="icon" href="Temps_avant_le_Livecode.ico" type="image/x-icon" />
	<style>
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background-color: #f0f2f5;
			color: #333;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			margin: 0;
		}

		#container {
			background: #4a90e2;
			color: white;
			padding: 2rem 3rem;
			border-radius: 8px;
			box-shadow: 0 4px 8px rgba(74, 144, 226, 0.3);
			text-align: center;
			min-width: 320px;
		}

		#timer {
			font-size: 3rem;
			font-weight: 600;
			margin-top: 1rem;
			letter-spacing: 1px;
		}

		#message {
			font-size: 1.2rem;
			margin-top: 1rem;
			font-weight: 500;
			line-height: 1.4;
		}

		#day-summary {
			margin-top: 1.5rem;
			font-size: 1rem;
			font-weight: 500;
			line-height: 1.3;
			color: #dbe9ff;
			text-align: left;
		}

		.interval-line {
			margin: 4px 0;
		}
	</style>
</head>

<body>
	<div id="container">
		<div id="day-summary">
			<!-- Récapitulatif des intervalles -->
		</div>
		<div id="message">Le compte à rebours commence à 15h30.</div>
		<div id="timer">--:--</div>
	</div>

	<script>
		function capitalize(str) {
			if (typeof str !== 'string' || str.length === 0) return str;
			return str[0].toUpperCase() + str.slice(1);
		}

		function formatTime(v) {
			return v.toString().padStart(2, '0');
		}

		function minutesBetween(date1, date2) {
			return Math.floor((date2 - date1) / 60000);
		}

		function updateTimer() {
			const now = new Date();

			const plages = [
				{ start: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 5, 0, 0), end: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 8, 0, 0), label: "pré-journée" },
				{ start: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 9, 0, 0), end: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 13, 0, 0), label: "matin" },
				{ start: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 13, 30, 0), end: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 17, 30, 0), label: "après-midi" },
				{ start: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 18, 30, 0), end: new Date(now.getFullYear(), now.getMonth(), now.getDate(), 22, 30, 0), label: "soirée" }
			];

			let activePlage = null;
			for (const plage of plages) {
				if (now >= plage.start && now < plage.end) {
					activePlage = plage;
					break;
				}
			}

			if (activePlage === null) {
				document.title = "Aucun compte à rebours actif";
				document.getElementById('timer').textContent = "--:--";
				document.getElementById('message').textContent = "Aucun compte à rebours actif actuellement.";
			} else {
				const diffMs = activePlage.end - now;
				const diffH = Math.floor(diffMs / 3600000);
				const diffM = Math.floor((diffMs % 3600000) / 60000);

				const elapsedMs = now - activePlage.start;
				const elapsedH = Math.floor(elapsedMs / 3600000);
				const elapsedM = Math.floor((elapsedMs % 3600000) / 60000);

				document.getElementById('timer').textContent = `${formatTime(diffH)}:${formatTime(diffM)}`;
				document.getElementById('message').innerHTML =
					`Compte à rebours actif pour <strong> pour l'évènement : ${activePlage.label}</strong>.<br>` +
					`Début : ${formatTime(activePlage.start.getHours())}h${formatTime(activePlage.start.getMinutes())} — Fin prévue : ${formatTime(activePlage.end.getHours())}h${formatTime(activePlage.end.getMinutes())}<br>` +
					`Temps écoulé depuis le début : ${formatTime(elapsedH)}:${formatTime(elapsedM)}`;

				const title =
					`${capitalize(activePlage.label)} ` +
					`[${formatTime(activePlage.start.getHours())}h${formatTime(activePlage.start.getMinutes())}–${formatTime(activePlage.end.getHours())}h${formatTime(activePlage.end.getMinutes())}] ` +
					`, Passé ${formatTime(elapsedH)}h${formatTime(elapsedM)} ` +
					`, Restant ${formatTime(diffH)}h${formatTime(diffM)}`;

				document.title = title;
			}

			// Calcul temps total = somme des durées d'intervalles (minutes)
			let totalMinutes = 0;
			for (const plage of plages) {
				totalMinutes += minutesBetween(plage.start, plage.end);
			}

			// Calcul temps utilisé et restant global
			let usedMinutes = 0;
			for (const plage of plages) {
				if (now >= plage.end) {
					usedMinutes += minutesBetween(plage.start, plage.end);
				} else if (now >= plage.start && now < plage.end) {
					usedMinutes += minutesBetween(plage.start, now);
				}
			}
			const remainingMinutes = totalMinutes - usedMinutes;

			// Format hh:mm
			function formatHM(minutes) {
				const h = Math.floor(minutes / 60);
				const m = minutes % 60;
				return `${h}h${formatTime(m)}`;
			}

			// Construction du récapitulatif intervalle par intervalle avec temps restant et consommé
			const lines = plages.map(plage => {
				let remaining;
				let consumed;
				if (now >= plage.end) {
					remaining = 0;
					consumed = minutesBetween(plage.start, plage.end);
				} else if (now < plage.start) {
					remaining = minutesBetween(plage.start, plage.end);
					consumed = 0;
				} else {
					remaining = minutesBetween(now, plage.end);
					consumed = minutesBetween(plage.start, now);
				}

				const totalIntervalMin = minutesBetween(plage.start, plage.end);

				return `<div class="interval-line">
					<strong>${capitalize(plage.label)}</strong> (${formatHM(totalIntervalMin)}) :
					temps consommé ${formatHM(consumed)} —
					temps restant ${formatHM(remaining)}
				</div>`;
			});

			const summary =
				`<div><strong>Journée totale :</strong> ${formatHM(totalMinutes)} — ` +
				`temps consommé : ${formatHM(usedMinutes)} — ` +
				`temps restant : ${formatHM(remainingMinutes)}</div>` +
				lines.join('');

			document.getElementById('day-summary').innerHTML = summary;
		}

		updateTimer();
		setInterval(updateTimer, 60000);
	</script>
</body>

</html>

# ./Web/temps_restant/affiche_temps_avant_Live_Code.html

# ./Web/tracker_de_temps/tracker_de_temps.html
<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="icon" type="image/x-icon" href="./tracker_de_temps.ico">
	<title>Tracker de temps quotidien</title>

	<!-- Bootstrap 5 CDN -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<meta name="color-scheme" content="dark">

	<style>
		/* ===== Palette sombre bleu tamisé ===== */
		body {
			background: #0b1e35;
			color: #e9ecef;
		}

		.navbar,
		.offcanvas-start {
			background: #11264d !important;
			border-color: #264d73 !important;
		}

		.cadre {
			background: #13294b;
			border: 1px solid #264d73;
			border-radius: .5rem;
			padding: 1rem;
			margin-bottom: 1rem;
		}

		.timer {
			font-size: 1.5rem;
			font-weight: 500;
			color: #9ec5fe;
		}

		.btn-circle {
			width: 2rem;
			height: 2rem;
			padding: 0;
			border-radius: 50%
		}

		/* boutons adaptés au fond sombre */
		.btn-close {
			filter: invert(1);
		}

		.btn-outline-secondary {
			color: #d0d6db;
			border-color: #6c757d;
		}

		.btn-outline-secondary:hover {
			color: #0b1e35;
			background: #d0d6db;
			border-color: #d0d6db;
		}

		.list-group-item {
			background: #0b1e35;
			color: #e9ecef;
			border-color: #264d73;
		}

		.offcanvas-body {
			padding-top: 0.5rem;
		}

		.bouton-burger {
			background: #ffffff;
		}
	</style>
</head>

<body>

	<nav class="navbar border-bottom px-3">
		<button class="btn btn-outline-secondary bouton-burger" data-bs-toggle="offcanvas" data-bs-target="#historique">
			<span class="navbar-toggler-icon"></span>
		</button>
		<span class="navbar-brand ms-2 text-light">Suivi d’activité</span>
	</nav>

	<div class="offcanvas offcanvas-start text-light" tabindex="-1" id="historique">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title">Historique</h5>
			<button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
		</div>
		<div class="offcanvas-body" id="historique-body"></div>
	</div>

	<main class="container py-3" id="cadres-container"></main>

	<div class="container pb-5">
		<button id="add-cadre" class="btn btn-primary w-100 mb-2">Ajouter un cadre</button>
		<button id="end-day" class="btn btn-danger  w-100">Fin de journée</button>
	</div>

	<script>
		/* ========= Outils communs ========= */
		const todayKey = () => new Date().toLocaleDateString('fr-FR').replace(/\//g, '-');
		const loadData = () => JSON.parse(localStorage.getItem('tracker_de_temps_quotidien') || '{}');
		const saveData = d => localStorage.setItem('tracker_de_temps_quotidien', JSON.stringify(d));
		const fmtHMS = ms => {
			const t = Math.floor(ms / 1000);
			return `${String(Math.floor(t / 3600)).padStart(2, '0')}:${String(Math.floor(t / 60) % 60).padStart(2, '0')}:${String(t % 60).padStart(2, '0')}`;
		};
		const parseHMS = str => {
			const p = str.split(':').map(n => parseInt(n, 10) || 0);
			return (p[0] * 3600 + (p[1] || 0) * 60 + (p[2] || 0)) * 1000;
		};

		/* ========= Modèle ========= */
		class Cadre {
			constructor(nom) {Object.assign(this, {id: crypto.randomUUID(), nom, totalMs: 0, enCours: false, debut: null});}
			start() {if (this.enCours) return; this.debut = Date.now(); this.enCours = true;}
			pause() {if (!this.enCours) return; this.totalMs += Date.now() - this.debut; this.enCours = false;}
			reset(ms = 0) {this.pause(); this.totalMs = ms;}
			elapsedMs() {return this.totalMs + (this.enCours ? Date.now() - this.debut : 0);}
		}

		/* ========= État courant ========= */
		let cadres = []; let tickInt = null;

		function initJour() {
			const data = loadData(), jour = todayKey();
			cadres = (data[jour] || [
				new Cadre('Heures travaillées'),
				new Cadre('Pause nourriture'),
				new Cadre('Pause inspiration'),
				new Cadre('Pause toilettes')
			]).map(o => Object.assign(new Cadre(), o));

			renderCadres(); actualiserHistorique();
			clearInterval(tickInt); tick(); tickInt = setInterval(tick, 1000);
		}

		function tick() {
			cadres.forEach(c => {
				const el = document.getElementById(`duree-${c.id}`);
				if (el) el.textContent = fmtHMS(c.elapsedMs());
			});
		}

		function persist() {
			const d = loadData(); d[todayKey()] = cadres; saveData(d);
		}

		/* ========= Rendu ========= */
		function renderCadres() {
			const cont = document.getElementById('cadres-container');
			cont.innerHTML = ''; cadres.forEach(c => cont.appendChild(creerVueCadre(c)));
		}

		function creerVueCadre(c) {
			const d = document.createElement('div');
			d.className = 'cadre'; d.id = `cadre-${c.id}`;
			d.innerHTML = `
			<div class="d-flex justify-content-between">
				<h5 id="titre-${c.id}" class="mb-2 text-light">${c.nom}</h5>
				<button class="btn-close btn-circle btn-close-white" title="Supprimer"></button>
			</div>
			<div class="timer mb-3" id="duree-${c.id}">${fmtHMS(c.elapsedMs())}</div>
			<div class="d-flex flex-wrap gap-2">
				<button class="btn btn-success btn-sm">Start</button>
				<button class="btn btn-warning btn-sm">Pause</button>
				<button class="btn btn-secondary btn-sm">Réinitialiser</button>
				<button class="btn btn-outline-secondary btn-sm">Modifier nom</button>
			</div>`;
			const [bStart, bPause, bReset, bMod] = d.querySelectorAll('button.btn');
			d.querySelector('.btn-close').onclick = () => supprimerCadre(c.id);
			bStart.onclick = () => {c.start(); persist();};
			bPause.onclick = () => {c.pause(); persist();};
			bReset.onclick = () => resetCadre(c);
			bMod.onclick = () => {
				const nv = prompt('Nouveau nom :', c.nom);
				if (nv) {c.nom = nv.trim(); document.getElementById(`titre-${c.id}`).textContent = c.nom; persist();}
			};
			return d;
		}

		/* ========= Actions cadres ========= */
		function resetCadre(c) {
			if (!confirm('Remettre ce cadre à 0 ?')) return;
			let s = prompt('Heures, minutes, secondes (HH:MM:SS) :', '00:00:00');
			if (!s) s = '00:00:00';
			c.reset(parseHMS(s)); persist();
		}
		function supprimerCadre(id) {
			if (!confirm('Supprimer définitivement ce cadre ?')) return;
			cadres = cadres.filter(c => c.id !== id); document.getElementById(`cadre-${id}`).remove(); persist();
		}

		/* ========= Ajout / Fin de journée ========= */
		document.getElementById('add-cadre').onclick = () => {
			const nom = prompt('Nom du nouveau cadre :');
			if (nom) {
				const c = new Cadre(nom.trim());
				cadres.push(c);
				document.getElementById('cadres-container').appendChild(creerVueCadre(c));
				persist();
			}
		};
		document.getElementById('end-day').onclick = () => {
			cadres.forEach(c => c.pause()); persist(); alert('Journée enregistrée.'); location.reload();
		};

		/* ========= Historique ========= */
		function actualiserHistorique() {
			const body = document.getElementById('historique-body'), data = loadData();
			body.innerHTML = '';
			Object.keys(data).sort((a, b) => {
				const [da, ma, ya] = a.split('-'), [db, mb, yb] = b.split('-');
				return new Date(`${yb}-${mb}-${db}`) - new Date(`${ya}-${ma}-${da}`);
			}).forEach(j => {
				const div = document.createElement('div'); div.className = 'mb-3';
				const list = data[j], total = list.reduce((s, c) => s + c.totalMs, 0);
				div.innerHTML = `
				<h6 class="d-flex justify-content-between">
					<span>${j}</span><button class="btn btn-sm btn-outline-danger">Effacer</button>
				</h6>
				<ul class="list-group list-group-flush">
					${list.map(c => `<li class="list-group-item d-flex justify-content-between"><span>${c.nom}</span><span>${fmtHMS(c.totalMs)}</span></li>`).join('')}
					<li class="list-group-item d-flex justify-content-between fw-bold"><span>Total</span><span>${fmtHMS(total)}</span></li>
				</ul>`;
				div.querySelector('button').onclick = () => {
					if (confirm('Effacer cette journée ?')) {delete data[j]; saveData(data); actualiserHistorique();}
				};
				body.appendChild(div);
			});
		}

		/* ========= Démarrage ========= */
		initJour();
	</script>
</body>

</html>

# ./Web/tracker_de_temps/tracker_de_temps.html


Liste des fichiers trouvés et concaténés :
./React-Native/foodapp/app.json
./React-Native/foodapp/App.tsx
./React-Native/foodapp/babel.config.js
./React-Native/foodapp/components/Header.tsx
./React-Native/foodapp/components/RecipeCard.tsx
./React-Native/foodapp/data/recipes.js
./React-Native/foodapp/dist/assetmap.json
./React-Native/foodapp/dist/metadata.json
./React-Native/foodapp/.expo/devices.json
./React-Native/foodapp/.expo/settings.json
./React-Native/foodapp/.expo-shared/assets.json
./React-Native/foodapp/package.json
./React-Native/foodapp/reducers/favorites.ts
./React-Native/foodapp/screens/HomeScreen.tsx
./React-Native/foodapp/screens/MyRecipesScreen.tsx
./React-Native/foodapp/screens/RecipeScreen.tsx
./React-Native/foodapp/screens/SearchScreen.tsx
./React-Native/foodapp/tsconfig.json
./React-Native/foodapp/.vscode/settings.json
./React-Native/heure_de_reveil/app.json
./React-Native/heure_de_reveil/App.tsx
./React-Native/heure_de_reveil/dist/assetmap.json
./React-Native/heure_de_reveil/dist/metadata.json
./React-Native/heure_de_reveil/.expo/devices.json
./React-Native/heure_de_reveil/index.ts
./React-Native/heure_de_reveil/package.json
./React-Native/heure_de_reveil/tsconfig.json
./React-Native/organisation_le_matin/app.json
./React-Native/organisation_le_matin/App.tsx
./React-Native/organisation_le_matin/dist/assetmap.json
./React-Native/organisation_le_matin/dist/metadata.json
./React-Native/organisation_le_matin/.expo/devices.json
./React-Native/organisation_le_matin/index.ts
./React-Native/organisation_le_matin/package.json
./React-Native/organisation_le_matin/tsconfig.json
./React-Native/pomodoro_react_native/app.json
./React-Native/pomodoro_react_native/App.tsx
./React-Native/pomodoro_react_native/dist/assetmap.json
./React-Native/pomodoro_react_native/dist/metadata.json
./React-Native/pomodoro_react_native/.expo/devices.json
./React-Native/pomodoro_react_native/index.ts
./React-Native/pomodoro_react_native/package.json
./React-Native/pomodoro_react_native/tsconfig.json
./React-Native/snake/app.json
./React-Native/snake/App.tsx
./React-Native/snake/dist/assetmap.json
./React-Native/snake/dist/metadata.json
./React-Native/snake/.expo/devices.json
./React-Native/snake/index.ts
./React-Native/snake/package.json
./React-Native/snake/tsconfig.json
./React-Native/temps_de_someil_restant_react_native/1/App.js
./React-Native/temps_de_someil_restant_react_native/1/app.json
./React-Native/temps_de_someil_restant_react_native/1/builds/Build_1/temps_de_someil_restant_react_native/unknown/kotlin-tooling-metadata.json
./React-Native/temps_de_someil_restant_react_native/1/eas.json
./React-Native/temps_de_someil_restant_react_native/1/.expo/devices.json
./React-Native/temps_de_someil_restant_react_native/1/index.js
./React-Native/temps_de_someil_restant_react_native/1/package.json
./React-Native/temps_de_someil_restant_react_native/1/src/components/SleepCalculator.js
./React-Native/temps_de_someil_restant_react_native/1/src/store/index.js
./React-Native/temps_de_someil_restant_react_native/1/src/utils/time.js
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/android/build/generated/autolinking/autolinking.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/android/build/reports/problems/problems-report.html
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/app.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/App.tsx
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/dist/assetmap.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/dist/metadata.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/eas.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/.expo/devices.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/index.ts
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/package.json
./React-Native/temps_de_someil_restant_react_native/2/temps_de_someil_restant_V2/tsconfig.json
./React-Native/temps_restant/app.json
./React-Native/temps_restant/App.tsx
./React-Native/temps_restant/dist/assetmap.json
./React-Native/temps_restant/dist/metadata.json
./React-Native/temps_restant/.expo/devices.json
./React-Native/temps_restant/index.ts
./React-Native/temps_restant/package.json
./React-Native/temps_restant/tsconfig.json
./React-Native/tracker_de_temps/app.json
./React-Native/tracker_de_temps/App.tsx
./React-Native/tracker_de_temps/dist/assetmap.json
./React-Native/tracker_de_temps/dist/metadata.json
./React-Native/tracker_de_temps/.expo/devices.json
./React-Native/tracker_de_temps/index.ts
./React-Native/tracker_de_temps/package.json
./React-Native/tracker_de_temps/src/lib/storage.ts
./React-Native/tracker_de_temps/src/lib/time.ts
./React-Native/tracker_de_temps/src/types.ts
./React-Native/tracker_de_temps/tsconfig.json
./Web/AI_team/data/projet-marrant-1_20250919-114716/config.json
./Web/AI_team/data/projet-marrant-1_20250919-114716/meta.json
./Web/AI_team/data/projet-marrant-1_20250919-114716/sprint-1.json
./Web/AI_team/index.html
./Web/AI_team/package.json
./Web/AI_team/server.js
./Web/cours_git_avance/assets/cours.json
./Web/cours_git_avance/index.html
./Web/gestion/data/noms.js
./Web/gestion/index.html
./Web/gestion/javascript/ascenseur/ascenseur_controller.js
./Web/gestion/javascript/ascenseur/ascenseur_modele.js
./Web/gestion/javascript/ascenseur/ascenseur_view.js
./Web/gestion/javascript/calendrier/calendrier_controller.js
./Web/gestion/javascript/calendrier/calendrier_modele.js
./Web/gestion/javascript/calendrier/calendrier_view.js
./Web/gestion/javascript/covoiturage/covoiturage_controller.js
./Web/gestion/javascript/covoiturage/covoiturage_modele.js
./Web/gestion/javascript/covoiturage/covoiturage_view.js
./Web/gestion/utils/GestionUIJS.js
./Web/gestion/utils/utils.js
./Web/heure_de_reveil/heure_de_reveil.html
./Web/mini_langage/package.json
./Web/mini_langage/public/index.html
./Web/mini_langage/public/ui.js
./Web/mini_langage/src/cli.ts
./Web/mini_langage/src/interpreter.ts
./Web/mini_langage/src/runtime.ts
./Web/mini_langage/src/server.ts
./Web/mini_langage/src/storage.ts
./Web/mini_langage/tsconfig.json
./Web/organisation_le_matin/organisation_le_matin.html
./Web/pomodoro/pomodoro.html
./Web/snake/snake_10_niveau.html
./Web/temps_de_someil_restant/temps_de_someil_restant.html
./Web/temps_restant/affiche_temps_avant_Live_Code.html
./Web/tracker_de_temps/tracker_de_temps.html
