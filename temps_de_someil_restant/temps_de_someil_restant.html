<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8">
	<title>Calcul du sommeil restant</title>
	<link rel="icon" href="./Temps_de_someil_restant_1.ico" type="image/x-icon">
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
		integrity="sha384-..." crossorigin="anonymous">
	<style>
		body {
			/* Remplacez « votre_fond_gris.jpg » par votre propre URL */
			background: url('./nuages_1.jpg') no-repeat center center;
			background-size: cover;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		#sleep-box {
			width: 200px;
			height: 200px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 2rem;
			font-weight: bold;
		}
	</style>
</head>

<body>

	<div class="text-center">
		<label for="wake-time" class="form-label">Heure de réveil :</label>
		<input type="time" id="wake-time" class="form-control mb-3" value="07:00">

		<div id="sleep-box" class="rounded"></div>
	</div>

	<script>
		// Calcule le nombre d'heures de sommeil si coucher à 19h
		function calcHours(wakeHour, wakeMin) {
			// Conversion en heures décimales, ajustement pour lendemain
			let totalWake = wakeHour + wakeMin / 60;
			if (totalWake < 19) totalWake += 24;
			return totalWake - 19;
		}

		// Met à jour le carré et sa couleur selon le nombre d'heures
		function updateBox() {
			const [h, m] = document.getElementById('wake-time').value
				.split(':').map(Number);
			const hrs = calcHours(h, m);

			const box = document.getElementById('sleep-box');
			box.textContent = hrs.toFixed(1) + 'h';

			// Choix de la couleur
			let bg, color = 'black';
			if (hrs >= 8) bg = 'bg-success';
			else if (hrs >= 6) bg = 'bg-warning';
			else if (hrs >= 3) bg = 'bg-danger';
			else {bg = 'bg-dark'; color = 'white';}

			// Applique la classe Bootstrap
			box.className = `rounded ${bg} text-${color}`;
		}

		// Initialisation
		document
			.getElementById('wake-time')
			.addEventListener('input', updateBox);

		window.addEventListener('DOMContentLoaded', updateBox);
	</script>

</body>

</html>
