<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link rel="icon" type="image/x-icon" href="./heure_de_reveil.ico">
	<title>Heure de réveil</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		body {
			background: url('./nuages_1.jpg') no-repeat center center fixed;
			background-size: cover;
			display: flex;
			justify-content: center;
			align-items: center;
			min-height: 100vh;
		}

		#timeCard {
			width: 540px;
			background-color: rgba(255, 255, 255, .85);
		}

		.time-big {
			font-size: 3rem;
			font-weight: 700;
		}

		.time-small {
			font-size: 1.25rem;
		}
	</style>
</head>

<body>
	<div id="timeCard" class="card border-primary text-center">
		<div class="card-header bg-primary text-white fw-bold">Heure dans 8&nbsp;h</div>

		<div class="card-body">
			<div id="t8" class="time-big mb-3"></div>

			<div class="d-flex justify-content-around">
				<div>
					<div class="fw-semibold">+7&nbsp;h&nbsp;30</div>
					<div id="t7_30" class="time-small"></div>
				</div>
				<div>
					<div class="fw-semibold">+6&nbsp;h&nbsp;30</div>
					<div id="t6_30" class="time-small"></div>
				</div>
				<div>
					<div class="fw-semibold">+6&nbsp;h</div>
					<div id="t6" class="time-small"></div>
				</div>
			</div>

			<button id="boutonActualiser" class="btn btn-outline-primary mt-4">Actualiser</button>
		</div>
	</div>

	<script>
		(function programmePrincipal() {
			/* Décalages à appliquer pour chaque zone d’affichage */
			const listeDecalages = [
				{idElement: 't8', heuresAjoutees: 8, minutesAjoutees: 0},
				{idElement: 't7_30', heuresAjoutees: 7, minutesAjoutees: 30},
				{idElement: 't6_30', heuresAjoutees: 6, minutesAjoutees: 30},
				{idElement: 't6', heuresAjoutees: 6, minutesAjoutees: 0}
			];

			/* Ajoute un zéro devant les nombres < 10 */
			const ajouterZero = nombre => nombre.toString().padStart(2, '0');

			/* Formate une instance Date en HH:MM */
			const formaterHeure = date =>
				`${ajouterZero(date.getHours())}:${ajouterZero(date.getMinutes())}`;

			/* Calcule et affiche toutes les heures décalées */
			function mettreAJourHeures() {
				const dateActuelle = new Date();

				listeDecalages.forEach(decalage => {
					const minutesTotal = (decalage.heuresAjoutees * 60) + decalage.minutesAjoutees;
					const datePlusTard = new Date(dateActuelle.getTime() + minutesTotal * 60 * 1000);
					document.getElementById(decalage.idElement).textContent = formaterHeure(datePlusTard);
				});
			}

			/* Initialisation et rafraîchissements périodiques */
			mettreAJourHeures();
			setInterval(mettreAJourHeures, 1000);
			document.getElementById('boutonActualiser')
				.addEventListener('click', mettreAJourHeures);
		})();
	</script>
</body>

</html>
